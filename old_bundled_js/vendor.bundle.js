webpackJsonp([1],{"+GRi":function(t,e,n){var r=n("Wo2w"),i=n("Wy9r");t.exports=function(t){return r(i(t))}},"+Q6C":function(t,e,n){var r=n("CDXM"),i=n("6De9").f,o=n("+pQw");r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},"+aW+":function(t,e,n){"use strict";var r=n("CDXM"),i=n("uNkO"),o=n("RT4T"),a=n("umMR"),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n("bhtb")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},"+c1l":function(t,e,n){var r=n("CDXM");r(r.S+r.F*!n("V+0c"),"Object",{defineProperty:n("tose").f})},"+iEx":function(t,e,n){n("fHxy"),n("5GJ3"),n("X0O/"),n("HCkn"),n("ncNB"),n("soMw"),n("8sYH"),n("IJ3P"),n("t6ta"),t.exports=n("b4gG").Reflect},"+pQw":function(t,e,n){var r=n("JXkd");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},"+pp7":function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(5);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={version:"1.0.22",build:1507740286178};e.default=Vizabi.Tool.extend("BubbleChart",{init:function(t,e){this.name="bubblechart",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","locale","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},validate:function(t){if(t=this.model||t,this._super(t),t.ui.chart.lockNonSelected){var e=t.state.time.parse(""+t.ui.chart.lockNonSelected);e<t.state.time.start&&(t.ui.chart.lockNonSelected=t.state.time.formatDate(t.state.time.start)),e>t.state.time.end&&(t.ui.chart.lockNonSelected=t.state.time.formatDate(t.state.time.end))}},default_model:{state:{time:{autoconfig:{type:"time"}},entities:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_colorlegend:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_tags:{autoconfig:{type:"entity_domain",includeOnlyIDs:["tag"]}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{}},marker:{space:["entities","time"],axis_x:{use:"indicator",autoconfig:{index:0,type:"measure"}},axis_y:{use:"indicator",autoconfig:{index:1,type:"measure"}},label:{use:"property",autoconfig:{includeOnlyIDs:["name"],type:"string"}},size:{autoconfig:{index:2,type:"measure"}},color:{syncModels:["marker_colorlegend"],autoconfig:{}},size_label:{use:"constant",which:"_default",scaleType:"ordinal",_important:!1,extent:[0,.33],allow:{names:["_default"]}}},marker_colorlegend:{space:["entities_colorlegend"],label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}}},locale:{},ui:{chart:{superhighlightOnMinimapHover:!0,whenHovering:{showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0},labels:{dragging:!0,removeLabelBox:!1},margin:{left:0,top:0},trails:!0,lockNonSelected:0},datawarning:{doubtDomain:[],doubtRange:[]},show_ticks:!0,presentation:!1,panWithArrow:!1,adaptMinMaxZoom:!1,cursorMode:"arrow",zoomOnScrolling:!1,buttons:["colors","find","zoom","trails","lock","moreoptions","fullscreen","presentation"],dialogs:{popup:["colors","find","size","zoom","moreoptions"],sidebar:["colors","find","size","zoom"],moreoptions:["opacity","speed","axes","size","colors","label","zoom","presentation","about"]}}},versionInfo:o})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(2),s=r(a),u=Vizabi,c=u.utils,l=Vizabi.helpers,h=l.svgexport,f=l.labels,d=l["d3.axisWithLabelPicker"],p=l["d3.dynamicBackground"],v=Vizabi.iconset,g=v.warn,m=v.question,y=Vizabi.Component.extend("bubblechart",{init:function(t,e){var r=this,i=this;this.name="bubblechart",this.template=n(6),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}],this.model_binds={"change:time.playing":function(t,e){c.isTouchDevice()&&i.model.time.playing&&i.someHighlighted&&i.model.marker.clearHighlighted()},"change:time.start":function(t,e){i._readyOnce&&!i.model.time.splash&&i._trails.create().then(function(){i._trails.run(["findVisible","reveal","opacityHandler"])})},"change:time.end":function(t,e){i._readyOnce&&!i.model.time.splash&&i._trails.create().then(function(){i._trails.run(["findVisible","reveal","opacityHandler"])})},"change:time.record":function(){i.model.time.record?i._export.open(this.element,this.name):i._export.reset()},"change:ui.chart.trails":function(t){i._trails.toggle(i.model.ui.chart.trails),i.redrawDataPoints()},"change:ui.chart.lockNonSelected":function(t){i.redrawDataPoints(500)},"change:marker":function(t,e){if(i._readyOnce){if(e.indexOf("scaleType")>-1)return void i.ready();if(-1===e.indexOf("marker.color")&&-1===e.indexOf("marker.size")&&-1===e.indexOf("marker.size_label"))if(e.indexOf("domainMin")>-1||e.indexOf("domainMax")>-1){if(!i.yScale||!i.xScale)return;i.updateSize(),i.updateMarkerSizeLimits(),i._trails.run("findVisible"),i.redrawDataPoints(),i._trails.run("resize",null,500)}else if(e.indexOf("zoomedMin")>-1||e.indexOf("zoomedMax")>-1){if(i.draggingNow)return;if(c.approxEqual(i._zoomedXYMinMax.axis_x.zoomedMin,i.model.marker.axis_x.zoomedMin,.01)&&c.approxEqual(i._zoomedXYMinMax.axis_x.zoomedMax,i.model.marker.axis_x.zoomedMax,.01)&&c.approxEqual(i._zoomedXYMinMax.axis_y.zoomedMin,i.model.marker.axis_y.zoomedMin,.01)&&c.approxEqual(i._zoomedXYMinMax.axis_y.zoomedMax,i.model.marker.axis_y.zoomedMax,.01))return;var n=!1;i.model.time.playing&&(n=!0,i.model.time.pause(!0)),i._trails.run("abortAnimation"),i._panZoom.zoomToMaxMin(i.model.marker.axis_x.getZoomedMin(),i.model.marker.axis_x.getZoomedMax(),i.model.marker.axis_y.getZoomedMin(),i.model.marker.axis_y.getZoomedMax(),500,"don't feed these zoom values back to state"),n&&(i.model.time.postponePause=!1)}}},"change:marker.select":function(t,e){i._readyOnce&&i.entityBubbles&&((t.source._val||[]).length-(t.source._previousVal||[]).length>50&&(i.model.ui.chart.trails=!1),i.selectDataPoints(),i.redrawDataPoints(),i._trails.create().then(function(){i._trails.run(["findVisible","reveal","opacityHandler"])}),i.updateBubbleOpacity(),i._updateDoubtOpacity())},"change:marker.superHighlight":function(t,e){r._readyOnce&&r._blinkSuperHighlighted()},"change:marker.highlight":function(t,e){if(i._readyOnce)if("highlight"==e)i.highlightDataPoints();else if(null!==e){var n=i._formatSTitleValues(e.size,e.color);i._updateSTitle(n[0],n[1])}else i._updateSTitle()},"change:time.value":function(){!i.model.time.splash&&i._readyOnce&&i.entityBubbles&&(i.calculationQueue?i.calculationQueue.push(i.model.time.value.toString()):i.calculationQueue=[i.model.time.value.toString()],function(t){i.model.marker.getFrame(t,function(t,e){if(!i._frameIsValid(t))return c.warn("change:time.value: empty data received from marker.getFrame(). doing nothing");var n=i.calculationQueue.indexOf(e.toString());-1!=n&&(i.calculationQueue.splice(0,n+1),i.frameChanged(t,e))})}(i.model.time.value))},"change:ui.adaptMinMaxZoom":function(){i.model.ui.adaptMinMaxZoom?i._panZoom.expandCanvas(500):i._panZoom.reset()},"change:marker.size.extent":function(t,e){i._readyOnce&&(i.updateMarkerSizeLimits(),i.redrawDataPointsOnlySize(),i._trails.run("resize"))},"change:marker.color":function(t,e){i._readyOnce&&(i.redrawDataPointsOnlyColors(),i._trails.run("recolor"))},"change:marker.opacitySelectDim":function(){i.updateBubbleOpacity()},"change:marker.opacityRegular":function(){i.updateBubbleOpacity(),i._trails.run("opacityHandler")},"change:ui.cursorMode":function(){var t=i.chartSvg;"plus"===i.model.ui.cursorMode?(t.classed("vzb-zoomin",!0),t.classed("vzb-zoomout",!1),t.classed("vzb-panhand",!1)):"minus"===i.model.ui.cursorMode?(t.classed("vzb-zoomin",!1),t.classed("vzb-zoomout",!0),t.classed("vzb-panhand",!1)):"hand"===i.model.ui.cursorMode?(t.classed("vzb-zoomin",!1),t.classed("vzb-zoomout",!1),t.classed("vzb-panhand",!0)):(t.classed("vzb-zoomin",!1),t.classed("vzb-zoomout",!1),t.classed("vzb-panhand",!1))},"change:entities.dim":function(){i.someHighlighted&&i.model.marker.clearHighlighted(),i.someSelected&&i.model.marker.clearSelected()},ready:function(){}},this._super(t,e),this.xScale=null,this.yScale=null,this.sScale=null,this.cScale=null,this.xAxis=d("bottom"),this.yAxis=d("left"),i.COLOR_BLACKISH="#333",i.COLOR_WHITEISH="#fdfdfd",this.isCanvasPreviouslyExpanded=!1,this.draggingNow=null,this._trails=new o.default(this),this._panZoom=new s.default(this),this._export=new h(this),this._export.prefix("vzb-bc-").deleteClasses(["vzb-bc-bubbles-crop","vzb-hidden","vzb-bc-year","vzb-bc-zoom-rect","vzb-bc-projection-x","vzb-bc-projection-y","vzb-bc-axis-c-title"]),this._labels=new f(this),this._labels.config({CSS_PREFIX:"vzb-bc",LABELS_CONTAINER_CLASS:"vzb-bc-labels",LINES_CONTAINER_CLASS:"vzb-bc-bubbles",LINES_CONTAINER_SELECTOR_PREFIX:"bubble-"})},_rangeBump:function(t,e){var n=this.activeProfile.maxRadiusPx/2;if(e=e?-1:1,c.isArray(t)&&t.length>1){var r=t[0],i=t[t.length-1];return r<i?(r+=n*e,i-=n*e,r>i&&(r=i=(r+i)/2)):r>i&&(r-=n*e,i+=n*e,r<i&&(r=i=(r+i)/2)),[r,i]}c.warn("rangeBump error: input is not an array or empty")},readyOnce:function(){var t=this;this._readyOnce=!1,this.scrollableAncestor=c.findScrollableAncestor(this.element),this.element=d3.select(this.element),this.chartSvg=this.element.select("svg"),this.graph=this.element.select(".vzb-bc-graph"),this.yAxisElContainer=this.graph.select(".vzb-bc-axis-y"),this.yAxisEl=this.yAxisElContainer.select("g"),this.xAxisElContainer=this.graph.select(".vzb-bc-axis-x"),this.xAxisEl=this.xAxisElContainer.select("g"),this.ySubTitleEl=this.graph.select(".vzb-bc-axis-y-subtitle"),this.xSubTitleEl=this.graph.select(".vzb-bc-axis-x-subtitle"),this.yTitleEl=this.graph.select(".vzb-bc-axis-y-title"),this.xTitleEl=this.graph.select(".vzb-bc-axis-x-title"),this.sTitleEl=this.graph.select(".vzb-bc-axis-s-title"),this.cTitleEl=this.graph.select(".vzb-bc-axis-c-title"),this.yearEl=this.graph.select(".vzb-bc-year"),this.year=new p(this.yearEl),this.yInfoEl=this.graph.select(".vzb-bc-axis-y-info"),this.xInfoEl=this.graph.select(".vzb-bc-axis-x-info"),this.dataWarningEl=this.graph.select(".vzb-data-warning"),this.projectionX=this.graph.select(".vzb-bc-projection-x"),this.projectionY=this.graph.select(".vzb-bc-projection-y"),this.lineEqualXY=this.graph.select(".vzb-bc-line-equal-xy"),this.trailsContainer=this.graph.select(".vzb-bc-trails"),this.bubbleContainerCrop=this.graph.select(".vzb-bc-bubbles-crop"),this.zoomSelection=this.graph.select(".vzb-zoom-selection"),this.labelsContainerCrop=this.graph.select(".vzb-bc-labels-crop"),this.bubbleContainer=this.graph.select(".vzb-bc-bubbles"),this.labelsContainer=this.graph.select(".vzb-bc-labels"),this.linesContainer=this.graph.select(".vzb-bc-lines"),this.zoomRect=this.element.select(".vzb-bc-zoom-rect"),this.eventArea=this.element.select(".vzb-bc-eventarea"),this.entityBubbles=null,this.bubbleCrown=this.element.select(".vzb-bc-bubble-crown"),this.bubbleCrown.selectAll(".vzb-crown-glow").attr("filter","url("+location.pathname+"#vzb-glow-filter)"),this.tooltipMobile=this.element.select(".vzb-tooltip-mobile"),this.on("resize",function(){t._trails.run("abortAnimation"),t.updateSize()||(t.updateMarkerSizeLimits(),t._labels.updateSize(),function(e,n,r,i){t._panZoom.zoomer.dontFeedToState=!0,t._panZoom.rerun(),t._panZoom.zoomToMaxMin(e,n,r,i,0,!0)}(t._zoomedXYMinMax.axis_x.zoomedMin,t._zoomedXYMinMax.axis_x.zoomedMax,t._zoomedXYMinMax.axis_y.zoomedMin,t._zoomedXYMinMax.axis_y.zoomedMax))}),d3.select("body").on("keydown",function(){"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||(d3.event.metaKey||d3.event.ctrlKey)&&t.element.select("svg").classed("vzb-zoomin",!0)}).on("keyup",function(){"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||d3.event.metaKey||d3.event.ctrlKey||t.element.select("svg").classed("vzb-zoomin",!1)}).on("mouseenter",function(){"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||d3.event.metaKey||d3.event.ctrlKey||t.element.select("svg").classed("vzb-zoomin",!1)}),this.root.on("resetZoom",function(){t._panZoom.reset(null,500)}),this._panZoom.zoomSelection(this.bubbleContainerCrop),this.bubbleContainerCrop.call(this._panZoom.dragRectangle).call(this._panZoom.zoomer).on("dblclick.zoom",null).on("mouseup",function(){t.draggingNow=!1}).on("click",function(){var e=t.model.ui.cursorMode;d3.event.defaultPrevented||"arrow"===e||"hand"===e||t._panZoom.zoomByIncrement(e,500)}),this.KEY=this.model.entities.getDimension(),this.TIMEDIM=this.model.time.getDimension(),this.updateUIStrings(),this.wScale=d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange),this._labels.readyOnce(),t._readyOnce=!0},_frameIsValid:function(t){return!(!t||0===Object.keys(t.axis_y).length||0===Object.keys(t.axis_x).length||0===Object.keys(t.size).length)},ready:function(){var t=this;this.KEY=this.model.entities.getDimension(),this.updateUIStrings(),this.model.time.end,this.updateIndicators(),this.updateTime(),t.model.time.splash||t._trails.create(),this.model.marker.getFrame(this.model.time.value,function(e,n){return n.toString()!=t.model.time.value.toString()?void c.defer(function(){t.ready()}):t._frameIsValid(e)?(t.frame=e,t.updateSize(),t.updateMarkerSizeLimits(),t.updateEntities(),t._labels.ready(),t.redrawDataPoints(),t.selectDataPoints(),t.updateBubbleOpacity(),t._updateDoubtOpacity(),t.zoomToMarkerMaxMin(),t.model.time.splash||t._trails.run(["findVisible","reveal","opacityHandler"]),void(t.model.ui.adaptMinMaxZoom&&t._panZoom.expandCanvas())):c.warn("ready: empty data received from marker.getFrame(). doing nothing")})},zoomToMarkerMaxMin:function(){this._panZoom.resetZoomState();var t=this.model.marker.axis_x,e=this.model.marker.axis_y,n=(t.getScale().domain(),e.getScale().domain(),t.getZoomedMin()),r=t.getZoomedMax(),i=e.getZoomedMin(),o=e.getZoomedMax();this._panZoom.zoomToMaxMin(n,r,i,o,0,"don't feed these zoom values back to state")},updateIndicators:function(){var t=this;this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.sScale=this.model.marker.size.getScale(),this.cScale=this.model.marker.color.getScale(),this._labels.setScales(this.xScale,this.yScale),this.yAxis.tickFormat(t.model.marker.axis_y.getTickFormatter()),this.xAxis.tickFormat(t.model.marker.axis_x.getTickFormatter())},frameChanged:function(t,e){this.frame=t,this.updateTime(),this._updateDoubtOpacity(),this._trails.run("findVisible"),this.model.ui.adaptMinMaxZoom?this._panZoom.expandCanvas():this.redrawDataPoints(),this._trails.run("reveal",null,this.duration),this.tooltipMobile.classed("vzb-hidden",!0),this._reorderEntities()},_getSubtitle:function(t,e){var n=t.replace(e,"");","===n[0]&&(n=n.slice(1));var r=/^\((.*)\)$|.*/.exec(n.trim());return r[1]||r[0]||""},updateUIStrings:function(){var t=this,e=(this.getLayoutProfile(),t.model.marker.axis_y.getConceptprops()),n=t.model.marker.axis_x.getConceptprops(),r=t.model.marker.size.getConceptprops(),i=t.model.marker.color.getConceptprops();this.translator=this.model.locale.getTFunction(),this.strings={title:{Y:e.name,X:n.name,S:r.name,C:i.name},title_short:{Y:e.name_short,X:n.name_short,S:r.name_short,C:i.name_short},subtitle:{Y:this._getSubtitle(e.name,e.name_short),X:this._getSubtitle(n.name,n.name_short),S:r.name_short,C:i.name_short},unit:{Y:e.unit||"",X:n.unit||"",S:r.unit||"",C:i.unit||""}},this.ySubTitleEl.selectAll("text").data([0]).enter().append("text"),this.xSubTitleEl.selectAll("text").data([0]).enter().append("text");var o=this.yTitleEl.selectAll("text").data([0]);o.enter().append("text"),o.on("click",function(){t.parent.findChildByName("gapminder-treemenu").markerID("axis_y").alignX(t.model.locale.isRTL()?"right":"left").alignY("top").updateView().toggle()});var a=this.xTitleEl.selectAll("text").data([0]);a.enter().append("text"),a.on("click",function(){t.parent.findChildByName("gapminder-treemenu").markerID("axis_x").alignX(t.model.locale.isRTL()?"right":"left").alignY("bottom").updateView().toggle()});var s=this.sTitleEl.selectAll("text").data([0]);s.enter().append("text"),s.attr("text-anchor","end"),c.setIcon(this.dataWarningEl,g).select("svg").attr("width","0px").attr("height","0px"),this.dataWarningEl.append("text").attr("text-anchor","end").text(this.translator("hints/dataWarning")),c.setIcon(this.yInfoEl,m).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(e.description||e.sourceLink))),c.setIcon(this.xInfoEl,m).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(n.description||n.sourceLink))),this.yInfoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.yInfoEl.on("mouseover",function(){var e=this.getBBox(),n=c.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("axis_y").show().setPos(n.x+i.left-r.left,n.y)}),this.yInfoEl.on("mouseout",function(){t.parent.findChildByName("gapminder-datanotes").hide()}),this.xInfoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.xInfoEl.on("mouseover",function(){if(!t.model.time.dragging){var e=this.getBBox(),n=c.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("axis_x").show().setPos(n.x+i.left-r.left,n.y)}}),this.xInfoEl.on("mouseout",function(){t.model.time.dragging||t.parent.findChildByName("gapminder-datanotes").hide()}),this.dataWarningEl.on("click",function(){t.parent.findChildByName("gapminder-datawarning").toggle()}).on("mouseover",function(){t._updateDoubtOpacity(1)}).on("mouseout",function(){t._updateDoubtOpacity()})},_updateDoubtOpacity:function(t){null==t&&(t=this.wScale(+this.model.time.formatDate(this.time))),this.someSelected&&(t=1),this.dataWarningEl.style("opacity",t)},updateEntities:function(){var t=this,e=this.KEY,n=this.TIMEDIM,r=function(r){return r=r||"",t.model.marker.getKeys().map(function(o){var a={};return a[e]=o[e],a[n]=i,a.sortValue=t.frame.size[o[e]]||0,a[e]=r+o[e],a}).sort(function(t,e){return e.sortValue-t.sortValue})},i=this.model.time.end,o=r.call(this);this.model.marker.setVisible(o),this.model.time.splash||this.unselectBubblesWithNoData(o),this.entityBubbles=this.bubbleContainer.selectAll("circle.vzb-bc-entity").data(this.model.marker.getVisible(),function(t){return t[e]}),this.entityBubbles.exit().remove(),this.entityBubbles=this.entityBubbles.enter().append("circle").attr("class",function(t){return"vzb-bc-entity bubble-"+t[e]}).on("mouseover",function(e,n){c.isTouchDevice()||"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||t._bubblesInteract().mouseover(e,n)}).on("mouseout",function(e,n){c.isTouchDevice()||"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||t._bubblesInteract().mouseout(e,n)}).on("click",function(e,n){c.isTouchDevice()||"arrow"!==t.model.ui.cursorMode&&"hand"!==t.model.ui.cursorMode||t._bubblesInteract().click(e,n)}).onTap(function(e,n){d3.event.stopPropagation(),t._bubblesInteract().click(e,n)}).onLongTap(function(t,e){}).merge(this.entityBubbles),this._reorderEntities()},unselectBubblesWithNoData:function(t){var e=this,n=this.KEY;if(this.model.marker.select.length){var r=[],i=t.map(function(t){return t[n]});this.model.marker.select.forEach(function(t){-1!==i.indexOf(t[n])&&r.push(t)}),r.length!==e.model.marker.select.length&&(e.model.marker.select=r)}},_reorderEntities:function(){var t=this,e=this.KEY;this.bubbleContainer.selectAll(".vzb-bc-entity").sort(function(n,r){var i=t.frame.size[n[e]],o=t.frame.size[r[e]];return void 0===i&&void 0!==o?-1:void 0!==i&&void 0===o?1:i!=o?d3.descending(i,o):n[e]!=r[e]?d3.ascending(n[e],r[e]):void 0!==n.trailStartTime||void 0!==r.trailStartTime?void 0!==n.trailStartTime?-1:1:void 0!==n.limits||void 0!==r.limits?void 0!==n.limits?-1:1:d3.descending(i,o)})},_bubblesInteract:function(){var t=this;return this.KEY,this.TIMEDIM,{mouseover:function(e,n){t.model.marker.highlightMarker(e),t._labels.showCloseCross(e,!0)},mouseout:function(e,n){t.model.marker.clearHighlighted(),t._labels.showCloseCross(e,!1)},click:function(e,n){if(!t.draggingNow){var r=t.model.marker.isSelected(e);t.model.marker.selectMarker(e),c.isTouchDevice()||(r&&t.model.marker.highlightMarker(e),t.highlightDataPoints())}}}},updateTime:function(){this.time_1=null==this.time?this.model.time.value:this.time,this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-this.time_1>0?this.model.time.delayAnimations:0,this.year.setText(this.model.time.formatDate(this.time,"ui"),this.duration)},updateSize:function(){var t=this.chartSvg,e=c.px2num(t.style("width")),n=c.px2num(t.style("height")),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+n*e},i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+e*n},o={small:{margin:{top:30,bottom:35,left:30,right:10},leftMarginRatio:1,padding:2,minRadiusPx:.5,maxRadiusEm:this.model.ui.chart.maxRadiusEm||.05,infoElHeight:16,yAxisTitleBottomMargin:6,xAxisTitleBottomMargin:4},medium:{margin:{top:15,bottom:40,left:40,right:15},leftMarginRatio:1.6,padding:2,minRadiusPx:1,maxRadiusEm:this.model.ui.chart.maxRadiusEm||.05,infoElHeight:20,yAxisTitleBottomMargin:3,xAxisTitleBottomMargin:4},large:{margin:{top:15,bottom:r(20,.03),left:i(31,.015),right:20},leftMarginRatio:1.8,padding:2,minRadiusPx:1,maxRadiusEm:this.model.ui.chart.maxRadiusEm||.05,infoElHeight:22,yAxisTitleBottomMargin:3,xAxisTitleBottomMargin:r(-10,.01),hideSTitle:!0}},a={medium:{margin:{top:20,bottom:55,left:50,right:20},yAxisTitleBottomMargin:3,xAxisTitleBottomMargin:4,infoElHeight:26},large:{margin:{top:30,bottom:r(45,.03),left:i(35,.025),right:30},yAxisTitleBottomMargin:3,xAxisTitleBottomMargin:r(-10,.01),infoElHeight:32,hideSTitle:!0}},s=this;this.activeProfile=this.getActiveProfile(o,a);var u=this.getLayoutProfile(),l=this.root.getVizWidthHeight();this.activeProfile.maxRadiusPx=Math.max(this.activeProfile.minRadiusPx,this.activeProfile.maxRadiusEm*c.hypotenuse(l.width,l.height));var h=this.activeProfile.margin,f=this.activeProfile.infoElHeight;if(s._labels.setCloseCrossHeight(1.2*s.activeProfile.infoElHeight),s._labels.setTooltipFontSize(s.activeProfile.infoElHeight+"px"),this.height=parseInt(this.element.style("height"),10)-h.top-h.bottom||0,this.width=parseInt(this.element.style("width"),10)-h.left*this.activeProfile.leftMarginRatio-h.right||0,(this.height<=0||this.width<=0)&&(this.height=0,this.width=0,c.warn("Bubble chart updateSize(): vizabi container is too little or has display:none")),this.graph.attr("transform","translate("+h.left*this.activeProfile.leftMarginRatio+","+h.top+")"),this.year.resize(this.width,this.height),this.eventArea.attr("width",this.width).attr("height",Math.max(0,this.height)),"ordinal"!==this.model.marker.axis_y.scaleType?this.yScale.range(this._rangeBump([this.height,0])):this.yScale.rangePoints([this.height,0],s.activeProfile.padding).range(),"ordinal"!==this.model.marker.axis_x.scaleType?this.xScale.range(this._rangeBump([0,this.width])):this.xScale.rangePoints([0,this.width],s.activeProfile.padding).range(),this.yAxis.scale(this.yScale).tickSizeInner(-this.width).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-this.width,0).labelerOptions({scaleType:this.model.marker.axis_y.scaleType,toolMargin:h,limitMaxTickNumber:6,bump:this.activeProfile.maxRadiusPx/2,viewportLength:this.height,formatter:this.model.marker.axis_y.getTickFormatter()}),this.xAxis.scale(this.xScale).tickSizeInner(-this.height).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-this.height,0).labelerOptions({scaleType:this.model.marker.axis_x.scaleType,toolMargin:h,bump:this.activeProfile.maxRadiusPx/2,viewportLength:this.width,formatter:this.model.marker.axis_x.getTickFormatter()}),this.bubbleContainerCrop.attr("width",this.width).attr("height",Math.max(0,this.height)),this.labelsContainerCrop.attr("width",this.width).attr("height",Math.max(0,this.height)),this.xAxisElContainer.attr("width",this.width+1).attr("height",this.activeProfile.margin.bottom+this.height).attr("y",-1).attr("x",-1),this.xAxisEl.attr("transform","translate(1,"+(1+this.height)+")"),this.yAxisElContainer.attr("width",this.activeProfile.margin.left+this.width).attr("height",Math.max(0,this.height)).attr("x",-this.activeProfile.margin.left),this.yAxisEl.attr("transform","translate("+(this.activeProfile.margin.left-1)+",0)"),this.yAxisEl.call(this.yAxis),this.xAxisEl.call(this.xAxis),this.projectionX.attr("y1",s.yScale.range()[0]+this.activeProfile.maxRadiusPx/2),this.projectionY.attr("x2",s.xScale.range()[0]-this.activeProfile.maxRadiusPx/2),this._updateSTitle(),this.sTitleEl.attr("transform","translate("+this.width+",20) rotate(-90)"),"small"!==u)this.ySubTitleEl.select("text").attr("dy",.6*f).text(this.strings.subtitle.Y),this.xSubTitleEl.select("text").attr("dy",.3*-f).text(this.strings.subtitle.X),this.yTitleEl.select("text").text(this.strings.title_short.Y+" ").append("tspan").style("font-size",.7*f+"px").text("\u25bc"),this.xTitleEl.select("text").text(this.strings.title_short.X+" ").append("tspan").style("font-size",.7*f+"px").text("\u25bc");else{this.ySubTitleEl.select("text").text(""),this.xSubTitleEl.select("text").text("");var d=this.yTitleEl.select("text").text(this.strings.title.Y);d.node().getBBox().width>this.width&&d.text(this.strings.title_short.Y);var p=this.xTitleEl.select("text").text(this.strings.title.X);p.node().getBBox().width>this.width-100&&p.text(this.strings.title_short.X)}var v=this.model.locale.isRTL();if(this.ySubTitleEl.style("font-size",.8*f+"px").attr("transform","translate(0,0) rotate(-90)"),this.xSubTitleEl.style("font-size",.8*f+"px").attr("transform","translate("+this.width+","+this.height+")"),this.yTitleEl.style("font-size",f+"px").attr("transform","small"!==u?"translate("+(-h.left-this.activeProfile.yAxisTitleBottomMargin)+","+.5*this.height+") rotate(-90)":"translate("+(v?this.width:10-this.activeProfile.margin.left)+", -"+this.activeProfile.yAxisTitleBottomMargin+")"),this.xTitleEl.style("font-size",f+"px").attr("transform","small"!==u?"translate("+.5*this.width+","+(this.height+h.bottom-this.activeProfile.xAxisTitleBottomMargin)+")":"translate("+(v?this.width:0)+","+(this.height+h.bottom-this.activeProfile.xAxisTitleBottomMargin)+")"),this.yInfoEl.select("svg").node()){var g=this.yTitleEl.node().getBBox(),m=c.transform(this.yTitleEl.node()),y=v?g.x+m.translateX-1.4*f:g.x+m.translateX+g.width+.4*f;this.yInfoEl.select("svg").attr("width",f+"px").attr("height",f+"px"),this.yInfoEl.attr("transform","small"!==u?"translate("+(m.translateX-.8*f)+","+(m.translateY-.4*f-.5*g.width)+") rotate(-90)":"translate("+y+","+(m.translateY-.8*f)+")")}if(this.xInfoEl.select("svg").node()){var b=this.xTitleEl.node().getBBox(),_=c.transform(this.xTitleEl.node()),x=v?b.x+_.translateX-1.4*f:b.x+_.translateX+b.width+.4*f;this.xInfoEl.select("svg").attr("width",f+"px").attr("height",f+"px"),this.xInfoEl.attr("transform","translate("+x+","+(_.translateY-.8*f)+")")}this._resizeDataWarning(),this.model.ui.chart.margin.set("left",h.left*this.activeProfile.leftMarginRatio,!1,!1)},_updateLineEqualXY:function(t){var e=this.model.marker.axis_x.which==this.model.marker.axis_y.which;if(this.lineEqualXY.classed("vzb-invisible",!e),e){var n=d3.min(this.yScale.domain().concat(this.xScale.domain())),r=d3.max(this.yScale.domain().concat(this.xScale.domain()));this.lineEqualXY.transition().duration(t||0).attr("y1",this.yScale(n)).attr("y2",this.yScale(r)).attr("x1",this.xScale(n)).attr("x2",this.xScale(r))}},_resizeDataWarning:function(){var t=this.dataWarningEl.select("text").style("font-size",null),e=t.node().getBBox().width+3*t.node().getBBox().height,n=this.width-this.xTitleEl.node().getBBox().width-this.activeProfile.infoElHeight,r=parseInt(t.style("font-size"))*n/e;t.style("font-size",e>n?r+"px":null);var i=t.node().getBBox();this.dataWarningEl.select("svg").attr("width",.75*i.height).attr("height",.75*i.height).attr("x",-i.width-1.2*i.height).attr("y",.65*-i.height),this.dataWarningEl.attr("transform","translate("+(this.model.locale.isRTL()?i.width+i.height:this.width)+","+(this.height+this.activeProfile.margin.bottom-this.activeProfile.xAxisTitleBottomMargin)+")")},updateMarkerSizeLimits:function(){var t=this.model.marker.size.extent||[0,1];if(!this.activeProfile)return c.warn("updateMarkerSizeLimits() is called before ready(). This can happen if events get unfrozen and getFrame() still didn't return data");var e=this.activeProfile.minRadiusPx,n=this.activeProfile.maxRadiusPx,r=c.radiusToArea(Math.max(n*t[0],e)),i=c.radiusToArea(Math.max(n*t[1],e)),o=r===i?[r,i]:d3.range(r,i,(i-r)/this.sScale.domain().length).concat(i);this.sScale.range(o)},redrawDataPointsOnlyColors:function(){var t=this;if(!this.entityBubbles)return c.warn("redrawDataPointsOnlyColors(): no entityBubbles defined. likely a premature call, fix it!");var e=void 0,n=this.KEY,r=this.model.time.value;this.model.ui.chart.lockNonSelected&&this.someSelected&&(r=this.model.time.parse(""+this.model.ui.chart.lockNonSelected)),this.model.marker.getFrame(r,function(r){if(!t._frameIsValid(r))return c.warn("redrawDataPointsOnlyColor: empty data received from marker.getFrame(). doing nothing");e=t.frame,t.entityBubbles.each(function(i,o){var a=t.model.marker.isSelected(i),s=a?e.color[i[n]]:r.color[i[n]],u=null!=s?t.cScale(s):t.COLOR_WHITEISH;if(d3.select(this).style("fill",u),a){var l=c.find(t.model.marker.select,function(t){return t[n]==i[n]}),h=t.model.time.parse(""+l.trailStartTime);t.model.marker.getFrame(h,function(e){if(!e)return c.warn("redrawDataPointsOnlyColor: empty data received from marker.getFrames(). doing nothing");var r={};if(t.model.ui.chart.trails&&h-t.time!=0){var a=e.color[i[n]];r.scaledC0=null!=a?t.cScale(a):t.COLOR_WHITEISH}else r.scaledC0=u;t._labels.updateLabelOnlyColor(i,o,r)})}})})},redrawDataPointsOnlySize:function(){var t=this,e=void 0,n=this.KEY,r=this.model.time.value;this.model.ui.chart.lockNonSelected&&this.someSelected&&(r=this.model.time.parse(""+this.model.ui.chart.lockNonSelected)),this.model.marker.getFrame(r,function(r){if(!t._frameIsValid(r))return c.warn("redrawDataPointsOnlySize: empty data received from marker.getFrame(). doing nothing");e=t.frame,t.entityBubbles.each(function(i,o){var a=t.model.marker.isSelected(i),s=a?e.size[i[n]]:r.size[i[n]];if(null!=s){var u=c.areaToRadius(t.sScale(s));if(d3.select(this).attr("r",u),a){var l=c.find(t.model.marker.select,function(t){return t[n]==i[n]}),h=t.model.time.parse(""+l.trailStartTime);t.model.marker.getFrame(h,function(e){if(!e)return c.warn("redrawDataPointsOnlySize: empty data received from marker.getFrames(). doing nothing");var r={};t.model.ui.chart.trails&&h-t.time!=0?r.scaledS0=c.areaToRadius(t.sScale(e.size[i[n]])):r.scaledS0=u,t._labels.updateLabelOnlyPosition(i,o,r)})}}})})},redrawDataPoints:function(t){var e=this;if(this.KEY,null==t&&(t=e.duration),this.model.ui.chart.lockNonSelected&&this.someSelected){var n=this.model.time.parse(""+this.model.ui.chart.lockNonSelected);this.model.marker.getFrame(n,function(n){if(!n)return c.warn("redrawDataPoints: empty data received from marker.getFrames(). doing nothing");e.entityBubbles.each(function(r,i){var o=e.model.marker.isSelected(r)?e.frame:n;e._updateBubble(r,o,i,d3.select(this),t)})})}else e.entityBubbles.each(function(n,r){e._updateBubble(n,e.frame,r,d3.select(this),t)});this._updateLineEqualXY(t)},_updateBubble:function(t,e,n,r,i){var o=this,a=this.KEY,s=!1,u=e.axis_y[t[a]],l=e.axis_x[t[a]],h=e.size[t[a]],f=e.label[t[a]],d=e.color[t[a]],p=e.size_label[t[a]];if(!f&&0!==f||!u&&0!==u||!l&&0!==l||!h&&0!==h){if(t.hidden||(t.hidden=!0,s=!0),s)if(i){var v=r.style("opacity");r.transition().duration(i).ease(d3.easeExp).style("opacity",0).on("end",function(){r.classed("vzb-invisible",t.hidden),r.style("opacity",v)})}else r.classed("vzb-invisible",t.hidden)}else{(t.hidden||r.classed("vzb-invisible"))&&(t.hidden=!1,s=!0);var g=c.areaToRadius(o.sScale(h));if(r.style("fill",null!=d?o.cScale(d):o.COLOR_WHITEISH),i)if(s){var m=r.style("opacity");r.classed("vzb-invisible",t.hidden),r.style("opacity",0).attr("cy",o.yScale(u)).attr("cx",o.xScale(l)).attr("r",g).transition().duration(i).ease(d3.easeExp).style("opacity",m)}else r.transition().duration(i).ease(d3.easeLinear).attr("cy",o.yScale(u)).attr("cx",o.xScale(l)).attr("r",g);else r.interrupt().attr("cy",o.yScale(u)).attr("cx",o.xScale(l)).attr("r",g).transition(),s&&r.classed("vzb-invisible",t.hidden);this.model.time.record&&o._export.write({type:"circle",id:t[a],time:this.model.time.value.getUTCFullYear(),fill:null!=d?o.cScale(d):o.COLOR_WHITEISH,cx:o.xScale(l),cy:o.yScale(u),r:g})}o._updateLabel(t,n,l,u,h,d,f,p,i,s)},_updateLabel:function(t,e,n,r,i,o,a,s,u,l){var h=this,f=this.KEY;if(h.model.marker.isSelected(t)){var d={},p=c.find(h.model.marker.select,function(e){return e[f]==t[f]}),v=h.model.time.formatDate(h.time);this.model.ui.chart.trails&&p.trailStartTime!=v&&null!=p.trailStartTime||(this.model.ui.chart.trails&&null==p.trailStartTime&&(p.trailStartTime=v),d.labelX0=n,d.labelY0=r,d.scaledC0=null!=o?h.cScale(o):h.COLOR_WHITEISH,d.scaledS0=i||0===i?c.areaToRadius(h.sScale(i)):null);var g=h.model.time.parse(""+p.trailStartTime),m=h._getLabelText(a,p.trailStartTime);l&&t.hidden&&h.model.ui.chart.trails&&g&&g<h.time&&(l=!1),t.hidden&&!h.model.ui.chart.trails&&(l=!0),this._labels.updateLabel(t,e,d,n,r,i,o,m,s,u,l)}},_getLabelText:function(t,e){return t+(this.model.ui.chart.trails?" "+e:"")},_setTooltip:function(t,e,n,r,i,o){if(t){var a={};if(o){var s=this.KEY,u=this.frame;a.valueY=u.axis_y[o[s]],a.valueX=u.axis_x[o[s]],a.valueS=u.size[o[s]],a.valueL=u.label[o[s]],a.valueC=u.color[o[s]],a.valueLST=u.size_label[o[s]],a.labelText=this._getLabelText(a.valueL,this.model.time.formatDate(this.time))}var c={};c.labelX0=this.xScale.invert(e),c.labelY0=this.yScale.invert(n),c.scaledS0=r,c.scaledC0=null,this._labels.setTooltip(o,t,c,a)}else this._labels.setTooltip()},_formatSTitleValues:function(t,e){var n=this.strings.unit.S,r=this.strings.unit.C,i=this.model.marker.size.getTickFormatter(),o=this.model.marker.color.getTickFormatter();return this.model.marker.color.isDiscrete()&&"constant"!==this.model.marker.color.use&&e&&this.model.marker.color.getColorlegendMarker()&&(e=this.model.marker.color.getColorlegendMarker().label.getItems()[e]||""),[i(t)+" "+n,e||0===e?o(e)+" "+r:this.translator("hints/nodata")]},_updateSTitle:function(t,e){if(this.activeProfile.hideSTitle&&this.model.ui.dialogs.sidebar.indexOf("colors")>-1&&this.model.ui.dialogs.sidebar.indexOf("size")>-1)return void this.sTitleEl.classed("vzb-invisible",!0);this.sTitleEl.classed("vzb-invisible")&&this.sTitleEl.classed("vzb-invisible",!1);var n="constant"!==this.model.marker.size.use,r="constant"!==this.model.marker.color.use,i=this.sTitleEl.select("text").style("font-size",null).text((n?this.translator("buttons/size")+": "+(t||this.strings.title.S):"")+(n&&r?", ":"")+(r?this.translator("buttons/colors")+": "+(e||this.strings.title.C):"")),o=i.node().getBBox().width,a=this.height-30,s=parseInt(i.style("font-size"))*a/o;i.style("font-size",o>a?s+"px":null)},selectDataPoints:function(){var t=this;this.KEY,c.isTouchDevice()?(t.model.marker.clearHighlighted(),t._labels.showCloseCross(null,!1)):(t._setTooltip(),t._setBubbleCrown()),t.someSelected=t.model.marker.select.length>0,t.nonSelectedOpacityZero=!1},_setBubbleCrown:function(t,e,n,r,i){null!=t?(this.bubbleCrown.classed("vzb-hidden",!1),this.bubbleCrown.select(".vzb-crown").attr("cx",t).attr("cy",e).attr("r",n).attr("fill",i?"none":r),this.bubbleCrown.selectAll(".vzb-crown-glow").attr("cx",t).attr("cy",e).attr("r",n+10).attr("stroke",r)):this.bubbleCrown.classed("vzb-hidden",!0)},_axisProjections:function(t){var e=this,n=this.TIMEDIM,r=this.KEY;null!=t?this.model.marker.getFrame(t[n],function(n){var i=n.axis_y[t[r]],o=n.axis_x[t[r]],a=n.size[t[r]],s=c.areaToRadius(e.sScale(a));!i&&0!==i||!o&&0!==o||!a&&0!==a||(e.model.ui.chart.whenHovering.showProjectionLineX&&e.xScale(o)>0&&e.xScale(o)<e.width&&e.yScale(i)+s<e.height&&e.projectionX.style("opacity",1).attr("y2",e.yScale(i)+s).attr("x1",e.xScale(o)).attr("x2",e.xScale(o)),e.model.ui.chart.whenHovering.showProjectionLineY&&e.yScale(i)>0&&e.yScale(i)<e.height&&e.xScale(o)-s>0&&e.projectionY.style("opacity",1).attr("y1",e.yScale(i)).attr("y2",e.yScale(i)).attr("x1",e.xScale(o)-s),e.model.ui.chart.whenHovering.higlightValueX&&e.xAxisEl.call(e.xAxis.highlightValue(o)),e.model.ui.chart.whenHovering.higlightValueY&&e.yAxisEl.call(e.yAxis.highlightValue(i)))}):(this.projectionX.style("opacity",0),this.projectionY.style("opacity",0),this.xAxisEl.call(this.xAxis.highlightValue("none")),this.yAxisEl.call(this.yAxis.highlightValue("none")))},highlightDataPoints:function(){var t=this,e=this.TIMEDIM,n=this.KEY;if(this.someHighlighted=this.model.marker.highlight.length>0,this.updateBubbleOpacity(),1===this.model.marker.highlight.length){var r=c.clone(this.model.marker.highlight[0]);t.model.ui.chart.lockNonSelected&&t.someSelected&&!t.model.marker.isSelected(r)?r[e]=t.model.time.parse(""+t.model.ui.chart.lockNonSelected):r[e]=t.model.time.parse(""+r.trailStartTime)||t.time,t.model.marker.getFrame(r[e],function(i){if(i){var o=t.xScale(i.axis_x[r[n]]),a=t.yScale(i.axis_y[r[n]]),s=c.areaToRadius(t.sScale(i.size[r[n]])),u=null!=i.color[r[n]]?t.cScale(i.color[r[n]]):t.COLOR_WHITEISH,l=!1,h=t._formatSTitleValues(i.size[r[n]],i.color[r[n]]);t._updateSTitle(h[0],h[1]),(o+s<0||o-s>t.width||a+s<0||a-s>t.height)&&(l=!0);var f="",d=!1;if(t.model.marker.isSelected(r)&&t.model.ui.chart.trails){f=t.model.time.formatDate(t.time);var p=c.find(t.model.marker.select,function(t){return t[n]==r[n]});d=f!==p.trailStartTime&&!d3.select(d3.event.target).classed("bubble-"+r[n]),f=f!==p.trailStartTime&&t.time===r[e]?f:""}else f=t.model.marker.isSelected(r)?"":i.label[r[n]];if(t._labels.highlight(null,!1),t._labels.highlight(r,!0),t.model.marker.isSelected(r)){var v=!r.trailStartTime||r.trailStartTime==t.model.time.formatDate(t.time);t._setBubbleCrown(o,a,s,u,v)}l||d||t._axisProjections(r),!f||l||d||t._setTooltip(f,o,a,s+3,u,r);var g=c.find(t.model.marker.select,function(t){return t[n]==r[n]});if(g){var m=c.clone(g);m.opacity=1,t._trails.run(["opacityHandler"],m)}}})}else this._axisProjections(),this._trails.run(["opacityHandler"]),t._updateSTitle(),this._setTooltip(),this._setBubbleCrown(),this._labels.highlight(null,!1)},_blinkSuperHighlighted:function(){var t=this;this.entityBubbles.classed("vzb-super-highlighted",function(e){return t.model.marker.isSuperHighlighted(e)})},updateBubbleOpacity:function(t){var e=this,n=this.model.marker.opacityHighlightDim,r=this.model.marker.opacityRegular,i=this.model.marker.opacitySelectDim;this.entityBubbles.style("opacity",function(t){return e.someHighlighted&&e.model.marker.isHighlighted(t)?1:e.someSelected?e.model.marker.isSelected(t)?1:i:e.someHighlighted?n:r});var o=e.model.marker.opacitySelectDim<.01;o!=this.nonSelectedOpacityZero&&this.entityBubbles.style("pointer-events",function(t){return e.someSelected&&o&&!e.model.marker.isSelected(t)?"none":"visible"}),this.nonSelectedOpacityZero=e.model.marker.opacitySelectDim<.01}});e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi,i=r.utils,o=Vizabi.Class.extend({init:function(t){this.context=t,this.dragRectangle=d3.drag(),this.zoomer=d3.zoom(),this.dragRectangle.subject(this.dragSubject()).on("start",this.drag().start).on("drag",this.drag().go).on("end",this.drag().stop),this.zoomer.filter(this.zoomFilter()).scaleExtent([.0625,1/0]).on("start",this.zoom().start).on("zoom",this.zoom().go).on("end",this.zoom().stop),this.zoomer.ratioX=1,this.zoomer.ratioY=1,t._zoomedXYMinMax={axis_x:{zoomedMin:null,zoomedMax:null},axis_y:{zoomedMin:null,zoomedMax:null}}},dragSubject:function(){var t=this.context;return function(e){return!d3.event.sourceEvent.ctrlKey&&!d3.event.sourceEvent.metaKey&&"plus"!==t.ui.cursorMode||"minus"===t.ui.cursorMode||("touchmove"===d3.event.sourceEvent.type||"touchstart"===d3.event.sourceEvent.type)&&(d3.event.sourceEvent.touches.length>1||d3.event.sourceEvent.targetTouches.length>1)?null:{x:d3.mouse(this)[0],y:d3.mouse(this)[1]}}},drag:function(){var t=this.context,e=this;return{start:function(e,n){this.origin={x:d3.mouse(this)[0],y:d3.mouse(this)[1]},t.zoomRect.classed("vzb-invisible",!1)},go:function(e,n){var r=this.origin,i={x:d3.event.x,y:d3.event.y};t.zoomRect.attr("x",Math.min(i.x,r.x)).attr("y",Math.min(i.y,r.y)).attr("width",Math.abs(i.x-r.x)).attr("height",Math.abs(i.y-r.y))},stop:function(n){if(t.zoomRect.attr("width",0).attr("height",0).classed("vzb-invisible",!0),this.target={x:d3.mouse(this)[0],y:d3.mouse(this)[1]},!(Math.abs(this.origin.x-this.target.x)<10||Math.abs(this.origin.y-this.target.y)<10)){var r=d3.event.sourceEvent.ctrlKey||d3.event.sourceEvent.metaKey||"plus"===t.ui.cursorMode;e._zoomOnRectangle(d3.select(this),this.origin.x,this.origin.y,this.target.x,this.target.y,r,500)}}}},zoomFilter:function(){var t=this.context;return function(e){var n=d3.event;return!(n.ctrlKey||n.metaKey||("touchmove"!==n.type&&"touchstart"!==n.type||!(n.touches.length>1||n.targetTouches.length>1))&&("wheel"!==n.type&&"mousewheel"!==n.type||!t.ui.zoomOnScrolling)&&("mousedown"!==n.type&&"touchstart"!==n.type||"plus"===t.ui.cursorMode||"minus"===t.ui.cursorMode||!t.ui.panWithArrow&&"hand"!==t.ui.cursorMode))}},zoom:function(){var t=this.context,e=this.zoomer,n=this;return{start:function(){"plus"!==t.ui.cursorMode&&"minus"!==t.ui.cursorMode&&t.chartSvg.classed("vzb-zooming",!0),t.model._data.marker.clearHighlighted(),t._setTooltip()},go:function(){var r=d3.event.sourceEvent,o=d3.event.transform.k,a=[d3.event.transform.x,d3.event.transform.y],s=e.ratioY,u=e.ratioX;t.draggingNow=!0,(isNaN(o)||null==o)&&(o=e.scale),(isNaN(o)||null==o)&&(o=1),1===o&&null!==r&&(("wheel"===r.type||"mousewheel"===r.type)&&(r.deltaY||-r.wheelDelta)>0||"touchmove"===r.type&&r.touches.length>1)&&(e.ratioX=1,u=1,e.ratioY=1,s=1),(isNaN(a[0])||isNaN(a[1])||null==a[0]||null==a[1])&&(a=[0,0]);var c=e.scaleExtent()[0];o*s<c&&(s=c/o,e.ratioY=s),o*u<c&&(u=c/o,e.ratioX=u);var l=o*u<1,h=o*s<1;l?(a[0]<0&&(a[0]=0),a[0]>(1-o*u)*t.width&&(a[0]=(1-o*u)*t.width)):(a[0]>0&&(a[0]=0),a[0]<(1-o*u)*t.width&&(a[0]=(1-o*u)*t.width)),h?(a[1]<0&&(a[1]=0),a[1]>(1-o*s)*t.height&&(a[1]=(1-o*s)*t.height)):(a[1]>0&&(a[1]=0),a[1]<(1-o*s)*t.height&&(a[1]=(1-o*s)*t.height)),n.zoomSelection.property("__zoom",d3.zoomIdentity.translate(a[0],a[1]).scale(o));var f=t.width*o*u,d=t.height*o*s,p=[0*o*u+a[0],f+a[0]],v=[d+a[1],0*o*s+a[1]],g=t._rangeBump(p),m=t._rangeBump(v),y=(g[0]-p[0])*o*u,b=(g[1]-p[1])*o*u,_=(m[0]-v[0])*o*s,x=(m[1]-v[1])*o*s;p[0]+=y,p[1]+=b,v[0]+=_,v[1]+=x;var w=[0,t.width],M=[t.height,0],S=t._rangeBump(w),k=t._rangeBump(M);l?(p[0]<S[0]&&(a[0]=S[0]-y),p[1]>S[1]&&(a[0]=S[1]-b-f)):(p[0]>S[0]&&(a[0]=S[0]-y),p[1]<S[1]&&(a[0]=S[1]-b-f)),h?(v[0]>k[0]&&(a[1]=k[0]-_-d),v[1]<k[1]&&(a[1]=k[1]-x)):(v[0]<k[0]&&(a[1]=k[0]-_-d),v[1]>k[1]&&(a[1]=k[1]-x)),l?(p[0]<S[0]&&(p[1]+=Math.abs(p[0]-S[0]),p[0]=S[0]),p[1]>S[1]&&(p[0]-=Math.abs(p[1]-S[1]),p[1]=S[1])):(p[0]>S[0]&&(p[1]-=Math.abs(p[0]-S[0]),p[0]=S[0]),p[1]<S[1]&&(p[0]+=Math.abs(p[1]-S[1]),p[1]=S[1])),h?(v[0]>k[0]&&(v[1]-=Math.abs(v[0]-k[0]),v[0]=k[0]),v[1]<k[1]&&(v[0]+=Math.abs(v[1]-k[1]),v[1]=k[1])):(v[0]<k[0]&&(v[1]+=Math.abs(v[0]-k[0]),v[0]=k[0]),v[1]>k[1]&&(v[0]-=Math.abs(v[1]-k[1]),v[1]=k[1])),"ordinal"===t.model.marker.axis_x.scaleType?t.xScale.rangeBands(p):t.xScale.range(p),"ordinal"===t.model.marker.axis_y.scaleType?t.yScale.rangeBands(v):t.yScale.range(v);var E=function(t){return i.isDate(t)?t:+t.toFixed(2)},O=S,T=k;t._zoomedXYMinMax={axis_x:{zoomedMin:E(t.xScale.invert(O[0])),zoomedMax:E(t.xScale.invert(O[1]))},axis_y:{zoomedMin:E(t.yScale.invert(T[0])),zoomedMax:E(t.yScale.invert(T[1]))}},e.dontFeedToState||t.model.marker.set(t._zoomedXYMinMax,null,!1);var C=t.yAxis.labelerOptions(),z=t.xAxis.labelerOptions();C.limitMaxTickNumber=o*s<1.5?8:o*s*8,z.limitMaxTickNumber=o*u<1.5?8:o*u*8,C.transitionDuration=e.duration,z.transitionDuration=e.duration,t.xAxisEl.call(t.xAxis.labelerOptions(z)),t.yAxisEl.call(t.yAxis.labelerOptions(C)),t.redrawDataPoints(e.duration),t._trails.run("resize",null,e.duration),e.duration=0},stop:function(){t.chartSvg.classed("vzb-zooming",!1),t.draggingNow=!1,e.dontFeedToState||t.model.marker.set(t._zoomedXYMinMax,!0,!0),e.dontFeedToState=null}}},expandCanvas:function(t){var e=this.context;t||(t=e.duration);var n=d3.extent(i.values(e.frame.axis_x)),r=d3.extent(i.values(e.frame.axis_y));if(!n[0]&&0!==n[0]||!n[1]&&0!==n[1]||!r[0]&&0!==r[0]||!r[1]&&0!==r[1])return i.warn("panZoom.expandCanvas: X or Y min/max are broken. Aborting with no action");var o={x1:e.xScale(n[0]),y1:e.yScale(r[0]),x2:e.xScale(n[1]),y2:e.yScale(r[1])},a=[0,e.width],s=[e.height,0],u={x1:a[0],x2:a[1],y1:s[0],y2:s[1]};if(!e.isCanvasPreviouslyExpanded||o.x1<1*u.x1||o.x2>1*u.x2||o.y2<1*u.y2||o.y1>1*u.y1){if(e.isCanvasPreviouslyExpanded){var c=e._rangeBump(a),l=e._rangeBump(s);o.x1>c[0]&&(o.x1=c[0]),o.x2<c[1]&&(o.x2=c[1]),o.y1<l[0]&&(o.y1=l[0]),o.y2>l[0]&&(o.y2=l[1])}e.isCanvasPreviouslyExpanded=!0,this._zoomOnRectangle(e.element,o.x1,o.y1,o.x2,o.y2,!1,t)}else e.redrawDataPoints(t)},zoomToMaxMin:function(t,e,n,r,i,o){var a=this.context,s=t,u=e,c=n,l=r,h=a.xScale.domain(),f=a.yScale.domain();s<h[0]&&u<h[1]&&(s=h[0]),s>h[0]&&u>h[1]&&(u=h[1]),c<f[0]&&l<f[1]&&(c=f[0]),c>f[0]&&l>f[1]&&(l=f[1]);var d=[a.xScale(s),a.xScale(u)],p=[a.yScale(c),a.yScale(l)];this._zoomOnRectangle(a.element,d[0],p[0],d[1],p[1],!1,i,o)},_zoomOnRectangle:function(t,e,n,r,o,a,s,u){var c=this.context,l=this.zoomer,h=d3.zoomTransform(this.zoomSelection.node()),f=e,d=n,p=r,v=o;a&&h.translate(f-p,d-v);var g=[0,c.width],m=[c.height,0],y=c._rangeBump(g),b=c._rangeBump(m),_=l.scaleExtent()[0],x=l.scaleExtent()[1],w=void 0,M=void 0,S=void 0;if(f==p||d==v||y[0]==y[1]||b[0]==b[1])return i.warn("_zoomOnRectangle(): can not proceed because this may result in infinity zooms");Math.abs(f-p)>Math.abs(d-v)?(w=Math.abs(b[0]-b[1])/Math.abs(d-v)*h.k,w<_&&(l.ratioY*=w/h.k,w=_),w>x&&(w=x),M=Math.abs(y[0]-y[1])/Math.abs(f-p)*h.k/w*l.ratioX,S=l.ratioY):(w=Math.abs(y[0]-y[1])/Math.abs(f-p)*h.k,w<_&&(l.ratioX*=w/h.k,w=_),w>x&&(w=x),S=Math.abs(b[0]-b[1])/Math.abs(d-v)*h.k/w*l.ratioY,M=l.ratioX);var k=[(h.x-Math.min(f,p))/h.k/l.ratioX*w*M+(y[0]-g[0]),(h.y-Math.min(d,v))/h.k/l.ratioY*w*S+(b[1]-m[1])];l.dontFeedToState=u,l.ratioY=S||1,l.ratioX=M||1,l.duration=s||0,this.zoomSelection.call(l.transform,d3.zoomIdentity.translate(k[0],k[1]).scale(w))},zoomByIncrement:function(t,e){var n=(this.context,d3.zoomTransform(this.zoomSelection.node())),r=n.k,i=[n.x,n.y],o=d3.mouse(this.zoomSelection.node()),a=Math.log(r)/Math.LN2;"plus"!=t&&t||(a=Math.floor(a)+1),"minus"==t&&(a=Math.ceil(a)-1);var s=[(o[0]-i[0])/r,(o[1]-i[1])/r],u=this.zoomer.scaleExtent();r==u[0]&&(this.zoomer.ratioY=1,this.zoomer.ratioX=1),r=Math.max(u[0],Math.min(u[1],Math.pow(2,a))),s=[s[0]*r+i[0],s[1]*r+i[1]],i[0]+=o[0]-s[0],i[1]+=o[1]-s[1],this.zoomer.duration=e||0,this.zoomSelection.call(this.zoomer.transform,d3.zoomIdentity.translate(i[0],i[1]).scale(r))},resetZoomState:function(t){this.zoomer.ratioY=1,this.zoomer.ratioX=1,(t||this.zoomSelection).property("__zoom",d3.zoomIdentity)},reset:function(t,e){this.context.isCanvasPreviouslyExpanded=!1,this.zoomer.ratioY=1,this.zoomer.ratioX=1,this.zoomer.duration=e||0,(t||this.zoomSelection).call(this.zoomer.transform,d3.zoomIdentity)},rerun:function(t){this.context,(t||this.zoomSelection).call(this.zoomer.scaleBy,1)},zoomSelection:function(t){this.zoomSelection=t}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=Vizabi,a=o.utils,s=Vizabi.Class.extend({init:function(t){this.context=t,this._isCreated=null,this.actionsQueue={},this.entityTrails={},this.trailsData=[],this.trailsInProgress={},this.activePromises={},this.trailTransitions={},this.delayedIterations={},this.drawingQueue={}},toggle:function(t){var e=this.context;t?e._trails.create().then(function(){e._trails.run(["findVisible","reveal","opacityHandler"])}):(e._trails.run("remove"),e.model.marker.select.forEach(function(t){t.trailStartTime=null}))},create:function(t){var e=this.context,n=this,r=e.KEY,o=e.TIMEDIM;return this._isCreated=new Promise(function(s,u){if(e.model.ui.chart.trails){var c=e.model.time.getAllSteps(),l=[];t=null==t?e.model.marker.select:[t],n._clearActions(t),n.trailsData=e.model.marker.select.map(function(t){var e={status:"created",selectedEntityData:t};return e[r]=t[r],e}),n.trailTransitions={};var h=e.bubbleContainer.selectAll("g.vzb-bc-entity.entity-trail").data(n.trailsData,function(t){return t[r]});h.exit().remove(),h.enter().insert("g",function(t){return this.querySelector(".bubble-"+(0,i.default)(t[r]))}).attr("class",function(t){return"vzb-bc-entity entity-trail trail-"+t[r]}).merge(h).each(function(t,i){var s=this;l.push(new Promise(function(i,u){var l=c.map(function(e){return{t:e,key:t[r]}}),h=d3.select(s).selectAll("g").data(l).classed("vzb-invisible",!0);h.exit().remove(),n.entityTrails[t[r]]=h.enter().append("g").attr("class","vzb-bc-trailsegment").on("mouseover",function(n,i){if(!a.isTouchDevice()){var s={};s[r]=n.key,s[o]=n.t,e._axisProjections(s),e._labels.highlight(t,!0);var u=e.model.time.formatDate(n.t),c=a.find(e.model.marker.select,function(e){return e[r]==t[r]});e.model.marker.getFrame(s[o],function(t){var n=e.xScale(t.axis_x[s[r]]),i=e.yScale(t.axis_y[s[r]]),o=a.areaToRadius(e.sScale(t.size[s[r]])),l=null!=t.color[s[r]]?e.cScale(t.color[s[r]]):e.COLOR_WHITEISH;u!==c.trailStartTime&&e._setTooltip(u,n,i,o+3,l),e._setBubbleCrown(n,i,o,l),e.model.marker.getModelObject("highlight").trigger("change",{size:t.size[s[r]],color:t.color[s[r]]})}),d3.select(this).style("opacity",1)}}).on("mouseout",function(t,n){a.isTouchDevice()||(e._axisProjections(),e._setTooltip(),e._setBubbleCrown(),e._labels.highlight(null,!1),e.model.marker.getModelObject("highlight").trigger("change",null),d3.select(this).style("opacity",e.model.marker.opacityRegular))}).each(function(t,e){var n=d3.select(this);n.append("circle"),n.append("line")}).merge(h),i()}))}),l.length>0?Promise.all(l).then(function(t){s(!0)}):s(!0)}}),this._isCreated},_addActions:function(t,e){var n=this.context,r=this,i=n.KEY;t.forEach(function(t){r.actionsQueue[t[i]]||(r.actionsQueue[t[i]]=[]),r.actionsQueue[t[i]]=[].concat(r.actionsQueue[t[i]].filter(function(t){return-1==e.indexOf(t)}),e)})},_clearActions:function(t){var e=this.context,n=this,r=e.KEY;t.forEach(function(t){n.actionsQueue[t[r]]||(n.actionsQueue[t[r]]=[]),n.actionsQueue[t[r]]=[],n.drawingQueue[t[r]]={},n.delayedIterations[t[r]]={},n.activePromises[t[r]]||(n.activePromises[t[r]]=[]),a.forEach(n.activePromises[t[r]],function(t,e){"pending"===t.status&&t.reject()}),n.trailsInProgress[t[r]]=null,n.activePromises[t[r]]=[]})},_getNextAction:function(t){return this.actionsQueue[t].shift()},run:function(t,e,n){var r=this.context,i=this,o=r.KEY;this._isCreated&&!r.model.time.splash&&("string"==typeof t&&(t=[t]),this._isCreated.then(function(){if(r.model.ui.chart.trails&&r.model.marker.select.length||"remove"==t){n||(n=0),e=null==e?r.model.marker.select:[e];for(var a=0;a<t.length;a++)-1!=["resize","recolor","remove"].indexOf(t[a])&&function(){var e=t.splice(a,1).pop();--a,i.trailsData.forEach(function(t){var a=i.entityTrails[t[o]];r._trails["_"+e](a,n,t)})}();0!=t.length&&(i._addActions(e,t),i.trailsData.forEach(function(e){-1!=t.indexOf("findVisible")&&(i.drawingQueue[e[o]]={},i.delayedIterations[e[o]]={});var a=i.entityTrails[e[o]];i.trailsInProgress[e[o]]||function t(s){var u=i._getNextAction(e[o]);if(u){i.trailsInProgress[e[o]]=u;var c=r._trails["_"+u](a,n,e);c&&c instanceof Promise?c.then(function(){i.trailsInProgress[e[o]]=null,t(s+1)},function(){i.trailsInProgress[e[o]]=null}):(i.trailsInProgress[e[o]]=null,t(s+1))}}(0)}))}}))},_remove:function(t,e,n){this.actionsQueue[n[this.context.KEY]]=[],t&&(d3.select(this.entityTrails[n[this.context.KEY]].node().parentNode).remove(),this.entityTrails[n[this.context.KEY]]=null)},_resize:function(t,e,n){var r=this.context;if(!r.model.time.splash){var i=!1;t.each(function(t,o){if(null!=t.valueY&&null!=t.valueX&&null!=t.valueS){var s=d3.select(this);if(e?s.select("circle").transition().duration(e).ease(d3.easeLinear).attr("cy",r.yScale(t.valueY)).attr("cx",r.xScale(t.valueX)).attr("r",a.areaToRadius(r.sScale(t.valueS))):s.select("circle").interrupt().attr("cy",r.yScale(t.valueY)).attr("cx",r.xScale(t.valueX)).attr("r",a.areaToRadius(r.sScale(t.valueS))).transition(),i||t.transparent||(i=!0,r._labels.updateLabelOnlyPosition(n,null,{scaledS0:a.areaToRadius(r.sScale(t.valueS))})),t.next){var u=t.next;if(null!=u&&null!=u.valueY&&null!=u.valueX){var c=Math.sqrt(Math.pow(r.xScale(t.valueX)-r.xScale(u.valueX),2)+Math.pow(r.yScale(t.valueY)-r.yScale(u.valueY),2));e?s.select("line").transition().duration(e).ease(d3.easeLinear).attr("x1",r.xScale(u.valueX)).attr("y1",r.yScale(u.valueY)).attr("x2",r.xScale(t.valueX)).attr("y2",r.yScale(t.valueY)).attr("stroke-dasharray",c).attr("stroke-dashoffset",a.areaToRadius(r.sScale(t.valueS))):s.select("line").interrupt().attr("x1",r.xScale(u.valueX)).attr("y1",r.yScale(u.valueY)).attr("x2",r.xScale(t.valueX)).attr("y2",r.yScale(t.valueY)).attr("stroke-dasharray",c).attr("stroke-dashoffset",a.areaToRadius(r.sScale(t.valueS))).transition()}}}})}},_recolor:function(t,e,n){var r=this.context;t.each(function(t,e){var n=d3.select(this),i="geo.world_4region"==r.model.marker.color.which?r.model.marker.color.getColorShade({colorID:t.valueC,shadeID:"shade"}):null!=t.valueC?r.cScale(t.valueC):r.COLOR_BLACKISH;n.select("circle").style("fill",null!=t.valueC?r.cScale(t.valueC):r.COLOR_WHITEISH),n.select("line").style("stroke",i)})},_opacityHandler:function(t,e,n){var r=this.context;t.each(function(t,e){d3.select(this).style("opacity",n.opacity||r.model.marker.opacityRegular)})},_findVisible:function(t,e,n){var r=this.context,i=this,o=r.KEY;return new Promise(function(e,s){new Promise(function(t,e){n.limits?t():r.model.marker.getEntityLimits(n[o]).then(function(e){n.limits=e,t()})}).then(function(){n.selectedEntityData.trailStartTime||(n.selectedEntityData.trailStartTime=r.model.time.formatDate(r.time));var s=r.model.time.parse(""+n.selectedEntityData.trailStartTime);if(r.time-s<0||n.limits.min-s>0){r.time-s<0?(n.selectedEntityData.trailStartTime=r.model.time.formatDate(d3.max([r.time,n.limits.min])),s=r.model.time.parse(""+n.selectedEntityData.trailStartTime)):(n.selectedEntityData.trailStartTime=r.model.time.formatDate(n.limits.min),s=r.model.time.parse(""+n.selectedEntityData.trailStartTime));var u=r._labels.cached[n[o]],c=r.frame.size[n[o]],l=r.frame.color[n[o]];u.labelX0=r.frame.axis_x[n[o]],u.labelY0=r.frame.axis_y[n[o]],u.scaledS0=c||0===c?a.areaToRadius(r.sScale(c)):null,u.scaledC0=null!=l?r.cScale(l):r.COLOR_WHITEISH,r._updateLabel(n,0,r.frame.axis_x[n[o]],r.frame.axis_y[n[o]],r.frame.size[n[o]],r.frame.color[n[o]],r.frame.label[n[o]],r.frame.size_label[n[o]],0,!0)}t.each(function(e,i){var o=e.transparent;e.transparent=null==n.selectedEntityData.trailStartTime||e.t-r.time>0||s-e.t>0||n.selectedEntityData.trailStartTime-r.model.time.formatDate(r.time)>=0,(o!=e.transparent||Math.abs(r.model.time.formatDate(e.t)-r.model.time.formatDate(r.time))<2)&&(e.visibilityChanged=!0),e.transparent&&d3.select(t._groups[0][i]).classed("vzb-invisible",e.transparent)}),i.drawingQueue[n[o]]={},i.delayedIterations[n[o]]={},e()})})},_abortAnimation:function(){var t=this.context,e=this,n=t.KEY;e.trailsData.forEach(function(t){e.trailTransitions[t[n]]&&e.trailTransitions[t[n]].select("line").interrupt().transition()})},_reveal:function(t,e,n){var r=this.context;r.model.time.playing&&(e=r.model.time.delay);var i=this,o=r.KEY;n.status="reveal";var s=r.model.time.parse(""+n.selectedEntityData.trailStartTime),u=function(t,u,c,h){return new Promise(function(h,f){var d=d3.select(t._groups[0][u]),p=d.datum();if(c-u==1){if(p.transparent)return d.classed("vzb-invisible",p.transparent),h();if(!p.visibilityChanged)return h()}r.model.marker.getFrame(p.t,function(f){if("reveal"!=n.status)return h();if(!f)return h();if(p.valueY=f.axis_y[n[o]],p.valueX=f.axis_x[n[o]],p.valueS=f.size[n[o]],p.valueC=f.color[n[o]],null==p.valueY||null==p.valueX||null==p.valueS)return h();if(s&&s.toString()==p.t.toString()){var v=r._labels.cached[n[o]];v.labelX0=p.valueX,v.labelY0=p.valueY;var g=p.valueS;v.scaledS0=g||0===g?a.areaToRadius(r.sScale(g)):null,v.scaledC0=null!=p.valueC?r.cScale(p.valueC):r.COLOR_WHITEISH,r._updateLabel(n,u,p.valueX,p.valueY,p.valueS,p.valueC,f.label[n[o]],f.size_label[n[o]],0,!0)}if(d.select("circle").attr("cy",r.yScale(p.valueY)).attr("cx",r.xScale(p.valueX)).attr("r",a.areaToRadius(r.sScale(p.valueS))).style("fill",null!=p.valueC?r.cScale(p.valueC):r.COLOR_WHITEISH),d.select("line").attr("x2",r.xScale(p.valueX)).attr("y2",r.yScale(p.valueY)).attr("x1",r.xScale(p.valueX)).attr("y1",r.yScale(p.valueY)),r.time-p.t>0?(p.visibilityChanged=!1,d.classed("vzb-invisible",p.transparent)):d.classed("vzb-invisible",!0),!t._groups[0][c]||r.time.toString()==p.t.toString())return h();var m=d3.select(t._groups[0][c]),y=m.datum();y.previous=p,p.next=y;var b=y.t;r.time-y.t<0&&(p.visibilityChanged=!0,b=r.time),r.model.marker.getFrame(b,function(t){if("reveal"!=n.status)return h();if(!t||null==p.valueY||null==p.valueX||null==p.valueS)return h();if(null==t.axis_x[n[o]]||null==t.axis_y[n[o]])return h();y.valueY=t.axis_y[n[o]],y.valueX=t.axis_x[n[o]],y.valueS=t.size[n[o]],y.valueC=t.color[n[o]],i.trailTransitions[n[o]]=d;var s="geo.world_4region"==r.model.marker.color.which?r.model.marker.color.getColorShade({colorID:p.valueC,shadeID:"shade"}):null!=p.valueC?r.cScale(p.valueC):r.COLOR_BLACKISH,f=Math.sqrt(Math.pow(r.xScale(p.valueX)-r.xScale(t.axis_x[n[o]]),2)+Math.pow(r.yScale(p.valueY)-r.yScale(t.axis_y[n[o]]),2));return d.select("line").attr("stroke-dasharray",f).attr("stroke-dashoffset",a.areaToRadius(r.sScale(p.valueS))).style("stroke",s).transition().duration(e).ease(d3.easeLinear).attr("x1",r.xScale(y.valueX)).attr("y1",r.yScale(y.valueY)).attr("x2",r.xScale(p.valueX)).attr("y2",r.yScale(p.valueY)),c-u>1?(l(u,c),h()):h()})})})},c=function(i,s,u){return new Promise(function(c,h){var f=d3.select(t._groups[0][i]),d=d3.select(t._groups[0][s]),p=d3.select(t._groups[0][u]),v=f.datum(),g=d.datum(),m=p.datum();if(!v.previous&&!v.next||!g.previous&&!g.next)return c();r.model.marker.getFrame(m.t,function(t){if("reveal"!=n.status)return c();if(!t||void 0===t.axis_x||null==t.axis_x[n[o]]||void 0===t.axis_y||null==t.axis_y[n[o]])return a.warn("Frame for trail missed: "+m.t),c();if(m.valueY=t.axis_y[n[o]],m.valueX=t.axis_x[n[o]],m.valueS=t.size[n[o]],m.valueC=t.color[n[o]],m.previous=v,m.next=g,v.next=m,g.previous=m,null==m.valueY||null==m.valueX||null==m.valueS)return a.warn("Data for trail point missed: "+m.t),c();var h="geo.world_4region"==r.model.marker.color.which?r.model.marker.color.getColorShade({colorID:m.valueC,shadeID:"shade"}):null!=m.valueC?r.cScale(m.valueC):r.COLOR_BLACKISH,d=Math.sqrt(Math.pow(r.xScale(v.valueX)-r.xScale(m.valueX),2)+Math.pow(r.yScale(v.valueY)-r.yScale(m.valueX),2));if(f.select("line").transition().duration(e).ease(d3.easeLinear).attr("x1",r.xScale(m.valueX)).attr("y1",r.yScale(m.valueY)).attr("x2",r.xScale(v.valueX)).attr("y2",r.yScale(v.valueY)).attr("stroke-dasharray",d).attr("stroke-dashoffset",a.areaToRadius(r.sScale(v.valueS))).style("stroke",h),p.classed("vzb-invisible",m.transparent),!m.transparent){p.select("circle").attr("cy",r.yScale(m.valueY)).attr("cx",r.xScale(m.valueX)).attr("r",a.areaToRadius(r.sScale(m.valueS))).style("fill",null!=m.valueC?r.cScale(m.valueC):r.COLOR_WHITEISH);var y=Math.sqrt(Math.pow(r.xScale(m.valueX)-r.xScale(g.valueX),2)+Math.pow(r.yScale(m.valueY)-r.yScale(g.valueY),2));p.select("line").transition().duration(e).ease(d3.easeLinear).attr("x1",r.xScale(g.valueX)).attr("y1",r.yScale(g.valueY)).attr("x2",r.xScale(m.valueX)).attr("y2",r.yScale(m.valueY)).attr("stroke-dasharray",y).attr("stroke-dashoffset",a.areaToRadius(r.sScale(m.valueS))).style("stroke",h)}l(i,u,s),c()})})},l=function(t,e,r){var a=void 0;e-t>1&&(a=h(t,e),i.delayedIterations[n[o]][t]={first:t,next:e,medium:a}),r&&r-e>1&&(a=h(e,r),i.delayedIterations[n[o]][e]={first:e,next:r,medium:a})},h=function(t,e){return Math.round(t+(e-t)/2)},f=function(t,e,n){var i=[],o=0,s=0,u=d3.min([t.limits.max,r.time]),c=d3.max([t.limits.min,r.model.time.parse(""+t.selectedEntityData.trailStartTime)]);return a.forEach(e._groups[0],function(t,e){var a=t.__data__;a.t-c==0?o=e:a.t-u==0?s=e:a.t>c&&a.t<u&&(r.model.time.formatDate(a.t)%n==0||a.next&&a.previous)&&i.push(e)}),i.unshift(o),s>0&&i.push(s),i},d=function(){return new Promise(function(t,e){Object.keys(i.drawingQueue[n[o]]).length>0?function e(){var r=Object.keys(i.drawingQueue[n[o]])[Math.floor(Math.random()*Object.keys(i.drawingQueue[n[o]]).length)],a=JSON.parse(JSON.stringify(i.drawingQueue[n[o]][r]));delete i.drawingQueue[n[o]][r],c(a.first,a.next,a.medium).then(function(){Object.keys(i.drawingQueue[n[o]]).length>0?e():t()})}(i.drawingQueue[n[o]]):t()})};return new Promise(function(e,a){var s=function t(){d().then(function(){if(0==Object.keys(i.delayedIterations[n[o]]).length)return e();i.drawingQueue[n[o]]=i.delayedIterations[n[o]],i.delayedIterations[n[o]]={},t()},function(){return e()})};if(r.model.marker.framesAreReady())!function t(n,r){if(r<0||r>=n._groups[0].length)return e();u(n,r,r+1).then(function(){t(n,r+1)},function(){return e()})}(t,0);else{i.delayedIterations[n[o]]={},i.drawingQueue[n[o]]={};var c=f(n,t,50),l=[];if(c.length<=1)return e();i.delayedIterations[n[o]]={};for(var h=0;h<c.length-1;h++)l.push(u(t,c[h],c[h+1]));Promise.all(l).then(function(){0==Object.keys(i.delayedIterations[n[o]]).length?e():(i.drawingQueue[n[o]]=i.delayedIterations[n[o]],i.delayedIterations[n[o]]={},s())},function(){e()})}})}});e.default=s},function(t,e,n){(function(e){!function(e,n){t.exports=function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var e=function(t){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var e,n=String(t),r=n.length,i=-1,o="",a=n.charCodeAt(0);++i<r;)e=n.charCodeAt(i),o+=0!=e?e>=1&&e<=31||127==e||0==i&&e>=48&&e<=57||1==i&&e>=48&&e<=57&&45==a?"\\"+e.toString(16)+" ":0==i&&1==r&&45==e||!(e>=128||45==e||95==e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122)?"\\"+n.charAt(i):n.charAt(i):"\ufffd";return o};return t.CSS||(t.CSS={}),t.CSS.escape=e,e}(e)}(void 0!==e?e:this)}).call(e,n(7))},function(t,e){},function(t,e){t.exports='\x3c!-- Bubble Chart Component --\x3e\n<div class="vzb-bubblechart">\n    <svg class="vzb-bubblechart-svg vzb-export">\n        <g class="vzb-bc-graph">\n            <g class="vzb-bc-year"></g>\n\n            <svg class="vzb-bc-axis-x"><g></g></svg>\n            <svg class="vzb-bc-axis-y"><g></g></svg>\n            <line class="vzb-bc-projection-x"></line>\n            <line class="vzb-bc-projection-y"></line>\n\n            <svg class="vzb-bc-bubbles-crop">\n                <g class="vzb-zoom-selection"></g>\n                <line class="vzb-bc-line-equal-xy vzb-invisible"></line>\n                <rect class="vzb-bc-eventarea"></rect>\n                <g class="vzb-bc-trails"></g>\n                <g class="vzb-bc-bubbles"></g>\n                <g class="vzb-bc-lines"></g>\n                <g class="vzb-bc-bubble-crown vzb-hidden">\n                    <circle class="vzb-crown-glow"></circle>\n                    <circle class="vzb-crown"></circle>\n                </g>\n            </svg>\n\n            <g class="vzb-bc-axis-y-subtitle"></g>\n            <g class="vzb-bc-axis-x-subtitle"></g>\n            <g class="vzb-bc-axis-y-title"></g>\n            <g class="vzb-bc-axis-x-title"></g>\n            <g class="vzb-bc-axis-s-title"></g>\n            <g class="vzb-bc-axis-c-title"></g>\n\n            <g class="vzb-bc-axis-y-info vzb-noexport"></g>\n            <g class="vzb-bc-axis-x-info vzb-noexport"></g>\n\n            <svg class="vzb-bc-labels-crop">\n                <g class="vzb-bc-labels"></g>\n            </svg>\n\n            <g class="vzb-data-warning vzb-noexport">\n                <svg></svg>\n                <text></text>\n            </g>\n\n            <rect class="vzb-bc-zoom-rect"></rect>\n        </g>\n    </svg>\n    <svg>\n        <defs>\n            <filter id="vzb-glow-filter" x="-50%" y="-50%" width="200%" height="200%">\n                <feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur>\n            </filter>\n        </defs>\n    </svg>\n    \x3c!-- This could possibly be another component --\x3e\n    <div class="vzb-tooltip vzb-hidden vzb-tooltip-mobile"></div>\n</div>\n'},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n(0)}])},"+zVg":function(t,e,n){"use strict";var r=n("wZOE");e.of=r.ArrayObservable.of},"/9bB":function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("3lsR");e.materialize=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){this.destination.next(a.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(a.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(a.Notification.createComplete()),t.complete()},e}(o.Subscriber)},"/JsI":function(t,e,n){var r=n("CDXM");r(r.S+r.F,"Object",{assign:n("rIdM")})},"/Mgt":function(t,e,n){var r=n("CDXM");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"/XRd":function(t,e,n){var r=n("tose"),i=n("CDXM"),o=n("+pQw"),a=n("A1WY");i(i.S+i.F*n("umMR")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},"/oeL":function(t,e,n){"use strict";(function(t){function r(){if(!ni){var t=ei.Symbol;if(t&&t.iterator)ni=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ni=r)}}return ni}function i(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function o(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function a(t){if("string"==typeof t)return t;if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function s(t){return"function"==typeof t&&t.hasOwnProperty("annotation")&&(t=t.annotation),t}function u(t,e){if(t===Object||t===String||t===Function||t===Number||t===Array)throw new Error("Can not use native "+a(t)+" as constructor");if("function"==typeof t)return t;if(Array.isArray(t)){var n=t,r=n.length-1,i=t[r];if("function"!=typeof i)throw new Error("Last position of Class method array must be Function in key "+e+" was '"+a(i)+"'");if(r!=i.length)throw new Error("Number of annotations ("+r+") does not match number of arguments ("+i.length+") in the function: "+a(i));for(var o=[],u=0,c=n.length-1;u<c;u++){var l=[];o.push(l);var h=n[u];if(Array.isArray(h))for(var f=0;f<h.length;f++)l.push(s(h[f]));else"function"==typeof h?l.push(s(h)):l.push(h)}return ii.defineMetadata("parameters",o,i),i}throw new Error("Only Function or Array is supported in Class definition for key '"+e+"' is '"+a(t)+"'")}function c(t){var e=u(t.hasOwnProperty("constructor")?t.constructor:void 0,"constructor"),n=e.prototype;if(t.hasOwnProperty("extends")){if("function"!=typeof t.extends)throw new Error("Class definition 'extends' property must be a constructor function was: "+a(t.extends));e.prototype=n=Object.create(t.extends.prototype)}for(var r in t)"extends"!==r&&"prototype"!==r&&t.hasOwnProperty(r)&&(n[r]=u(t[r],r));this&&this.annotations instanceof Array&&ii.defineMetadata("annotations",this.annotations,e);var i=e.name;return i&&"constructor"!==i||(e.overriddenName="class"+ri++),e}function l(t,e,n,r){function i(t){if(!ii||!ii.getOwnMetadata)throw"reflect-metadata shim is required when using class decorators";if(this instanceof i)return o.call(this,t),this;var e=new i(t),n="function"==typeof this&&Array.isArray(this.annotations)?this.annotations:[];n.push(e);var a=function(t){var n=ii.getOwnMetadata("annotations",t)||[];return n.push(e),ii.defineMetadata("annotations",n,t),t};return a.annotations=n,a.Class=c,r&&r(a),a}var o=h(e);return n&&(i.prototype=Object.create(n.prototype)),i.prototype.toString=function(){return"@"+t},i.annotationCls=i,i}function h(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,e);for(var i in r)this[i]=r[i]}}}function f(t,e,n){function r(){function t(t,e,n){for(var r=ii.getOwnMetadata("parameters",t)||[];r.length<=n;)r.push(null);return r[n]=r[n]||[],r[n].push(o),ii.defineMetadata("parameters",r,t),t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof r)return i.apply(this,e),this;var o=new(r.bind.apply(r,[void 0].concat(e)));return t.annotation=o,t}var i=h(e);return n&&(r.prototype=Object.create(n.prototype)),r.prototype.toString=function(){return"@"+t},r.annotationCls=r,r}function d(t,e,n){function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof r)return i.apply(this,t),this;var n=new(r.bind.apply(r,[void 0].concat(t)));return function(t,e){var r=ii.getOwnMetadata("propMetadata",t.constructor)||{};r[e]=r.hasOwnProperty(e)&&r[e]||[],r[e].unshift(n),ii.defineMetadata("propMetadata",r,t.constructor)}}var i=h(e);return n&&(r.prototype=Object.create(n.prototype)),r.prototype.toString=function(){return"@"+t},r.annotationCls=r,r}function p(t){return t.__forward_ref__=p,t.toString=function(){return a(this())},t}function v(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===p?t():t}function g(t){return t[Pi]}function m(t){return t[Ai]}function y(t){return t[Di]||b}function b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}function _(t,e){var n=t+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r[Ai]=e,r}function x(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}function w(t){if(t.length>1){return" ("+x(t.slice().reverse()).map(function(t){return a(t.token)}).join(" -> ")+")"}return""}function M(t,e,n,r){var i=[e],o=n(i),a=r?_(o,r):Error(o);return a.addKey=S,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a[Ai]=r,a}function S(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function k(t,e){return M(t,e,function(t){return"No provider for "+a(t[0].token)+"!"+w(t)})}function E(t,e){return M(t,e,function(t){return"Cannot instantiate cyclic dependency!"+w(t)})}function O(t,e,n,r){return M(t,r,function(t){var n=a(t[0].token);return e.message+": Error during instantiation of "+n+"!"+w(t)+"."},e)}function T(t){return Error("Invalid provider - only instances of Provider and Type are allowed, got: "+t)}function C(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];o&&0!=o.length?n.push(o.map(a).join(" ")):n.push("?")}return Error("Cannot resolve all parameters for '"+a(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+a(t)+"' is decorated with Injectable.")}function z(t){return Error("Index "+t+" is out-of-bounds.")}function P(t,e){return Error("Cannot mix multi providers and regular providers, got: "+t+" "+e)}function A(t){return"function"==typeof t}function D(t){return t?t.map(function(t){var e=t.type,n=e.annotationCls,r=t.args?t.args:[];return new(n.bind.apply(n,[void 0].concat(r)))}):[]}function I(t){var e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}function j(t){var e,n;if(t.useClass){var r=v(t.useClass);e=qi.factory(r),n=H(r)}else t.useExisting?(e=function(t){return t},n=[Vi.fromKey(ji.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=B(t.useFactory,t.deps)):(e=function(){return t.useValue},n=Ui);return new Yi(e,n)}function R(t){return new Wi(ji.get(t.provide),[j(t)],t.multi||!1)}function L(t){var e=F(t,[]),n=e.map(R),r=N(n,new Map);return Array.from(r.values())}function N(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw P(i,r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a=void 0;a=r.multiProvider?new Wi(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}function F(t,e){return t.forEach(function(t){if(t instanceof Ni)e.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)e.push(t);else{if(!(t instanceof Array))throw T(t);F(t,e)}}),e}function B(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return q(t,e,n)})}return H(t)}function H(t){var e=qi.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw C(t,e);return e.map(function(n){return q(t,n,e)})}function q(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return e instanceof xi?V(e.token,i,null):V(e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof Ni?r=s:s instanceof xi?r=s.token:s instanceof wi?i=!0:s instanceof Si||s instanceof ki?o=s:s instanceof Qr&&(r=s)}if(null!=(r=v(r)))return V(r,i,o);throw C(t,n)}function V(t,e,n){return new Vi(ji.get(t),e,n)}function U(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=e(t.getProviderAtIndex(r));return n}function W(t){return!!t&&"function"==typeof t.then}function Y(t){return!!t&&"function"==typeof t.subscribe}function X(){return""+K()+K()+K()}function K(){return String.fromCharCode(97+Math.floor(25*Math.random()))}function G(){throw new Error("Runtime compiler is not loaded")}function Z(t){var e=Error("No component factory found for "+a(t)+". Did you add it to @NgModule.entryComponents?");return e[co]=t,e}function Q(t,e){return void 0===e&&(e=null),po.createScope(t,e)}function J(t,e){return fo.leaveScope(t,e),e}function $(t,e){return null}function tt(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function et(t){t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,i,o,a){try{return nt(t),e.invokeTask(r,i,o,a)}finally{rt(t)}},onInvoke:function(e,n,r,i,o,a,s){try{return nt(t),e.invoke(r,i,o,a,s)}finally{rt(t)}},onHasTask:function(e,n,r,i){e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,tt(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,n,r,i){return e.handleError(r,i),t.runOutsideAngular(function(){return t.onError.emit(i)}),!1}})}function nt(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rt(t){t._nesting--,tt(t)}function it(t){To=t}function ot(){if(zo)throw new Error("Cannot enable prod mode after platform setup.");Co=!1}function at(){return zo=!0,Co}function st(t){if(Eo&&!Eo.destroyed&&!Eo.injector.get(Po,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Eo=t.get(Do);var e=t.get(eo,null);return e&&e.forEach(function(t){return t()}),Eo}function ut(t,e,n){void 0===n&&(n=[]);var r=new Qr("Platform: "+e);return function(e){void 0===e&&(e=[]);var i=lt();return i&&!i.injector.get(Po,!1)||(t?t(n.concat(e).concat({provide:r,useValue:!0})):st(Ki.resolveAndCreate(n.concat(e).concat({provide:r,useValue:!0})))),ct(r)}}function ct(t){var e=lt();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function lt(){return Eo&&!Eo.destroyed?Eo:null}function ht(t,e,n){try{var r=n();return W(r)?r.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):r}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}}function ft(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function dt(t){return t.reduce(function(t,e){var n=Array.isArray(e)?dt(e):e;return t.concat(n)},[])}function pt(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}function vt(t,e,n){t.childNodes.forEach(function(t){t instanceof $o&&(e(t)&&n.push(t),vt(t,e,n))})}function gt(t,e,n){t instanceof $o&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof $o&&gt(t,e,n)})}function mt(t){return ta.get(t)||null}function yt(t){ta.set(t.nativeNode,t)}function bt(t){ta.delete(t.nativeNode)}function _t(t,e){var n=xt(t),r=xt(e);if(n&&r)return wt(t,e,_t);var i=t&&("object"==typeof t||"function"==typeof t),a=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!a)||o(t,e)}function xt(t){return!!St(t)&&(Array.isArray(t)||!(t instanceof Map)&&r()in t)}function wt(t,e,n){for(var i=t[r()](),o=e[r()]();;){var a=i.next(),s=o.next();if(a.done&&s.done)return!0;if(a.done||s.done)return!1;if(!n(a.value,s.value))return!1}}function Mt(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i=t[r()](),o=void 0;!(o=i.next()).done;)e(o.value)}function St(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function kt(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Et(t){return t.name||typeof t}function Ot(){return qi}function Tt(){return ga}function Ct(){return ma}function zt(t){return t||"en-US"}function Pt(t,e){return t.nodes[e]}function At(t,e){return t.nodes[e]}function Dt(t,e){return t.nodes[e]}function It(t,e){return t.nodes[e]}function jt(t,e){return t.nodes[e]}function Rt(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),Nt(i,t)}function Lt(t,e){return t instanceof Error||(t=new Error(t.toString())),Ft(t,e),t}function Nt(t,e){var n=new Error(t);return Ft(n,e),n}function Ft(t,e){t[Pi]=e,t[Di]=e.logError.bind(e)}function Bt(t){return!!g(t)}function Ht(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}function qt(t){var e=Oa.get(t);return e||(e=a(t)+"_"+Oa.size,Oa.set(t,e)),e}function Vt(t,e,n,r){if(r instanceof ea){r=r.wrapped;var i=t.def.nodes[e].bindingIndex+n,o=t.oldValues[i];o instanceof ea&&(o=o.wrapped),t.oldValues[i]=new ea(o)}return r}function Ut(t){return{id:Ta,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}function Wt(t){if(t&&t.id===Ta){var e=null!=t.encapsulation&&t.encapsulation!==yi.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+za++:Ca}return t&&t.id===Ca&&(t=null),t||null}function Yt(t,e,n,r){var i=t.oldValues;return!(!(2&t.state)&&o(i[e.bindingIndex+n],r))}function Xt(t,e,n,r){return!!Yt(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Kt(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!_t(i,r))throw Rt(ka.createDebugContext(t,e.index),i,r,0!=(1&t.state))}function Gt(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Zt(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Qt(t,e,n,r){return Gt(33554432&t.def.nodes[e].flags?At(t,e).componentView:t),ka.handleEvent(t,e,n,r)}function Jt(t){if(t.parent){return At(t.parent,t.parentNodeDef.index)}return null}function $t(t){return t.parent?t.parentNodeDef.parent:null}function te(t,e){switch(201347067&e.flags){case 1:return At(t,e.index).renderElement;case 2:return Pt(t,e.index).renderText}}function ee(t,e){return t?t+":"+e:e}function ne(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function re(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ie(t){return 1<<t%32}function oe(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=t[0],o=t[1];"number"==typeof i?(e[i]=o,n|=ie(i)):r[i]=o}),{matchedQueries:e,references:r,matchedQueryIds:n}}function ae(t){return t.map(function(t){var e,n;return Array.isArray(t)?(n=t[0],e=t[1]):(n=0,e=t),{flags:n,token:e,tokenKey:qt(e)}})}function se(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===yi.Native?At(t,n.renderParent.index).renderElement:void 0:e}function ue(t){var e=Pa.get(t);return e||(e=t(function(){return Ea}),e.factory=t,Pa.set(t,e)),e}function ce(t){var e=[];return le(t,0,void 0,void 0,e),e}function le(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(te(t,t.def.lastRenderRootNode))),he(t,e,0,t.def.nodes.length-1,n,r,i)}function he(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&de(t,u,e,i,o,a),s+=u.childCount}}function fe(t,e,n,r,i,o){for(var a=t;a&&!ne(a);)a=a.parent;for(var s=a.parent,u=$t(a),c=u.index+1,l=u.index+u.childCount,h=c;h<=l;h++){var f=s.def.nodes[h];f.ngContentIndex===e&&de(s,f,n,r,i,o),h+=f.childCount}if(!s.parent){var d=t.root.projectableNodes[e];if(d)for(var h=0;h<d.length;h++)pe(t,d[h],n,r,i,o)}}function de(t,e,n,r,i,o){if(8&e.flags)fe(t,e.ngContent.index,n,r,i,o);else{var a=te(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags){if(16&e.bindingFlags&&pe(t,a,n,r,i,o),32&e.bindingFlags){var s=At(t,e.index).componentView;pe(s,a,n,r,i,o)}}else pe(t,a,n,r,i,o);if(16777216&e.flags)for(var u=At(t,e.index).viewContainer._embeddedViews,c=0;c<u.length;c++)le(u[c],n,r,i,o);1&e.flags&&!e.element.name&&he(t,n,e.index+1,e.index+e.childCount,r,i,o)}}function pe(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}function ve(t){if(":"===t[0]){var e=t.match(Aa);return[e[1],e[2]]}return["",t]}function ge(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function me(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,m,y,b){switch(t){case 1:return e+ye(n)+r;case 2:return e+ye(n)+r+ye(i)+o;case 3:return e+ye(n)+r+ye(i)+o+ye(a)+s;case 4:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c;case 5:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c+ye(l)+h;case 6:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c+ye(l)+h+ye(f)+d;case 7:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c+ye(l)+h+ye(f)+d+ye(p)+v;case 8:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c+ye(l)+h+ye(f)+d+ye(p)+v+ye(g)+m;case 9:return e+ye(n)+r+ye(i)+o+ye(a)+s+ye(u)+c+ye(l)+h+ye(f)+d+ye(p)+v+ye(g)+m+ye(y)+b;default:throw new Error("Does not support more than 9 expressions")}}function ye(t){return null!=t?t.toString():""}function be(t,e,n,r,i,o){t|=1;var a=oe(e),s=a.matchedQueries,u=a.references;return{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ue(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Ea},provider:null,text:null,query:null,ngContent:null}}function _e(t,e,n,r,i,o,a,s,u,c,l){void 0===o&&(o=[]),u||(u=Ea);var h=oe(e),f=h.matchedQueries,d=h.references,p=h.matchedQueryIds,v=null,g=null;i&&(D=ve(i),v=D[0],g=D[1]),a=a||[];for(var m=new Array(a.length),y=0;y<a.length;y++){var b=a[y],_=b[0],x=b[1],w=b[2],M=ve(x),S=M[0],k=M[1],E=void 0,O=void 0;switch(15&_){case 4:O=w;break;case 1:case 8:E=w}m[y]={flags:_,ns:S,name:k,nonMinifiedName:k,securityContext:E,suffix:O}}s=s||[];for(var T=new Array(s.length),y=0;y<s.length;y++){var C=s[y],z=C[0],P=C[1];T[y]={type:0,target:z,eventName:P,propName:null}}o=o||[];var A=o.map(function(t){var e=t[0],n=t[1],r=ve(e);return[r[0],r[1],n]});return l=Wt(l),c&&(t|=33554432),t|=1,{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:f,matchedQueryIds:p,references:d,ngContentIndex:n,childCount:r,bindings:m,bindingFlags:ge(m),outputs:T,element:{ns:v,name:g,attrs:A,template:null,componentProvider:null,componentView:c||null,componentRendererType:l,publicProviders:null,allProviders:null,handleEvent:u||Ea},provider:null,text:null,query:null,ngContent:null};var D}function xe(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=se(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=i.attrs[u],l=c[0],h=c[1],f=c[2];a.setAttribute(r,h,f,l)}return r}function we(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Me(t,n.index,ee(o.target,o.eventName)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}}function Me(t,e,n){return function(r){try{return Qt(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}}function Se(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,d=!1;return f>0&&Ee(t,e,0,n)&&(d=!0),f>1&&Ee(t,e,1,r)&&(d=!0),f>2&&Ee(t,e,2,i)&&(d=!0),f>3&&Ee(t,e,3,o)&&(d=!0),f>4&&Ee(t,e,4,a)&&(d=!0),f>5&&Ee(t,e,5,s)&&(d=!0),f>6&&Ee(t,e,6,u)&&(d=!0),f>7&&Ee(t,e,7,c)&&(d=!0),f>8&&Ee(t,e,8,l)&&(d=!0),f>9&&Ee(t,e,9,h)&&(d=!0),d}function ke(t,e,n){for(var r=!1,i=0;i<n.length;i++)Ee(t,e,i,n[i])&&(r=!0);return r}function Ee(t,e,n,r){if(!Xt(t,e,n,r))return!1;var i=e.bindings[n],o=At(t,e.index),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:Oe(t,i,a,i.ns,s,r);break;case 2:Te(t,a,s,r);break;case 4:Ce(t,i,a,s,r);break;case 8:ze(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}function Oe(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}function Te(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}function Ce(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Ma.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}function ze(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}function Pe(t,e,n,r){return{index:-1,deps:ae(r),flags:t,token:e,value:n}}function Ae(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.index=n,e[qt(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function De(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];n[r]=4096&i.flags?Da:je(t,i)}}function Ie(t,e,n){if(void 0===n&&(n=zi.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var r=e.tokenKey;switch(r){case Ia:case ja:return t}var i=t._def.providersByKey[r];if(i){var o=t._providers[i.index];return o===Da&&(o=t._providers[i.index]=je(t,i)),o}return t._parent.get(e.token,n)}function je(t,e){var n;switch(201347067&e.flags){case 512:n=Re(t,e.value,e.deps);break;case 1024:n=Le(t,e.value,e.deps);break;case 2048:n=Ie(t,e.deps[0]);break;case 256:n=e.value}return n}function Re(t,e,n){var r,i=n.length;switch(i){case 0:r=new e;break;case 1:r=new e(Ie(t,n[0]));break;case 2:r=new e(Ie(t,n[0]),Ie(t,n[1]));break;case 3:r=new e(Ie(t,n[0]),Ie(t,n[1]),Ie(t,n[2]));break;default:for(var o=new Array(i),a=0;a<i;a++)o[a]=Ie(t,n[a]);r=new(e.bind.apply(e,[void 0].concat(o)))}return r}function Le(t,e,n){var r,i=n.length;switch(i){case 0:r=e();break;case 1:r=e(Ie(t,n[0]));break;case 2:r=e(Ie(t,n[0]),Ie(t,n[1]));break;case 3:r=e(Ie(t,n[0]),Ie(t,n[1]),Ie(t,n[2]));break;default:for(var o=Array(i),a=0;a<i;a++)o[a]=Ie(t,n[a]);r=e.apply(void 0,o)}return r}function Ne(t,e){for(var n=t._def,r=0;r<n.providers.length;r++){if(131072&n.providers[r].flags){var i=t._providers[r];i&&i!==Da&&i.ngOnDestroy()}}}function Fe(t,e,n,r){var i=e.viewContainer._embeddedViews;null!==n&&void 0!==n||(n=i.length),r.viewContainerParent=t,Xe(i,n,r),Be(e,r),ka.dirtyParentQueries(r),We(e,n>0?i[n-1]:null,r)}function Be(t,e){var n=Jt(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),He(e.parent.def,e.parentNodeDef)}}function He(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}function qe(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Ke(n,e),ka.dirtyParentQueries(r),Ye(r),r}function Ve(t){if(16&t.state){var e=Jt(t);if(e){var n=e.template._projectedViews;n&&(Ke(n,n.indexOf(t)),ka.dirtyParentQueries(t))}}}function Ue(t,e,n){var r=t.viewContainer._embeddedViews,i=r[e];return Ke(r,e),null==n&&(n=r.length),Xe(r,n,i),ka.dirtyParentQueries(i),Ye(i),We(t,n>0?r[n-1]:null,i),i}function We(t,e,n){var r=e?te(e,e.def.lastRenderRootNode):t.renderElement;le(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Ye(t){le(t,3,null,null,void 0)}function Xe(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ke(t,e){e>=t.length-1?t.pop():t.splice(e,1)}function Ge(t,e,n,r,i,o){return new La(t,e,n,r,i,o)}function Ze(t,e,n){return new Fa(t,e,n)}function Qe(t){return new Ba(t)}function Je(t,e){return new Ha(t,e)}function $e(t,e){return new qa(t,e)}function tn(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=At(t,n.index);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Pt(t,n.index).renderText;if(20240&n.flags)return Dt(t,n.index).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function en(t){return new Va(t.renderer)}function nn(t,e,n,r){return new Ua(t,e,n,r)}function rn(t,e,n,r,i,o,a){var s=[];if(o)for(var u in o){var c=o[u],l=c[0],h=c[1];s[l]={flags:8,name:u,nonMinifiedName:h,ns:null,securityContext:null,suffix:null}}var f=[];if(a)for(var d in a)f.push({type:1,propName:d,target:null,eventName:a[d]});return t|=16384,an(t,e,n,r,r,i,s,f)}function on(t,e,n){return t|=16,an(t,null,0,e,e,n)}function an(t,e,n,r,i,o,a,s){var u=oe(e),c=u.matchedQueries,l=u.references,h=u.matchedQueryIds;s||(s=[]),a||(a=[]);var f=ae(o);return{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:l,ngContentIndex:-1,childCount:n,bindings:a,bindingFlags:ge(a),outputs:s,element:null,provider:{token:r,value:i,deps:f},text:null,query:null,ngContent:null}}function sn(t,e){return 4096&e.flags?Ja:dn(t,e)}function un(t,e){for(var n=t;n.parent&&!ne(n);)n=n.parent;return pn(n.parent,$t(n),!0,e.provider.value,e.provider.deps)}function cn(t,e){var n=(32768&e.flags)>0,r=pn(t,e.parent,n,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var o=e.outputs[i],a=r[o.propName].subscribe(ln(t,e.parent.index,o.eventName));t.disposables[e.outputIndex+i]=a.unsubscribe.bind(a)}return r}function ln(t,e,n){return function(r){try{return Qt(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}}function hn(t,e,n,r,i,o,a,s,u,c,l,h){var f=Dt(t,e.index),d=f.instance,p=!1,v=void 0,g=e.bindings.length;return g>0&&Yt(t,e,0,n)&&(p=!0,v=yn(t,f,e,0,n,v)),g>1&&Yt(t,e,1,r)&&(p=!0,v=yn(t,f,e,1,r,v)),g>2&&Yt(t,e,2,i)&&(p=!0,v=yn(t,f,e,2,i,v)),g>3&&Yt(t,e,3,o)&&(p=!0,v=yn(t,f,e,3,o,v)),g>4&&Yt(t,e,4,a)&&(p=!0,v=yn(t,f,e,4,a,v)),g>5&&Yt(t,e,5,s)&&(p=!0,v=yn(t,f,e,5,s,v)),g>6&&Yt(t,e,6,u)&&(p=!0,v=yn(t,f,e,6,u,v)),g>7&&Yt(t,e,7,c)&&(p=!0,v=yn(t,f,e,7,c,v)),g>8&&Yt(t,e,8,l)&&(p=!0,v=yn(t,f,e,8,l,v)),g>9&&Yt(t,e,9,h)&&(p=!0,v=yn(t,f,e,9,h,v)),v&&d.ngOnChanges(v),2&t.state&&65536&e.flags&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}function fn(t,e,n){for(var r=Dt(t,e.index),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Yt(t,e,s,n[s])&&(o=!0,a=yn(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),2&t.state&&65536&e.flags&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}function dn(t,e){var n,r=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:n=pn(t,e.parent,r,i.value,i.deps);break;case 1024:n=vn(t,e.parent,r,i.value,i.deps);break;case 2048:n=gn(t,e.parent,r,i.deps[0]);break;case 256:n=i.value}return n}function pn(t,e,n,r,i){var o,a=i.length;switch(a){case 0:o=new r;break;case 1:o=new r(gn(t,e,n,i[0]));break;case 2:o=new r(gn(t,e,n,i[0]),gn(t,e,n,i[1]));break;case 3:o=new r(gn(t,e,n,i[0]),gn(t,e,n,i[1]),gn(t,e,n,i[2]));break;default:for(var s=new Array(a),u=0;u<a;u++)s[u]=gn(t,e,n,i[u]);o=new(r.bind.apply(r,[void 0].concat(s)))}return o}function vn(t,e,n,r,i){var o,a=i.length;switch(a){case 0:o=r();break;case 1:o=r(gn(t,e,n,i[0]));break;case 2:o=r(gn(t,e,n,i[0]),gn(t,e,n,i[1]));break;case 3:o=r(gn(t,e,n,i[0]),gn(t,e,n,i[1]),gn(t,e,n,i[2]));break;default:for(var s=Array(a),u=0;u<a;u++)s[u]=gn(t,e,n,i[u]);o=r.apply(void 0,s)}return o}function gn(t,e,n,r,i){if(void 0===i&&(i=zi.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;for(a===Za&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(a){case Wa:var s=mn(t,e,n);return en(s);case Ya:var s=mn(t,e,n);return s.renderer;case Xa:return new Ho(At(t,e.index).renderElement);case Ka:return At(t,e.index).viewContainer;case Ga:if(e.element.template)return At(t,e.index).template;break;case Za:return Qe(mn(t,e,n));case Qa:return $e(t,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var c=Dt(t,u.index);return c.instance===Ja&&(c.instance=dn(t,u)),c.instance}}n=ne(t),e=$t(t),t=t.parent}var l=o.root.injector.get(r.token,$a);return l!==$a||i===$a?l:o.root.ngModule.injector.get(r.token,i)}function mn(t,e,n){var r;if(n)r=At(t,e.index).componentView;else for(r=t;r.parent&&!ne(r);)r=r.parent;return r}function yn(t,e,n,r,i,o){if(32768&n.flags){var a=At(t,n.parent.index).componentView;2&a.def.flags&&(a.state|=8)}var s=n.bindings[r],u=s.name;if(e.instance[u]=i,524288&n.flags){o=o||{};var c=t.oldValues[n.bindingIndex+r];c instanceof ea&&(c=c.wrapped);o[n.bindings[r].nonMinifiedName]=new na(c,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function bn(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0;r<n.length;r++){var i=n[r],o=i.parent;for(!o&&i.flags&e&&xn(t,r,i.flags&e),0==(i.childFlags&e)&&(r+=i.childCount);o&&1&o.flags&&r===o.index+o.childCount;)o.directChildFlags&e&&_n(t,o,e),o=o.parent}}function _n(t,e,n){for(var r=e.index+1;r<=e.index+e.childCount;r++){var i=t.def.nodes[r];i.flags&n&&xn(t,r,i.flags&n),r+=i.childCount}}function xn(t,e,n){var r=Dt(t,e).instance;r!==Ja&&(ka.setCurrentNode(t,e),1048576&n&&r.ngAfterContentInit(),2097152&n&&r.ngAfterContentChecked(),4194304&n&&r.ngAfterViewInit(),8388608&n&&r.ngAfterViewChecked(),131072&n&&r.ngOnDestroy())}function wn(t,e,n){var r=[];for(var i in n){var o=n[i];r.push({propName:i,bindingType:o})}return{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ie(e),bindings:r},ngContent:null}}function Mn(){return new Vo}function Sn(t){for(var e=t.def.nodeMatchedQueries;t.parent&&re(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.index+n.childCount,i=0;i<=r;i++){var o=t.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&jt(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.index)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var i=0;i<t.def.nodes.length;i++){var o=t.def.nodes[i];134217728&o.flags&&536870912&o.flags&&jt(t,i).setDirty(),i+=o.childCount}}function kn(t,e){var n=jt(t,e.index);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=En(t,o.index,o.index+o.childCount,e.query,[]),r=Dt(t,e.parent.index).instance}else 134217728&e.flags&&(i=En(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function En(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(On(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=At(t,o);if(16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=Jt(h);f&&f===u&&En(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var l=0;l<d.length;l++){var p=d[l];En(p,0,p.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function On(t,e,n){if(null!=n){var r=void 0;switch(n){case 1:r=At(t,e.index).renderElement;break;case 0:r=new Ho(At(t,e.index).renderElement);break;case 2:r=At(t,e.index).template;break;case 3:r=At(t,e.index).viewContainer;break;case 4:r=Dt(t,e.index).instance}return r}}function Tn(t,e,n){var r=se(t,e,n);if(r){fe(t,n.ngContent.index,1,r,null,void 0)}}function Cn(t){for(var e=Object.keys(t),n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[t[o]]=o}return zn(64,r)}function zn(t,e){for(var n=new Array(e.length),r=0;r<e.length;r++){var i=e[r];n[r]={flags:8,name:i,ns:null,nonMinifiedName:i,securityContext:null,suffix:null}}return{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:n,bindingFlags:ge(n),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Pn(t,e){return{value:void 0}}function An(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&Xt(t,e,0,n)&&(d=!0),p>1&&Xt(t,e,1,r)&&(d=!0),p>2&&Xt(t,e,2,i)&&(d=!0),p>3&&Xt(t,e,3,o)&&(d=!0),p>4&&Xt(t,e,4,a)&&(d=!0),p>5&&Xt(t,e,5,s)&&(d=!0),p>6&&Xt(t,e,6,u)&&(d=!0),p>7&&Xt(t,e,7,c)&&(d=!0),p>8&&Xt(t,e,8,l)&&(d=!0),p>9&&Xt(t,e,9,h)&&(d=!0),d){var v=It(t,e.index),g=void 0;switch(201347067&e.flags){case 32:g=new Array(f.length),p>0&&(g[0]=n),p>1&&(g[1]=r),p>2&&(g[2]=i),p>3&&(g[3]=o),p>4&&(g[4]=a),p>5&&(g[5]=s),p>6&&(g[6]=u),p>7&&(g[7]=c),p>8&&(g[8]=l),p>9&&(g[9]=h);break;case 64:g={},p>0&&(g[f[0].name]=n),p>1&&(g[f[1].name]=r),p>2&&(g[f[2].name]=i),p>3&&(g[f[3].name]=o),p>4&&(g[f[4].name]=a),p>5&&(g[f[5].name]=s),p>6&&(g[f[6].name]=u),p>7&&(g[f[7].name]=c),p>8&&(g[f[8].name]=l),p>9&&(g[f[9].name]=h);break;case 128:var m=n;switch(p){case 1:g=m.transform(n);break;case 2:g=m.transform(r);break;case 3:g=m.transform(r,i);break;case 4:g=m.transform(r,i,o);break;case 5:g=m.transform(r,i,o,a);break;case 6:g=m.transform(r,i,o,a,s);break;case 7:g=m.transform(r,i,o,a,s,u);break;case 8:g=m.transform(r,i,o,a,s,u,c);break;case 9:g=m.transform(r,i,o,a,s,u,c,l);break;case 10:g=m.transform(r,i,o,a,s,u,c,l,h)}}v.value=g}return d}function Dn(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Xt(t,e,o,n[o])&&(i=!0);if(i){var a=It(t,e.index),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(var o=0;o<n.length;o++)s[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);s=u.transform.apply(u,c)}a.value=s}return i}function In(t,e){for(var n=new Array(e.length-1),r=1;r<e.length;r++)n[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:e[r]};return{index:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:n,bindingFlags:ge(n),outputs:[],element:null,provider:null,text:{prefix:e[0]},query:null,ngContent:null}}function jn(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=se(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Rn(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&Xt(t,e,0,n)&&(f=!0),p>1&&Xt(t,e,1,r)&&(f=!0),p>2&&Xt(t,e,2,i)&&(f=!0),p>3&&Xt(t,e,3,o)&&(f=!0),p>4&&Xt(t,e,4,a)&&(f=!0),p>5&&Xt(t,e,5,s)&&(f=!0),p>6&&Xt(t,e,6,u)&&(f=!0),p>7&&Xt(t,e,7,c)&&(f=!0),p>8&&Xt(t,e,8,l)&&(f=!0),p>9&&Xt(t,e,9,h)&&(f=!0),f){var v=e.text.prefix;p>0&&(v+=Nn(n,d[0])),p>1&&(v+=Nn(r,d[1])),p>2&&(v+=Nn(i,d[2])),p>3&&(v+=Nn(o,d[3])),p>4&&(v+=Nn(a,d[4])),p>5&&(v+=Nn(s,d[5])),p>6&&(v+=Nn(u,d[6])),p>7&&(v+=Nn(c,d[7])),p>8&&(v+=Nn(l,d[8])),p>9&&(v+=Nn(h,d[9]));var g=Pt(t,e.index).renderText;t.renderer.setValue(g,v)}return f}function Ln(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Xt(t,e,o,n[o])&&(i=!0);if(i){for(var a="",o=0;o<n.length;o++)a+=Nn(n[o],r[o]);a=e.text.prefix+a;var s=Pt(t,e.index).renderText;t.renderer.setValue(s,a)}return i}function Nn(t,e){return(null!=t?t.toString():"")+e.suffix}function Fn(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=!1,h=!1,f=null,d=0;d<e.length;d++){for(;c&&d>c.index+c.childCount;){var p=c.parent;p&&(p.childFlags|=c.childFlags,p.childMatchedQueries|=c.childMatchedQueries),c=p}var v=e[d];v.index=d,v.parent=c,v.bindingIndex=i,v.outputIndex=o;var g=void 0;if(g=c&&1&c.flags&&!c.element.name?c.renderParent:c,v.renderParent=g,v.element){var m=v.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,l=!1,h=!1}if(Bn(c,v,e.length),a|=v.flags,u|=v.matchedQueryIds,v.element&&v.element.template&&(u|=v.element.template.nodeMatchedQueries),c?(c.childFlags|=v.flags,c.directChildFlags|=v.flags,c.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(c.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,i+=v.bindings.length,o+=v.outputs.length,!g&&3&v.flags&&(f=v),20224&v.flags){l||(l=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(8192&v.flags),b=0!=(32768&v.flags);!y||b?c.element.publicProviders[qt(v.provider.token)]=v:(h||(h=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[qt(v.provider.token)]=v),b&&(c.element.componentProvider=v)}v.childCount&&(c=v)}for(;c;){var p=c.parent;p&&(p.childFlags|=c.childFlags,p.childMatchedQueries|=c.childMatchedQueries),c=p}var _=function(t,n,r,i){return e[n].element.handleEvent(t,r,i)};return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Ea,updateRenderer:r||Ea,handleEvent:_||Ea,bindingCount:i,outputCount:o,lastRenderRootNode:f}}function Bn(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.index+"!")}if(20224&e.flags){if(0==(1&(t?t.flags:0)))throw new Error("Illegal State: Provider/Directive nodes need to be children of elements or anchors, at index "+e.index+"!")}if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.index+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.index+"!")}if(e.childCount){var i=t?t.index+t.childCount:n-1;if(e.index<=i&&e.index+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.index+"!")}}function Hn(t,e,n,r){var i=Un(t.root,t.renderer,t,e,n);return Wn(i,t.component,r),Yn(i),i}function qn(t,e,n){var r=Un(t,t.renderer,null,null,e);return Wn(r,n,n),Yn(r),r}function Vn(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,Un(t.root,i,t,e.element.componentProvider,n)}function Un(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a}}function Wn(t,e,n){t.component=e,t.context=n}function Yn(t){var e;if(ne(t)){var n=t.parentNodeDef;e=At(t.parent,n.parent.index).renderElement}for(var r=t.def,i=t.nodes,o=0;o<r.nodes.length;o++){var a=r.nodes[o];ka.setCurrentNode(t,o);var s=void 0;switch(201347067&a.flags){case 1:var u=xe(t,e,a),c=void 0;if(33554432&a.flags){var l=ue(a.element.componentView);c=ka.createComponentView(t,a,l,u)}we(t,c,a,u),s={renderElement:u,componentView:c,viewContainer:null,template:a.element.template?Je(t,a):void 0},16777216&a.flags&&(s.viewContainer=Ze(t,a,s));break;case 2:s=jn(t,e,a);break;case 512:case 1024:case 2048:case 256:var h=sn(t,a);s={instance:h};break;case 16:var h=un(t,a);s={instance:h};break;case 16384:var h=cn(t,a);if(s={instance:h},32768&a.flags){Wn(At(t,a.parent.index).componentView,h,h)}break;case 32:case 64:case 128:s=Pn(t,a);break;case 67108864:case 134217728:s=Mn();break;case 8:Tn(t,e,a),s=void 0}i[o]=s}or(t,ts.CreateViewNodes),cr(t,201326592,268435456,0)}function Xn(t){Zn(t),ka.updateDirectives(t,1),ar(t,ts.CheckNoChanges),ka.updateRenderer(t,1),or(t,ts.CheckNoChanges),t.state&=-97}function Kn(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Zn(t),ka.updateDirectives(t,0),ar(t,ts.CheckAndUpdate),cr(t,67108864,536870912,0),bn(t,2097152|(2&t.state?1048576:0)),ka.updateRenderer(t,0),or(t,ts.CheckAndUpdate),cr(t,134217728,536870912,0),bn(t,8388608|(2&t.state?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97}function Gn(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?Qn(t,e,r,i,o,a,s,u,c,l,h,f):Jn(t,e,r)}function Zn(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=At(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,Zt(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Qn(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1;switch(201347067&e.flags){case 1:f=Se(t,e,n,r,i,o,a,s,u,c,l,h);break;case 2:f=Rn(t,e,n,r,i,o,a,s,u,c,l,h);break;case 16384:f=hn(t,e,n,r,i,o,a,s,u,c,l,h);break;case 32:case 64:case 128:f=An(t,e,n,r,i,o,a,s,u,c,l,h)}return f}function Jn(t,e,n){var r=!1;switch(201347067&e.flags){case 1:r=ke(t,e,n);break;case 2:r=Ln(t,e,n);break;case 16384:r=fn(t,e,n);break;case 32:case 64:case 128:r=Dn(t,e,n)}if(r)for(var i=e.bindings.length,o=e.bindingIndex,a=t.oldValues,s=0;s<i;s++)a[o+s]=n[s];return r}function $n(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?tr(t,e,r,i,o,a,s,u,c,l,h,f):er(t,e,r),!1}function tr(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&Kt(t,e,0,n),f>1&&Kt(t,e,1,r),f>2&&Kt(t,e,2,i),f>3&&Kt(t,e,3,o),f>4&&Kt(t,e,4,a),f>5&&Kt(t,e,5,s),f>6&&Kt(t,e,6,u),f>7&&Kt(t,e,7,c),f>8&&Kt(t,e,8,l),f>9&&Kt(t,e,9,h)}function er(t,e,n){for(var r=0;r<n.length;r++)Kt(t,e,r,n[r])}function nr(t,e){if(jt(t,e.index).dirty)throw Rt(ka.createDebugContext(t,e.index),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function rr(t){if(!(128&t.state)){if(ar(t,ts.Destroy),or(t,ts.Destroy),bn(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();Ve(t),t.renderer.destroyNode&&ir(t),ne(t)&&t.renderer.destroy(),t.state|=128}}function ir(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(At(t,n).renderElement):2&r.flags&&t.renderer.destroyNode(Pt(t,n).renderText)}}function or(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?sr(At(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ar(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=At(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)sr(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function sr(t,e){var n=t.state;switch(e){case ts.CheckNoChanges:0==(128&n)&&(12==(12&n)?Xn(t):64&n&&ur(t,ts.CheckNoChangesProjectedViews));break;case ts.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Xn(t):64&n&&ur(t,e));break;case ts.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Kn(t):64&n&&ur(t,ts.CheckAndUpdateProjectedViews));break;case ts.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Kn(t):64&n&&ur(t,e));break;case ts.Destroy:rr(t);break;case ts.CreateViewNodes:Yn(t)}}function ur(t,e){ar(t,e),or(t,e)}function cr(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(ka.setCurrentNode(t,a.index),r){case 0:kn(t,a);break;case 1:nr(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}function lr(){if(!es){es=!0;var t=at()?fr():hr();ka.setCurrentNode=t.setCurrentNode,ka.createRootView=t.createRootView,ka.createEmbeddedView=t.createEmbeddedView,ka.createComponentView=t.createComponentView,ka.createNgModuleRef=t.createNgModuleRef,ka.overrideProvider=t.overrideProvider,ka.clearProviderOverrides=t.clearProviderOverrides,ka.checkAndUpdateView=t.checkAndUpdateView,ka.checkNoChangesView=t.checkNoChangesView,ka.destroyView=t.destroyView,ka.resolveDep=gn,ka.createDebugContext=t.createDebugContext,ka.handleEvent=t.handleEvent,ka.updateDirectives=t.updateDirectives,ka.updateRenderer=t.updateRenderer,ka.dirtyParentQueries=Sn}}function hr(){return{setCurrentNode:function(){},createRootView:dr,createEmbeddedView:Hn,createComponentView:Vn,createNgModuleRef:nn,overrideProvider:Ea,clearProviderOverrides:Ea,checkAndUpdateView:Kn,checkNoChangesView:Xn,destroyView:rr,createDebugContext:function(t,e){return new us(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Mr:Sr,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Mr:Sr,t)}}}function fr(){return{setCurrentNode:Tr,createRootView:pr,createEmbeddedView:gr,createComponentView:mr,createNgModuleRef:yr,overrideProvider:br,clearProviderOverrides:_r,checkAndUpdateView:kr,checkNoChangesView:Er,destroyView:Or,createDebugContext:function(t,e){return new us(t,e)},handleEvent:Cr,updateDirectives:zr,updateRenderer:Pr}}function dr(t,e,n,r,i,o){return qn(vr(t,i,i.injector.get(No),e,n),r,o)}function pr(t,e,n,r,i,o){var a=i.injector.get(No),s=vr(t,i,new cs(a),e,n),u=xr(r);return qr(rs.create,qn,null,[s,u,o])}function vr(t,e,n,r,i){var o=e.injector.get(Sa),a=e.injector.get(Ii);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function gr(t,e,n,r){var i=xr(n);return qr(rs.create,Hn,null,[t,e,i,r])}function mr(t,e,n,r){var i=xr(n);return qr(rs.create,Vn,null,[t,e,i,r])}function yr(t,e,n,r){return nn(t,e,n,wr(r))}function br(t){ns.set(t.token,t)}function _r(){ns.clear()}function xr(t){if(0===ns.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&ns.has(i.provider.token)&&(e.push(n.index),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Ea});for(var n=0;n<e.length;n++)!function(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){r.flags|=4096;var i=r.provider,o=ns.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=ae(o.deps),i.value=o.value)}}}(t,e[n]);return t}function wr(t){return 0!==ns.size&&function(t){return t.providers.some(function(t){return!!(3840&t.flags)&&ns.has(t.token)})}(t)?(t=t.factory(function(){return Ea}),function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];n.flags|=4096;var r=ns.get(n.token);r&&(n.flags=-3841&n.flags|r.flags,n.deps=ae(r.deps),n.value=r.value)}}(t),t):t}function Mr(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return Gn(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?It(t,e).value:void 0}function Sr(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return $n(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?It(t,e).value:void 0}function kr(t){return qr(rs.detectChanges,Kn,null,[t])}function Er(t){return qr(rs.checkNoChanges,Xn,null,[t])}function Or(t){return qr(rs.destroy,rr,null,[t])}function Tr(t,e){os=t,as=e}function Cr(t,e,n,r){return Tr(t,e),qr(rs.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function zr(t,e){function n(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ar(t,a,r,i):Dr(t,a,r,i),16384&a.flags&&Tr(t,Lr(t,n)),224&a.flags?It(t,a.index).value:void 0}if(128&t.state)throw Ht(rs[is]);return Tr(t,Lr(t,0)),t.def.updateDirectives(n,t)}function Pr(t,e){function n(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Ar(t,a,r,i):Dr(t,a,r,i),3&a.flags&&Tr(t,Nr(t,n)),224&a.flags?It(t,a.index).value:void 0}if(128&t.state)throw Ht(rs[is]);return Tr(t,Nr(t,0)),t.def.updateRenderer(n,t)}function Ar(t,e,n,r){if(Gn.apply(void 0,[t,e,n].concat(r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[Ir(s.nonMinifiedName)]=Rr(u))}var c=e.parent,l=At(t,c.index).renderElement;if(c.element.name)for(var h in o){var u=o[h];null!=u?t.renderer.setAttribute(l,h,u):t.renderer.removeAttribute(l,h)}else t.renderer.setValue(l,"bindings="+JSON.stringify(o,null,2))}}}function Dr(t,e,n,r){$n.apply(void 0,[t,e,n].concat(r))}function Ir(t){return"ng-reflect-"+(t=jr(t.replace(/[$@]/g,"_")))}function jr(t){return t.replace(ss,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})}function Rr(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Lr(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Nr(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Fr(t,e){for(var n=-1,r=0;r<=e;r++){3&t.nodes[r].flags&&n++}return n}function Br(t){for(;t&&!ne(t);)t=t.parent;return t.parent?At(t.parent,$t(t).index):null}function Hr(t,e,n){for(var r in e.references)n[r]=On(t,e,e.references[r])}function qr(t,e,n,r){var i=is,o=os,a=as;try{is=t;var s=e.apply(n,r);return os=o,as=a,is=i,s}catch(t){if(Bt(t)||!os)throw t;throw Lt(t,Vr())}}function Vr(){return os?new us(os,as):null}function Ur(t,e,n){return new hs(t,e,n)}n.d(e,"g",function(){return jo}),n.d(e,"_3",function(){return ot}),n.d(e,"_5",function(){return at}),n.d(e,"_2",function(){return ut}),n.d(e,"F",function(){return Ao}),n.d(e,"c",function(){return $i}),n.d(e,"L",function(){return eo}),n.d(e,"K",function(){return no}),n.d(e,"b",function(){return ro}),n.d(e,"d",function(){return Qi}),n.d(e,"e",function(){return Ji}),n.d(e,"_4",function(){return mt}),n.d(e,"X",function(){return So}),n.d(e,"_7",function(){return it}),n.d(e,"A",function(){return _a}),n.d(e,"f",function(){return wa}),n.d(e,"p",function(){return wo}),n.d(e,"o",function(){return Ii}),n.d(e,"R",function(){return Sa}),n.d(e,"S",function(){return Ma}),n.d(e,"a",function(){return oi}),n.d(e,"h",function(){return ai}),n.d(e,"l",function(){return ui}),n.d(e,"m",function(){return hi}),n.d(e,"r",function(){return vi}),n.d(e,"s",function(){return gi}),n.d(e,"x",function(){return di}),n.d(e,"J",function(){return pi}),n.d(e,"M",function(){return fi}),n.d(e,"B",function(){return mi}),n.d(e,"_0",function(){return yi}),n.d(e,"Y",function(){return bi}),n.d(e,"w",function(){return zi}),n.d(e,"v",function(){return Qr}),n.d(e,"H",function(){return Zr}),n.d(e,"t",function(){return xi}),n.d(e,"I",function(){return wi}),n.d(e,"u",function(){return Mi}),n.d(e,"T",function(){return ki}),n.d(e,"q",function(){return Ei}),n.d(e,"G",function(){return Mo}),n.d(e,"N",function(){return Lo}),n.d(e,"O",function(){return Bo}),n.d(e,"P",function(){return No}),n.d(e,"Q",function(){return Fo}),n.d(e,"j",function(){return oo}),n.d(e,"k",function(){return ho}),n.d(e,"n",function(){return Ho}),n.d(e,"C",function(){return yo}),n.d(e,"E",function(){return mo}),n.d(e,"D",function(){return qo}),n.d(e,"U",function(){return Yo}),n.d(e,"V",function(){return Uo}),n.d(e,"W",function(){return Xo}),n.d(e,"Z",function(){return Ko}),n.d(e,"i",function(){return Go}),n.d(e,"y",function(){return fa}),n.d(e,"z",function(){return da}),n.d(e,"_1",function(){return ea}),n.d(e,"_6",function(){return ba}),n.d(e,"_20",function(){return xt}),n.d(e,"_9",function(){return io}),n.d(e,"_8",function(){return vo}),n.d(e,"_18",function(){return ei}),n.d(e,"_32",function(){return a}),n.d(e,"_21",function(){return Y}),n.d(e,"_22",function(){return W}),n.d(e,"_10",function(){return be}),n.d(e,"_11",function(){return Ge}),n.d(e,"_12",function(){return Ur}),n.d(e,"_13",function(){return Ut}),n.d(e,"_14",function(){return rn}),n.d(e,"_16",function(){return _e}),n.d(e,"_19",function(){return me}),n.d(e,"_26",function(){return Ae}),n.d(e,"_27",function(){return Pe}),n.d(e,"_28",function(){return tn}),n.d(e,"_29",function(){return on}),n.d(e,"_30",function(){return Cn}),n.d(e,"_31",function(){return wn}),n.d(e,"_33",function(){return In}),n.d(e,"_34",function(){return Vt}),n.d(e,"_35",function(){return Fn}),n.d(e,"_23",function(){return Tt}),n.d(e,"_24",function(){return Ct}),n.d(e,"_25",function(){return zt}),n.d(e,"_15",function(){return Ro}),n.d(e,"_17",function(){return X});var Wr=n("6Xbx"),Yr=n("bKpL"),Xr=(n.n(Yr),n("LEug")),Kr=(n.n(Xr),n("CE6k")),Gr=(n.n(Kr),n("rlar")),Zr=(n.n(Gr),function(){function t(t){this._desc=t}return t.prototype.toString=function(){return"Token "+this._desc},t}()),Qr=function(t){function e(e){return t.call(this,e)||this}return Wr.a(e,t),e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(Zr),Jr="undefined"!=typeof window&&window,$r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ti=void 0!==t&&t,ei=Jr||ti||$r,ni=null,ri=0,ii=ei.Reflect,oi=new Qr("AnalyzeForEntryComponents"),ai=f("Attribute",function(t){return{attributeName:t}}),si=function(){function t(){}return t}(),ui=d("ContentChildren",function(t,e){return void 0===e&&(e={}),Object.assign({selector:t,first:!1,isViewQuery:!1,descendants:!1},e)},si),ci=(d("ContentChild",function(t,e){return void 0===e&&(e={}),Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},si),d("ViewChildren",function(t,e){return void 0===e&&(e={}),Object.assign({selector:t,first:!1,isViewQuery:!0,descendants:!0},e)},si),d("ViewChild",function(t,e){return Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},si),{});ci.OnPush=0,ci.Default=1,ci[ci.OnPush]="OnPush",ci[ci.Default]="Default";var li={};li.CheckOnce=0,li.Checked=1,li.CheckAlways=2,li.Detached=3,li.Errored=4,li.Destroyed=5,li[li.CheckOnce]="CheckOnce",li[li.Checked]="Checked",li[li.CheckAlways]="CheckAlways",li[li.Detached]="Detached",li[li.Errored]="Errored",li[li.Destroyed]="Destroyed";var hi=l("Directive",function(t){return void 0===t&&(t={}),t}),fi=(l("Component",function(t){return void 0===t&&(t={}),Object.assign({changeDetection:ci.Default},t)},hi),l("Pipe",function(t){return Object.assign({pure:!0},t)})),di=d("Input",function(t){return{bindingPropertyName:t}}),pi=d("Output",function(t){return{bindingPropertyName:t}}),vi=d("HostBinding",function(t){return{hostPropertyName:t}}),gi=d("HostListener",function(t,e){return{eventName:t,args:e}}),mi=l("NgModule",function(t){return t}),yi={};yi.Emulated=0,yi.Native=1,yi.None=2,yi[yi.Emulated]="Emulated",yi[yi.Native]="Native",yi[yi.None]="None";var bi=(function(){function t(t){void 0===t&&(t={}),this.templateUrl=t.templateUrl,this.template=t.template,this.styleUrls=t.styleUrls,this.styles=t.styles,this.encapsulation=t.encapsulation,this.animations=t.animations,this.interpolation=t.interpolation}}(),function(){function t(t){this.full=t}return Object.defineProperty(t.prototype,"major",{get:function(){return this.full.split(".")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minor",{get:function(){return this.full.split(".")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patch",{get:function(){return this.full.split(".").slice(2).join(".")},enumerable:!0,configurable:!0}),t}()),_i=new bi("4.3.5"),xi=f("Inject",function(t){return{token:t}}),wi=f("Optional"),Mi=l("Injectable"),Si=f("Self"),ki=f("SkipSelf"),Ei=f("Host"),Oi=new Object,Ti=Oi,Ci=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Oi),e===Oi)throw new Error("No provider for "+a(t)+"!");return e},t}(),zi=function(){function t(){}return t.prototype.get=function(t,e){},t.prototype.get=function(t,e){},t}();zi.THROW_IF_NOT_FOUND=Oi,zi.NULL=new Ci;var Pi="ngDebugContext",Ai="ngOriginalError",Di="ngErrorLogger",Ii=function(){function t(t){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=y(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?g(t)?g(t):this._findContext(m(t)):null},t.prototype._findOriginalError=function(t){for(var e=m(t);e&&m(e);)e=m(e);return e},t}(),ji=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!")}return Object.defineProperty(t.prototype,"displayName",{get:function(){return a(this.token)},enumerable:!0,configurable:!0}),t.get=function(t){return Li.get(v(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return Li.numberOfKeys},enumerable:!0,configurable:!0}),t}(),Ri=function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof ji)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new ji(t,ji.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}(),Li=new Ri,Ni=Function,Fi=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Bi=function(){function t(t){this._reflect=t||ei.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,[void 0].concat(e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n=void 0===t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)void 0===t?n[r]=[]:t[r]!=Object?n[r]=[t[r]]:n[r]=[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){if(Fi.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var n=t.ctorParameters;if(n&&n!==e.ctorParameters){var r="function"==typeof n?n():n,i=r.map(function(t){return t&&t.type}),o=r.map(function(t){return t&&D(t.decorators)});return this._zipTypesAndAnnotations(i,o)}if(null!=this._reflect&&null!=this._reflect.getOwnMetadata){var o=this._reflect.getOwnMetadata("parameters",t),i=this._reflect.getOwnMetadata("design:paramtypes",t);if(i||o)return this._zipTypesAndAnnotations(i,o)}return new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!A(t))return[];var e=I(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?D(t.decorators):this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("annotations",t):null},t.prototype.annotations=function(t){if(!A(t))return[];var e=I(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=D(r[t])}),i}return this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("propMetadata",t):null},t.prototype.propMetadata=function(t){if(!A(t))return{};var e=I(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach(function(t){n[t]=r[t]})}var i=this._ownPropMetadata(t,e);return i&&Object.keys(i).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,n[t]),e.push.apply(e,i[t]),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof Ni&&e in t.prototype},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){var e="if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);";return new Function("o","args",e)},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+a(t)},t.prototype.resourceUri=function(t){return"./"+a(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}(),Hi=function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}(),qi=new Hi(new Bi),Vi=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),Ui=[],Wi=function(){function t(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n}return Object.defineProperty(t.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),t}(),Yi=function(){function t(t,e){this.factory=t,this.dependencies=e}return t}(),Xi=new Object,Ki=function(){function t(){}return t.resolve=function(t){return L(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new Gi(t,e)},t.prototype.parent=function(){},t.prototype.resolveAndCreateChild=function(t){},t.prototype.createChildFromResolved=function(t){},t.prototype.resolveAndInstantiate=function(t){},t.prototype.instantiateResolved=function(t){},t.prototype.get=function(t,e){},t}(),Gi=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this._parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=Xi}return t.prototype.get=function(t,e){return void 0===e&&(e=Ti),this._getByKey(ji.get(t),null,e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),t.prototype.resolveAndCreateChild=function(t){var e=Ki.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n._parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(Ki.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw z(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw E(this,t.key);return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r=this,i=e.factory;try{n=e.dependencies.map(function(t){return r._getByReflectiveDependency(t)})}catch(e){throw e.addKey&&e.addKey(this,t.key),e}var o;try{o=i.apply(void 0,n)}catch(e){throw O(this,e,e.stack,t.key)}return o},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:Ti)},t.prototype._getByKey=function(t,e,n){return t===Zi?this:e instanceof Si?this._getByKeySelf(t,n):this._getByKeyDefault(t,n,e)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===Xi&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return Xi},t.prototype._throwOrNull=function(t,e){if(e!==Ti)return e;throw k(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==Xi?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof ki?this._parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==Xi)return a;i=o._parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+U(this,function(t){return' "'+t.key.displayName+'" '}).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t}(),Zi=ji.get(zi),Qi=new Qr("Application Initializer"),Ji=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this._done=!1,this._donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t._done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();W(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},Object.defineProperty(t.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"donePromise",{get:function(){return this._donePromise},enumerable:!0,configurable:!0}),t}();Ji.decorators=[{type:Mi}],Ji.ctorParameters=function(){return[{type:Array,decorators:[{type:xi,args:[Qi]},{type:wi}]}]};var $i=new Qr("AppId"),to={provide:$i,useFactory:X,deps:[]},eo=new Qr("Platform Initializer"),no=new Qr("Platform ID"),ro=new Qr("appBootstrapListener"),io=(new Qr("Application Packages Root URL"),function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}());io.decorators=[{type:Mi}],io.ctorParameters=function(){return[]};var oo=(function(){function t(t,e){this.ngModuleFactory=t,this.componentFactories=e}}(),function(){function t(){}return t.prototype.compileModuleSync=function(t){throw G()},t.prototype.compileModuleAsync=function(t){throw G()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw G()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw G()},t.prototype.getNgContentSelectors=function(t){throw G()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}());oo.decorators=[{type:Mi}],oo.ctorParameters=function(){return[]};var ao=(new Qr("compilerOptions"),function(){function t(){}return t.prototype.createCompiler=function(t){},t}()),so=function(){function t(){}return t.prototype.location=function(){},t.prototype.injector=function(){},t.prototype.instance=function(){},t.prototype.hostView=function(){},t.prototype.changeDetectorRef=function(){},t.prototype.componentType=function(){},t.prototype.destroy=function(){},t.prototype.onDestroy=function(t){},t}(),uo=function(){function t(){}return t.prototype.selector=function(){},t.prototype.componentType=function(){},t.prototype.ngContentSelectors=function(){},t.prototype.inputs=function(){},t.prototype.outputs=function(){},t.prototype.create=function(t,e,n,r){},t}(),co="ngComponent",lo=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw Z(t)},t}(),ho=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){},t}();ho.NULL=new lo;var fo,po,vo=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Z(t);return new go(e,this._ngModule)},t}(),go=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r}return Wr.a(e,t),Object.defineProperty(e.prototype,"selector",{get:function(){return this.factory.selector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this.factory.componentType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngContentSelectors",{get:function(){return this.factory.ngContentSelectors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.factory.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.factory.outputs},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(uo),mo=function(){function t(){}return t.prototype.injector=function(){},t.prototype.componentFactoryResolver=function(){},t.prototype.instance=function(){},t.prototype.destroy=function(){},t.prototype.onDestroy=function(t){},t}(),yo=function(){function t(){}return t.prototype.moduleType=function(){},t.prototype.create=function(t){},t}(),bo=function(){var t=ei.wtf;return!(!t||!(fo=t.trace))&&(po=fo.events,!0)}(),_o=bo?Q:function(t,e){return $},xo=bo?J:function(t,e){return e},wo=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Wr.a(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};return e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),t.prototype.subscribe.call(this,i,o,a)},e}(Gr.Subject),Mo=function(){function t(t){var e=t.enableLongStackTrace,n=void 0!==e&&e;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wo(!1),this.onMicrotaskEmpty=new wo(!1),this.onStable=new wo(!1),this.onError=new wo(!1),"undefined"==typeof Zone)throw new Error("Angular requires Zone.js prolyfill.");Zone.assertZonePatched();var r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.wtfZoneSpec&&(r._inner=r._inner.fork(Zone.wtfZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),et(r)}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t){return this._inner.run(t)},t.prototype.runGuarded=function(t){return this._inner.runGuarded(t)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}(),So=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Mo.assertNotInAngularZone(),i(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?i(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findBindings=function(t,e,n){return[]},t.prototype.findProviders=function(t,e,n){return[]},t}();So.decorators=[{type:Mi}],So.ctorParameters=function(){return[{type:Mo}]};var ko=function(){function t(){this._applications=new Map,To.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),To.findTestabilityInTree(this,t,e)},t}();ko.decorators=[{type:Mi}],ko.ctorParameters=function(){return[]};var Eo,Oo=function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}(),To=new Oo,Co=!0,zo=!1,Po=new Qr("AllowMultipleToken"),Ao=function(){function t(t,e){this.name=t,this.token=e}return t}(),Do=function(){function t(){}return t.prototype.bootstrapModuleFactory=function(t){},t.prototype.bootstrapModule=function(t,e){},t.prototype.onDestroy=function(t){},t.prototype.injector=function(){},t.prototype.destroy=function(){},t.prototype.destroyed=function(){},t}(),Io=function(t){function e(e){var n=t.call(this)||this;return n._injector=e,n._modules=[],n._destroyListeners=[],n._destroyed=!1,n}return Wr.a(e,t),e.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},e.prototype.bootstrapModuleFactory=function(t){return this._bootstrapModuleFactoryWithZone(t)},e.prototype._bootstrapModuleFactoryWithZone=function(t,e){var n=this;return e||(e=new Mo({enableLongStackTrace:at()})),e.run(function(){var r=Ki.resolveAndCreate([{provide:Mo,useValue:e}],n.injector),i=t.create(r),o=i.injector.get(Ii,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(function(){return ft(n._modules,i)}),e.runOutsideAngular(function(){return e.onError.subscribe({next:function(t){o.handleError(t)}})}),ht(o,e,function(){var t=i.injector.get(Ji);return t.runInitializers(),t.donePromise.then(function(){return n._moduleDoBootstrap(i),i})})})},e.prototype.bootstrapModule=function(t,e){return void 0===e&&(e=[]),this._bootstrapModuleWithZone(t,e)},e.prototype._bootstrapModuleWithZone=function(t,e,n){var r=this;return void 0===e&&(e=[]),this.injector.get(ao).createCompiler(Array.isArray(e)?e:[e]).compileModuleAsync(t).then(function(t){return r._bootstrapModuleFactoryWithZone(t,n)})},e.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(jo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+a(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},e}(Do);Io.decorators=[{type:Mi}],Io.ctorParameters=function(){return[{type:zi}]};var jo=function(){function t(){}return t.prototype.bootstrap=function(t,e){},t.prototype.tick=function(){},t.prototype.componentTypes=function(){},t.prototype.components=function(){},t.prototype.attachView=function(t){},t.prototype.detachView=function(t){},t.prototype.viewCount=function(){},t.prototype.isStable=function(){},t}(),Ro=function(t){function e(e,n,r,o,a,s){var u=t.call(this)||this;u._zone=e,u._console=n,u._injector=r,u._exceptionHandler=o,u._componentFactoryResolver=a,u._initStatus=s,u._bootstrapListeners=[],u._rootComponents=[],u._rootComponentTypes=[],u._views=[],u._runningTick=!1,u._enforceNoNewChanges=!1,u._stable=!0,u._enforceNoNewChanges=at(),u._zone.onMicrotaskEmpty.subscribe({next:function(){u._zone.run(function(){u.tick()})}});var c=new Yr.Observable(function(t){u._stable=u._zone.isStable&&!u._zone.hasPendingMacrotasks&&!u._zone.hasPendingMicrotasks,u._zone.runOutsideAngular(function(){t.next(u._stable),t.complete()})}),l=new Yr.Observable(function(t){var e=u._zone.onStable.subscribe(function(){Mo.assertNotInAngularZone(),i(function(){u._stable||u._zone.hasPendingMacrotasks||u._zone.hasPendingMicrotasks||(u._stable=!0,t.next(!0))})}),n=u._zone.onUnstable.subscribe(function(){Mo.assertInAngularZone(),u._stable&&(u._stable=!1,u._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});return u._isStable=Object(Xr.merge)(c,Kr.share.call(l)),u}return Wr.a(e,t),e.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},e.prototype.detachView=function(t){var e=t;ft(this._views,e),e.detachFromAppRef()},e.prototype.bootstrap=function(t,e){var n=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");var r;r=t instanceof uo?t:this._componentFactoryResolver.resolveComponentFactory(t),this._rootComponentTypes.push(r.componentType);var i=r instanceof go?null:this._injector.get(mo),o=e||r.selector,a=r.create(zi.NULL,[],o,i);a.onDestroy(function(){n._unloadComponent(a)});var s=a.injector.get(So,null);return s&&a.injector.get(ko).registerApplication(a.location.nativeElement,s),this._loadComponent(a),at()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),a},e.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this._rootComponents.push(t),this._injector.get(ro,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},e.prototype._unloadComponent=function(t){this.detachView(t.hostView),ft(this._rootComponents,t)},e.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,xo(n)}},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentTypes",{get:function(){return this._rootComponentTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"components",{get:function(){return this._rootComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStable",{get:function(){return this._isStable},enumerable:!0,configurable:!0}),e}(jo);Ro._tickScope=_o("ApplicationRef#tick()"),Ro.decorators=[{type:Mi}],Ro.ctorParameters=function(){return[{type:Mo},{type:io},{type:zi},{type:Ii},{type:ho},{type:Ji}]};var Lo=(function(){function t(t,e,n,r,i,o){this.id=t,this.templateUrl=e,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o}}(),function(){function t(){}t.prototype.injector=function(){},t.prototype.component=function(){},t.prototype.providerTokens=function(){},t.prototype.references=function(){},t.prototype.context=function(){},t.prototype.source=function(){}}(),function(){function t(){}return t.prototype.selectRootElement=function(t,e){},t.prototype.createElement=function(t,e,n){},t.prototype.createViewRoot=function(t){},t.prototype.createTemplateAnchor=function(t,e){},t.prototype.createText=function(t,e,n){},t.prototype.projectNodes=function(t,e){},t.prototype.attachViewAfter=function(t,e){},t.prototype.detachView=function(t){},t.prototype.destroyView=function(t,e){},t.prototype.listen=function(t,e,n){},t.prototype.listenGlobal=function(t,e,n){},t.prototype.setElementProperty=function(t,e,n){},t.prototype.setElementAttribute=function(t,e,n){},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){},t.prototype.setElementStyle=function(t,e,n){},t.prototype.invokeElementMethod=function(t,e,n){},t.prototype.setText=function(t,e){},t.prototype.animate=function(t,e,n,r,i,o,a){},t}()),No=(new Qr("Renderer2Interceptor"),function(){function t(){}t.prototype.renderComponent=function(t){}}(),function(){function t(){}return t.prototype.createRenderer=function(t,e){},t.prototype.begin=function(){},t.prototype.end=function(){},t.prototype.whenRenderingDone=function(){},t}()),Fo={};Fo.Important=1,Fo.DashCase=2,Fo[Fo.Important]="Important",Fo[Fo.DashCase]="DashCase";var Bo=function(){function t(){}return t.prototype.data=function(){},t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){},t.prototype.createComment=function(t){},t.prototype.createText=function(t){},t.prototype.appendChild=function(t,e){},t.prototype.insertBefore=function(t,e,n){},t.prototype.removeChild=function(t,e){},t.prototype.selectRootElement=function(t){},t.prototype.parentNode=function(t){},t.prototype.nextSibling=function(t){},t.prototype.setAttribute=function(t,e,n,r){},t.prototype.removeAttribute=function(t,e,n){},t.prototype.addClass=function(t,e){},t.prototype.removeClass=function(t,e){},t.prototype.setStyle=function(t,e,n,r){},t.prototype.removeStyle=function(t,e,n){},t.prototype.setProperty=function(t,e,n){},t.prototype.setValue=function(t,e){},t.prototype.listen=function(t,e,n){},t}(),Ho=function(){function t(t){this.nativeElement=t}return t}(),qo=function(){function t(){}return t.prototype.load=function(t){},t}(),Vo=(new Map,function(){function t(){this._dirty=!0,this._results=[],this._emitter=new wo}return Object.defineProperty(t.prototype,"changes",{get:function(){return this._emitter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._results.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._results[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._results[this.length-1]},enumerable:!0,configurable:!0}),t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[r()]=function(){return this._results[r()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=dt(t),this._dirty=!1},t.prototype.notifyOnChanges=function(){this._emitter.emit(this)},t.prototype.setDirty=function(){this._dirty=!0},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),t}()),Uo=function(){function t(){}return t}(),Wo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Yo=function(){function t(t,e){this._compiler=t,this._config=e||Wo}return t.prototype.load=function(t){return this._compiler instanceof oo?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=t.split("#"),i=r[0],o=r[1];return void 0===o&&(o="default"),n("gFIY")(i).then(function(t){return t[o]}).then(function(t){return pt(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("gFIY")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return pt(t,r,i)})},t}();Yo.decorators=[{type:Mi}],Yo.ctorParameters=function(){return[{type:oo},{type:Uo,decorators:[{type:wi}]}]};var Xo=function(){function t(){}return t.prototype.elementRef=function(){},t.prototype.createEmbeddedView=function(t){},t}(),Ko=function(){function t(){}return t.prototype.element=function(){},t.prototype.injector=function(){},t.prototype.parentInjector=function(){},t.prototype.clear=function(){},t.prototype.get=function(t){},t.prototype.length=function(){},t.prototype.createEmbeddedView=function(t,e,n){},t.prototype.createComponent=function(t,e,n,r,i){},t.prototype.insert=function(t,e){},t.prototype.move=function(t,e){},t.prototype.indexOf=function(t){},t.prototype.remove=function(t){},t.prototype.detach=function(t){},t}(),Go=function(){function t(){}return t.prototype.markForCheck=function(){},t.prototype.detach=function(){},t.prototype.detectChanges=function(){},t.prototype.checkNoChanges=function(){},t.prototype.reattach=function(){},t}(),Zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wr.a(e,t),e.prototype.destroy=function(){},e.prototype.destroyed=function(){},e.prototype.onDestroy=function(t){},e}(Go),Qo=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Wr.a(e,t),e.prototype.context=function(){},e.prototype.rootNodes=function(){}}(Zo),function(){function t(t,e){this.name=t,this.callback=e}return t}()),Jo=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof $o?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return"Deprecated since v4"},enumerable:!0,configurable:!0}),t}(),$o=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Wr.a(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n=this,r=this.childNodes.indexOf(t);-1!==r&&((i=this.childNodes).splice.apply(i,[r+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=n}));var i},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return vt(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return gt(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Jo),ta=new Map,ea=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t}(),na=(function(){function t(){this.hasWrappedValue=!1}t.prototype.unwrap=function(t){return t instanceof ea?(this.hasWrappedValue=!0,t.wrapped):t},t.prototype.reset=function(){this.hasWrappedValue=!1}}(),function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}()),ra=function(){function t(){}return t.prototype.supports=function(t){return xt(t)},t.prototype.create=function(t,e){return new oa(e||t)},t}(),ia=function(t,e){return e},oa=function(){function t(t){this._length=0,this._collection=null,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ia}return Object.defineProperty(t.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<kt(n,r,i)?e:n,a=kt(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}var d=o.previousIndex;i[d]=c-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!xt(t))throw new Error("Error trying to diff '"+a(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,a=this._itHead,s=!1;if(Array.isArray(t)){this._length=t.length;for(var u=0;u<this._length;u++)r=t[u],i=this._trackByFn(u,r),null!==a&&o(a.trackById,i)?(s&&(a=this._verifyReinsertion(a,r,i,u)),o(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,u),s=!0),a=a._next}else n=0,Mt(t,function(t){i=e._trackByFn(n,t),null!==a&&o(a.trackById,i)?(s&&(a=e._verifyReinsertion(a,t,i,n)),o(a.item,t)||e._addIdentityChange(a,t)):(a=e._mismatch(a,t,i,n),s=!0),a=a._next,n++}),this._length=n;return this._truncate(a),this._collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),t=null===this._linkedRecords?null:this._linkedRecords.get(n,r),null!==t?(o(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null),null!==t?(o(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new aa(e,n),i,r)),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),null===this._additionsTail?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ua),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(null===this._movesTail?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ua),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t},t.prototype.toString=function(){var t=[];this.forEachItem(function(e){return t.push(e)});var e=[];this.forEachPreviousItem(function(t){return e.push(t)});var n=[];this.forEachAddedItem(function(t){return n.push(t)});var r=[];this.forEachMovedItem(function(t){return r.push(t)});var i=[];this.forEachRemovedItem(function(t){return i.push(t)});var o=[];return this.forEachIdentityChange(function(t){return o.push(t)}),"collection: "+t.join(", ")+"\nprevious: "+e.join(", ")+"\nadditions: "+n.join(", ")+"\nmoves: "+r.join(", ")+"\nremovals: "+i.join(", ")+"\nidentityChanges: "+o.join(", ")+"\n"},t}(),aa=function(){function t(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}return t.prototype.toString=function(){return this.previousIndex===this.currentIndex?a(this.item):a(this.item)+"["+a(this.previousIndex)+"->"+a(this.currentIndex)+"]"},t}(),sa=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&o(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),ua=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new sa,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=t,r=this.map.get(n);return r?r.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t.prototype.toString=function(){return"_DuplicateMap("+a(this.map)+")"},t}(),ca=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||St(t)},t.prototype.create=function(t){return new la},t}(),la=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||St(t)))throw new Error("Error trying to diff '"+a(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new ha(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){o(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),ha=function(){function t(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}return t}(),fa=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();return e=e.concat(r),new t(e)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ki,new wi]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(null!=e)return e;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+Et(t)+"'")},t}(),da=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ki,new wi]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),pa=[new ca],va=[new ra],ga=new fa(va),ma=new da(pa),ya=[{provide:no,useValue:"unknown"},Io,{provide:Do,useExisting:Io},{provide:Hi,useFactory:Ot,deps:[]},ko,io],ba=ut(null,"core",ya),_a=new Qr("LocaleId"),xa=(new Qr("Translations"),new Qr("TranslationsFormat"),{});xa.Error=0,xa.Warning=1,xa.Ignore=2,xa[xa.Error]="Error",xa[xa.Warning]="Warning",xa[xa.Ignore]="Ignore";var wa=function(){function t(t){}return t}();wa.decorators=[{type:mi,args:[{providers:[Ro,{provide:jo,useExisting:Ro},Ji,oo,to,{provide:fa,useFactory:Tt},{provide:da,useFactory:Ct},{provide:_a,useFactory:zt,deps:[[new xi(_a),new wi,new ki]]}]}]}],wa.ctorParameters=function(){return[{type:jo}]};var Ma={};Ma.NONE=0,Ma.HTML=1,Ma.STYLE=2,Ma.SCRIPT=3,Ma.URL=4,Ma.RESOURCE_URL=5,Ma[Ma.NONE]="NONE",Ma[Ma.HTML]="HTML",Ma[Ma.STYLE]="STYLE",Ma[Ma.SCRIPT]="SCRIPT",Ma[Ma.URL]="URL",Ma[Ma.RESOURCE_URL]="RESOURCE_URL";var Sa=function(){function t(){}return t.prototype.sanitize=function(t,e){},t}(),ka=(function(){function t(){}t.prototype.view=function(){},t.prototype.nodeIndex=function(){},t.prototype.injector=function(){},t.prototype.component=function(){},t.prototype.providerTokens=function(){},t.prototype.references=function(){},t.prototype.context=function(){},t.prototype.componentRenderElement=function(){},t.prototype.renderNode=function(){},t.prototype.logError=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]}}(),{setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,clearProviderOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0}),Ea=function(){},Oa=new Map,Ta="$$undefined",Ca="$$empty",za=0,Pa=new WeakMap,Aa=/^:([^:]+):(.+)$/,Da=new Object,Ia=qt(zi),ja=qt(mo),Ra=new Object,La=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Wr.a(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e){var r=e[n];t.push({propName:n,templateName:r})}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs){var n=this._outputs[e];t.push({propName:e,templateName:n})}return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=ue(this.viewDefFactory),o=i.nodes[0].element.componentProvider.index,a=ka.createRootView(t,e||[],n,i,r,Ra),s=Dt(a,o).instance;return n&&a.renderer.setAttribute(At(a,0).renderElement,"ng-version",_i.full),new Na(a,new Ba(a),s)},e}(uo),Na=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i}return Wr.a(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Ho(At(this._view,this._elDef.index).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new qa(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){return this._component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostView",{get:function(){return this._viewRef},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeDetectorRef",{get:function(){return this._viewRef},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(so),Fa=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Ho(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new qa(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=$t(t),t=t.parent;return t?new qa(t,e):new qa(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length,e=t-1;e>=0;e--){var n=qe(this._data,e);ka.destroyView(n)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Ba(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof go||(i=o.get(mo));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n=t,r=n._view;return Fe(this._view,this._data,e,r),n.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n=this._embeddedViews.indexOf(t._view);return Ue(this._data,n,e),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=qe(this._data,t);e&&ka.destroyView(e)},t.prototype.detach=function(t){var e=qe(this._data,t);return e?new Ba(e):null},t}(),Ba=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return ce(this._view)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Gt(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin(),ka.checkAndUpdateView(this._view),t.end&&t.end()},t.prototype.checkNoChanges=function(){ka.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),ka.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Ye(this._view),ka.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}(),Ha=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Wr.a(e,t),e.prototype.createEmbeddedView=function(t){return new Ba(ka.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Ho(At(this._parentView,this._def.index).renderElement)},enumerable:!0,configurable:!0}),e}(Xo),qa=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){void 0===e&&(e=zi.THROW_IF_NOT_FOUND);var n=!!this.elDef&&0!=(33554432&this.elDef.flags);return ka.resolveDep(this.view,this.elDef,n,{flags:0,token:t,tokenKey:qt(t)},e)},t}(),Va=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=ve(e),r=n[0],i=n[1],o=this.delegate.createElement(i,r);return t&&this.delegate.appendChild(t,o),o},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=ve(e),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}(),Ua=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,De(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=zi.THROW_IF_NOT_FOUND),Ie(this,{token:t,tokenKey:qt(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(ho)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+a(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,Ne(this,131072),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),Wa=qt(Lo),Ya=qt(Bo),Xa=qt(Ho),Ka=qt(Ko),Ga=qt(Xo),Za=qt(Go),Qa=qt(zi),Ja=new Object,$a={},ts={};ts.CreateViewNodes=0,ts.CheckNoChanges=1,ts.CheckNoChangesProjectedViews=2,ts.CheckAndUpdate=3,ts.CheckAndUpdateProjectedViews=4,ts.Destroy=5,ts[ts.CreateViewNodes]="CreateViewNodes",ts[ts.CheckNoChanges]="CheckNoChanges",ts[ts.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",ts[ts.CheckAndUpdate]="CheckAndUpdate",ts[ts.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",ts[ts.Destroy]="Destroy";var es=!1,ns=new Map,rs={};rs.create=0,rs.detectChanges=1,rs.checkNoChanges=2,rs.destroy=3,rs.handleEvent=4,rs[rs.create]="create",rs[rs.detectChanges]="detectChanges",rs[rs.checkNoChanges]="checkNoChanges",rs[rs.destroy]="destroy",rs[rs.handleEvent]="handleEvent";var is,os,as,ss=/([A-Z])/g,us=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=$t(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return At(this.elView,this.elDef.index).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return $e(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.index+1;e<=this.elDef.index+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Hr(this.elView,this.elDef,t);for(var e=this.elDef.index+1;e<=this.elDef.index+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Hr(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=Br(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?te(this.view,this.nodeDef):te(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i;2&this.nodeDef.flags?(r=this.view.def,i=this.nodeDef.index):(r=this.elView.def,i=this.elDef.index);var o=Fr(r,i),a=-1,s=function(){return a++,a===o?(n=t.error).bind.apply(n,[t].concat(e)):Ea;var n};r.factory(s),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,e))},t}(),cs=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new ls(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),ls=function(){function t(t){this.delegate=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroyNode=function(t){bt(mt(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Vr();if(r){var i=new $o(n,null,r);i.name=t,yt(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Vr();return n&&yt(new Jo(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Vr();return n&&yt(new Jo(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=mt(t),r=mt(e);n&&r&&n instanceof $o&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=mt(t),i=mt(e),o=mt(n);r&&i&&r instanceof $o&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=mt(t),r=mt(e);n&&r&&n instanceof $o&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Vr();return n&&yt(new $o(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=mt(t);if(i&&i instanceof $o){var o=r?r+":"+e:e;i.attributes[o]=n}this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=mt(t);if(r&&r instanceof $o){var i=n?n+":"+e:e;r.attributes[i]=null}this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=mt(t);n&&n instanceof $o&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=mt(t);n&&n instanceof $o&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=mt(t);i&&i instanceof $o&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=mt(t);r&&r instanceof $o&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=mt(t);r&&r instanceof $o&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=mt(t);r&&r.listeners.push(new Qo(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),hs=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Wr.a(e,t),e.prototype.create=function(t){lr();var e=ue(this._ngModuleDefFactory);return ka.createNgModuleRef(this.moduleType,t||zi.NULL,this._bootstrapComponents,e)},e}(yo)}).call(e,n("fRUx"))},"/wY1":function(t,e,n){n("rMMT"),n("dlwK"),n("/XRd"),n("+Q6C"),n("dBNB"),n("7Fno"),n("gZpL"),n("dSHT"),n("d+61"),n("V2Dj"),n("wJYt"),n("gdNQ"),n("VsLy"),n("wLW2"),t.exports=n("b4gG").Reflect},"/ydz":function(t,e){t.exports={state:{time:{startOrigin:"1800",endOrigin:"2015",value:"2015",dim:"time"},entities:{dim:"geo",show:{"is--country":!0}},entities_allpossible:{dim:"geo",show:{"is--country":!0}},entities_colorlegend:{dim:"world_4region"},entities_tags:{dim:"tag"},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",which:"name"}},marker:{space:["entities","time"],opacityRegular:.8,label:{use:"property",which:"name"},axis_y:{use:"indicator",which:"population_total",scaleType:"linear"},axis_x:{use:"indicator",which:"income_per_person_gdppercapita_ppp_inflation_adjusted",scaleType:"log",domainMin:.11,domainMax:500,tailFatX:1.85,tailCutX:.2,tailFade:.7,xScaleFactor:1.039781626,xScaleShift:-1.127066411},axis_s:{use:"indicator",which:"gapminder_gini",scaleType:"linear"},color:{use:"property",which:"world_4region",scaleType:"ordinal",syncModels:["marker_colorlegend","stack","group"]},stack:{use:"constant",which:"all"},group:{use:"property",which:"world_4region",merge:!1}},marker_colorlegend:{space:["entities_colorlegend"],opacityRegular:.8,opacityHighlightDim:.3,label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{use:"property",which:"parent"}}},ui:{datawarning:{doubtDomain:[1800,1950,2015],doubtRange:[1,.8,.6]},splash:!0}}},"/zHi":function(t,e,n){"use strict";var r=n("bKpL"),i=n("+zVg");r.Observable.of=i.of},"0MXQ":function(t,e,n){var r=n("CDXM");r(r.S,"Math",{fround:n("xxX9")})},"0imh":function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("rlar"),o=n("yR50"),a=n("xFbG"),s=n("AHF9"),u=n("Lhvy"),c=n("g0Kb"),l=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=r,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}return r(e,t),e.prototype.next=function(e){var n=this._getNow();this._events.push(new h(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?e=a.Subscription.EMPTY:this.isStopped?e=a.Subscription.EMPTY:(this.observers.push(t),e=new c.SubjectSubscription(this,t)),r&&t.add(t=new s.ObserveOnSubscriber(t,r));for(var i=n.length,o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.Subject);e.ReplaySubject=l;var h=function(){function t(t,e){this.time=t,this.value=e}return t}()},"1VPd":function(t,e,n){"use strict";var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},"1eQ7":function(t,e,n){"use strict";function r(t,e,n){return this.lift(new s(t,e,n,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("TpsG");e.first=r;var s=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),u=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return i(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){if(this.resultSelector)return void this._tryResultSelector(t,e);this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new a.EmptyError):(t.next(this.defaultValue),t.complete())},e}(o.Subscriber)},"1zvG":function(t,e,n){"use strict";var r=n("JXkd"),i=n("TJLg"),o=n("3r0D")("hasInstance"),a=Function.prototype;o in a||n("tose").f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},"23I1":function(t,e,n){"use strict";var r=n("MzWM");e.defer=r.DeferObservable.create},"2B7B":function(t,e,n){"use strict";function r(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n("zijX");e.symbolIteratorPonyfill=r,e.iterator=r(i.root),e.$$iterator=e.iterator},"2Fuj":function(t,e,n){var r=n("R5c1"),i=n("a/Sk");t.exports=Object.keys||function(t){return r(t,i)}},"2I8z":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("/oeL"),i=n("N+b3"),o=n("BbLh");n.d(e,"b",function(){return i.a});var a=function(){function t(){}return t}();a.decorators=[{type:r.B,args:[{declarations:[o.a],exports:[o.a],providers:[i.a]}]}],a.ctorParameters=function(){return[]}},"2jIh":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n("fRUx"))},"3LDD":function(t,e,n){"use strict";var r=n("tose").f,i=n("51pc"),o=n("pBmS"),a=n("pa70"),s=n("Lcie"),u=n("p/bR"),c=n("WsSm"),l=n("w/BM"),h=n("KpXt"),f=n("V+0c"),d=n("xI8H").fastKey,p=n("Y5fy"),v=f?"_s":"size",g=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),r=g(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(p(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return p(this,e)[v]}}),l},def:function(t,e,n){var r,i,o=g(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},"3MMU":function(t,e,n){"use strict";var r=n("RT4T"),i=n("KM3d"),o=n("rppw");t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),h=1;for(u<s&&s<u+l&&(h=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},"3lsR":function(t,e,n){"use strict";var r=n("bKpL"),i=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=i},"3msI":function(t,e,n){"use strict";var r=n("2jIh"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},"3r0D":function(t,e,n){var r=n("Iclu")("wks"),i=n("c09d"),o=n("ptrv").Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},"422b":function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.filter=r;var a=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.thisArg=r,this.count=0}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(o.Subscriber)},"4D9a":function(t,e,n){"use strict";n("RSwQ");var r=n("+pQw"),i=n("8H1R"),o=n("V+0c"),a=/./.toString,s=function(t){n("lfBE")(RegExp.prototype,"toString",t,!0)};n("umMR")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},"4TT8":function(t,e,n){var r=n("CDXM");r(r.S+r.F*!n("V+0c"),"Object",{defineProperties:n("ewdp")})},"5/nv":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("/oeL"),i=n("hS3t"),o=function(){function t(t){var e=this;this.angulartics2=t,this.angulartics2.settings.pageTracking.trackRelativePath=!0,this.angulartics2.settings.ga={additionalAccountNames:[],userId:null},this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.exceptionTrack.subscribe(function(t){return e.exceptionTrack(t)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)}),this.angulartics2.userTimings.subscribe(function(t){return e.userTimings(t)})}return t.prototype.pageTrack=function(t){if("undefined"!=typeof _gaq&&_gaq){_gaq.push(["_trackPageview",t]);for(var e=0,n=this.angulartics2.settings.ga.additionalAccountNames;e<n.length;e++){var r=n[e];_gaq.push([r+"._trackPageview",t])}}if("undefined"!=typeof ga&&ga){this.angulartics2.settings.ga.userId&&ga("set","&uid",this.angulartics2.settings.ga.userId),ga("send","pageview",t);for(var i=0,o=this.angulartics2.settings.ga.additionalAccountNames;i<o.length;i++){var r=o[i];ga(r+".send","pageview",t)}}},t.prototype.eventTrack=function(t,e){if(e&&e.category||(e=e||{},e.category="Event"),e.value){var n=parseInt(e.value,10);e.value=isNaN(n)?0:n}if("undefined"!=typeof ga){var r={eventCategory:e.category,eventAction:t,eventLabel:e.label,eventValue:e.value,nonInteraction:e.noninteraction,page:e.page||location.hash.substring(1)||location.pathname,userId:this.angulartics2.settings.ga.userId,hitCallback:e.hitCallback};this.setDimensionsAndMetrics(e),this.angulartics2.settings.ga.transport?ga("send","event",r,{transport:this.angulartics2.settings.ga.transport}):ga("send","event",r);for(var i=0,o=this.angulartics2.settings.ga.additionalAccountNames;i<o.length;i++){var a=o[i];ga(a+".send","event",r)}}else"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",e.category,t,e.label,e.value,e.noninteraction])},t.prototype.exceptionTrack=function(t){void 0===t.fatal&&(console.log('No "fatal" provided, sending with fatal=true'),t.fatal=!0),t.exDescription=t.description;var e={exFatal:t.fatal,exDescription:t.description};ga("send","exception",e)},t.prototype.setUsername=function(t){this.angulartics2.settings.ga.userId=t},t.prototype.setUserProperties=function(t){this.setDimensionsAndMetrics(t)},t.prototype.userTimings=function(t){if(!(t&&t.timingCategory&&t.timingVar&&t.timingValue))return void console.error("Properties timingCategory, timingVar, and timingValue are required to be set.");ga&&ga("send","timing",t)},t.prototype.setDimensionsAndMetrics=function(t){if(ga)for(var e=1;e<=200;e++)t["dimension"+e.toString()]&&ga("set","dimension"+e.toString(),t["dimension"+e.toString()]),t["metric"+e.toString()]&&ga("set","metric"+e.toString(),t["metric"+e.toString()])},t.decorators=[{type:r.u}],t.ctorParameters=function(){return[{type:i.a}]},t}()},"51pc":function(t,e,n){var r=n("+pQw"),i=n("ewdp"),o=n("a/Sk"),a=n("yIWP")("IE_PROTO"),s=function(){},u=function(){var t,e=n("BQSv")("iframe"),r=o.length;for(e.style.display="none",n("Ed9o").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},"5GJ3":function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},"5Rdw":function(t,e,n){var r=n("2Fuj"),i=n("+GRi");t.exports=function(t,e){for(var n,o=i(t),a=r(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},"5b+r":function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},"5oDA":function(t,e,n){var r=n("JXkd"),i=n("+pQw"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("pa70")(Function.call,n("6De9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},"5uCp":function(t,e,n){"use strict";var r=n("bKpL"),i=n("Lqs2");r.Observable.prototype.take=i.take},"5v8a":function(t,e,n){"use strict";var r=n("bKpL"),i=n("lx+J");r.Observable.prototype.map=i.map},"6De9":function(t,e,n){var r=n("9e9+"),i=n("piOq"),o=n("+GRi"),a=n("A1WY"),s=n("rMsi"),u=n("gNkH"),c=Object.getOwnPropertyDescriptor;e.f=n("V+0c")?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},"6F6V":function(t,e,n){"use strict";n("NhIS")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},"6GwK":function(t,e,n){var r=n("RT4T"),i=n("2Fuj");n("QN+J")("keys",function(){return function(t){return i(r(t))}})},"6Xbx":function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}e.a=r;var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},"6tM8":function(t,e,n){"use strict";n("NhIS")("link",function(t){return function(e){return t(this,"a","href",e)}})},"76yl":function(t,e,n){"use strict";var r=n("+pQw"),i=n("A1WY");t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},"7Fno":function(t,e,n){function r(t,e){var n,s,l=arguments.length<3?t:arguments[2];return c(t)===l?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(t))?r(s,e,l):void 0}var i=n("6De9"),o=n("TJLg"),a=n("rMsi"),s=n("CDXM"),u=n("JXkd"),c=n("+pQw");s(s.S,"Reflect",{get:r})},"7JOC":function(t,e,n){"use strict";var r=n("OWbQ");e.from=r.FromObservable.create},"8Gg3":function(t,e,n){var r=n("ptrv").parseInt,i=n("kFjN").trim,o=n("9BUF"),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},"8H1R":function(t,e,n){"use strict";var r=n("+pQw");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"8sYH":function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=n("TJLg"),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},"8tDC":function(t,e){t.exports={state:{time:{startOrigin:"1800",endOrigin:"2015",value:"2015",dim:"time"},entities:{dim:"geo",show:{"is--country":!0}},entities_colorlegend:{dim:"world_4region"},entities_tags:{dim:"tag"},entities_allpossible:{dim:"geo",show:{"is--country":!0}},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",which:"name"}},marker:{space:["entities","time"],label:{use:"property",which:"name"},axis_x:{use:"indicator",which:"population_total"},axis_y:{use:"property",which:"name"},color:{use:"property",which:"world_4region",scaleType:"ordinal",syncModels:["marker_colorlegend"]}},marker_colorlegend:{space:["entities_colorlegend"],opacityRegular:.8,opacityHighlightDim:.3,label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{use:"property",which:"parent"}}},ui:{datawarning:{doubtDomain:[1800,1950,2015],doubtRange:[1,.8,.6]},splash:!0}}},"9BUF":function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"9ScN":function(t,e,n){"use strict";var r=n("51pc"),i=n("piOq"),o=n("P6IN"),a={};n("gxdV")(a,n("3r0D")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},"9e9+":function(t,e){e.f={}.propertyIsEnumerable},"9tb5":function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("yW9Z"),a=n("ktfo");e.exhaustMap=r;var s=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(a.subscribeToResult(this,r,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this,a=o.resultSelector,s=o.destination;a?this.trySelectResult(t,e,n,r):s.next(e)},e.prototype.trySelectResult=function(t,e,n,r){var i=this,o=i.resultSelector,a=i.destination;try{var s=o(t,e,n,r);a.next(s)}catch(t){a.error(t)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber)},"9wYb":function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},A1WY:function(t,e,n){var r=n("JXkd");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},A3hK:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{sign:n("tWtF")})},ABVq:function(t,e,n){var r=n("CDXM"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},ADVA:function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={});for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i];"function"==typeof t[o]&&(r[o]=t[o])}var a=Object.keys(r);return function(t,n){void 0===t&&(t=e);for(var i=!1,o={},s=0;s<a.length;s++){var u=a[s],c=r[u],l=t[u],h=c(l,n);o[u]=h,i=i||h!==l}return i?o:t}}function i(t,e){return Object.keys(t).filter(function(t){return t!==e}).reduce(function(e,n){return Object.assign(e,(r={},r[n]=t[n],r));var r},{})}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){if(0===t.length)return e;var n=t[t.length-1];return t.slice(0,-1).reduceRight(function(t,e){return e(t)},n(e))}}function a(t,e){return Array.isArray(e)&&e.length>0?o.apply(null,e.concat([t])):t}function s(t,e){void 0===t&&(t={state:void 0});var n=e[0];return{state:(0,e[1])(t.state,n),action:n}}function u(t,e,n){return e instanceof d.v?t.get(e):e}function c(t,e,n){return e.map(function(e,n){return e instanceof d.v?t.get(e):e})}function l(t){return"function"==typeof t?t():t}function h(t){function e(){r=null,i=null}function n(){if(!r)return i=t.apply(null,arguments),r=arguments,i;for(var e=0;e<arguments.length;e++)if(arguments[e]!==r[e])return i=t.apply(null,arguments),r=arguments,i;return i}var r=null,i=null;return{memoized:n,reset:e}}function f(){function t(){s.reset(),a.reset(),o.forEach(function(t){return t.release()})}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.slice(0,e.length-1),i=e[e.length-1],o=r.filter(function(t){return t.release&&"function"==typeof t.release}),a=h(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(null,t)}),s=h(function(t){var e=r.map(function(e){return e(t)});return a.memoized.apply(null,e)});return Object.assign(s.memoized,{release:t})}n.d(e,"m",function(){return $}),n.d(e,"l",function(){return G}),n.d(e,"u",function(){return r}),n.d(e,"v",function(){return o}),n.d(e,"w",function(){return a}),n.d(e,"a",function(){return N}),n.d(e,"f",function(){return q}),n.d(e,"h",function(){return B}),n.d(e,"g",function(){return H}),n.d(e,"i",function(){return U}),n.d(e,"x",function(){return f}),n.d(e,"j",function(){return X}),n.d(e,"k",function(){return Y}),n.d(e,"c",function(){return E}),n.d(e,"q",function(){return T}),n.d(e,"e",function(){return O}),n.d(e,"o",function(){return z}),n.d(e,"b",function(){return C}),n.d(e,"p",function(){return k}),n.d(e,"d",function(){return P}),n.d(e,"r",function(){return D}),n.d(e,"n",function(){return Q}),n.d(e,"t",function(){return l}),n.d(e,"s",function(){return u});var d=n("/oeL"),p=n("gvep"),v=(n.n(p),n("bKpL")),g=(n.n(v),n("rlar")),m=(n.n(g),n("yR50")),y=(n.n(m),n("AHF9")),b=(n.n(y),n("OADz")),_=(n.n(b),n("kkQ5")),x=(n.n(_),n("lx+J")),w=(n.n(x),n("GoZW")),M=(n.n(w),n("kGJb")),S=(n.n(M),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),k=new d.v("@ngrx/store Internal Initial State"),E=new d.v("@ngrx/store Initial State"),O=new d.v("@ngrx/store Reducer Factory"),T=new d.v("@ngrx/store Reducer Factory Provider"),C=new d.v("@ngrx/store Initial Reducers"),z=new d.v("@ngrx/store Internal Initial Reducers"),P=new d.v("@ngrx/store Meta Reducers"),A=new d.v("@ngrx/store Store Features"),D=new d.v("@ngrx/store Internal Store Reducers"),I=new d.v("@ngrx/store Internal Feature Reducers"),j=new d.v("@ngrx/store Internal Feature Reducers Token"),R=new d.v("@ngrx/store Feature Reducers"),L="@ngrx/store/init",N=function(t){function e(){return t.call(this,{type:L})||this}return S(e,t),e.prototype.next=function(e){if(void 0===e)throw new TypeError("Actions must be objects");if(void 0===e.type)throw new TypeError("Actions must have a type property");t.prototype.next.call(this,e)},e.prototype.complete=function(){},e.prototype.ngOnDestroy=function(){t.prototype.complete.call(this)},e}(p.BehaviorSubject);N.decorators=[{type:d.u}],N.ctorParameters=function(){return[]};var F=[N],B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e}(v.Observable),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e}(N),q=function(t){function e(e,n,r,i){var o=t.call(this,i(r,n))||this;return o.dispatcher=e,o.initialState=n,o.reducers=r,o.reducerFactory=i,o}return S(e,t),e.prototype.addFeature=function(t){var e=t.reducers,n=t.reducerFactory,r=t.metaReducers,i=t.initialState,o=t.key,s="function"==typeof e?function(t,n){return void 0===t&&(t=i),e(t,n)}:a(n,r)(e,i);this.addReducer(o,s)},e.prototype.removeFeature=function(t){var e=t.key;this.removeReducer(e)},e.prototype.addReducer=function(t,e){this.reducers=Object.assign({},this.reducers,(n={},n[t]=e,n)),this.updateReducers();var n},e.prototype.removeReducer=function(t){this.reducers=i(this.reducers,t),this.updateReducers()},e.prototype.updateReducers=function(){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers"})},e.prototype.ngOnDestroy=function(){this.complete()},e}(p.BehaviorSubject);q.decorators=[{type:d.u}],q.ctorParameters=function(){return[{type:H},{type:void 0,decorators:[{type:d.t,args:[E]}]},{type:void 0,decorators:[{type:d.t,args:[C]}]},{type:void 0,decorators:[{type:d.t,args:[O]}]}]};var V=[q,{provide:B,useExisting:q},{provide:H,useExisting:N}],U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.prototype.ngOnDestroy=function(){this.complete()},e}(g.Subject);U.decorators=[{type:d.u}],U.ctorParameters=function(){return[]};var W=[U],Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e}(v.Observable),X=function(t){function e(e,n,r,i){var o=t.call(this,i)||this,a=y.observeOn.call(e,m.queue),u=b.withLatestFrom.call(a,n),c=_.scan.call(u,s,i);return o.stateSubscription=c.subscribe({next:function(t){var e=t.state,n=t.action;o.next(e),r.next(n)}}),o}return S(e,t),e.prototype.ngOnDestroy=function(){this.stateSubscription.unsubscribe(),this.complete()},e}(p.BehaviorSubject);X.INIT=L,X.decorators=[{type:d.u}],X.ctorParameters=function(){return[{type:N},{type:B},{type:U},{type:void 0,decorators:[{type:d.t,args:[E]}]}]};var K=[X,{provide:Y,useExisting:X}],G=function(t){function e(e,n,r){var i=t.call(this)||this;return i.actionsObserver=n,i.reducerManager=r,i.source=e,i}return S(e,t),e.prototype.select=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r;if("string"==typeof t)r=w.pluck.call.apply(w.pluck,[this,t].concat(e));else{if("function"!=typeof t)throw new TypeError("Unexpected type '"+typeof t+"' in select operator, expected 'string' or 'function'");r=x.map.call(this,t)}return M.distinctUntilChanged.call(r)},e.prototype.lift=function(t){var n=new e(this,this.actionsObserver,this.reducerManager);return n.operator=t,n},e.prototype.dispatch=function(t){this.actionsObserver.next(t)},e.prototype.next=function(t){this.actionsObserver.next(t)},e.prototype.error=function(t){this.actionsObserver.error(t)},e.prototype.complete=function(){this.actionsObserver.complete()},e.prototype.addReducer=function(t,e){this.reducerManager.addReducer(t,e)},e.prototype.removeReducer=function(t){this.reducerManager.removeReducer(t)},e}(v.Observable);G.decorators=[{type:d.u}],G.ctorParameters=function(){return[{type:Y},{type:N},{type:q}]};var Z=[G],Q=function(){function t(t,e,n){}return t}();Q.decorators=[{type:d.B,args:[{}]}],Q.ctorParameters=function(){return[{type:N},{type:B},{type:U}]};var J=function(){function t(t,e,n){this.features=t,this.featureReducers=e,this.reducerManager=n,t.map(function(t,n){var r=e.shift(),i=r[n];return Object.assign({},t,{reducers:i,initialState:l(t.initialState)})}).forEach(function(t){return n.addFeature(t)})}return t.prototype.ngOnDestroy=function(){var t=this;this.features.forEach(function(e){return t.reducerManager.removeFeature(e)})},t}();J.decorators=[{type:d.B,args:[{}]}],J.ctorParameters=function(){return[{type:Array,decorators:[{type:d.t,args:[A]}]},{type:Array,decorators:[{type:d.t,args:[R]}]},{type:q}]};var $=function(){function t(){}return t.forRoot=function(t,e){return void 0===e&&(e={}),{ngModule:Q,providers:[{provide:k,useValue:e.initialState},{provide:E,useFactory:l,deps:[k]},{provide:z,useValue:t},{provide:D,useExisting:t instanceof d.v?t:z},{provide:C,deps:[d.w,z,[new d.t(D)]],useFactory:u},{provide:P,useValue:e.metaReducers?e.metaReducers:[]},{provide:T,useValue:e.reducerFactory?e.reducerFactory:r},{provide:O,deps:[T,P],useFactory:a},F,V,W,K,Z]}},t.forFeature=function(t,e,n){return void 0===n&&(n={}),{ngModule:J,providers:[{provide:A,multi:!0,useValue:{key:t,reducerFactory:n.reducerFactory?n.reducerFactory:r,metaReducers:n.metaReducers?n.metaReducers:[],initialState:n.initialState}},{provide:I,multi:!0,useValue:e},{provide:j,multi:!0,useExisting:e instanceof d.v?e:I},{provide:R,multi:!0,deps:[d.w,I,[new d.t(j)]],useFactory:c}]}},t}();$.decorators=[{type:d.B,args:[{}]}],$.ctorParameters=function(){return[]}},AHF9:function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("3lsR");e.observeOn=r;var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=s;var u=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(a.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(a.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},e}(o.Subscriber);e.ObserveOnSubscriber=u;var c=function(){function t(t,e){this.notification=t,this.destination=e}return t}();e.ObserveOnMessage=c},AOSR:function(t,e,n){var r=n("CDXM"),i=n("KM3d"),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},Abrq:function(t,e,n){var r=n("CDXM");r(r.P,"Array",{copyWithin:n("3MMU")}),n("YymB")("copyWithin")},AdFz:function(t,e,n){"use strict";n("NhIS")("fixed",function(t){return function(){return t(this,"tt","","")}})},"B++z":function(t,e,n){var r=n("CDXM");r(r.S,"Number",{isNaN:function(t){return t!=t}})},B1fG:function(t,e,n){"use strict";(function(t){var r=n("2jIh"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.a.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();e.a=u}).call(e,n("qhgb")(t))},BCYq:function(t,e,n){var r=n("pa70"),i=n("Wo2w"),o=n("RT4T"),a=n("rppw"),s=n("UKZQ");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var v,g,m=o(e),y=i(m),b=r(s,p,3),_=a(y.length),x=0,w=n?d(e,_):u?d(e,0):void 0;_>x;x++)if((f||x in y)&&(v=y[x],g=b(v,x,m),t))if(n)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(l)return!1;return h?-1:c||l?l:w}}},BMSF:function(t,e,n){var r=n("CDXM"),i=n("T0iK");r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},BQSv:function(t,e,n){var r=n("JXkd"),i=n("ptrv").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},BbLh:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("/oeL"),i=n("N+b3"),o={},a=function(){function t(t,e){this.onClick=new r.p,this.onCreated=new r.p,this.onChanged=new r.p,this.onReadyOnce=new r.p,this.onError=new r.p,this.isInitError=!1,this._active=!1,this._additionalItems=[],this.element=t,this.vService=e}return Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,this._active||this.deactivate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"additionalItems",{get:function(){return this._additionalItems},set:function(t){try{if(this._additionalItems=t,this.component&&this.component.instance&&this._additionalItems&&this._additionalItems.length>0){for(var e=this.component.instance.getModel(),n=0,r=this._additionalItems;n<r.length;n++){var i=r[n],o=i.path.split(/[\\\/]/),a=o[o.length-1],s="data_"+a;e[s]||(e[s]=i)}Vizabi._instances[this.component.instance._id]=null,this.component.instance.clear(),this.component.instance=Vizabi(this.chartType,this.view,e),this.onChanged.emit({order:this.order,type:this.chartType,minInitialModel:this.minInitialModel,component:this.component.instance})}}catch(t){this.emitError(t)}},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;setTimeout(function(){try{if(t.minInitialModel=Vizabi.utils.deepClone(t.model),t.stopUrlRedirect=t.stopUrlRedirect||!1,t.component={instance:null},t.order=t.order||1,t.createView(),t.readerProcessing(),t.setExtResources(),t.modelHashProcessing(),t.persistentChangeProcessing(),t.readyOnceProcessing(),t._additionalItems&&t._additionalItems.length>0)for(var e=0,n=t.additionalItems;e<n.length;e++){var r=n[e],i="data_"+r.path;t.model[i]||(t.model[i]=r)}t.component.instance=Vizabi(t.chartType,t.view,t.model),t.onCreated.emit({order:t.order,type:t.chartType,model:t.model,component:t.component.instance}),["vzb-tool-stage","vzb-tool-dialogs","vzb-tool-buttonlist"].forEach(function(e){[].slice.call(document.getElementsByClassName(e)).forEach(function(e){e.addEventListener("click",function(e){t.onClick.emit(e)})})})}catch(e){t.isInitError=!0,t.emitError(e)}})},t.prototype.ngOnDestroy=function(){if(!this.isInitError)try{Object.keys(Vizabi._instances).forEach(function(t){Vizabi._instances[t]=null}),this.component.instance.clear(),t.removeElement(this.view)}catch(t){this.emitError(t)}},t.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.prototype.emitError=function(t){this.onError.emit({message:t.message,stack:t.stack})},t.prototype.createView=function(){this.view=document.createElement("div"),this.view.style.height="100%",this.element.nativeElement.appendChild(this.view)},t.prototype.readerProcessing=function(){if(this.readerModuleObject&&this.readerGetMethod&&this.readerName&&this.readerParams&&this.readerModuleObject[this.readerGetMethod]&&!o[this.readerName]){var t=this.readerModuleObject[this.readerGetMethod].apply(this,this.readerParams);Vizabi.Reader.extend(this.readerName,t),o[this.readerName]=!0}},t.prototype.modelHashProcessing=function(){if(this.modelHash){var t=encodeURI(decodeURIComponent(this.modelHash)),e=this.vService.stringToModel(t);Vizabi.utils.deepExtend(this.model,e)}},t.prototype.readyOnceProcessing=function(){var t=this;this.model&&(this.model.bind=this.model.bind||{},this.model.bind.readyOnce=function(){t.onReadyOnce.emit({order:t.order,type:t.chartType,minInitialModel:t.minInitialModel,component:t.component.instance})})},t.prototype.persistentChangeProcessing=function(){this.model&&(this.model.bind=this.model.bind||{},this.model.bind.ready=this.onPersistentChange.bind(this),this.model.bind.persistentChange=this.onPersistentChange.bind(this))},t.prototype.onPersistentChange=function(){var t=this.component.instance.getPersistentMinimalModel(this.minInitialModel),e=this.vService.modelToString(t);if(e===this.modelState)return!1;this.modelState=e,!this.stopUrlRedirect&&window&&window.location&&(window.location.hash=this.vService.modelToString(t));var n=Vizabi.utils.deepClone(this.component.instance.getModel());this.onChanged.emit({order:this.order,type:this.chartType,modelDiff:t,minInitialModel:this.minInitialModel,modelFull:n})},t.prototype.setExtResources=function(){this.extResources&&(Vizabi._globals.ext_resources=this.extResources)},t.prototype.deactivate=function(){this.component&&this.component.instance&&this.component.instance.components&&this.component.instance.components.find(function(t){return"gapminder-dialogs"===t.name}).closeAllDialogs(!0)},t}();a.decorators=[{type:r.m,args:[{selector:"vizabi"}]}],a.ctorParameters=function(){return[{type:r.n},{type:i.a}]},a.propDecorators={order:[{type:r.x}],readerModuleObject:[{type:r.x}],readerGetMethod:[{type:r.x}],readerParams:[{type:r.x}],readerName:[{type:r.x}],model:[{type:r.x}],modelHash:[{type:r.x}],extResources:[{type:r.x}],chartType:[{type:r.x}],stopUrlRedirect:[{type:r.x}],onClick:[{type:r.J}],onCreated:[{type:r.J}],onChanged:[{type:r.J}],onReadyOnce:[{type:r.J}],onError:[{type:r.J}],active:[{type:r.x,args:["active"]}],additionalItems:[{type:r.x,args:["additionalItems"]}]}},BkNc:function(t,e,n){"use strict";function r(t){return new qe(t)}function i(t){var e=Error("NavigationCancelingError: "+t);return e[Ve]=!0,e}function o(t){return t[Ve]}function a(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function s(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];u(r,c(e,r))}}function u(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&t.outlet&&t.outlet!==He)throw new Error("Invalid configuration of route '"+e+"': a componentless route cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch){throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.")}if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&s(t.children,e)}function c(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function l(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!h(t[n],e[n]))return!1;return!0}function h(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0}function f(t){return Array.prototype.concat.apply([],t)}function d(t){return t.length>0?t[t.length-1]:null}function p(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function v(t,e){if(0===Object.keys(t).length)return Object(pe.of)({});var n=[],r=[],i={};p(t,function(t,o){var a=be.map.call(e(o,t),function(t){return i[o]=t});o===He?n.push(a):r.push(a)});var o=Se.concatAll.call(pe.of.apply(void 0,n.concat(r))),a=ye.last.call(o);return be.map.call(a,function(){return i})}function g(t){var e=Oe.mergeAll.call(t);return ge.every.call(e,function(t){return!0===t})}function m(t){return Object(le._21)(t)?t:Object(le._22)(t)?Object(Ee.fromPromise)(Promise.resolve(t)):Object(pe.of)(t)}function y(){return new We(new Ye([],{}),{},null)}function b(t,e,n){return n?_(t.queryParams,e.queryParams)&&x(t.root,e.root):w(t.queryParams,e.queryParams)&&M(t.root,e.root)}function _(t,e){return h(t,e)}function x(t,e){if(!E(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(var n in e.children){if(!t.children[n])return!1;if(!x(t.children[n],e.children[n]))return!1}return!0}function w(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}function M(t,e){return S(t,e,e.segments)}function S(t,e,n){if(t.segments.length>n.length){var r=t.segments.slice(0,n.length);return!!E(r,n)&&!e.hasChildren()}if(t.segments.length===n.length){if(!E(t.segments,n))return!1;for(var i in e.children){if(!t.children[i])return!1;if(!M(t.children[i],e.children[i]))return!1}return!0}var r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!E(t.segments,r)&&(!!t.children[He]&&S(t.children[He],e,o))}function k(t,e){return E(t,e)&&t.every(function(t,n){return h(t.parameters,e[n].parameters)})}function E(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function O(t,e){var n=[];return p(t.children,function(t,r){r===He&&(n=n.concat(e(t,r)))}),p(t.children,function(t,r){r!==He&&(n=n.concat(e(t,r)))}),n}function T(t){return t.segments.map(function(t){return A(t)}).join("/")}function C(t,e){if(!t.hasChildren())return T(t);if(e){var n=t.children[He]?C(t.children[He],!1):"",r=[];return p(t.children,function(t,e){e!==He&&r.push(e+":"+C(t,!1))}),r.length>0?n+"("+r.join("//")+")":n}var i=O(t,function(e,n){return n===He?[C(t.children[He],!1)]:[n+":"+C(e,!1)]});return T(t)+"/("+i.join("//")+")"}function z(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";")}function P(t){return decodeURIComponent(t)}function A(t){return""+z(t.path)+D(t.parameters)}function D(t){return Object.keys(t).map(function(e){return";"+z(e)+"="+z(t[e])}).join("")}function I(t){var e=Object.keys(t).map(function(e){var n=t[e];return Array.isArray(n)?n.map(function(t){return z(e)+"="+z(t)}).join("&"):z(e)+"="+z(n)});return e.length?"?"+e.join("&"):""}function j(t){var e=t.match(Qe);return e?e[0]:""}function R(t){var e=t.match(Je);return e?e[0]:""}function L(t){var e=t.match($e);return e?e[0]:""}function N(t){return new we.Observable(function(e){return e.error(new en(t))})}function F(t){return new we.Observable(function(e){return e.error(new nn(t))})}function B(t){return new we.Observable(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}function H(t){return new we.Observable(function(e){return e.error(i("Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false"))})}function q(t,e,n,r,i){return new rn(t,e,n,r,i).apply()}function V(t,e){var n=e.canLoad;return n&&0!==n.length?g(be.map.call(Object(de.from)(n),function(n){var r=t.get(n);return m(r.canLoad?r.canLoad(e):r(e))})):Object(pe.of)(!0)}function U(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=e.matcher||a,i=r(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function W(t,e,n,r){if(n.length>0&&G(t,n,r)){var i=new Ye(e,K(r,new Ye(n,t.children)));return{segmentGroup:Y(i),slicedSegments:[]}}if(0===n.length&&Z(t,n,r)){var i=new Ye(t.segments,X(t,n,r,t.children));return{segmentGroup:Y(i),slicedSegments:n}}return{segmentGroup:t,slicedSegments:n}}function Y(t){if(1===t.numberOfChildren&&t.children[He]){var e=t.children[He];return new Ye(t.segments.concat(e.segments),e.children)}return t}function X(t,e,n,r){for(var i={},o=0,a=n;o<a.length;o++){var s=a[o];Q(t,e,s)&&!r[J(s)]&&(i[J(s)]=new Ye([],{}))}return Object.assign({},r,i)}function K(t,e){var n={};n[He]=e;for(var r=0,i=t;r<i.length;r++){var o=i[r];""===o.path&&J(o)!==He&&(n[J(o)]=new Ye([],{}))}return n}function G(t,e,n){return n.some(function(n){return Q(t,e,n)&&J(n)!==He})}function Z(t,e,n){return n.some(function(n){return Q(t,e,n)})}function Q(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0!==n.redirectTo)}function J(t){return t.outlet||He}function $(t,e){if(t===e.value)return e;for(var n=0,r=e.children;n<r.length;n++){var i=r[n],o=$(t,i);if(o)return o}return null}function tt(t,e){if(t===e.value)return[e];for(var n=0,r=e.children;n<r.length;n++){var i=r[n],o=tt(t,i);if(o.length)return o.unshift(e),o}return[]}function et(t,e){var n=nt(t,e),r=new he.BehaviorSubject([new Xe("",{})]),i=new he.BehaviorSubject({}),o=new he.BehaviorSubject({}),a=new he.BehaviorSubject({}),s=new he.BehaviorSubject(""),u=new un(r,i,a,s,o,He,e,n.root);return u.snapshot=n.root,new sn(new an(u,[]),n)}function nt(t,e){var n={},r={},i={},o=new cn([],n,i,"",r,He,e,null,t.root,-1,{});return new ln("",new an(o,[]))}function rt(t){for(var e=t.pathFromRoot,n=e.length-1;n>=1;){var r=e[n],i=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(i.component)break;n--}}return e.slice(n).reduce(function(t,e){return{params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}function it(t,e){e.value._routerState=t,e.children.forEach(function(e){return it(t,e)})}function ot(t){var e=t.children.length>0?" { "+t.children.map(ot).join(", ")+" } ":"";return""+t.value+e}function at(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,h(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),h(e.params,n.params)||t.params.next(n.params),l(e.url,n.url)||t.url.next(n.url),h(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function st(t,e){var n=h(t.params,e.params)&&k(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||st(t.parent,e.parent))}function ut(t,e,n){var r=ct(t,e._root,n?n._root:void 0);return new sn(r,e)}function ct(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var i=ht(t,e,n);return new an(r,i)}if(t.retrieve(e.value)){var o=t.retrieve(e.value).route;return lt(e,o),o}var r=ft(e.value),i=e.children.map(function(e){return ct(t,e)});return new an(r,i)}function lt(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)lt(t.children[n],e.children[n])}function ht(t,e,n){return e.children.map(function(e){for(var r=0,i=n.children;r<i.length;r++){var o=i[r];if(t.shouldReuseRoute(o.value.snapshot,e.value))return ct(t,e,o)}return ct(t,e)})}function ft(t){return new un(new he.BehaviorSubject(t.url),new he.BehaviorSubject(t.params),new he.BehaviorSubject(t.queryParams),new he.BehaviorSubject(t.fragment),new he.BehaviorSubject(t.data),t.outlet,t.component,t)}function dt(t,e,n,r,i){if(0===n.length)return vt(e.root,e.root,e,r,i);var o=mt(n);if(o.toRoot())return vt(e.root,new Ye([],{}),e,r,i);var a=yt(o,e,t),s=a.processChildren?Mt(a.segmentGroup,a.index,o.commands):wt(a.segmentGroup,a.index,o.commands);return vt(a.segmentGroup,s,e,r,i)}function pt(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function vt(t,e,n,r,i){var o={};return r&&p(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),n.root===t?new We(e,o,i):new We(gt(n.root,t,e),o,i)}function gt(t,e,n){var r={};return p(t.children,function(t,i){r[i]=t===e?n:gt(t,e,n)}),new Ye(t.segments,r)}function mt(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new hn(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return p(r.outlets,function(t,e){o[e]="string"==typeof t?t.split("/"):t}),t.concat([{outlets:o}])}if(r.segmentPath)return t.concat([r.segmentPath])}return"string"!=typeof r?t.concat([r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):t.concat([r])},[]);return new hn(n,e,r)}function yt(t,e,n){if(t.isAbsolute)return new fn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new fn(n.snapshot._urlSegment,!0,0);var r=pt(t.commands[0])?0:1,i=n.snapshot._lastPathIndex+r;return bt(n.snapshot._urlSegment,i,t.numberOfDoubleDots)}function bt(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new fn(r,!1,i-o)}function _t(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[He]:""+t}function xt(t){return"object"!=typeof t[0]?(e={},e[He]=t,e):void 0===t[0].outlets?(n={},n[He]=t,n):t[0].outlets;var e,n}function wt(t,e,n){if(t||(t=new Ye([],{})),0===t.segments.length&&t.hasChildren())return Mt(t,e,n);var r=St(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Ye(t.segments.slice(0,r.pathIndex),{});return o.children[He]=new Ye(t.segments.slice(r.pathIndex),t.children),Mt(o,0,i)}return r.match&&0===i.length?new Ye(t.segments,{}):r.match&&!t.hasChildren()?kt(t,e,n):r.match?Mt(t,0,i):kt(t,e,n)}function Mt(t,e,n){if(0===n.length)return new Ye(t.segments,{});var r=xt(n),i={};return p(r,function(n,r){null!==n&&(i[r]=wt(t.children[r],e,n))}),p(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new Ye(t.segments,i)}function St(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=_t(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Tt(s,u,a))return o;r+=2}else{if(!Tt(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kt(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Et(n[i].outlets);return new Ye(r,o)}if(0===i&&pt(n[0])){var a=t.segments[e];r.push(new Xe(a.path,n[0])),i++}else{var s=_t(n[i]),u=i<n.length-1?n[i+1]:null;s&&u&&pt(u)?(r.push(new Xe(s,Ot(u))),i+=2):(r.push(new Xe(s,{})),i++)}}return new Ye(r,{})}function Et(t){var e={};return p(t,function(t,n){null!==t&&(e[n]=kt(new Ye([],{}),0,t))}),e}function Ot(t){var e={};return p(t,function(t,n){return e[n]=""+t}),e}function Tt(t,e,n){return t==n.path&&h(e,n.parameters)}function Ct(t,e,n,r){return new pn(t,e,n,r).recognize()}function zt(t){t.sort(function(t,e){return t.value.outlet===He?-1:e.value.outlet===He?1:t.value.outlet.localeCompare(e.value.outlet)})}function Pt(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}function At(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new dn;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=e.matcher||a,i=r(n,t,e);if(!i)throw new dn;var o={};p(i.posParams,function(t,e){o[e]=t.path});var s=i.consumed.length>0?Object.assign({},o,i.consumed[i.consumed.length-1].parameters):o;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s}}function Dt(t){var e={};t.forEach(function(t){var n=e[t.value.outlet];if(n){var r=n.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}e[t.value.outlet]=t.value})}function It(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function jt(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Rt(t,e,n,r){if(n.length>0&&Ft(t,n,r)){var i=new Ye(e,Nt(t,e,r,new Ye(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&Bt(t,n,r)){var o=new Ye(t.segments,Lt(t,n,r,t.children));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}var a=new Ye(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function Lt(t,e,n,r){for(var i={},o=0,a=n;o<a.length;o++){var s=a[o];if(Ht(t,e,s)&&!r[qt(s)]){var u=new Ye([],{});u._sourceSegment=t,u._segmentIndexShift=t.segments.length,i[qt(s)]=u}}return Object.assign({},r,i)}function Nt(t,e,n,r){var i={};i[He]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(var o=0,a=n;o<a.length;o++){var s=a[o];if(""===s.path&&qt(s)!==He){var u=new Ye([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[qt(s)]=u}}return i}function Ft(t,e,n){return n.some(function(n){return Ht(t,e,n)&&qt(n)!==He})}function Bt(t,e,n){return n.some(function(n){return Ht(t,e,n)})}function Ht(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0===n.redirectTo)}function qt(t){return t.outlet||He}function Vt(t){return t.data||{}}function Ut(t){return t.resolve||{}}function Wt(t){throw t}function Yt(t){return Object(pe.of)(null)}function Xt(t){at(t.value),t.children.forEach(Xt)}function Kt(t){for(var e=t.parent;e;e=e.parent){var n=e._routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}function Gt(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e._routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}function Zt(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}function Qt(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}function Jt(t){return""===t||!!t}function $t(){return new le.F("Router",xn)}function te(t,e,n){return void 0===n&&(n={}),n.useHash?new ce.e(t,e):new ce.n(t,e)}function ee(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ne(t){return[{provide:le.a,multi:!0,useValue:t},{provide:mn,multi:!0,useValue:t}]}function re(t,e,n,r,i,o,a,s,u,c,l){void 0===u&&(u={});var h=new xn(null,e,n,r,i,o,a,f(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.enableTracing){var d=Object(Te.t)();h.events.subscribe(function(t){d.logGroup("Router Event: "+t.constructor.name),d.log(t.toString()),d.log(t),d.logGroupEnd()})}return h}function ie(t){return t.routerState.root}function oe(t){return t.appInitializer.bind(t)}function ae(t){return t.bootstrapListener.bind(t)}function se(){return[qn,{provide:le.d,multi:!0,useFactory:oe,deps:[qn]},{provide:Vn,useFactory:ae,deps:[qn]},{provide:le.b,multi:!0,useExisting:Vn}]}n.d(e,"p",function(){return Pn}),n.d(e,"d",function(){return Pe}),n.d(e,"e",function(){return De}),n.d(e,"f",function(){return ze}),n.d(e,"m",function(){return vn}),n.d(e,"n",function(){return xn}),n.d(e,"l",function(){return mn}),n.d(e,"j",function(){return Nn}),n.d(e,"k",function(){return Vn}),n.d(e,"o",function(){return Hn}),n.d(e,"b",function(){return zn}),n.d(e,"g",function(){return jn}),n.d(e,"h",function(){return In}),n.d(e,"i",function(){return Dn}),n.d(e,"q",function(){return Rn}),n.d(e,"a",function(){return un}),n.d(e,"r",function(){return bn}),n.d(e,"c",function(){return Ge}),n.d(e,"s",function(){return Ke}),n.d(e,"t",function(){return Fn}),n.d(e,"z",function(){return qn}),n.d(e,"A",function(){return oe}),n.d(e,"B",function(){return ae}),n.d(e,"w",function(){return ee}),n.d(e,"v",function(){return te}),n.d(e,"y",function(){return ie}),n.d(e,"u",function(){return $t}),n.d(e,"x",function(){return re});var ue=n("6Xbx"),ce=n("qbdv"),le=n("/oeL"),he=n("gvep"),fe=(n.n(he),n("rlar")),de=(n.n(fe),n("7JOC")),pe=(n.n(de),n("+zVg")),ve=(n.n(pe),n("TQn8")),ge=(n.n(ve),n("THYR")),me=(n.n(ge),n("1eQ7")),ye=(n.n(me),n("WSkQ")),be=(n.n(ye),n("lx+J")),_e=(n.n(be),n("cPhF")),xe=(n.n(_e),n("Tq0x")),we=(n.n(xe),n("bKpL")),Me=(n.n(we),n("ueUM")),Se=(n.n(Me),n("I3ay")),ke=(n.n(Se),n("TpsG")),Ee=(n.n(ke),n("QU9E")),Oe=(n.n(Ee),n("TIdC")),Te=(n.n(Oe),n("fc+i")),Ce=n("422b"),ze=(n.n(Ce),function(){function t(t,e){this.id=t,this.url=e}return t.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},t}()),Pe=function(){function t(t,e,n){this.id=t,this.url=e,this.urlAfterRedirects=n}return t.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},t}(),Ae=function(){function t(t,e,n){this.id=t,this.url=e,this.reason=n}return t.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},t}(),De=function(){function t(t,e,n){this.id=t,this.url=e,this.error=n}return t.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},t}(),Ie=function(){function t(t,e,n,r){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r}return t.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(),je=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Re=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Le=function(){function t(t,e,n,r){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r}return t.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(),Ne=function(){function t(t,e,n,r,i){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}return t.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},t}(),Fe=function(){function t(t,e,n,r){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r}return t.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(),Be=function(){function t(t,e,n,r){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r}return t.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(),He="primary",qe=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}(),Ve="ngNavigationCancelingError",Ue=function(){function t(t,e){this.routes=t,this.module=e}return t}(),We=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=r(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Ze.serialize(this)},t}(),Ye=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,p(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return T(this)},t}(),Xe=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=r(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return A(this)},t}(),Ke=function(){function t(){}return t.prototype.parse=function(t){},t.prototype.serialize=function(t){},t}(),Ge=function(){function t(){}return t.prototype.parse=function(t){var e=new tn(t);return new We(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){return"/"+C(t.root,!0)+I(t.queryParams)+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),Ze=new Ge,Qe=/^[^\/()?;=&#]+/,Je=/^[^=?&#]+/,$e=/^[^?&#]+/,tn=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURI(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[He]=new Ye(t,e)),n},t.prototype.parseSegment=function(){var t=j(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new Xe(P(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=j(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=j(this.remaining);r&&(n=r,this.capture(n))}t[P(e)]=P(n)}},t.prototype.parseQueryParam=function(t){var e=R(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=L(this.remaining);r&&(n=r,this.capture(n))}var i=P(e),o=P(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=j(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=He);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[He]:new Ye([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),en=function(){function t(t){this.segmentGroup=t||null}return t}(),nn=function(){function t(t){this.urlTree=t}return t}(),rn=function(){function t(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(le.E)}return t.prototype.apply=function(){var t=this,e=this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,He),n=be.map.call(e,function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)});return Me._catch.call(n,function(e){if(e instanceof nn)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof en)throw t.noMatchError(e);throw e})},t.prototype.match=function(t){var e=this,n=this.expandSegmentGroup(this.ngModule,this.config,t.root,He),r=be.map.call(n,function(n){return e.createUrlTree(n,t.queryParams,t.fragment)});return Me._catch.call(r,function(t){if(t instanceof en)throw e.noMatchError(t);throw t})},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r=t.segments.length>0?new Ye([],(i={},i[He]=t,i)):t;return new We(r,e,n);var i},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?be.map.call(this.expandChildren(t,e,n),function(t){return new Ye([],t)}):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return v(n.children,function(n,i){return r.expandSegmentGroup(t,e,i,n)})},t.prototype.expandSegment=function(t,e,n,r,i,o){var a=this,s=pe.of.apply(void 0,n),u=be.map.call(s,function(s){var u=a.expandSegmentAgainstRoute(t,e,n,s,r,i,o);return Me._catch.call(u,function(t){if(t instanceof en)return Object(pe.of)(null);throw t})}),c=Se.concatAll.call(u),l=me.first.call(c,function(t){return!!t});return Me._catch.call(l,function(t,n){if(t instanceof ke.EmptyError){if(a.noLeftoversInUrl(e,r,i))return Object(pe.of)(new Ye([],{}));throw new en(e)}throw t})},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return J(r)!==o?N(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):N(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?F(o):_e.mergeMap.call(this.lineralizeSegments(n,o),function(n){var o=new Ye(n,{});return i.expandSegment(t,o,e,n,r,!1)})},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=U(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return N(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?F(f):_e.mergeMap.call(this.lineralizeSegments(r,f),function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?be.map.call(this.configLoader.load(t.injector,n),function(t){return n._loadedConfig=t,new Ye(r,{})}):Object(pe.of)(new Ye(r,{}));var o=U(e,n,r),a=o.matched,s=o.consumedSegments,u=o.lastChild;if(!a)return N(e);var c=r.slice(u),l=this.getChildConfig(t,n);return _e.mergeMap.call(l,function(t){var n=t.module,r=t.routes,o=W(e,s,c,r),a=o.segmentGroup,u=o.slicedSegments;if(0===u.length&&a.hasChildren()){var l=i.expandChildren(n,r,a);return be.map.call(l,function(t){return new Ye(s,t)})}if(0===r.length&&0===u.length)return Object(pe.of)(new Ye(s,{}));var h=i.expandSegment(n,a,r,u,He,!0);return be.map.call(h,function(t){return new Ye(s.concat(t.segments),t.children)})})},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?Object(pe.of)(new Ue(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(pe.of)(e._loadedConfig):_e.mergeMap.call(V(t.injector,e),function(r){return r?be.map.call(n.configLoader.load(t.injector,e),function(t){return e._loadedConfig=t,t}):H(e)}):Object(pe.of)(new Ue([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(pe.of)(n);if(r.numberOfChildren>1||!r.children[He])return B(t.redirectTo);r=r.children[He]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new We(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return p(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return p(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new Ye(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o.path===t.path)return e.splice(n),o;n++}return t},t}(),on=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=$(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=$(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=tt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return tt(t,this._root).map(function(t){return t.value})},t}(),an=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}(),sn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,it(r,e),r}return ue.a(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(on),un=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=be.map.call(this.params,function(t){return r(t)})),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=be.map.call(this.queryParams,function(t){return r(t)})),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}(),cn=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._routeConfig=s,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=r(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=r(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this._routeConfig?this._routeConfig.path:"")+"')"},t}(),ln=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,it(r,n),r}return ue.a(e,t),e.prototype.toString=function(){return ot(this._root)},e}(on),hn=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&pt(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==d(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),fn=function(){function t(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}return t}(),dn=function(){function t(){}return t}(),pn=function(){function t(t,e,n,r){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r}return t.prototype.recognize=function(){try{var t=Rt(this.urlTree.root,[],[],this.config).segmentGroup,e=this.processSegmentGroup(this.config,t,He),n=new cn([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},He,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new an(n,e),i=new ln(this.url,r);return this.inheritParamsAndData(i._root),Object(pe.of)(i)}catch(t){return new we.Observable(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=rt(n);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n=this,r=O(e,function(e,r){return n.processSegmentGroup(t,e,r)});return Dt(r),zt(r),r},t.prototype.processSegment=function(t,e,n,r){for(var i=0,o=t;i<o.length;i++){var a=o[i];try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(t){if(!(t instanceof dn))throw t}}if(this.noLeftoversInUrl(e,n,r))return[];throw new dn},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new dn;if((t.outlet||He)!==r)throw new dn;if("**"===t.path){var i=n.length>0?d(n).parameters:{},o=new cn(n,i,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,Vt(t),r,t.component,t,It(e),jt(e)+n.length,Ut(t));return[new an(o,[])]}var a=At(e,t,n),s=a.consumedSegments,u=a.parameters,c=a.lastChild,l=n.slice(c),h=Pt(t),f=Rt(e,s,l,h),p=f.segmentGroup,v=f.slicedSegments,g=new cn(s,u,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,Vt(t),r,t.component,t,It(e),jt(e)+s.length,Ut(t));if(0===v.length&&p.hasChildren()){var m=this.processChildren(h,p);return[new an(g,m)]}if(0===h.length&&0===v.length)return[new an(g,[])];var y=this.processSegment(h,p,v,He);return[new an(g,y)]},t}(),vn=function(){function t(){}return t.prototype.shouldDetach=function(t){},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){},t.prototype.retrieve=function(t){},t.prototype.shouldReuseRoute=function(t,e){},t}(),gn=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),mn=new le.v("ROUTES"),yn=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren);return be.map.call(r,function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Ue(f(i.injector.get(mn)),i)})},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?Object(Ee.fromPromise)(this.loader.load(t)):_e.mergeMap.call(m(t()),function(t){return t instanceof le.C?Object(pe.of)(t):Object(Ee.fromPromise)(e.compiler.compileModuleAsync(t))})},t}(),bn=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){},t.prototype.extract=function(t){},t.prototype.merge=function(t,e){},t}(),_n=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}(),xn=function(){function t(t,e,n,r,i,o,a,s){var u=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.navigations=new he.BehaviorSubject(null),this.routerEvents=new fe.Subject,this.navigationId=0,this.errorHandler=Wt,this.navigated=!1,this.hooks={beforePreactivation:Yt,afterPreactivation:Yt},this.urlHandlingStrategy=new _n,this.routeReuseStrategy=new gn;var c=function(t){return u.triggerEvent(new je(t))},l=function(t){return u.triggerEvent(new Re(t))};this.ngModule=i.get(le.E),this.resetConfig(s),this.currentUrlTree=y(),this.rawUrlTree=this.currentUrlTree,this.configLoader=new yn(o,a,c,l),this.currentRouterState=et(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.currentRouterState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(Zone.current.wrap(function(e){var n=t.urlSerializer.parse(e.url),r="popstate"===e.type?"popstate":"hashchange";setTimeout(function(){t.scheduleNavigation(n,r,{replaceUrl:!0})},0)})))},Object.defineProperty(t.prototype,"routerState",{get:function(){return this.currentRouterState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this.routerEvents},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.routerEvents.next(t)},t.prototype.resetConfig=function(t){s(t),this.config=t,this.navigated=!1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,r=e.queryParams,i=e.fragment,o=e.preserveQueryParams,a=e.queryParamsHandling,s=e.preserveFragment;Object(le._5)()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;if(a)switch(a){case"merge":l=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return dt(u,this.currentUrlTree,t,l,c)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof We?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),Qt(t),"object"==typeof e.queryParams&&null!==e.queryParams&&(e.queryParams=this.removeEmptyProps(e.queryParams)),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){return this.urlSerializer.parse(t)},t.prototype.isActive=function(t,e){if(t instanceof We)return b(this.currentUrlTree,t,e);var n=this.urlSerializer.parse(t);return b(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;ve.concatMap.call(this.navigations,function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):Object(pe.of)(null)}).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n){var r=this.navigations.value;if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);var i=null,o=null,a=new Promise(function(t,e){i=t,o=e}),s=++this.navigationId;return this.navigations.next({id:s,source:e,rawUrl:t,extras:n,resolve:i,reject:o,promise:a}),a.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,i=t.extras,o=t.resolve,a=t.reject,s=this.urlHandlingStrategy.extract(r),u=!this.navigated||s.toString()!==this.currentUrlTree.toString();u&&this.urlHandlingStrategy.shouldProcessUrl(r)?(this.routerEvents.next(new ze(n,this.serializeUrl(s))),Promise.resolve().then(function(t){return e.runNavigate(s,r,!!i.skipLocationChange,!!i.replaceUrl,n,null)}).then(o,a)):u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.routerEvents.next(new ze(n,this.serializeUrl(s))),Promise.resolve().then(function(t){return e.runNavigate(s,r,!1,!1,n,et(s,e.rootComponentType).snapshot)}).then(o,a)):(this.rawUrlTree=r,o(null))},t.prototype.runNavigate=function(t,e,n,r,i,a){var s=this;return i!==this.navigationId?(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new Ae(i,this.serializeUrl(t),"Navigation ID "+i+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(u,c){var l;if(a)l=Object(pe.of)({appliedUrl:t,snapshot:a});else{var h=s.ngModule.injector,f=q(h,s.configLoader,s.urlSerializer,t,s.config);l=_e.mergeMap.call(f,function(e){return be.map.call(Ct(s.rootComponentType,s.config,e,s.serializeUrl(e)),function(n){return s.routerEvents.next(new Ie(i,s.serializeUrl(t),s.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}})})}var d,p,v=_e.mergeMap.call(l,function(t){return be.map.call(s.hooks.beforePreactivation(t.snapshot),function(){return t})}),g=be.map.call(v,function(t){var e=t.appliedUrl,n=t.snapshot,r=s.ngModule.injector;return d=new Sn(n,s.currentRouterState.snapshot,r),d.traverse(s.rootContexts),{appliedUrl:e,snapshot:n}}),m=_e.mergeMap.call(g,function(e){var n=e.appliedUrl,r=e.snapshot;return s.navigationId!==i?Object(pe.of)(!1):(s.triggerEvent(new Le(i,s.serializeUrl(t),n,r)),be.map.call(d.checkGuards(),function(e){return s.triggerEvent(new Ne(i,s.serializeUrl(t),n,r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))}),y=_e.mergeMap.call(m,function(e){return s.navigationId!==i?Object(pe.of)(!1):e.shouldActivate&&d.isActivating()?(s.triggerEvent(new Fe(i,s.serializeUrl(t),e.appliedUrl,e.snapshot)),be.map.call(d.resolveData(),function(){return s.triggerEvent(new Be(i,s.serializeUrl(t),e.appliedUrl,e.snapshot)),e})):Object(pe.of)(e)}),b=_e.mergeMap.call(y,function(t){return be.map.call(s.hooks.afterPreactivation(t.snapshot),function(){return t})}),_=be.map.call(b,function(t){var e=t.appliedUrl,n=t.snapshot,r=t.shouldActivate;if(r){return{appliedUrl:e,state:ut(s.routeReuseStrategy,n,s.currentRouterState),shouldActivate:r}}return{appliedUrl:e,state:null,shouldActivate:r}}),x=s.currentRouterState,w=s.currentUrlTree;_.forEach(function(t){var o=t.appliedUrl,a=t.state;if(!t.shouldActivate||i!==s.navigationId)return void(p=!1);if(s.currentUrlTree=o,s.rawUrlTree=s.urlHandlingStrategy.merge(s.currentUrlTree,e),s.currentRouterState=a,!n){var u=s.urlSerializer.serialize(s.rawUrlTree);s.location.isCurrentPathEqualTo(u)||r?s.location.replaceState(u):s.location.go(u)}new kn(s.routeReuseStrategy,a,x).activate(s.rootContexts),p=!0}).then(function(){p?(s.navigated=!0,s.routerEvents.next(new Pe(i,s.serializeUrl(t),s.serializeUrl(s.currentUrlTree))),u(!0)):(s.resetUrlToCurrentUrlTree(),s.routerEvents.next(new Ae(i,s.serializeUrl(t),"")),u(!1))},function(n){if(o(n))s.resetUrlToCurrentUrlTree(),s.navigated=!0,s.routerEvents.next(new Ae(i,s.serializeUrl(t),n.message)),u(!1);else{s.routerEvents.next(new De(i,s.serializeUrl(t),n));try{u(s.errorHandler(n))}catch(t){c(t)}}s.currentRouterState=x,s.currentUrlTree=w,s.rawUrlTree=s.urlHandlingStrategy.merge(s.currentUrlTree,e),s.location.replaceState(s.serializeUrl(s.rawUrlTree))})})},t.prototype.resetUrlToCurrentUrlTree=function(){var t=this.urlSerializer.serialize(this.rawUrlTree);this.location.replaceState(t)},t}(),wn=function(){function t(t){this.path=t}return Object.defineProperty(t.prototype,"route",{get:function(){return this.path[this.path.length-1]},enumerable:!0,configurable:!0}),t}(),Mn=function(){function t(t,e){this.component=t,this.route=e}return t}(),Sn=function(){function t(t,e,n){this.future=t,this.curr=e,this.moduleInjector=n,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.traverse=function(t){var e=this.future._root,n=this.curr?this.curr._root:null;this.traverseChildRoutes(e,n,t,[e.value])},t.prototype.checkGuards=function(){var t=this;if(!this.isDeactivating()&&!this.isActivating())return Object(pe.of)(!0);var e=this.runCanDeactivateChecks();return _e.mergeMap.call(e,function(e){return e?t.runCanActivateChecks():Object(pe.of)(!1)})},t.prototype.resolveData=function(){var t=this;if(!this.isActivating())return Object(pe.of)(null);var e=Object(de.from)(this.canActivateChecks),n=ve.concatMap.call(e,function(e){return t.runResolve(e.route)});return xe.reduce.call(n,function(t,e){return t})},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.traverseChildRoutes=function(t,e,n,r){var i=this,o=Zt(e);t.children.forEach(function(t){i.traverseRoutes(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),p(o,function(t,e){return i.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.traverseRoutes=function(t,e,n,r){var i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i._routeConfig===o._routeConfig){var s=this.shouldRunGuardsAndResolvers(o,i,i._routeConfig.runGuardsAndResolvers);if(s?this.canActivateChecks.push(new wn(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?this.traverseChildRoutes(t,e,a?a.children:null,r):this.traverseChildRoutes(t,e,n,r),s){var u=a.outlet;this.canDeactivateChecks.push(new Mn(u.component,o))}}else o&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new wn(r)),i.component?this.traverseChildRoutes(t,null,a?a.children:null,r):this.traverseChildRoutes(t,null,n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!st(t,e)||!h(t.queryParams,e.queryParams);case"paramsChange":default:return!st(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=Zt(t),i=t.value;p(r,function(t,r){i.component?e?n.deactivateRouteAndItsChildren(t,e.children.getContext(r)):n.deactivateRouteAndItsChildren(t,null):n.deactivateRouteAndItsChildren(t,e)}),i.component&&e&&e.outlet&&e.outlet.isActivated?this.canDeactivateChecks.push(new Mn(e.outlet.component,i)):this.canDeactivateChecks.push(new Mn(null,i))},t.prototype.runCanDeactivateChecks=function(){var t=this,e=Object(de.from)(this.canDeactivateChecks),n=_e.mergeMap.call(e,function(e){return t.runCanDeactivate(e.component,e.route)});return ge.every.call(n,function(t){return!0===t})},t.prototype.runCanActivateChecks=function(){var t=this,e=Object(de.from)(this.canActivateChecks),n=ve.concatMap.call(e,function(e){return g(Object(de.from)([t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))});return ge.every.call(n,function(t){return!0===t})},t.prototype.runCanActivate=function(t){var e=this,n=t._routeConfig?t._routeConfig.canActivate:null;return n&&0!==n.length?g(be.map.call(Object(de.from)(n),function(n){var r,i=e.getToken(n,t);return r=m(i.canActivate?i.canActivate(t,e.future):i(t,e.future)),me.first.call(r)})):Object(pe.of)(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return g(be.map.call(Object(de.from)(r),function(t){return g(be.map.call(Object(de.from)(t.guards),function(r){var i,o=e.getToken(r,t.node);return i=m(o.canActivateChild?o.canActivateChild(n,e.future):o(n,e.future)),me.first.call(i)}))}))},t.prototype.extractCanActivateChild=function(t){var e=t._routeConfig?t._routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e._routeConfig?e._routeConfig.canDeactivate:null;if(!r||0===r.length)return Object(pe.of)(!0);var i=_e.mergeMap.call(Object(de.from)(r),function(r){var i,o=n.getToken(r,e);return i=m(o.canDeactivate?o.canDeactivate(t,e,n.curr,n.future):o(t,e,n.curr,n.future)),me.first.call(i)});return ge.every.call(i,function(t){return!0===t})},t.prototype.runResolve=function(t){var e=t._resolve;return be.map.call(this.resolveNode(e,t),function(e){return t._resolvedData=e,t.data=Object.assign({},t.data,rt(t).resolve),null})},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return Object(pe.of)({});if(1===r.length){var i=r[0];return be.map.call(this.getResolver(t[i],e),function(t){return e={},e[i]=t,e;var e})}var o={},a=_e.mergeMap.call(Object(de.from)(r),function(r){return be.map.call(n.getResolver(t[r],e),function(t){return o[r]=t,t})});return be.map.call(ye.last.call(a),function(){return o})},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return m(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=Gt(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),kn=function(){function t(t,e,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=n}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),at(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=Zt(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),p(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=Zt(t),o=t.value.component?r.children:e;p(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=Zt(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n)})},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(at(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Xt(a.route)}else{var s=Kt(r.snapshot),u=s?s.module.componentFactoryResolver:null;o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)},t}(),En=function(){function t(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Object(le._5)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){var t={skipLocationChange:Jt(this.skipLocationChange),replaceUrl:Jt(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Jt(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Jt(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}();En.decorators=[{type:le.m,args:[{selector:":not(a)[routerLink]"}]}],En.ctorParameters=function(){return[{type:xn},{type:un},{type:void 0,decorators:[{type:le.h,args:["tabindex"]}]},{type:le.O},{type:le.n}]},En.propDecorators={queryParams:[{type:le.x}],fragment:[{type:le.x}],queryParamsHandling:[{type:le.x}],preserveFragment:[{type:le.x}],skipLocationChange:[{type:le.x}],replaceUrl:[{type:le.x}],routerLink:[{type:le.x}],preserveQueryParams:[{type:le.x}],onClick:[{type:le.s,args:["click"]}]};var On=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof Pe&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Object(le._5)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:Jt(this.skipLocationChange),replaceUrl:Jt(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,i),!1},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Jt(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Jt(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}();On.decorators=[{type:le.m,args:[{selector:"a[routerLink]"}]}],On.ctorParameters=function(){return[{type:xn},{type:un},{type:ce.h}]},On.propDecorators={target:[{type:le.r,args:["attr.target"]},{type:le.x}],queryParams:[{type:le.x}],fragment:[{type:le.x}],queryParamsHandling:[{type:le.x}],preserveFragment:[{type:le.x}],skipLocationChange:[{type:le.x}],replaceUrl:[{type:le.x}],href:[{type:le.r}],routerLink:[{type:le.x}],preserveQueryParams:[{type:le.x}],onClick:[{type:le.s,args:["click",["$event.button","$event.ctrlKey","$event.metaKey","$event.shiftKey"]]}]};var Tn=function(){function t(t,e,n,r){var i=this;this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.classes=[],this.active=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(function(t){t instanceof Pe&&i.update()})}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this.active},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this.links.changes.subscribe(function(e){return t.update()}),this.linksWithHrefs.changes.subscribe(function(e){return t.update()}),this.update()},Object.defineProperty(t.prototype,"routerLinkActive",{set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.update()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.update=function(){var t=this;if(this.links&&this.linksWithHrefs&&this.router.navigated){var e=this.hasActiveLinks();this.active!==e&&(this.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}),Promise.resolve(e).then(function(e){return t.active=e}))}},t.prototype.isLinkActive=function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}},t.prototype.hasActiveLinks=function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))},t}();Tn.decorators=[{type:le.m,args:[{selector:"[routerLinkActive]",exportAs:"routerLinkActive"}]}],Tn.ctorParameters=function(){return[{type:xn},{type:le.n},{type:le.O},{type:le.i}]},Tn.propDecorators={links:[{type:le.l,args:[En,{descendants:!0}]}],linksWithHrefs:[{type:le.l,args:[On,{descendants:!0}]}],routerLinkActiveOptions:[{type:le.x}],routerLinkActive:[{type:le.x}]};var Cn=function(){function t(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zn,this.attachRef=null}return t}(),zn=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new Cn,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Pn=function(){function t(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new le.p,this.deactivateEvents=new le.p,this.name=r||He,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"locationInjector",{get:function(){return this.location.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationFactoryResolver",{get:function(){return this.resolver},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=t._futureSnapshot,r=n._routeConfig.component;e=e||this.resolver;var i=e.resolveComponentFactory(r),o=this.parentContexts.getOrCreateContext(this.name).children,a=new An(t,o,this.location.injector);this.activated=this.location.createComponent(i,this.location.length,a),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}();Pn.decorators=[{type:le.m,args:[{selector:"router-outlet",exportAs:"outlet"}]}],Pn.ctorParameters=function(){return[{type:zn},{type:le.Z},{type:le.k},{type:void 0,decorators:[{type:le.h,args:["name"]}]},{type:le.i}]},Pn.propDecorators={activateEvents:[{type:le.J,args:["activate"]}],deactivateEvents:[{type:le.J,args:["deactivate"]}]};var An=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===un?this.route:t===zn?this.childContexts:this.parent.get(t,e)},t}(),Dn=function(){function t(){}return t.prototype.preload=function(t,e){},t}(),In=function(){function t(){}return t.prototype.preload=function(t,e){return Me._catch.call(e(),function(){return Object(pe.of)(null)})},t}(),jn=function(){function t(){}return t.prototype.preload=function(t,e){return Object(pe.of)(null)},t}(),Rn=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i;var o=function(e){return t.triggerEvent(new je(e))},a=function(e){return t.triggerEvent(new Re(e))};this.loader=new yn(e,n,o,a)}return t.prototype.setUpPreloading=function(){var t=this,e=Ce.filter.call(this.router.events,function(t){return t instanceof Pe});this.subscription=ve.concatMap.call(e,function(){return t.preload()}).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(le.E);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;n.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?n.push(this.preloadConfig(t,o)):o.children&&n.push(this.processRoutes(t,o.children))}return Oe.mergeAll.call(Object(de.from)(n))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){var r=n.loader.load(t.injector,e);return _e.mergeMap.call(r,function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})})},t}();Rn.decorators=[{type:le.u}],Rn.ctorParameters=function(){return[{type:xn},{type:le.D},{type:le.j},{type:le.w},{type:Dn}]};var Ln=[Pn,En,On,Tn],Nn=new le.v("ROUTER_CONFIGURATION"),Fn=new le.v("ROUTER_FORROOT_GUARD"),Bn=[ce.g,{provide:Ke,useClass:Ge},{provide:xn,useFactory:re,deps:[le.g,Ke,zn,ce.g,le.w,le.D,le.j,mn,Nn,[bn,new le.I],[vn,new le.I]]},zn,{provide:un,useFactory:ie,deps:[xn]},{provide:le.D,useClass:le.U},Rn,jn,In,{provide:Nn,useValue:{enableTracing:!1}}],Hn=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[Bn,ne(e),{provide:Fn,useFactory:ee,deps:[[xn,new le.I,new le.T]]},{provide:Nn,useValue:n||{}},{provide:ce.h,useFactory:te,deps:[ce.o,[new le.t(ce.a),new le.I],Nn]},{provide:Dn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:jn},{provide:le.F,multi:!0,useFactory:$t},se()]}},t.forChild=function(e){return{ngModule:t,providers:[ne(e)]}},t}();Hn.decorators=[{type:le.B,args:[{declarations:Ln,exports:Ln}]}],Hn.ctorParameters=function(){return[{type:void 0,decorators:[{type:le.I},{type:le.t,args:[Fn]}]},{type:xn,decorators:[{type:le.I}]}]};var qn=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new fe.Subject}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(ce.f,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(xn),i=t.injector.get(Nn);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?Object(pe.of)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(Nn),n=this.injector.get(Rn),r=this.injector.get(xn),i=this.injector.get(le.g);t===i.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),r.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();qn.decorators=[{type:le.u}],qn.ctorParameters=function(){return[{type:le.w}]};var Vn=new le.v("Router Initializer");new le.Y("4.3.5")},CCJL:function(t,e,n){var r=n("+GRi"),i=n("6De9").f;n("QN+J")("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},CDXM:function(t,e,n){var r=n("ptrv"),i=n("b4gG"),o=n("gxdV"),a=n("lfBE"),s=n("pa70"),u=function(t,e,n){var c,l,h,f,d=t&u.F,p=t&u.G,v=t&u.S,g=t&u.P,m=t&u.B,y=p?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),_=b.prototype||(b.prototype={});p&&(n=e);for(c in n)l=!d&&y&&void 0!==y[c],h=(l?y:n)[c],f=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,y&&a(y,c,h,t&u.U),b[c]!=h&&o(b,c,f),g&&_[c]!=h&&(_[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},CE6k:function(t,e,n){"use strict";function r(){return new a.Subject}function i(){return o.multicast.call(this,r).refCount()}var o=n("gonN"),a=n("rlar");e.share=i},"CH/r":function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=s.async),this.lift(new u(t,e))}function i(t){t.debouncedNext()}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n("T14+"),s=n("IhB/");e.debounceTime=r;var u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.dueTime,this.scheduler))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(i,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(a.Subscriber)},CPp0:function(t,e,n){"use strict";function r(t){if("string"!=typeof t)return t;switch(t.toUpperCase()){case"GET":return _.Get;case"POST":return _.Post;case"PUT":return _.Put;case"DELETE":return _.Delete;case"OPTIONS":return _.Options;case"HEAD":return _.Head;case"PATCH":return _.Patch}throw new Error('Invalid request method. The method "'+t+'" is not supported.')}function i(t){return"responseURL"in t?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}function o(t){for(var e=new Uint16Array(t.length),n=0,r=t.length;n<r;n++)e[n]=t.charCodeAt(n);return e.buffer}function a(t){void 0===t&&(t="");var e=new Map;if(t.length>0){t.split("&").forEach(function(t){var n=t.indexOf("="),r=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)],i=r[0],o=r[1],a=e.get(i)||[];a.push(o),e.set(i,a)})}return e}function s(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function u(){var t="object"==typeof window?window:{};return null===L&&(L=t[R]={}),L}function c(t){var e=new A;return Object.keys(t).forEach(function(n){var r=t[n];r&&Array.isArray(r)?r.forEach(function(t){return e.append(n,t.toString())}):e.append(n,r.toString())}),e}function l(t,e){return t.createConnection(e).response}function h(t,e,n,r){var i=t;return e?i.merge(new G({method:e.method||n,url:e.url||r,search:e.search,params:e.params,headers:e.headers,body:e.body,withCredentials:e.withCredentials,responseType:e.responseType})):i.merge(new G({method:n,url:r}))}function f(){return new X}function d(t,e){return new rt(t,e)}function p(t,e){return new it(t,e)}n.d(e,"c",function(){return b}),n.d(e,"h",function(){return K}),n.d(e,"a",function(){return Z}),n.d(e,"f",function(){return G}),n.d(e,"b",function(){return O}),n.d(e,"g",function(){return E}),n.d(e,"d",function(){return rt}),n.d(e,"e",function(){return ot}),n.d(e,"i",function(){return C}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d});var v=n("6Xbx"),g=n("/oeL"),m=n("bKpL"),y=(n.n(m),n("fc+i")),b=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}();b.decorators=[{type:g.u}],b.ctorParameters=function(){return[]};var _={};_.Get=0,_.Post=1,_.Put=2,_.Delete=3,_.Options=4,_.Head=5,_.Patch=6,_[_.Get]="Get",_[_.Post]="Post",_[_.Put]="Put",_[_.Delete]="Delete",_[_.Options]="Options",_[_.Head]="Head",_[_.Patch]="Patch";var x={};x.Unsent=0,x.Open=1,x.HeadersReceived=2,x.Loading=3,x.Done=4,x.Cancelled=5,x[x.Unsent]="Unsent",x[x.Open]="Open",x[x.HeadersReceived]="HeadersReceived",x[x.Loading]="Loading",x[x.Done]="Done",x[x.Cancelled]="Cancelled";var w={};w.Basic=0,w.Cors=1,w.Default=2,w.Error=3,w.Opaque=4,w[w.Basic]="Basic",w[w.Cors]="Cors",w[w.Default]="Default",w[w.Error]="Error",w[w.Opaque]="Opaque";var M={};M.NONE=0,M.JSON=1,M.FORM=2,M.FORM_DATA=3,M.TEXT=4,M.BLOB=5,M.ARRAY_BUFFER=6,M[M.NONE]="NONE",M[M.JSON]="JSON",M[M.FORM]="FORM",M[M.FORM_DATA]="FORM_DATA",M[M.TEXT]="TEXT",M[M.BLOB]="BLOB",M[M.ARRAY_BUFFER]="ARRAY_BUFFER";var S={};S.Text=0,S.Json=1,S.ArrayBuffer=2,S.Blob=3,S[S.Text]="Text",S[S.Json]="Json",S[S.ArrayBuffer]="ArrayBuffer",S[S.Blob]="Blob";var k=function(){function t(e){var n=this;if(this._headers=new Map,this._normalizedNames=new Map,e)return e instanceof t?void e.forEach(function(t,e){t.forEach(function(t){return n.append(e,t)})}):void Object.keys(e).forEach(function(t){var r=Array.isArray(e[t])?e[t]:[e[t]];n.delete(t),r.forEach(function(e){return n.append(t,e)})})}return t.fromResponseHeaderString=function(e){var n=new t;return e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=t.slice(e+1).trim();n.set(r,i)}}),n},t.prototype.append=function(t,e){var n=this.getAll(t);null===n?this.set(t,e):n.push(e)},t.prototype.delete=function(t){var e=t.toLowerCase();this._normalizedNames.delete(e),this._headers.delete(e)},t.prototype.forEach=function(t){var e=this;this._headers.forEach(function(n,r){return t(n,e._normalizedNames.get(r),e._headers)})},t.prototype.get=function(t){var e=this.getAll(t);return null===e?null:e.length>0?e[0]:null},t.prototype.has=function(t){return this._headers.has(t.toLowerCase())},t.prototype.keys=function(){return Array.from(this._normalizedNames.values())},t.prototype.set=function(t,e){Array.isArray(e)?e.length&&this._headers.set(t.toLowerCase(),[e.join(",")]):this._headers.set(t.toLowerCase(),[e]),this.mayBeSetNormalizedName(t)},t.prototype.values=function(){return Array.from(this._headers.values())},t.prototype.toJSON=function(){var t=this,e={};return this._headers.forEach(function(n,r){var i=[];n.forEach(function(t){return i.push.apply(i,t.split(","))}),e[t._normalizedNames.get(r)]=i}),e},t.prototype.getAll=function(t){return this.has(t)?this._headers.get(t.toLowerCase())||null:null},t.prototype.entries=function(){throw new Error('"entries" method is not implemented on Headers class')},t.prototype.mayBeSetNormalizedName=function(t){var e=t.toLowerCase();this._normalizedNames.has(e)||this._normalizedNames.set(e,t)},t}(),E=function(){function t(t){void 0===t&&(t={});var e=t.body,n=t.status,r=t.headers,i=t.statusText,o=t.type,a=t.url;this.body=null!=e?e:null,this.status=null!=n?n:null,this.headers=null!=r?r:null,this.statusText=null!=i?i:null,this.type=null!=o?o:null,this.url=null!=a?a:null}return t.prototype.merge=function(e){return new t({body:e&&null!=e.body?e.body:this.body,status:e&&null!=e.status?e.status:this.status,headers:e&&null!=e.headers?e.headers:this.headers,statusText:e&&null!=e.statusText?e.statusText:this.statusText,type:e&&null!=e.type?e.type:this.type,url:e&&null!=e.url?e.url:this.url})},t}(),O=function(t){function e(){return t.call(this,{status:200,statusText:"Ok",type:w.Default,headers:new k})||this}return v.a(e,t),e}(E);O.decorators=[{type:g.u}],O.ctorParameters=function(){return[]};var T=function(){function t(){}return t.prototype.createConnection=function(t){},t}(),C=(function(){function t(){}}(),function(){function t(){}return t.prototype.configureRequest=function(t){},t}()),z=function(t){return t>=200&&t<300},P=function(){function t(){}return t.prototype.encodeKey=function(t){return s(t)},t.prototype.encodeValue=function(t){return s(t)},t}(),A=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e=new P),this.rawParams=t,this.queryEncoder=e,this.paramsMap=a(t)}return t.prototype.clone=function(){var e=new t("",this.queryEncoder);return e.appendAll(this),e},t.prototype.has=function(t){return this.paramsMap.has(t)},t.prototype.get=function(t){var e=this.paramsMap.get(t);return Array.isArray(e)?e[0]:null},t.prototype.getAll=function(t){return this.paramsMap.get(t)||[]},t.prototype.set=function(t,e){if(void 0===e||null===e)return void this.delete(t);var n=this.paramsMap.get(t)||[];n.length=0,n.push(e),this.paramsMap.set(t,n)},t.prototype.setAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n)||[];r.length=0,r.push(t[0]),e.paramsMap.set(n,r)})},t.prototype.append=function(t,e){if(void 0!==e&&null!==e){var n=this.paramsMap.get(t)||[];n.push(e),this.paramsMap.set(t,n)}},t.prototype.appendAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){for(var r=e.paramsMap.get(n)||[],i=0;i<t.length;++i)r.push(t[i]);e.paramsMap.set(n,r)})},t.prototype.replaceAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n)||[];r.length=0;for(var i=0;i<t.length;++i)r.push(t[i]);e.paramsMap.set(n,r)})},t.prototype.toString=function(){var t=this,e=[];return this.paramsMap.forEach(function(n,r){n.forEach(function(n){return e.push(t.queryEncoder.encodeKey(r)+"="+t.queryEncoder.encodeValue(n))})}),e.join("&")},t.prototype.delete=function(t){this.paramsMap.delete(t)},t}(),D=function(){function t(){}return t.prototype.json=function(){return"string"==typeof this._body?JSON.parse(this._body):this._body instanceof ArrayBuffer?JSON.parse(this.text()):this._body},t.prototype.text=function(t){if(void 0===t&&(t="legacy"),this._body instanceof A)return this._body.toString();if(this._body instanceof ArrayBuffer)switch(t){case"legacy":return String.fromCharCode.apply(null,new Uint16Array(this._body));case"iso-8859":return String.fromCharCode.apply(null,new Uint8Array(this._body));default:throw new Error("Invalid value for encodingHint: "+t)}return null==this._body?"":"object"==typeof this._body?JSON.stringify(this._body,null,2):this._body.toString()},t.prototype.arrayBuffer=function(){return this._body instanceof ArrayBuffer?this._body:o(this.text())},t.prototype.blob=function(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")},t}(),I=function(t){function e(e){var n=t.call(this)||this;return n._body=e.body,n.status=e.status,n.ok=n.status>=200&&n.status<=299,n.statusText=e.statusText,n.headers=e.headers,n.type=e.type,n.url=e.url,n}return v.a(e,t),e.prototype.toString=function(){return"Response with status: "+this.status+" "+this.statusText+" for URL: "+this.url},e}(D),j=0,R="__ng_jsonp__",L=null,N=function(){function t(){}return t.prototype.build=function(t){var e=document.createElement("script");return e.src=t,e},t.prototype.nextRequestID=function(){return"__req"+j++},t.prototype.requestCallback=function(t){return R+"."+t+".finished"},t.prototype.exposeConnection=function(t,e){u()[t]=e},t.prototype.removeConnection=function(t){u()[t]=null},t.prototype.send=function(t){document.body.appendChild(t)},t.prototype.cleanup=function(t){t.parentNode&&t.parentNode.removeChild(t)},t}();N.decorators=[{type:g.u}],N.ctorParameters=function(){return[]};var F="JSONP injected script did not invoke callback.",B="JSONP requests must use GET request method.",H=function(){function t(){}return t.prototype.finished=function(t){},t}(),q=function(t){function e(e,n,r){var i=t.call(this)||this;if(i._dom=n,i.baseResponseOptions=r,i._finished=!1,e.method!==_.Get)throw new TypeError(B);return i.request=e,i.response=new m.Observable(function(t){i.readyState=x.Loading;var o=i._id=n.nextRequestID();n.exposeConnection(o,i);var a=n.requestCallback(i._id),s=e.url;s.indexOf("=JSONP_CALLBACK&")>-1?s=s.replace("=JSONP_CALLBACK&","="+a+"&"):s.lastIndexOf("=JSONP_CALLBACK")===s.length-"=JSONP_CALLBACK".length&&(s=s.substring(0,s.length-"=JSONP_CALLBACK".length)+"="+a);var u=i._script=n.build(s),c=function(e){if(i.readyState!==x.Cancelled){if(i.readyState=x.Done,n.cleanup(u),!i._finished){var o=new E({body:F,type:w.Error,url:s});return r&&(o=r.merge(o)),void t.error(new I(o))}var a=new E({body:i._responseData,url:s});i.baseResponseOptions&&(a=i.baseResponseOptions.merge(a)),t.next(new I(a)),t.complete()}},l=function(e){if(i.readyState!==x.Cancelled){i.readyState=x.Done,n.cleanup(u);var o=new E({body:e.message,type:w.Error});r&&(o=r.merge(o)),t.error(new I(o))}};return u.addEventListener("load",c),u.addEventListener("error",l),n.send(u),function(){i.readyState=x.Cancelled,u.removeEventListener("load",c),u.removeEventListener("error",l),i._dom.cleanup(u)}}),i}return v.a(e,t),e.prototype.finished=function(t){this._finished=!0,this._dom.removeConnection(this._id),this.readyState!==x.Cancelled&&(this._responseData=t)},e}(H),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v.a(e,t),e}(T),U=function(t){function e(e,n){var r=t.call(this)||this;return r._browserJSONP=e,r._baseResponseOptions=n,r}return v.a(e,t),e.prototype.createConnection=function(t){return new q(t,this._browserJSONP,this._baseResponseOptions)},e}(V);U.decorators=[{type:g.u}],U.ctorParameters=function(){return[{type:N},{type:E}]};var W=/^\)\]\}',?\n/,Y=function(){function t(t,e,n){var r=this;this.request=t,this.response=new m.Observable(function(o){var a=e.build();a.open(_[t.method].toUpperCase(),t.url),null!=t.withCredentials&&(a.withCredentials=t.withCredentials);var s=function(){var e=1223===a.status?204:a.status,r=null;204!==e&&"string"==typeof(r=void 0===a.response?a.responseText:a.response)&&(r=r.replace(W,"")),0===e&&(e=r?200:0);var s=k.fromResponseHeaderString(a.getAllResponseHeaders()),u=i(a)||t.url,c=a.statusText||"OK",l=new E({body:r,status:e,headers:s,statusText:c,url:u});null!=n&&(l=n.merge(l));var h=new I(l);if(h.ok=z(e),h.ok)return o.next(h),void o.complete();o.error(h)},u=function(t){var e=new E({body:t,type:w.Error,status:a.status,statusText:a.statusText});null!=n&&(e=n.merge(e)),o.error(new I(e))};if(r.setDetectedContentType(t,a),null==t.headers&&(t.headers=new k),t.headers.has("Accept")||t.headers.append("Accept","application/json, text/plain, */*"),t.headers.forEach(function(t,e){return a.setRequestHeader(e,t.join(","))}),null!=t.responseType&&null!=a.responseType)switch(t.responseType){case S.ArrayBuffer:a.responseType="arraybuffer";break;case S.Json:a.responseType="json";break;case S.Text:a.responseType="text";break;case S.Blob:a.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return a.addEventListener("load",s),a.addEventListener("error",u),a.send(r.request.getBody()),function(){a.removeEventListener("load",s),a.removeEventListener("error",u),a.abort()}})}return t.prototype.setDetectedContentType=function(t,e){if(null==t.headers||null==t.headers.get("Content-Type"))switch(t.contentType){case M.NONE:break;case M.JSON:e.setRequestHeader("content-type","application/json");break;case M.FORM:e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case M.TEXT:e.setRequestHeader("content-type","text/plain");break;case M.BLOB:var n=t.blob();n.type&&e.setRequestHeader("content-type",n.type)}},t}(),X=function(){function t(t,e){void 0===t&&(t="XSRF-TOKEN"),void 0===e&&(e="X-XSRF-TOKEN"),this._cookieName=t,this._headerName=e}return t.prototype.configureRequest=function(t){var e=Object(y.t)().getCookie(this._cookieName);e&&t.headers.set(this._headerName,e)},t}(),K=function(){function t(t,e,n){this._browserXHR=t,this._baseResponseOptions=e,this._xsrfStrategy=n}return t.prototype.createConnection=function(t){return this._xsrfStrategy.configureRequest(t),new Y(t,this._browserXHR,this._baseResponseOptions)},t}();K.decorators=[{type:g.u}],K.ctorParameters=function(){return[{type:b},{type:E},{type:C}]};var G=function(){function t(t){void 0===t&&(t={});var e=t.method,n=t.headers,i=t.body,o=t.url,a=t.search,s=t.params,u=t.withCredentials,c=t.responseType;this.method=null!=e?r(e):null,this.headers=null!=n?n:null,this.body=null!=i?i:null,this.url=null!=o?o:null,this.params=this._mergeSearchParams(s||a),this.withCredentials=null!=u?u:null,this.responseType=null!=c?c:null}return Object.defineProperty(t.prototype,"search",{get:function(){return this.params},set:function(t){this.params=t},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){return new t({method:e&&null!=e.method?e.method:this.method,headers:e&&null!=e.headers?e.headers:new k(this.headers),body:e&&null!=e.body?e.body:this.body,url:e&&null!=e.url?e.url:this.url,params:e&&this._mergeSearchParams(e.params||e.search),withCredentials:e&&null!=e.withCredentials?e.withCredentials:this.withCredentials,responseType:e&&null!=e.responseType?e.responseType:this.responseType})},t.prototype._mergeSearchParams=function(t){return t?t instanceof A?t.clone():"string"==typeof t?new A(t):this._parseParams(t):this.params},t.prototype._parseParams=function(t){var e=this;void 0===t&&(t={});var n=new A;return Object.keys(t).forEach(function(r){var i=t[r];Array.isArray(i)?i.forEach(function(t){return e._appendParam(r,t,n)}):e._appendParam(r,i,n)}),n},t.prototype._appendParam=function(t,e,n){"string"!=typeof e&&(e=JSON.stringify(e)),n.append(t,e)},t}(),Z=function(t){function e(){return t.call(this,{method:_.Get,headers:new k})||this}return v.a(e,t),e}(G);Z.decorators=[{type:g.u}],Z.ctorParameters=function(){return[]};var Q=function(t){function e(e){var n=t.call(this)||this,i=e.url;n.url=e.url;var o=e.params||e.search;if(o){var a=void 0;if(a="object"!=typeof o||o instanceof A?o.toString():c(o).toString(),a.length>0){var s="?";-1!=n.url.indexOf("?")&&(s="&"==n.url[n.url.length-1]?"":"&"),n.url=i+s+a}}return n._body=e.body,n.method=r(e.method),n.headers=new k(e.headers),n.contentType=n.detectContentType(),n.withCredentials=e.withCredentials,n.responseType=e.responseType,n}return v.a(e,t),e.prototype.detectContentType=function(){switch(this.headers.get("content-type")){case"application/json":return M.JSON;case"application/x-www-form-urlencoded":return M.FORM;case"multipart/form-data":return M.FORM_DATA;case"text/plain":case"text/html":return M.TEXT;case"application/octet-stream":return this._body instanceof nt?M.ARRAY_BUFFER:M.BLOB;default:return this.detectContentTypeFromBody()}},e.prototype.detectContentTypeFromBody=function(){return null==this._body?M.NONE:this._body instanceof A?M.FORM:this._body instanceof tt?M.FORM_DATA:this._body instanceof et?M.BLOB:this._body instanceof nt?M.ARRAY_BUFFER:this._body&&"object"==typeof this._body?M.JSON:M.TEXT},e.prototype.getBody=function(){switch(this.contentType){case M.JSON:case M.FORM:return this.text();case M.FORM_DATA:return this._body;case M.TEXT:return this.text();case M.BLOB:return this.blob();case M.ARRAY_BUFFER:return this.arrayBuffer();default:return null}},e}(D),J=function(){},$="object"==typeof window?window:J,tt=$.FormData||J,et=$.Blob||J,nt=$.ArrayBuffer||J,rt=function(){function t(t,e){this._backend=t,this._defaultOptions=e}return t.prototype.request=function(t,e){var n;if("string"==typeof t)n=l(this._backend,new Q(h(this._defaultOptions,e,_.Get,t)));else{if(!(t instanceof Q))throw new Error("First argument must be a url string or Request instance.");n=l(this._backend,t)}return n},t.prototype.get=function(t,e){return this.request(new Q(h(this._defaultOptions,e,_.Get,t)))},t.prototype.post=function(t,e,n){return this.request(new Q(h(this._defaultOptions.merge(new G({body:e})),n,_.Post,t)))},t.prototype.put=function(t,e,n){return this.request(new Q(h(this._defaultOptions.merge(new G({body:e})),n,_.Put,t)))},t.prototype.delete=function(t,e){return this.request(new Q(h(this._defaultOptions,e,_.Delete,t)))},t.prototype.patch=function(t,e,n){return this.request(new Q(h(this._defaultOptions.merge(new G({body:e})),n,_.Patch,t)))},t.prototype.head=function(t,e){return this.request(new Q(h(this._defaultOptions,e,_.Head,t)))},t.prototype.options=function(t,e){return this.request(new Q(h(this._defaultOptions,e,_.Options,t)))},t}();rt.decorators=[{type:g.u}],rt.ctorParameters=function(){return[{type:T},{type:G}]};var it=function(t){function e(e,n){return t.call(this,e,n)||this}return v.a(e,t),e.prototype.request=function(t,e){if("string"==typeof t&&(t=new Q(h(this._defaultOptions,e,_.Get,t))),!(t instanceof Q))throw new Error("First argument must be a url string or Request instance.");if(t.method!==_.Get)throw new Error("JSONP requests must use GET request method.");return l(this._backend,t)},e}(rt);it.decorators=[{type:g.u}],it.ctorParameters=function(){return[{type:T},{type:G}]};var ot=function(){function t(){}return t}();ot.decorators=[{type:g.B,args:[{providers:[{provide:rt,useFactory:d,deps:[K,G]},b,{provide:G,useClass:Z},{provide:E,useClass:O},K,{provide:C,useFactory:f}]}]}],ot.ctorParameters=function(){return[]};var at=function(){function t(){}return t}();at.decorators=[{type:g.B,args:[{providers:[{provide:it,useFactory:p,deps:[V,G]},N,{provide:G,useClass:Z},{provide:E,useClass:O},{provide:V,useClass:U}]}]}],at.ctorParameters=function(){return[]};new g.Y("4.3.5")},Cc13:function(t,e,n){var r=n("ptrv"),i=n("b4gG"),o=n("KGrn"),a=n("qrqn"),s=n("tose").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},CjAR:function(t,e,n){n("YD56")("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},CpT9:function(t,e){t.exports={state:{time:{startOrigin:"1800",endOrigin:"2015",value:"2015",dim:"time"},entities:{dim:"geo",show:{geo:{$in:["usa","rus","chn","nga"]}}},entities_colorlegend:{dim:"world_4region"},marker:{space:["entities","time"],label:{use:"property",which:"name"},axis_y:{use:"indicator",which:"income_per_person_gdppercapita_ppp_inflation_adjusted",scaleType:"log"},axis_x:{use:"indicator",which:"time",scaleType:"time"},color:{use:"property",which:"world_4region",scaleType:"ordinal",allow:{scales:["ordinal"]},syncModels:["marker_colorlegend"]}},entities_allpossible:{dim:"geo",show:{"is--country":!0}},entities_tags:{dim:"tag"},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",which:"name"}},marker_colorlegend:{space:["entities_colorlegend"],opacityRegular:.8,opacityHighlightDim:.3,label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{use:"property",which:"parent"}}},ui:{datawarning:{doubtDomain:[1800,1950,2015],doubtRange:[1,.3,.2]}}}},CxwD:function(t,e,n){var r=n("JXkd"),i=n("xI8H").onFreeze;n("QN+J")("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},Cz5P:function(t,e,n){"use strict";var r=n("pa70"),i=n("CDXM"),o=n("RT4T"),a=n("ULWX"),s=n("KpI+"),u=n("rppw"),c=n("GVIH"),l=n("fC8q");i(i.S+i.F*!n("UlVq")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,y=l(f);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(f.length),n=new d(e);e>m;m++)c(n,m,g?v(f[m],m):f[m]);else for(h=y.call(f),n=new d;!(i=h.next()).done;m++)c(n,m,g?a(h,v,[i.value,m],!0):i.value);return n.length=m,n}})},DP67:function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var i=n("zijX");e.getSymbolObservable=r,e.observable=r(i.root),e.$$observable=e.observable},DTeS:function(t,e,n){"use strict";n("NhIS")("sub",function(t){return function(){return t(this,"sub","","")}})},ELJJ:function(t,e,n){"use strict";var r=n("2I8z");n.d(e,"a",function(){return r.b})},Ed9o:function(t,e,n){var r=n("ptrv").document;t.exports=r&&r.documentElement},Emqh:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);e.UnsubscriptionError=i},F6ce:function(t,e,n){var r=n("TM12"),i=n("Wy9r");t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},FALa:function(t,e,n){var r=n("CDXM"),i=n("V/jj"),o=Math.exp;r(r.S+r.F*n("umMR")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},Fpv1:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("Io40"),o=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return r(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(i.AsyncAction);e.QueueAction=o},FyA0:function(t,e,n){n("QN+J")("getOwnPropertyNames",function(){return n("y/ue").f})},GMpo:function(t,e,n){"use strict";n("NhIS")("italics",function(t){return function(){return t(this,"i","","")}})},GVIH:function(t,e,n){"use strict";var r=n("tose"),i=n("piOq");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},GWWY:function(t,e,n){n("mzUQ"),n("b8HQ"),t.exports=n("b4gG").Symbol},"Gki+":function(t,e,n){var r=n("CDXM"),i=n("IU2P");r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},GoZW:function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return o.map.call(this,i(t,n))}function i(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}var o=n("lx+J");e.pluck=r},H3aY:function(t,e,n){var r=n("CDXM"),i=n("ptrv").isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},H6Sg:function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}e.isObject=r},HCkn:function(t,e,n){var r=n("Ps07"),i=n("WGJ/"),o=n("gBtn"),a=n("+pQw"),s=n("TJLg"),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},HHMl:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("I2Y9"),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e}(i.AsyncScheduler);e.QueueScheduler=o},HK9U:function(t,e,n){"use strict";n("NhIS")("sup",function(t){return function(){return t(this,"sup","","")}})},HzDK:function(t,e,n){"use strict";var r=n("CDXM"),i=n("OGmI");r(r.P+r.F*!n("bhtb")([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},"I+CO":function(t,e,n){var r=n("3r0D")("toPrimitive"),i=Date.prototype;r in i||n("gxdV")(i,r,n("76yl"))},I2Y9:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("1VPd"),o=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}},e}(i.Scheduler);e.AsyncScheduler=o},I3ay:function(t,e,n){"use strict";function r(){return this.lift(new i.MergeAllOperator(1))}var i=n("TIdC");e.concatAll=r},IGm2:function(t,e,n){"use strict";var r=n("CDXM"),i=n("F6ce");r(r.P+r.F*n("TmDx")("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},IJ3P:function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},IU2P:function(t,e,n){"use strict";var r=n("umMR"),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},Iclu:function(t,e,n){var r=n("ptrv"),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},"IhB/":function(t,e,n){"use strict";var r=n("Io40"),i=n("I2Y9");e.async=new i.AsyncScheduler(r.AsyncAction)},Io40:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("zijX"),o=n("XNum"),a=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),i.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?e:i.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(o.Action);e.AsyncAction=a},J1gq:function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(2);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={version:"1.0.19",build:1507740281036},a=Vizabi.Tool.extend("LineChart",{init:function(t,e){this.name="linechart",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","locale","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"],ui:{show_value_when_drag_play:!0,axis_aligned:!1}},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},default_model:{state:{time:{autoconfig:{type:"time"}},entities:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_colorlegend:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_tags:{autoconfig:{type:"entity_domain",includeOnlyIDs:["tag"]}},marker_tags:{space:["entities_tags"],label:{use:"property"},hook_parent:{}},entities_allpossible:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",autoconfig:{includeOnlyIDs:["name"],type:"string"}}},marker:{space:["entities","time"],axis_x:{use:"indicator",allow:{scales:["time"]},autoconfig:{index:0,type:"time"}},axis_y:{use:"indicator",allow:{scales:["linear","log"]},autoconfig:{type:"measure"}},label:{use:"property",autoconfig:{includeOnlyIDs:["name"],type:"string"}},color:{syncModels:["marker_colorlegend"],autoconfig:{}}},marker_colorlegend:{space:["entities_colorlegend"],label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}}},locale:{},ui:{chart:{labels:{min_number_of_entities_when_values_hide:2},whenHovering:{hideVerticalNow:!1,showProjectionLineX:!0,showProjectionLineY:!0,higlightValueX:!0,higlightValueY:!0,showTooltip:!1}},datawarning:{doubtDomain:[],doubtRange:[]},buttons:["colors","find","show","moreoptions","fullscreen","presentation"],dialogs:{popup:["colors","find","show","moreoptions"],sidebar:["colors","show"],moreoptions:["opacity","speed","axes","colors","presentation","about"]},presentation:!1}},versionInfo:o});e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi,i=r.utils,o=r.Component,a=r.helpers,s=a["d3.axisWithLabelPicker"],u=a["d3.collisionResolver"],c=r.iconset,l=c.warn,h=c.question,f=o.extend("linechart",{init:function(t,e){var r=this;this.name="linechart",this.template=n(3),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}],this.model_binds={"change:time.value":function(){r._readyOnce&&r.model.marker.getFrame(r.model.time.value,function(t,e){if(!r._frameIsValid(t))return i.warn("change:time.value: empty data received from marker.getFrame(). doing nothing");r.frameChanged(t,e)})},"change:time.playing":function(){r.model.time.playing&&i.isTouchDevice()&&!r.tooltip.classed("vzb-hidden")&&r.tooltip.classed("vzb-hidden",!0)},"change:time.start":function(){r._readyOnce&&r.updateShow()},"change:time.end":function(){r._readyOnce&&r.updateShow()},"change:marker":function(t,e){if(r._readyOnce){if(e.indexOf("domainMin")>-1||e.indexOf("domainMax")>-1||e.indexOf("zoomedMin")>-1||e.indexOf("zoomedMax")>-1){if(!r.yScale||!r.xScale)return;return r.updateShow(),r.zoomToMaxMin(),r.updateSize(),r.updateTime(),void r.redrawDataPoints()}e.indexOf("scaleType")>-1&&(r.updateShow(),r.zoomToMaxMin(),r.updateSize(),r.redrawDataPoints())}},"change:marker.highlight":function(){r._readyOnce&&r.highlightLines()},"change:marker.select":function(){r._readyOnce&&(r.updateDoubtOpacity(),r.highlightLines())},"change:marker.opacitySelectDim":function(){r._readyOnce&&r.highlightLines()},"change:marker.opacityRegular":function(){r._readyOnce&&r.highlightLines()},"change:entities.show":function(){r.values=null},"change:marker.color.palette":function(){r._readyOnce&&r.updateColors()}},this._super(t,e),this.xScale=null,this.yScale=null,this.rangeXRatio=1,this.rangeXShift=0,this.rangeYRatio=1,this.rangeYShift=0,this.lineWidthScale=d3.scaleLinear().domain([0,20]).range([7,1]).clamp(!0),this.xAxis=s("bottom"),this.yAxis=s("left"),this.COLOR_BLACKISH="#333",this.COLOR_WHITEISH="#fdfdfd",this.COLOR_WHITEISH_SHADE=d3.rgb(this.COLOR_WHITEISH).darker(.5).toString(),this.isDataPreprocessed=!1,this.timeUpdatedOnce=!1,this.sizeUpdatedOnce=!1,this.getNearestKey=i.memoize(this.getNearestKey)},readyOnce:function(){var t=this,e=this;this.element=d3.select(this.element),this.graph=this.element.select(".vzb-lc-graph"),this.yAxisElContainer=this.graph.select(".vzb-lc-axis-y"),this.yAxisEl=this.yAxisElContainer.select("g"),this.xAxisElContainer=this.graph.select(".vzb-lc-axis-x"),this.xAxisEl=this.xAxisElContainer.select("g"),this.xTitleEl=this.graph.select(".vzb-lc-axis-x-title"),this.yTitleEl=this.graph.select(".vzb-lc-axis-y-title"),this.yInfoEl=this.graph.select(".vzb-lc-axis-y-info"),this.linesContainerCrop=this.graph.select(".vzb-lc-lines-crop"),this.linesContainer=this.graph.select(".vzb-lc-lines"),this.labelsContainerCrop=this.graph.select(".vzb-lc-labels-crop"),this.labelsContainer=this.graph.select(".vzb-lc-labels"),this.dataWarningEl=this.graph.select(".vzb-data-warning"),this.verticalNow=this.labelsContainer.select(".vzb-lc-vertical-now"),this.tooltip=this.element.select(".vzb-tooltip"),this.projectionX=this.graph.select(".vzb-lc-projection-x"),this.projectionY=this.graph.select(".vzb-lc-projection-y"),this.entityLines=null,this.entityLabels=null,this.totalLength_1={},this.KEY=this.model.entities.getDimension(),this.collisionResolver=u().selector(".vzb-lc-label").value("valueY").filter(function(t,e){return t.valueX-e==0&&!t.hidden});var n=this.model.marker.axis_y.getConceptprops();i.setIcon(this.yInfoEl,h).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(n.description||n.sourceLink))),this.yInfoEl.on("click",function(){e.parent.findChildByName("gapminder-datanotes").pin()}),this.yInfoEl.on("mouseover",function(){var t=this.getBBox(),n=i.makeAbsoluteContext(this,this.farthestViewportElement)(t.x-10,t.y+t.height+10);e.parent.findChildByName("gapminder-datanotes").setHook("axis_y").show().setPos(n.x,n.y)}),this.yInfoEl.on("mouseout",function(){e.parent.findChildByName("gapminder-datanotes").hide()}),this.wScale=d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange),this.on("resize",function(){e.updateSize()||(e.updateTime(),e.redrawDataPoints())}),this.graph.on("click",function(){1==t.model.marker.highlight.length&&e.model.marker.selectMarker(t.model.marker.highlight[0])})},ready:function(){this.all_steps=this.model.time.getAllSteps(),this.all_values=this.values=null,this.updateTime(),this.updateUIStrings(),this.updateShow();var t=this;this.model.marker.getFrame(null,function(e){t.all_values=e,t.model.marker.getFrame(t.model.time.value,function(e){t._frameIsValid(e)&&(t.values=e,t.updateShow(),t.updateSize()||(t.updateDoubtOpacity(),t.zoomToMaxMin(),t.redrawDataPoints(),t.linesContainerCrop.on("mousemove",t.entityMousemove.bind(t,null,null,t)).on("mouseleave",t.entityMouseout.bind(t,null,null,t))))})})},_frameIsValid:function(t){return!(!t||0===Object.keys(t.axis_y).length||0===Object.keys(t.axis_x).length||0===Object.keys(t.color).length)},frameChanged:function(t,e){this.frame=t,this.updateTime(),this.all_values&&this.redrawDataPoints()},updateUIStrings:function(){var t=this,e=t.model.marker.axis_y.getConceptprops(),n=t.model.marker.axis_x.getConceptprops(),r=t.model.marker.color.getConceptprops();this.translator=this.model.locale.getTFunction(),this.strings={title:{Y:e.name,X:n.name,C:r.name},unit:{Y:e.unit||"",X:n.unit||"",C:r.unit||""}},this.strings.unit.Y==="unit/"+this.model.marker.axis_y.which&&(this.strings.unit.Y=""),this.strings.unit.X==="unit/"+this.model.marker.axis_x.which&&(this.strings.unit.X=""),this.strings.unit.C==="unit/"+this.model.marker.color.which&&(this.strings.unit.C=""),this.strings.unit.Y&&(this.strings.unit.Y=", "+this.strings.unit.Y),this.strings.unit.X&&(this.strings.unit.X=", "+this.strings.unit.X),this.strings.unit.C&&(this.strings.unit.C=", "+this.strings.unit.C),i.setIcon(this.dataWarningEl,l).select("svg").attr("width","0px").attr("height","0px"),this.dataWarningEl.append("text").attr("text-anchor","end").text(this.translator("hints/dataWarning")),this.dataWarningEl.on("click",function(){t.parent.findChildByName("gapminder-datawarning").toggle()}).on("mouseover",function(){t.updateDoubtOpacity(1)}).on("mouseout",function(){t.updateDoubtOpacity()});var o=this.xTitleEl.selectAll("text").data([0]);o=o.enter().append("text").merge(o);var a=this.yTitleEl.selectAll("text").data([0]);a=a.enter().append("text").merge(a),a.on("click",function(){t.parent.findChildByName("gapminder-treemenu").markerID("axis_y").alignX("left").alignY("top").updateView().toggle()})},updateDoubtOpacity:function(t){null==t&&(t=this.wScale(+this.time.getUTCFullYear().toString())),this.someSelected&&(t=1),this.dataWarningEl.style("opacity",t)},updateShow:function(){var t=this,e=this.KEY;if(this.cached={},this.yScale=this.model.marker.axis_y.getScale(),!this.splash){var n=this.model.marker.axis_y.getLimits(this.model.marker.axis_y.which);this.yScale.domain([n.min,n.max])}this.xScale=this.model.marker.axis_x.getScale(),this.cScale=this.model.marker.color.getScale(),this.yAxis.tickFormat(this.model.marker.axis_y.getTickFormatter()),this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter()),this.collisionResolver.scale(this.yScale).KEY(e),this.data=this.model.marker.getKeys(),this.linesContainer.selectAll(".vzb-lc-entity").remove(),this.entityLines=this.linesContainer.selectAll(".vzb-lc-entity").data(this.data),this.lineWidth=this.lineWidthScale(this.data.length),this.lineWidth>=2?this.shadowWidth=1.3*this.lineWidth:this.shadowWidth=null,this.labelsContainer.classed("small",!this.shadowWidth),this.entityLines=this.entityLines.enter().append("g").attr("class","vzb-lc-entity").each(function(e,n){var r=d3.select(this);t.shadowWidth&&r.append("path").attr("class","vzb-lc-line-shadow"),r.append("path").attr("class","vzb-lc-line")}).merge(this.entityLines),this.labelsContainer.selectAll(".vzb-lc-entity").remove(),this.entityLabels=this.labelsContainer.selectAll(".vzb-lc-entity").data(this.data),this.entityLabels=this.entityLabels.enter().append("g").attr("class","vzb-lc-entity").on("mouseover",function(e){t.model.marker.highlightMarker(e)}).on("mouseout",function(e){t.model.marker.clearHighlighted()}).each(function(t,e){var n=d3.select(this);n.append("circle").attr("class","vzb-lc-circle").attr("cx",0);var r=n.append("g").attr("class","vzb-lc-label");r.append("text").attr("class","vzb-lc-labelname vzb-lc-labelstroke").attr("dy",".35em"),r.append("text").attr("class","vzb-lc-labelname vzb-lc-labelfill").attr("dy",".35em"),r.append("text").attr("class","vzb-lc-label-value").attr("dy","1.6em")}).merge(this.entityLabels),this.all_values&&this.values&&this.entityLabels.each(function(n,r){var i=d3.select(this),o=t.getColorsByValue(t.values.color[n[e]]),a=o.color,s=o.colorShadow,u=t.values.label[n[e]],c=t.yAxis.tickFormat()(t.values.axis_y[n[e]]),l=u.length<13?u:u.substring(0,10)+"...",h=t.ui.chart.labels.min_number_of_entities_when_values_hide;i.select("circle").style("fill",a),i.selectAll(".vzb-lc-labelname").text(l+" "+(t.data.length<h?c:"")),i.select(".vzb-lc-labelfill").style("fill",s),i.select(".vzb-lc-label-value").style("fill",s)}),this.line=d3.line().curve(d3.curveMonotoneX).x(function(e){return t.xScale(e[0])}).y(function(e){return t.yScale(e[1])})},getColorsByValue:function(t){return{color:null!=t?this.cScale(t):this.COLOR_WHITEISH,colorShadow:null!=t?this.model.marker.color.getColorShade({colorID:t,shadeID:"shade"}):this.COLOR_WHITEISH_SHADE}},updateColors:function(){var t=this,e=this.KEY,n=this.values.color;this.cScale=this.model.marker.color.getScale(),this.entityLabels.each(function(r,i){var o=d3.select(this),a=t.getColorsByValue(n[r[e]]),s=a.color,u=a.colorShadow;o.select("circle").style("fill",s),o.select(".vzb-lc-labelfill").style("fill",u),o.select(".vzb-lc-label-value").style("fill",u)}),this.entityLines.each(function(r,i){var o=d3.select(this),a=t.getColorsByValue(n[r[e]]),s=a.color,u=a.colorShadow;o.select(".vzb-lc-line").style("stroke",s),o.select(".vzb-lc-line-shadow").style("stroke",u)})},updateTime:function(){var t=this,e=(this.KEY,null===this.time?this.model.time.value:this.time);this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-e>0?this.model.time.delayAnimations:0,{}[this.model.time.getDimension()]=this.time,this.prev_steps=this.all_steps.filter(function(e){return e<t.time}),this.timeUpdatedOnce=!0},profiles:{small:{margin:{top:30,right:20,left:40,bottom:20},infoElHeight:16,yAxisTitleBottomMargin:6,tick_spacing:60,text_padding:12,lollipopRadius:6,limitMaxTickNumberX:5},medium:{margin:{top:40,right:60,left:60,bottom:25},infoElHeight:20,yAxisTitleBottomMargin:6,tick_spacing:80,text_padding:15,lollipopRadius:7,limitMaxTickNumberX:10},large:{margin:{top:50,right:60,left:75,bottom:30},infoElHeight:22,yAxisTitleBottomMargin:6,tick_spacing:100,text_padding:20,lollipopRadius:9,limitMaxTickNumberX:0}},presentationProfileChanges:{medium:{margin:{top:70,bottom:40,left:70},yAxisTitleBottomMargin:20,xAxisTitleBottomMargin:20,infoElHeight:26,text_padding:30},large:{margin:{top:70,bottom:50,left:70},yAxisTitleBottomMargin:20,xAxisTitleBottomMargin:20,infoElHeight:32,text_padding:36,hideSTitle:!0}},timeSliderProfiles:{small:{margin:{top:7,right:15,bottom:10,left:60}},medium:{margin:{top:10,right:15,bottom:10,left:60}},large:{margin:{top:5,right:15,bottom:10,left:75}}},updateSize:function(){var t=this;this.values,this.KEY,this.activeProfile=this.getActiveProfile(this.profiles,this.presentationProfileChanges),this.margin=this.activeProfile.margin,this.tick_spacing=this.activeProfile.tick_spacing;var e=this.activeProfile.infoElHeight,n=0;if(this.entityLabels.selectAll(".vzb-lc-labelname").attr("dx",t.activeProfile.text_padding).each(function(t,e){var r=this.getComputedTextLength();r>n&&(n=r)}),this.entityLabels.selectAll(".vzb-lc-circle").attr("r",this.shadowWidth?t.activeProfile.lollipopRadius:.8*t.activeProfile.lollipopRadius),this.margin.right=Math.max(this.margin.right,n+this.activeProfile.text_padding+20),this.height=parseInt(this.element.style("height"),10)-this.margin.top-this.margin.bottom||0,this.width=parseInt(this.element.style("width"),10)-this.margin.left-this.margin.right||0,this.height<=0||this.width<=0)return i.warn("Line chart updateSize() abort: vizabi container is too little or has display:none");this.linesContainerCrop.attr("width",this.width).attr("height",Math.max(0,this.height)),this.labelsContainerCrop.attr("width",this.width+this.margin.right).attr("height",Math.max(0,this.height)),this.collisionResolver.height(this.height),this.graph.attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.yScale.range([this.height-this.activeProfile.lollipopRadius,this.activeProfile.lollipopRadius]),this.xScale.range([this.rangeXShift,this.width*this.rangeXRatio+this.rangeXShift]),this.yAxis.scale(this.yScale).tickSizeInner(-this.width).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-this.width,0).labelerOptions({scaleType:this.model.marker.axis_y.scaleType,toolMargin:this.margin,limitMaxTickNumber:6,viewportLength:this.height,formatter:this.model.marker.axis_y.getTickFormatter()}),this.xAxis.scale(this.xScale).tickSizeInner(-this.height).tickSizeOuter(0).tickSizeMinor(-this.height,0).tickPadding(6).labelerOptions({scaleType:this.model.marker.axis_x.scaleType,limitMaxTickNumber:this.activeProfile.limitMaxTickNumberX,toolMargin:this.margin,bump:2*this.activeProfile.text_padding,formatter:this.model.marker.axis_x.getTickFormatter()}),this.xAxisElContainer.attr("width",this.width+2*this.activeProfile.text_padding).attr("height",this.activeProfile.margin.bottom+this.height).attr("y",-1).attr("x",-this.activeProfile.text_padding),this.xAxisEl.attr("transform","translate("+(this.activeProfile.text_padding-1)+","+(this.height+1)+")"),this.yAxisElContainer.attr("width",this.activeProfile.margin.left+this.width).attr("height",Math.max(0,this.height)).attr("x",-this.activeProfile.margin.left),this.yAxisEl.attr("transform","translate("+(this.activeProfile.margin.left-1)+",0)"),this.yAxisEl.call(this.yAxis),this.xAxisEl.call(this.xAxis),this.yTitleEl.style("font-size",e+"px").attr("transform","translate("+(10-this.activeProfile.margin.left)+", -"+this.activeProfile.yAxisTitleBottomMargin+")");var r=this.yTitleEl.select("text").text(this.strings.title.Y+this.strings.unit.Y);if(r.node().getBBox().width>this.width&&r.text(this.strings.title.Y),this.yInfoEl.select("svg").node()){var o=this.yTitleEl.node().getBBox(),a=i.transform(this.yTitleEl.node());this.yInfoEl.select("svg").attr("width",e+"px").attr("height",e+"px"),this.yInfoEl.attr("transform","translate("+(o.x+a.translateX+o.width+.4*e)+","+(a.translateY-.8*e)+")")}var s=this.dataWarningEl.select("text").node().getBBox();this.dataWarningEl.select("svg").attr("width",.75*s.height).attr("height",.75*s.height).attr("x",-s.width-1.2*s.height).attr("y",.65*-s.height),this.dataWarningEl.attr("transform","translate("+(this.width+s.width+2*s.height)+",-"+this.activeProfile.yAxisTitleBottomMargin+")").select("text");var u=this.xTitleEl.select("text").text(this.strings.title.X+this.strings.unit.X);this.xTitleEl.style("font-size",e+"px").attr("transform","translate("+(this.width+this.activeProfile.text_padding+this.activeProfile.yAxisTitleBottomMargin)+","+(this.height+.72*u.node().getBBox().height)+")"),u.node().getBBox().width>this.width-100&&u.text(this.strings.title.X),this.verticalNow.attr("y1",this.yScale.range()[0]).attr("y2",this.yScale.range()[1]).attr("x1",0).attr("x2",0),this.projectionX.attr("y1",t.yScale.range()[0]),this.projectionY.attr("x2",t.xScale.range()[0]),i.isTouchDevice()&&(t.tooltip.classed("vzb-hidden",!0),t.verticalNow.style("opacity",1),t.projectionX.style("opacity",0),t.projectionY.style("opacity",0),t.xAxisEl.call(t.xAxis.highlightValue(t.time)),t.yAxisEl.call(t.yAxis.highlightValue("none")),t.graph.selectAll(".vzb-lc-entity").each(function(){d3.select(this).classed("vzb-dimmed",!1).classed("vzb-hovered",!1)}),t.hoveringNow=null);var c={rangeMax:this.xScale.range()[1],mRight:n-20,profile:this.timeSliderProfiles[this.getLayoutProfile()]};this.parent.trigger("myEvent",c),this.sizeUpdatedOnce=!0},redrawDataPoints:function(){var t=this,e=this.KEY;t.all_values&&this.model.marker.getFrame(this.time,function(n,r){t._frameIsValid(n)&&(t.values=n,t.timeUpdatedOnce||t.updateTime(),t.sizeUpdatedOnce||t.updateSize(),t.updateDoubtOpacity(),t.entityLines.each(function(r,i){var o=d3.select(this),a=(n.label[r[e]],t.getColorsByValue(n.color[r[e]])),s=a.color,u=a.colorShadow,c=t.prev_steps.map(function(n,i){return[n,t.all_values[n]?t.all_values[n].axis_y[r[e]]:null]}).filter(function(t){return t[1]||0===t[1]});n.axis_y[r[e]]&&c.push([n.axis_x[r[e]],n.axis_y[r[e]]]),c.length>0?t.cached[r[e]]={valueX:c[c.length-1][0],valueY:c[c.length-1][1]}:delete t.cached[r[e]];var l=o.select(".vzb-lc-line");t.model.time.playing&&null===t.totalLength_1[r[e]]&&(t.totalLength_1[r[e]]=l.node().getTotalLength());var h=t.line(c)||"",f=o.select(".vzb-lc-line-shadow").style("stroke",u).style("stroke-width",t.shadowWidth+"px").attr("transform","translate(0, "+(t.shadowWidth-t.lineWidth)+")").attr("d",h);l.style("stroke",s).style("stroke-width",t.lineWidth+"px").attr("d",h);var d=l.node().getTotalLength();t.model.time.playing?(f.interrupt().attr("stroke-dasharray",d).attr("stroke-dashoffset",d-t.totalLength_1[r[e]]).transition().delay(0).duration(t.duration).ease(d3.easeLinear).attr("stroke-dashoffset",0),l.interrupt().attr("stroke-dasharray",d).attr("stroke-dashoffset",d-t.totalLength_1[r[e]]).transition().delay(0).duration(t.duration).ease(d3.easeLinear).attr("stroke-dashoffset",0),t.totalLength_1[r[e]]=d):(t.totalLength_1[r[e]]=null,f.attr("stroke-dasharray","none").attr("stroke-dashoffset","none"),l.attr("stroke-dasharray","none").attr("stroke-dashoffset","none"))}),t.entityLabels.each(function(n,r){var i=d3.select(this);if(t.cached[n[e]]){if(n.valueX=t.xScale(t.cached[n[e]].valueX),n.valueY=t.yScale(t.cached[n[e]].valueY),i.classed("vzb-hidden",!1).transition().duration(t.duration).ease(d3.easeLinear).attr("transform","translate("+n.valueX+",0)"),i.select(".vzb-lc-circle").transition().duration(t.duration).ease(d3.easeLinear).attr("cy",n.valueY+1),t.data.length<t.ui.chart.labels.min_number_of_entities_when_values_hide){var o=t.values.label[n[e]],a=t.yAxis.tickFormat()(t.cached[n[e]].valueY),s=o.length<13?o:o.substring(0,10)+"...";i.selectAll(".vzb-lc-labelname").text(s+" "+a)}i.select(".vzb-lc-label").transition().duration(t.duration).ease(d3.easeLinear).attr("transform","translate(0,"+n.valueY+")")}else i.classed("vzb-hidden",!0)}),t.verticalNow.transition().duration(t.duration).ease(d3.easeLinear).attr("transform","translate("+t.xScale(d3.min([t.model.marker.axis_x.getZoomedMax(),t.time]))+",0)"),t.hoveringNow||t.time-t.model.time.start==0?t.verticalNow.style("opacity",0):(t.ui.chart.hideXAxisValue||t.xAxisEl.call(t.xAxis.highlightTransDuration(t.duration).highlightValue(t.time)),t.verticalNow.style("opacity",1)),0==t.duration&&d3.timerFlush(),clearTimeout(t.collisionTimeout),t.collisionTimeout=setTimeout(function(){t.entityLabels.call(t.collisionResolver.time(t.xScale(t.time)))},1.5*t.model.time.delayAnimations))})},entityMousemove:function(t,e,n,r){var o=n,a=o.KEY,s=(o.values,d3.mouse(o.element.node()).map(function(t){return parseInt(t)})),u=o.xScale.invert(s[0]-o.margin.left);o.time-u<0?u=o.time:u<this.model.time.start&&(u=this.model.time.start);var c=void 0,l=s[1]-o.margin.top;i.isDate(u)||(u=this.model.time.parse(u)),this.model.marker.getFrame(u,function(e){if(o._frameIsValid(e)){var n=o.getNearestKey(l,e.axis_y,o.yScale.bind(o));if(c=e.axis_y[n],t||(t={}),t[a]=n,o.model.marker.isHighlighted(t)||(o.model.marker.clearHighlighted(),o.model.marker.highlightMarker(t)),o.hoveringNow=t,!i.isNaN(c)){var r=o.xScale(u),s=o.yScale(c);o.ui.chart.whenHovering.showTooltip&&o.tooltip.style("left",r+o.margin.left+"px").style("bottom",o.height-s+o.margin.bottom+"px").text(o.yAxis.tickFormat()(c)).classed("vzb-hidden",!1),o.ui.chart.whenHovering.hideVerticalNow&&o.verticalNow.style("opacity",0),o.ui.chart.whenHovering.showProjectionLineX&&o.projectionX.style("opacity",1).attr("y2",s).attr("x1",r).attr("x2",r),o.ui.chart.whenHovering.showProjectionLineY&&o.projectionY.style("opacity",1).attr("y1",s).attr("y2",s).attr("x1",r),o.ui.chart.whenHovering.higlightValueX&&o.xAxisEl.call(o.xAxis.highlightValue(u).highlightTransDuration(0)),o.ui.chart.whenHovering.higlightValueY&&o.yAxisEl.call(o.yAxis.highlightValue(c).highlightTransDuration(0)),clearTimeout(o.unhoverTimeout)}}})},entityMouseout:function(t,e,n){var r=n;d3.event.relatedTarget&&d3.select(d3.event.relatedTarget).classed("vzb-tooltip")||(r.unhoverTimeout=setTimeout(function(){r.tooltip.classed("vzb-hidden",!0),r.verticalNow.style("opacity",1),r.projectionX.style("opacity",0),r.projectionY.style("opacity",0),r.xAxisEl.call(r.xAxis.highlightValue(r.time)),r.yAxisEl.call(r.yAxis.highlightValue("none")),r.model.marker.clearHighlighted(),r.hoveringNow=null},300))},highlightLines:function(){var t=this,e=this.KEY,n=this.model.marker.opacityRegular,r=this.model.marker.opacitySelectDim,i=this.model.marker.highlight.length>0;this.someSelected=this.model.marker.select.length>0,this.nonSelectedOpacityZero=t.model.marker.opacitySelectDim<.01;var o={};t.model.marker.getSelected().map(function(t){o[t[e]]=!0}),this.entityLines.style("opacity",function(a){return t.model.marker.isHighlighted(a)?1:t.someSelected?o[a[e]]?1:r:i?.3:n}),this.entityLabels.style("opacity",function(a){return t.model.marker.isHighlighted(a)?(a.sortValue=1,1):(a.sortValue=0,t.someSelected?o[a[e]]?1:r:i?.3:n)}).attr("pointer-events",function(n){return t.someSelected&&t.nonSelectedOpacityZero&&!o[n[e]]?(n.hidden=!0,"none"):(n.hidden=!1,"visible")}).sort(function(t,e){return d3.ascending(t.sortValue,e.sortValue)})},zoomToMaxMin:function(){null!=this.model.marker.axis_x.getZoomedMin()&&null!=this.model.marker.axis_x.getZoomedMax()&&(this.xScale.domain([this.model.marker.axis_x.getZoomedMin(),this.model.marker.axis_x.getZoomedMax()]),this.xAxisEl.call(this.xAxis)),null!=this.model.marker.axis_y.getZoomedMin()&&null!=this.model.marker.axis_y.getZoomedMax()&&((this.model.marker.axis_y.getZoomedMin()<=0||this.model.marker.axis_y.getZoomedMax()<=0)&&"log"==this.model.marker.axis_y.scaleType?(this.yScale=d3.scaleGenericlog().domain([this.model.marker.axis_y.getZoomedMin(),this.model.marker.axis_y.getZoomedMax()]).range(this.yScale.range()),this.model.marker.axis_y.scale=d3.scaleGenericlog().domain([this.model.marker.axis_y.getZoomedMin(),this.model.marker.axis_y.getZoomedMax()]).range(this.yScale.range()),this.yScale=this.model.marker.axis_y.scale):this.yScale.domain([this.model.marker.axis_y.getZoomedMin(),this.model.marker.axis_y.getZoomedMax()]),this.yAxisEl.call(this.yAxis))},getNearestKey:function(t,e,n){var r=this.KEY,i=Object.keys(e);this.someSelected&&this.nonSelectedOpacityZero&&(i=this.model.marker.select.map(function(t){return t[r]}));for(var o=i[0],a=1;a<i.length;a++){var s=i[a];Math.abs((n?n(e[s]):e[s])-t)<Math.abs((n?n(e[o]):e[o])-t)&&(o=s)}return o}});e.default=f},function(t,e){},function(t,e){t.exports='\x3c!-- LineChart Component --\x3e\n<div class="vzb-linechart">\n    <svg class="vzb-linechart-svg">\n        <g class="vzb-lc-graph">\n\n            <svg class="vzb-lc-axis-x"><g></g></svg>\n            <svg class="vzb-lc-axis-y"><g></g></svg>\n            <text class="vzb-lc-axis-x-value"></text>\n            <text class="vzb-lc-axis-y-value"></text>\n            <svg class="vzb-lc-lines-crop">\n                <svg class="vzb-lc-lines"></svg>\n                <line class="vzb-lc-projection-x"></line>\n                <line class="vzb-lc-projection-y"></line>\n            </svg>\n            <svg class="vzb-lc-labels-crop">\n                <g class="vzb-lc-labels">\n                    <line class="vzb-lc-vertical-now"></line>\n                </g>\n            </svg>\n\n            <g class="vzb-lc-axis-y-title"></g>\n            <g class="vzb-lc-axis-x-title"></g>\n            <g class="vzb-lc-axis-y-info"></g>\n\n            <g class="vzb-data-warning vzb-noexport">\n                <svg></svg>\n                <text></text>\n            </g>\n\n\n            \x3c!--filter id="vzb-lc-filter-dropshadow"> \n              <feOffset result="offOut" in="SourceGraphic" dx="0" dy="2" />\n              <feColorMatrix result = "matrixOut" in = "offOut" type = "matrix"\n                             values = "0.3 .0 .0 .0 .0\n                                       .0 .3 .0 .0 .0\n                                       .0 .0 .3 .0 .0\n                                       1.0 1.0 1.0 1.0 .0"/>\n              <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="0.8" />\n              <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n            </filter--\x3e\n\n        </g>\n    </svg>\n    <div class="vzb-tooltip vzb-hidden"></div>\n</div>\n'},function(t,e,n){t.exports=n(0)}])},JXkd:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},JeTp:function(t,e){t.exports={state:{time:{startOrigin:"1800",endOrigin:"2015",value:"2015",dim:"time"},entities:{dim:"geo",show:{"is--country":!0}},entities_colorlegend:{dim:"world_4region"},entities_tags:{dim:"tag"},marker:{space:["entities","time"],label:{use:"property",which:"name"},size:{use:"indicator",which:"population_total",scaleType:"linear",domainMin:15,domainMax:14e8,allow:{scales:["linear"]}},hook_lat:{use:"property",which:"latitude",_important:!0},hook_lng:{use:"property",which:"longitude",_important:!0},color:{use:"property",which:"world_4region",scaleType:"ordinal",syncModels:["marker_colorlegend"]}},marker_colorlegend:{space:["entities_colorlegend"],opacityRegular:.8,opacityHighlightDim:.3,label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{use:"property",which:"parent"}}},ui:{datawarning:{doubtDomain:[1800,1950,2015],doubtRange:[1,.3,.2]},map:{scale:1,preserveAspectRatio:!1,offset:{top:.05,bottom:-.12}},splash:!0}}},JnZr:function(t,e,n){var r=n("RT4T"),i=n("TJLg");n("QN+J")("getPrototypeOf",function(){return function(t){return i(r(t))}})},K1rc:function(t,e,n){var r=n("ptrv"),i=n("Ula3"),o=n("tose").f,a=n("PNtC").f,s=n("TM12"),u=n("8H1R"),c=r.RegExp,l=c,h=c.prototype,f=/a/g,d=/a/g,p=new c(f)!==f;if(n("V+0c")&&(!p||n("umMR")(function(){return d[n("3r0D")("match")]=!1,c(f)!=f||c(d)==d||"/a/i"!=c(f,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var v=a(l),g=0;v.length>g;)!function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}(v[g++]);h.constructor=c,c.prototype=h,n("lfBE")(r,"RegExp",c)}n("KpXt")("RegExp")},KGrn:function(t,e){t.exports=!1},KM3d:function(t,e,n){var r=n("9wYb"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},Kp6H:function(t,e,n){var r=n("CDXM"),i=n("+GRi"),o=n("rppw");r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},"KpI+":function(t,e,n){var r=n("lexG"),i=n("3r0D")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},KpXt:function(t,e,n){"use strict";var r=n("ptrv"),i=n("tose"),o=n("V+0c"),a=n("3r0D")("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},Ku3N:function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(6);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r);n(2);var o={version:"1.0.18",build:1507740581578},a=Vizabi.Tool.extend("MountainChart",{init:function(t,e){this.name="mountainchart",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","locale","data","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},default_model:{state:{time:{delay:100,delayThresholdX2:50,delayThresholdX4:25},entities:{opacitySelectDim:.3,opacityRegular:.7}},locale:{},ui:{chart:{manualSortingEnabled:!0,yMaxMethod:"latest",showProbeX:!0,probeX:1.85,xLogStops:[1,2,5],xPoints:50,preload:"income_mountains",preloadKey:"world"},buttons:["colors","find","stack","show","moreoptions","fullscreen","presentation"],dialogs:{popup:["colors","find","stack","show","moreoptions"],sidebar:["colors","find","stack"],moreoptions:["opacity","speed","stack","axesmc","colors","presentation","about"]},datawarning:{doubtDomain:[],doubtRange:[]},presentation:!1}},versionInfo:o});e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=r(o),s=n(5),u=r(s),c=n(4),l=r(c),h=Vizabi,f=h.utils,d=(h._globals,h.iconset),p=d.warn,v=d.question,g=h.helpers,m=g.svgexport,y=g["d3.axisWithLabelPicker"],b=g["d3.dynamicBackground"],_=Vizabi.Component.extend("mountainchart",{init:function(t,e){var r=this;this.name="mountainchart",this.template=n(8),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"locale",type:"locale"},{name:"data",type:"data"},{name:"ui",type:"ui"}],this.model_binds={"change:time.value":function(t){r._readyOnce&&r.model.marker.getFrame(r.model.time.value,r.frameChanged.bind(r))},"change:time.playing":function(t){r.model.time.playing||r.redrawDataPoints()},"change:marker.axis_x.xScaleFactor":function(){r.ready()},"change:marker.axis_x.xScaleShift":function(){r.ready()},"change:marker.axis_x.tailFatX":function(){r.ready()},"change:marker.axis_x.tailCutX":function(){r.ready()},"change:marker.axis_x.tailFade":function(){r.ready()},"change:ui.chart.probeX":function(){r.ready()},"change:ui.chart.showProbeX":function(){r.ready()},"change:ui.chart.xPoints":function(){r.ready()},"change:ui.chart.xLogStops":function(){r.updateSize()},"change:ui.chart.yMaxMethod":function(){r._adjustMaxY({force:!0}),r.redrawDataPoints()},"change:time.record":function(t){r.model.time.record?r._export.open(this.element,this.name):r._export.reset()},"change:marker.highlight":function(t){r._readyOnce&&(r.highlightMarkers(),r.updateOpacity())},"change:marker.select":function(t){r._readyOnce&&(r.selectMarkers(),r._selectlist.redraw(),r.updateOpacity(),r.updateDoubtOpacity(),r.redrawDataPoints(),r._probe.redraw())},"change:marker.opacitySelectDim":function(t){r.updateOpacity()},"change:marker.opacityRegular":function(t){r.updateOpacity()},"change:marker":function(t,e){r._readyOnce&&(e.indexOf("scaleType")>-1?r.ready():(e.indexOf("zoomedMin")>-1||e.indexOf("zoomedMax")>-1)&&(r.zoomToMaxMin(),r.redrawDataPoints(),r._probe.redraw()))},"change:marker.group":function(t,e){r._readyOnce&&(e.indexOf("group.merge")>-1||r.ready())},"change:marker.group.merge":function(t){r._readyOnce&&(r.updatePointers(),r.redrawDataPoints())},"change:marker.stack":function(t){r._readyOnce&&r.ready()},"change:marker.stack.which":function(t){r._readyOnce&&r.model.time.playing&&r.model.time.pause()},"change:marker.stack.use":function(t){r._readyOnce&&r.model.time.playing&&r.model.time.pause()},"change:marker.color.palette":function(t){r._readyOnce&&(r.redrawDataPointsOnlyColors(),r._selectlist.redraw())}},this._super(t,e),this._math=new a.default(this),this._export=new m(this),this._export.prefix("vzb-mc-").deleteClasses(["vzb-mc-mountains-mergestacked","vzb-mc-mountains-mergegrouped","vzb-mc-mountains","vzb-mc-year","vzb-mc-mountains-labels","vzb-mc-axis-labels"]),this._probe=new l.default(this),this._selectlist=new u.default(this),this.area=d3.area().curve(d3.curveBasis).x(function(t){return r.xScale(r._math.rescale(t.x))}).y0(function(t){return r.yScale(t.y0)}).y1(function(t){return r.yScale(t.y0+t.y)}),this.stack=d3.stack().order(d3.stackOrderReverse).value(function(t,e){return r.cached[e][t].y}),this.xScale=null,this.yScale=null,this.cScale=null,this.xAxis=y("bottom"),this.rangeRatio=1,this.rangeShift=0,this.cached={},this.mesh=[],this.yMax=0},domReady:function(){var t=this;this.element=d3.select(this.element),this.graph=this.element.select(".vzb-mc-graph"),this.xAxisEl=this.graph.select(".vzb-mc-axis-x"),this.xTitleEl=this.graph.select(".vzb-mc-axis-x-title"),this.yTitleEl=this.graph.select(".vzb-mc-axis-y-title"),this.infoEl=this.graph.select(".vzb-mc-axis-info"),this.dataWarningEl=this.graph.select(".vzb-data-warning"),this.yearEl=this.graph.select(".vzb-mc-year"),this.year=new b(this.yearEl),this.mountainMergeStackedContainer=this.graph.select(".vzb-mc-mountains-mergestacked"),this.mountainMergeGroupedContainer=this.graph.select(".vzb-mc-mountains-mergegrouped"),this.mountainAtomicContainer=this.graph.select(".vzb-mc-mountains"),this.mountainLabelContainer=this.graph.select(".vzb-mc-mountains-labels"),this.tooltip=this.element.select(".vzb-mc-tooltip"),this.eventAreaEl=this.element.select(".vzb-mc-eventarea"),this.probeEl=this.element.select(".vzb-mc-probe"),this.probeLineEl=this.probeEl.select("line"),this.probeTextEl=this.probeEl.selectAll("text"),this.element.onTap(function(e,n){t._interact()._mouseout(e,n)})},afterPreload:function(){var t=this;if(this._math.xScaleFactor=this.model.marker.axis_x.xScaleFactor,this._math.xScaleShift=this.model.marker.axis_x.xScaleShift,this.precomputedShape&&this.precomputedShape[0]&&this.precomputedShape[0].income_mountains){var e=this.precomputedShape[0].income_mountains["yMax_"+this.model.ui.chart.yMaxMethod],n=this.precomputedShape[0].income_mountains.shape;e&&n&&0!==n.length&&(this.xScale=d3.scaleLog().domain([this.model.marker.axis_x.domainMin,this.model.marker.axis_x.domainMax]),this.yScale=d3.scaleLinear().domain([0,Math.round(e)]),t.updateSize(n.length),t.zoomToMaxMin(),n=n.map(function(e,n){return{x:t.mesh[n],y0:0,y:+e}}),this.mountainAtomicContainer.selectAll(".vzb-mc-prerender").data([0]).enter().append("path").attr("class","vzb-mc-prerender").style("fill","pink").style("opacity",0).attr("d",t.area(n)).transition().duration(1e3).ease(d3.easeLinear).style("opacity",1))}},readyOnce:function(){this.eventAreaEl.on("mousemove",function(){t.model.time.dragging||t.model.ui.chart.showProbeX&&t._probe.redraw({level:t.xScale.invert(d3.mouse(this)[0]),full:!0})}).on("mouseout",function(){t.model.time.dragging||t.model.ui.chart.showProbeX&&t._probe.redraw()});var t=this;this.on("resize",function(){t.updateSize()||(t.updatePointers(),t.redrawDataPoints(),t._selectlist.redraw(),t._probe.redraw())}),this.KEY=this.model.entities.getDimension(),this.TIMEDIM=this.model.time.getDimension(),this.mountainAtomicContainer.select(".vzb-mc-prerender").remove(),this.year.setText(this.model.time.formatDate(this.model.time.value)),this.wScale=d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange)},ready:function(){var t=this;this._math.xScaleFactor=this.model.marker.axis_x.xScaleFactor,this._math.xScaleShift=this.model.marker.axis_x.xScaleShift,this.updateUIStrings(),this.updateIndicators(),this.model.marker.getFrame(this.model.time.value,function(e){e&&(t.values=e,t.model.marker.getFrame(t.model.time.end,t.updateEntities.bind(t)),t.updateSize(),t.zoomToMaxMin(),t._spawnMasks(),t.updateTime(),t.updatePointers(),t._adjustMaxY({force:!0}),t.redrawDataPoints(),t.redrawDataPointsOnlyColors(),t.highlightMarkers(),t.selectMarkers(),t._selectlist.redraw(),t.updateOpacity(),t.updateDoubtOpacity(),t._probe.redraw())})},frameChanged:function(t,e){if(!t)return f.warn("change:time.value: empty data received from marker.getFrame(). doing nothing");e.toString()==this.model.time.value.toString()&&(this.values=t,this.updateTime(),this.updatePointers(),this.redrawDataPoints(),this._selectlist.redraw(),this._probe.redraw(),this.updateDoubtOpacity())},updateSize:function(t){var e={small:{margin:{top:10,right:10,left:10,bottom:18},infoElHeight:16},medium:{margin:{top:20,right:20,left:20,bottom:30},infoElHeight:20},large:{margin:{top:30,right:30,left:30,bottom:35},infoElHeight:22}},n={medium:{margin:{top:20,right:20,left:20,bottom:50},infoElHeight:26},large:{margin:{top:30,right:30,left:30,bottom:50},infoElHeight:32}};this.activeProfile=this.getActiveProfile(e,n);var r=this.activeProfile.margin,i=this.activeProfile.infoElHeight;this.height=parseInt(this.element.style("height"),10)-r.top-r.bottom||0,this.width=parseInt(this.element.style("width"),10)-r.left-r.right||0,(this.height<=0||this.width<=0)&&(this.height=0,this.width=0,f.warn("Mountain chart updateSize(): vizabi container is too little or has display:none")),this.graph.attr("transform","translate("+r.left+","+r.top+")");var o=this.model.locale.isRTL(),a={topOffset:"large"===this.getLayoutProfile()?2*r.top:0,xAlign:"large"===this.getLayoutProfile()?o?"left":"right":"center",yAlign:"large"===this.getLayoutProfile()?"top":"center",widthRatio:"large"===this.getLayoutProfile()?3/8:.8};this.year.setConditions(a).resize(this.width,this.height),this.yScale.range([this.height,0]),this.xScale.range([this.rangeShift,this.width*this.rangeRatio+this.rangeShift]);var s=this._readyOnce?this.model.marker.axis_x.scaleType:"log";this.xAxis.scale(this.xScale).tickSizeOuter(0).tickPadding(9).tickSizeMinor(3,0).labelerOptions({scaleType:s,toolMargin:r,pivotingLimit:1.5*r.bottom,method:this.xAxis.METHOD_REPEATING,stops:this._readyOnce?this.model.ui.chart.xLogStops:[1],formatter:this.model.marker.axis_x.getTickFormatter()}),this.xAxisEl.attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.xTitleEl.select("text").attr("transform","translate("+this.width+","+this.height+")").attr("dy","-0.36em"),this.yTitleEl.style("font-size",i+"px").attr("transform","translate("+(o?this.width:0)+","+r.top+")");var u=this.dataWarningEl.select("text").node().getBBox();if(this.dataWarningEl.select("svg").attr("width",u.height).attr("height",u.height).attr("x",.1*u.height).attr("y",1*-u.height+1),this.dataWarningEl.attr("transform","translate("+(o?this.width-u.width-2*u.height:0)+","+(r.top+1.5*u.height)+")").select("text").attr("dx",1.5*u.height),this.infoEl.select("svg").node()){var c=this.yTitleEl.node().getBBox(),l=f.transform(this.yTitleEl.node()),h=o?c.x+l.translateX-1.4*i:c.x+l.translateX+c.width+.4*i;this.infoEl.select("svg").attr("width",i+"px").attr("height",i+"px"),this.infoEl.attr("transform","translate("+h+","+(l.translateY-.8*i)+")")}this.eventAreaEl.attr("y",this.height).attr("width",this.width).attr("height",r.bottom),t||(t=this.model.ui.chart.xPoints),this.mesh=this._math.generateMesh(t,s,this.xScale.domain())},zoomToMaxMin:function(){var t=this.model.marker.axis_x;if(!(null==t.zoomedMin&&null==t.domainMin||null==t.zoomedMax&&null==t.domainMin)){var e=this.xScale(t.zoomedMin||t.domainMin),n=this.xScale(t.zoomedMax||t.domainMax);isFinite(e)&&isFinite(n)&&e!==n&&(this.rangeRatio=this.width/(n-e)*this.rangeRatio,this.rangeShift=(this.rangeShift-e)/(n-e)*this.width,this.xScale.range([this.rangeShift,this.width*this.rangeRatio+this.rangeShift]),this.xAxisEl.call(this.xAxis))}},updateUIStrings:function(){var t=this;this.translator=this.model.locale.getTFunction(),this.model.marker.axis_x.getConceptprops(),this.xTitleEl.select("text").text(this.translator("unit/mountainchart_hardcoded_income_per_day")),this.yTitleEl.select("text").text(this.translator("mount/title")),f.setIcon(this.dataWarningEl,p).select("svg").attr("width","0px").attr("height","0px"),this.dataWarningEl.append("text").text(this.translator("hints/dataWarning")),f.setIcon(this.infoEl,v).select("svg").attr("width","0px").attr("height","0px"),this.infoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.infoEl.on("mouseover",function(){var e=this.getBBox(),n=f.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("axis_y").show().setPos(n.x+i.left-r.left,n.y)}),this.infoEl.on("mouseout",function(){t.parent.findChildByName("gapminder-datanotes").hide()}),this.dataWarningEl.on("click",function(){t.parent.findChildByName("gapminder-datawarning").toggle()}).on("mouseover",function(){t.updateDoubtOpacity(1)}).on("mouseout",function(){t.updateDoubtOpacity()})},updateDoubtOpacity:function(t){null==t&&(t=this.wScale(+this.time.getUTCFullYear().toString())),this.someSelected&&(t=1),this.dataWarningEl.style("opacity",t)},updateIndicators:function(){var t=this;this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.cScale=this.model.marker.color.getScale(),this.xAxis.tickFormat(t.model.marker.axis_x.getTickFormatter())},updateEntities:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.values,e=this;this.mountainPointers=this.model.marker.getKeys().filter(function(n){return t.axis_x[n[e.KEY]]&&t.axis_y[n[e.KEY]]&&t.axis_s[n[e.KEY]]}).map(function(n){var r={};return r[e.KEY]=n[e.KEY],r.KEY=function(){return this[e.KEY]},r.sortValue=[t.axis_y[r.KEY()]||0,0],r.aggrLevel=0,r}),this.groupedPointers=d3.nest().key(function(n){return"property"===e.model.marker.stack.use?t.stack[n.KEY()]:t.group[n.KEY()]}).sortValues(function(t,e){return e.sortValue[0]-t.sortValue[0]}).entries(this.mountainPointers);var n=this.model.marker.group.manualSorting,r=f.isArray(n)&&n.length>1;this.groupedPointers.forEach(function(t){var i=r?n.includes(t.key)?n.length-1-n.indexOf(t.key):-1:d3.sum(t.values.map(function(t){return t.sortValue[0]}));t.values.forEach(function(t){t.sortValue[1]=i}),t[e.model.entities.getDimension()]=t.key,t.KEY=function(){return this.key},t.aggrLevel=1});var i={};e.groupedPointers.forEach(function(t){i[t.key]=t.values[0].sortValue[1]}),"none"===e.model.marker.stack.which?(this.stackedPointers=[],this.mountainPointers.sort(function(t,e){return e.sortValue[0]-t.sortValue[0]})):(this.stackedPointers=d3.nest().key(function(e){return t.stack[e.KEY()]}).key(function(e){return t.group[e.KEY()]}).sortKeys(function(t,e){return i[e]-i[t]}).sortValues(function(t,e){return e.sortValue[0]-t.sortValue[0]}).entries(this.mountainPointers),this.mountainPointers.sort(function(t,e){return e.sortValue[1]-t.sortValue[1]}),this.stackedPointers.forEach(function(t){t.KEY=function(){return this.key},t[e.model.entities.getDimension()]=t.key,t.aggrLevel=2})),this.mountainsMergeStacked=this.mountainAtomicContainer.selectAll(".vzb-mc-mountain.vzb-mc-aggrlevel2").data(this.stackedPointers),this.mountainsMergeGrouped=this.mountainAtomicContainer.selectAll(".vzb-mc-mountain.vzb-mc-aggrlevel1").data(this.groupedPointers),this.mountainsAtomic=this.mountainAtomicContainer.selectAll(".vzb-mc-mountain.vzb-mc-aggrlevel0").data(this.mountainPointers),this.mountainsMergeStacked.exit().remove(),this.mountainsMergeGrouped.exit().remove(),this.mountainsAtomic.exit().remove(),this.mountainsMergeStacked=this.mountainsMergeStacked.enter().append("path").attr("class","vzb-mc-mountain vzb-mc-aggrlevel2").merge(this.mountainsMergeStacked),this.mountainsMergeGrouped=this.mountainsMergeGrouped.enter().append("path").attr("class","vzb-mc-mountain vzb-mc-aggrlevel1").merge(this.mountainsMergeGrouped),this.mountainsAtomic=this.mountainsAtomic.enter().append("path").attr("class","vzb-mc-mountain vzb-mc-aggrlevel0").merge(this.mountainsAtomic),this.mountains=this.mountainAtomicContainer.selectAll(".vzb-mc-mountain"),this.mountains.on("mousemove",function(t,n){f.isTouchDevice()||e._interact()._mousemove(t,n)}).on("mouseout",function(t,n){f.isTouchDevice()||e._interact()._mouseout(t,n)}).on("click",function(t,n){f.isTouchDevice()||(e._interact()._click(t,n),e.highlightMarkers())}).onTap(function(t,n){e._interact()._click(t,n),d3.event.stopPropagation()}).onLongTap(function(t,e){})},_interact:function(){var t=this;return{_mousemove:function(e,n){t.model.time.dragging||t.model.time.playing||(t.model.marker.highlightMarker(e),d3.mouse(t.graph.node()).map(function(t){return parseInt(t)}),t._setTooltip(e.key?t.model.marker.color.getColorlegendMarker().label.getItems()[e.key]:t.values.label[e.KEY()]),t._selectlist.showCloseCross(e,!0))},_mouseout:function(e,n){t.model.time.dragging||t.model.time.playing||(t._setTooltip(""),t.model.marker.clearHighlighted(),t._selectlist.showCloseCross(e,!1))},_click:function(e){(t.model.time.dragging||t.model.time.playing)&&!t.model.marker.isSelected(e)||t.model.marker.selectMarker(e)}}},highlightMarkers:function(){var t=this;this.someHighlighted=this.model.marker.highlight.length>0,this.selectList&&this.someSelected&&this.selectList.classed("vzb-highlight",function(e){return t.model.marker.isHighlighted(e)})},selectMarkers:function(){this.someSelected=this.model.marker.select.length>0,this._selectlist.rebuild(),this.nonSelectedOpacityZero=!1},_sumLeafPointersByMarker:function(t,e){var n=this;return t.key?d3.sum(t.values.map(function(t){return n._sumLeafPointersByMarker(t,e)})):n.values[e][t.KEY()]},updateOpacity:function(){var t=this,e=this.model.marker.opacityRegular,n=this.model.marker.opacitySelectDim;this.mountains.style("opacity",function(r){return t.someHighlighted&&t.model.marker.isHighlighted(r)?1:t.someSelected?t.model.marker.isSelected(r)?1:n:t.someHighlighted?.3:e}),this.mountains.classed("vzb-selected",function(e){return t.model.marker.isSelected(e)});var r=t.model.marker.opacitySelectDim<.01;r!==this.nonSelectedOpacityZero&&this.mountainsAtomic.style("pointer-events",function(e){return t.someSelected&&r&&!t.model.marker.isSelected(e)?"none":"visible"}),this.nonSelectedOpacityZero=t.model.marker.opacitySelectDim<.01},updateTime:function(){this.time_1=null==this.time?this.model.time.value:this.time,this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-this.time_1>0?this.model.time.delayAnimations:0,this.year.setText(this.model.time.formatDate(this.time),this.duration)},updatePointers:function(){var t=this;this.yMax=0,this.mountainPointers.forEach(function(e,n){var r=t._spawn(t.values,e);t.cached[e.KEY()]=r,e.hidden=0===r.length}),"none"!==t.model.marker.stack.which&&this.stackedPointers.forEach(function(e){var n=[];e.values.forEach(function(t){n=n.concat(t.values.filter(function(t){return!t.hidden}))}),t.stack.keys(n.map(function(t){return t.KEY()}))(d3.range(t.mesh.length)).forEach(function(e,r){var i=n[r].KEY();e.forEach(function(e,n){t.cached[i][n].y0=e[0]})})}),this.mountainPointers.forEach(function(e){e.yMax=d3.max(t.cached[e.KEY()].map(function(t){return t.y0+t.y})),t.yMax<e.yMax&&(t.yMax=e.yMax)});var e=t.model.marker.group.merge,n=t.model.marker.stack.merge;this.stackedPointers.forEach(function(e){var n=t._getFirstLastPointersInStack(e);t.cached[e.key]=t._getVerticesOfaMergedShape(n),t.values.color[e.key]="_default",t.values.axis_y[e.key]=t._sumLeafPointersByMarker(e,"axis_y"),e.yMax=n.first.yMax}),this.groupedPointers.forEach(function(e){var n=t._getFirstLastPointersInStack(e);t.cached[e.key]=t._getVerticesOfaMergedShape(n),t.values.color[e.key]=t.values.color[n.first.KEY()],t.values.axis_y[e.key]=t._sumLeafPointersByMarker(e,"axis_y"),e.yMax=n.first.yMax}),n||e||"property"!==this.model.marker.stack.use||this.groupedPointers.forEach(function(t){var e=t.values.filter(function(t){return!t.hidden});t.yMax=e[0].yMax,t.values.forEach(function(e){e.yMaxGroup=t.yMax})})},_getFirstLastPointersInStack:function(t){var e=void 0,n=void 0,r=void 0,i=void 0;return t.values[0].values?(e=t.values[0].values.filter(function(t){return!t.hidden}),n=t.values[t.values.length-1].values.filter(function(t){return!t.hidden}),r=e[0],i=n[n.length-1]):(e=t.values.filter(function(t){return!t.hidden}),r=e[0],i=e[e.length-1]),(!e.length||n&&!n.length)&&f.warn("mountain chart failed to generate shapes. check the incoming data"),{first:r,last:i}},_getVerticesOfaMergedShape:function(t){var e=this,n=t.first.KEY(),r=t.last.KEY();return e.mesh.map(function(t,i){var o=e.cached[n][i].y0+e.cached[n][i].y-e.cached[r][i].y0;return{x:t,y0:e.cached[r][i].y0,y:o}})},_spawnMasks:function(){var t=this,e=this._math.unscale(this.model.marker.axis_x.tailFatX),n=this._math.unscale(this.model.marker.axis_x.tailCutX),r=this.model.marker.axis_x.tailFade,i=2*Math.PI/(Math.log(e)-Math.log(n)),o=Math.PI-Math.log(e)*i;this.spawnMask=[],this.cosineShape=[],this.cosineArea=0,this.mesh.forEach(function(a,s){t.spawnMask[s]=a<n?1:a>7*r?0:Math.exp((n-a)/r),t.cosineShape[s]=a>n&&a<e?1+Math.cos(Math.log(a)*i+o):0,t.cosineArea+=t.cosineShape[s]})},_spawn:function(t,e){var n=this,r=t.axis_y[e.KEY()],i=n._math.giniToSigma(t.axis_s[e.KEY()]),o=n._math.gdpToMu(t.axis_x[e.KEY()],i);if(!r||!o||!i)return[];var a=[],s=0;return this.mesh.forEach(function(t,e){a[e]=n._math.pdf.lognormal(t,o,i),s+=n.spawnMask[e]*a[e]}),this.mesh.map(function(t,e){return{x:t,y0:0,y:r*(a[e]*(1-n.spawnMask[e])+n.cosineShape[e]/n.cosineArea*s)}})},_adjustMaxY:function(t){t||(t={});var e=this,n=this.model.ui.chart.yMaxMethod;if("immediate"===n||t.force)if("latest"===n){var r=e.values;e.model.marker.getFrame(e.model.time.end,function(t){t&&(e.values=t,e.updatePointers(),e.values=r,e.yScale.domain([0,Math.round(e.yMax)]),e.updatePointers(),e.redrawDataPoints())})}else e.yMax||f.warn("Setting yMax to "+e.yMax+". You failed again :-/"),e.yScale.domain([0,Math.round(e.yMax)])},redrawDataPoints:function(){var t=this,e=this.model.marker.group.merge,n=this.model.marker.stack.merge,r=this.model.marker.stack.which,i=(this.model.time.dragging||this.model.time.playing)&&"none"!==r;this._adjustMaxY(),this.mountainsMergeStacked.each(function(e){var r=d3.select(this),i=!n;t._renderShape(r,e.KEY(),i)}),this.mountainsMergeGrouped.each(function(r){var o=d3.select(this),a=!e&&!i||n&&!t.model.marker.isSelected(r);t._renderShape(o,r.KEY(),a)}),this.mountainsAtomic.each(function(r,o){var a=d3.select(this),s=r.hidden||(e||n||i)&&!t.model.marker.isSelected(r);t._renderShape(a,r.KEY(),s)}),"none"===r?this.mountainsAtomic.sort(function(t,e){return e.yMax-t.yMax}):"all"===r||e||i||this.mountainsAtomic.sort(function(t,e){return e.yMaxGroup-t.yMaxGroup})},redrawDataPointsOnlyColors:function(){var t=this;if(!this.mountains)return f.warn("redrawDataPointsOnlyColors(): no mountains  defined. likely a premature call, fix it!");var e="indicator"===this.model.marker.color.use;this.mountains.style("fill",function(n){return t.values.color[n.KEY()]?e&&"_default"==t.values.color[n.KEY()]?t.model.marker.color.palette._default:t.cScale(t.values.color[n.KEY()]):"#d3d3d3"})},_renderShape:function(t,e,n){var r=this.model.marker.stack.which,i=this;if(t.classed("vzb-hidden",n),n)return void("none"!==r&&t.style("stroke-opacity",0));var o={};o[this.KEY]=e,this.model.marker.isSelected(o)?t.attr("d",this.area(this.cached[e].filter(function(t){return t.y>.001*i.values.axis_y[e]}))):t.attr("d",this.area(this.cached[e])),"indicator"===this.model.marker.color.use&&t.style("fill",i.values.color[e]?"_default"!==i.values.color[e]?i.cScale(i.values.color[e]):i.model.marker.color.palette._default:"#d3d3d3"),"none"!==r&&t.transition().duration(900*Math.random()+100).ease(d3.easeCircle).style("stroke-opacity",.5),this.model.time.record&&this._export.write({type:"path",id:e,time:this.model.time.value.getUTCFullYear(),fill:this.cScale(this.values.color[e]),d:this.area(this.cached[e])})},_setTooltip:function(t){if(t){var e=d3.mouse(this.graph.node()).map(function(t){return parseInt(t)});this.tooltip.classed("vzb-hidden",!1).attr("transform","translate("+e[0]+","+e[1]+")").selectAll("text").attr("text-anchor","middle").attr("alignment-baseline","middle").text(t);var n=this.tooltip.select("text").node().getBBox();this.tooltip.select("rect").attr("width",n.width+8).attr("height",n.height+8).attr("x",-n.width-25).attr("y",-n.height-25).attr("rx",.2*n.height).attr("ry",.2*n.height),this.tooltip.selectAll("text").attr("x",-n.width-25+(n.width+8)/2).attr("y",-n.height-25+(n.height+11)/2);var r=e[0]-n.width-25>0?e[0]:n.width+25,i=e[1]-n.height-25>0?e[1]:n.height+25;this.tooltip.attr("transform","translate("+r+","+i+")")}else this.tooltip.classed("vzb-hidden",!0)},preload:function(){var t,e=this,n=this,r=f.getProp(this,["model","ui","chart","preload"]),o=f.getProp(this,["model","ui","chart","preloadKey"]);if(!r)return Promise.resolve();var a=this.model.entities.dim,s=this.model.time.dim,u={language:this.model.locale.id,from:"datapoints",select:{key:[a,s],value:[r]},where:{$and:[i({},a,"$"+a),i({},s,"$"+s)]},join:(t={},i(t,"$"+a,{key:a,where:i({},a,{$in:[o||"world"]})}),i(t,"$"+s,{key:s,where:i({},s,this.model.time.formatDate(this.model.time.value))}),t),order_by:[s]};return new Promise(function(t,o){e.model.data.load(u,i({},r,function(t){return JSON.parse(t)})).then(function(e){n.precomputedShape=n.model.data.getData(e),t()},function(t){return f.warn("Problem with Preload mountainchart query: ",t,JSON.stringify(u))})})}});e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi.Component.get("_dialog").extend("axesmc",{init:function(t,e){this.name="axesmc";var r=this;this.model_binds={"change:ui.chart.xLogStops":function(){r.updateView()},"change:ui.chart.yMaxMethod":function(){r.updateView()}},this.components=[{component:Vizabi.Component.get("minmaxinputs"),placeholder:".vzb-xlimits-container",model:["state.marker","state.time","locale"],markerID:"axis_x",ui:{selectDomainMinMax:!1,selectZoomedMinMax:!0}}],this._super(t,e),this.template=n(7)},readyOnce:function(){this._super();var t=this;this.yMaxRadio=this.element.select(".vzb-yaxis-container").selectAll("input").on("change",function(){t.setModel("yMaxMethod",d3.select(this).node().value)}),this.xLogStops=this.element.select(".vzb-xaxis-container").selectAll("input").on("change",function(){t.setModel("xLogStops",d3.select(this).node().value)}),this.probeCheck=this.element.select(".vzb-probe-check").on("change",function(){t.setModel("showProbeX",d3.select(this).property("checked"))}),this.probeFieldEl=this.element.select(".vzb-probe-field").on("change",function(){var e=parseFloat(this.value.replace(",","."));if(!e||e<=t.model.state.marker.axis_x.tailCutX)return void(this.value=t.model.ui.chart.probeX);e>t.model.state.marker.axis_x.domainMax&&(e=t.model.state.marker.axis_x.domainMax),this.value=e,t.setModel("probeX",e)}),this.updateView()},updateView:function(){var t=this;this.yMaxRadio.property("checked",function(){return d3.select(this).node().value===t.model.ui.chart.yMaxMethod}),this.xLogStops.property("checked",function(){return-1!==t.model.ui.chart.xLogStops.indexOf(+d3.select(this).node().value)}),this.probeCheck.property("checked",this.model.ui.chart.showProbeX),this.probeFieldEl.property("value",this.model.ui.chart.probeX)},setModel:function(t,e){var n=void 0;"yMaxMethod"==t&&(n=e),"xLogStops"==t&&(n=[],this.xLogStops.each(function(){d3.select(this).property("checked")&&n.push(+d3.select(this).node().value)})),"probeX"!=t&&"showProbeX"!=t||(n=e),this.model.ui.chart[t]=n}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi,i=(r.utils,Vizabi.Class.extend({init:function(t){this.context=t,this.xScaleFactor=1,this.xScaleShift=0},rescale:function(t){return Math.exp(this.xScaleFactor*Math.log(t)+this.xScaleShift)},unscale:function(t){return Math.exp((Math.log(t)-this.xScaleShift)/this.xScaleFactor)},generateMesh:function(t,e,n){var r="linear"===e?n[0]:Math.log(this.unscale(n[0])),i="linear"===e?n[1]:Math.log(this.unscale(n[1])),o=(i-r)/t,a=d3.range(r,i,o).concat(i);return a="linear"!==e?a.map(function(t){return Math.exp(t)}):a.filter(function(t){return t>0})},gdpToMu:function(t,e,n,r){return Math.log(t/365)-e*e/2},giniToSigma:function(t){return this.normsinv((t/100+1)/2)*Math.pow(2,.5)},pdf:{normal:function(t,e,n){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(n)-Math.pow(t-e,2)/(2*n*n))},lognormal:function(t,e,n){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(n)-Math.pow(Math.log(t)-e,2)/(2*n*n))}},normsinv:function(t){var e=[-39.69683028665376,220.9460984245205,-275.9285104469687,138.357751867269,-30.66479806614716,2.506628277459239],n=[-54.47609879822406,161.5858368580409,-155.6989798598866,66.80131188771972,-13.28068155288572],r=[-.007784894002430293,-.3223964580411365,-2.400758277161838,-2.549732539343734,4.374664141464968,2.938163982698783],i=[.007784695709041462,.3224671290700398,2.445134137142996,3.754408661907416];if(t<.02425){var o=Math.sqrt(-2*Math.log(t));return(((((r[0]*o+r[1])*o+r[2])*o+r[3])*o+r[4])*o+r[5])/((((i[0]*o+i[1])*o+i[2])*o+i[3])*o+1)}if(.97575<t){var a=Math.sqrt(-2*Math.log(1-t));return-(((((r[0]*a+r[1])*a+r[2])*a+r[3])*a+r[4])*a+r[5])/((((i[0]*a+i[1])*a+i[2])*a+i[3])*a+1)}var s=t-.5,u=s*s;return(((((e[0]*u+e[1])*u+e[2])*u+e[3])*u+e[4])*u+e[5])*s/(((((n[0]*u+n[1])*u+n[2])*u+n[3])*u+n[4])*u+1)}}));e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi.Class.extend({init:function(t){this.context=t},redraw:function(t){var e=this.context;if(t||(t={}),t.level||(t.level=e.model.ui.chart.probeX),e.probeEl.classed("vzb-hidden",!t.level||!e.model.ui.chart.showProbeX),t.level){e.xAxisEl.call(e.xAxis.highlightValue(t.full?t.level:"none"));var n=0,r=0,i=0,o=function(o){n+=e.values.axis_y[o.KEY()],e.cached[o.KEY()].forEach(function(n){r+=n.y,e._math.rescale(n.x)<t.level&&(i+=n.y)})};"all"===e.model.marker.stack.which?e.stackedPointers.forEach(o):"none"===e.model.marker.stack.which?e.mountainPointers.forEach(o):e.groupedPointers.forEach(o);var a=d3.format(".3r"),s=e.model.marker.axis_y.getTickFormatter();e.heightOfLabels=e.heightOfLabels||.66*e.height,e.probeTextEl.each(function(n,r){if(8===r){var i=d3.select(this);t.full||e.model.ui.chart.probeX!=e.model.marker.axis_x.tailFatX?i.classed("vzb-hidden",!0):(i.text(e.translator("mount/extremepoverty")).classed("vzb-hidden",!1).attr("x",-e.height).attr("y",e.xScale(t.level)).attr("dy","-1.15em").attr("dx","0.5em").attr("transform","rotate(-90)"),e.heightOfLabels=e.height-i.node().getBBox().width-1.75*i.node().getBBox().height)}}),e.probeTextEl.each(function(o,u){if(8!==u){var c=d3.select(this),l=void 0;0!==u&&4!==u||(l=a(i/r*100)+"%"),1!==u&&5!==u||(l=a(100-i/r*100)+"%"),2!==u&&6!==u||(l=s(n*i/r)),3!==u&&7!==u||(l=s(n*(1-i/r))+" "+e.translator("mount/people")),c.text(l).classed("vzb-hidden",!t.full&&(e.someSelected||0!==u&&4!==u)).attr("x",e.xScale(t.level)+([0,4,2,6].indexOf(u)>-1?-6:5)).attr("y",e.heightOfLabels).attr("dy",[0,1,4,5].indexOf(u)>-1?0:"1.5em")}}),e.probeLineEl.attr("x1",e.xScale(t.level)).attr("x2",e.xScale(t.level)).attr("y1",e.height+6).attr("y2",0)}}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Vizabi,i=r.utils,o=r.iconset.close,a=Vizabi.Class.extend({init:function(t){this.context=t},rebuild:function(t){var e=this.context,n=this,r=e.mountainPointers.concat(e.groupedPointers).concat(e.stackedPointers).filter(function(t){return e.model.marker.isSelected(t)}).sort(function(t,e){return t.sortValue&&e.sortValue?t.sortValue[1]===e.sortValue[1]?d3.descending(t.sortValue[0],e.sortValue[0]):d3.descending(t.sortValue[1],e.sortValue[1]):t.aggrLevel!=e.aggrLevel?d3.descending(t.aggrLevel,e.aggrLevel):t.aggrLevel&&e.aggrLevel?d3.descending(t.yMax,e.yMax):0});e.selectList=e.mountainLabelContainer.selectAll("g.vzb-mc-label").data(i.unique(r,function(t){return t.KEY()})),e.selectList.exit().remove(),e.selectList=e.selectList.enter().append("g").attr("class","vzb-mc-label").each(function(t,n){var r=d3.select(this);r.append("circle").attr("class","vzb-mc-label-legend"),r.append("text").attr("class","vzb-mc-label-shadow vzb-mc-label-text"),r.append("text").attr("class","vzb-mc-label-text"),r.append("g").attr("class","vzb-mc-label-x vzb-label-shadow vzb-invisible").on("click",function(t,n){i.isTouchDevice()||(d3.event.stopPropagation(),e.model.marker.clearHighlighted(),e.model.marker.selectMarker(t),d3.event.stopPropagation())}).onTap(function(t,n){d3.select("#"+t.geo+"-label-"+e._id).remove(),e.model.marker.clearHighlighted(),e.model.marker.selectMarker(t)});var a=r.select("g.vzb-mc-label-x");i.isTouchDevice()?(a.append("rect"),a.append("text").attr("class","vzb-mc-label-x-text").text("Deselect")):(i.setIcon(a,o).select("svg").attr("class","vzb-mc-label-x-icon").attr("width","0px").attr("height","0px"),a.insert("circle","svg"))}).on("mousemove",function(t,r){i.isTouchDevice()||(n.showCloseCross(t,!0),e.model.marker.highlightMarker(t))}).on("mouseout",function(t,r){i.isTouchDevice()||(n.showCloseCross(t,!1),e.model.marker.clearHighlighted())}).on("click",function(t,n){i.isTouchDevice()||(e.model.marker.clearHighlighted(),e.model.marker.selectMarker(t))}).merge(e.selectList)},redraw:function(){var t=this.context;if(t.selectList&&t.someSelected){var e=t.mountainLabelContainer.append("g").attr("class","vzb-mc-label").append("text").text("0"),n=1.2*e.node().getBBox().height,r=parseFloat(e.style("font-size"))/n;d3.select(e.node().parentNode).remove();var o=t.model.marker.axis_y.getTickFormatter(),a=t.yTitleEl.select("text").node().getBBox().height||0,s=(t.height-3*a)/(t.selectList.data().length+2);n>s&&(n=s);var u="null",c=0,l=t.model.marker.color.getColorlegendMarker().label.getItems(),h=t.model.locale.isRTL();t.selectList.attr("transform",function(e,r){e.aggrLevel!=u&&(c+=n);var i=n*r+2*a+c;return u=e.aggrLevel,"translate("+(h?t.width:0)+","+i+")"}).each(function(e,a){var u=d3.select(this).attr("id",e.geo+"-label-"+t._id),c="";c=e.key?"all"===e.key?t.translator("mount/merging/world"):l[e.key]:t.values.label[e.KEY()];var f=t.values.axis_y[e.KEY()],d=c+": "+o(f)+(0===a?" "+t.translator("mount/people"):""),p=u.selectAll(".vzb-mc-label-text").attr("x",(h?-1:1)*n).attr("y",n).text(d).style("font-size",n===s?n*r+"px":null),v=p.node().getBBox(),g=u.select(".vzb-mc-label-x");if(i.isTouchDevice()){var m=g.select("text").node().getBBox();g.classed("vzb-revert-color",!0).select(".vzb-mc-label-x-text").classed("vzb-revert-color",!0).attr("x",v.width+1.12*v.height+.5*m.width).attr("y",.55*v.height),g.select("rect").attr("width",m.width+.6*v.height).attr("height",v.height).attr("x",v.width+.9*v.height).attr("y",0).attr("rx",.25*v.height).attr("ry",.25*v.height)}else g.attr("x",v.width+1.1*v.height).attr("y",v.height/3),g.select("circle").attr("r",.4*v.height).attr("cx",(h?-1:1)*(v.width+1.1*v.height)).attr("cy",v.height/3),g.select("svg").attr("x",(h?-1:1)*(v.width+v.height*(1.1-(h?-.4:.4)))).attr("y",v.height*(1/3-.4)).attr("width",.8*v.height).attr("height",.8*v.height);u.select(".vzb-mc-label-legend").attr("r",n/3).attr("cx",(h?-1:1)*n*.4).attr("cy",n/1.5).style("fill",t.cScale(t.values.color[e.KEY()])),u.onTap(function(e,n){d3.event.stopPropagation(),t.model.marker.highlightMarker(e),setTimeout(function(){t.model.marker.unhighlightMarker(e)},2e3)})})}},showCloseCross:function(t,e){var n=this.context,r=n.KEY;n.selectList.filter(function(e){return e[r]==t[r]}).select(".vzb-mc-label-x").classed("vzb-invisible",!e)}});e.default=a},function(t,e){},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n    <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="axesmc" data-click="pinDialog"></span>\n    <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="axesmc" data-click="dragDialog"></span>\n    <div class="vzb-dialog-title">\n        <%=t ("buttons/axes") %>\n    </div>\n    <div class="vzb-dialog-content">\n        <div class="vzb-yaxis-container">\n            <p class="vzb-dialog-sublabel"><%=t ("hints/mount/maxYvalue") %></p>\n            <form class="vzb-dialog-paragraph">\n                <label><input type="radio" name="ymax" value="immediate"><%=t ("mount/maxYmode/immediate") %></label>\n                <label><input type="radio" name="ymax" value="latest"><%=t ("mount/maxYmode/latest") %></label>\n            </form>\n        </div>\n        <div class="vzb-xaxis-container">\n            <p class="vzb-dialog-sublabel">\n                <%=t ("hints/mount/logXstops") %>\n            </p>\n            <form class="vzb-dialog-paragraph">\n                <input type="checkbox" name="logstops" value="1">1\n                <input type="checkbox" name="logstops" value="2">2\n                <input type="checkbox" name="logstops" value="5">5\n            </form>\n        </div>\n        <p class="vzb-dialog-sublabel">\n            <%=t ("hints/mount/xlimits") %>\n        </p>\n        <div class="vzb-xlimits-container vzb-dialog-paragraph"></div>\n        <div class="vzb-probe-container">\n            <p class="vzb-dialog-sublabel">\n              <input type="checkbox" name="probe" class="vzb-probe-check"> <%=t ("hints/mount/probe") %>\n            </p>\n            <input type="text" class="vzb-probe-field" name="probe">\n        </div>\n    </div>\n    <div class="vzb-dialog-buttons">\n        <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n            <%=t ("buttons/ok") %>\n        </div>\n    </div>\n</div>'},function(t,e){t.exports='\x3c!-- MountainChart Component --\x3e\n<div class="vzb-mountainchart">\n    <svg class="vzb-mountainchart-svg vzb-export">\n        <g class="vzb-mc-graph">\n            <rect class="vzb-mc-eventarea"></rect>\n            <g class="vzb-mc-year"></g>\n\n            <g class="vzb-mc-mountains-mergestacked"></g>\n            <g class="vzb-mc-mountains-mergegrouped"></g>\n            <g class="vzb-mc-mountains"></g>\n            <g class="vzb-mc-mountains-labels"></g>\n\n\n            <g class="vzb-mc-axis-y-title">\n                <text></text>\n            </g>\n\n            <g class="vzb-mc-axis-x-title">\n                <text></text>\n            </g>\n\n            <g class="vzb-mc-axis-info vzb-noexport">\n            </g>\n\n            <g class="vzb-data-warning vzb-noexport">\n                <svg></svg>\n                <text></text>\n            </g>\n\n            <g class="vzb-mc-axis-x"></g>\n\n            <g class="vzb-mc-axis-labels"></g>\n            <g class="vzb-mc-probe">\n                <text class="vzb-shadow vzb-mc-probe-value-ul"></text>\n                <text class="vzb-shadow vzb-mc-probe-value-ur"></text>\n                <text class="vzb-shadow vzb-mc-probe-value-dl"></text>\n                <text class="vzb-shadow vzb-mc-probe-value-dr"></text>\n                <text class="vzb-mc-probe-value-ul"></text>\n                <text class="vzb-mc-probe-value-ur"></text>\n                <text class="vzb-mc-probe-value-dl"></text>\n                <text class="vzb-mc-probe-value-dr"></text>\n                <text class="vzb-mc-probe-extremepoverty"></text>\n                <line></line>\n            </g>\n\n            <g class="vzb-mc-tooltip vzb-hidden">\n                <rect class="vzb-tooltip-border"></rect>\n                <text class="vzb-tooltip-text"></text>\n            </g>\n        </g>\n    </svg>\n</div>\n'},function(t,e,n){t.exports=n(0)}])},KvE9:function(t,e,n){n("LbgJ"),n("TjnC"),n("1zvG"),t.exports=n("b4gG").Function},LAe3:function(t,e,n){var r=n("CDXM"),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},LEug:function(t,e,n){"use strict";var r=n("ViUi");e.merge=r.mergeStatic},LGbj:function(t,e,n){var r=n("JXkd");n("QN+J")("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},LbgJ:function(t,e,n){var r=n("CDXM");r(r.P,"Function",{bind:n("p9up")})},Lcie:function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},Lhvy:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=i},LiYJ:function(t,e,n){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},Lqs2:function(t,e,n){"use strict";function r(t){return 0===t?new s.EmptyObservable:this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("uT+d"),s=n("fcnB");e.take=r;var u=function(){function t(t){if(this.total=t,this.total<0)throw new a.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},M720:function(t,e,n){"use strict";n("NhIS")("big",function(t){return function(){return t(this,"big","","")}})},MBEm:function(t,e,n){"use strict";var r=n("bKpL"),i=n("kGJb");r.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},ML5l:function(t,e,n){"use strict";n("NhIS")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},MicL:function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}e.isScheduler=r},Mr9n:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("YymB")(o)},MzWM:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=n("ktfo"),a=n("yW9Z"),s=function(t){function e(e){t.call(this),this.observableFactory=e}return r(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new u(t,this.observableFactory)},e}(i.Observable);e.DeferObservable=s;var u=function(t){function e(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return r(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(o.subscribeToResult(this,t))},e}(a.OuterSubscriber)},"N+b3":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("/oeL"),i=n("vF69"),o=(n.n(i),function(){function t(){}return t.prototype.modelToString=function(t){return t=t||{},i.stringify(t)},t.prototype.stringToModel=function(t){if(t=t||"_")try{return i.parse(t)}catch(t){return console.error("Urlon Exception:",t),{}}return{}},t}());o.decorators=[{type:r.u}],o.ctorParameters=function(){return[]}},NI2B:function(t,e,n){var r=n("CDXM"),i=n("f08B"),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},NISB:function(t,e,n){var r=n("PNtC"),i=n("lzDK"),o=n("+pQw"),a=n("ptrv").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},NSJx:function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},NhIS:function(t,e,n){var r=n("CDXM"),i=n("umMR"),o=n("Wy9r"),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},NzKl:function(t,e,n){n("dLZl"),t.exports=n("b4gG").parseFloat},OADz:function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return this.lift(new s(r,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("yW9Z"),a=n("ktfo");e.withLatestFrom=r;var s=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.observables,this.project))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(var o=0;o<i;o++){var s=n[o];this.add(a.subscribeToResult(this,s,s,o))}}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.OuterSubscriber)},OGmI:function(t,e,n){var r=n("uNkO"),i=n("RT4T"),o=n("Wo2w"),a=n("rppw");t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),h=a(c.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(s=e(s,l[f],f,c));return s}},OW3Z:function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(2);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={version:"1.0.23",build:1507740594615};e.default=Vizabi.Tool.extend("BarRankChart",{init:function(t,e){this.name="barrankchart",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","locale","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},default_model:{state:{time:{autoconfig:{type:"time"}},entities:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_colorlegend:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},entities_tags:{autoconfig:{type:"entity_domain",includeOnlyIDs:["tag"]}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{}},entities_allpossible:{autoconfig:{type:"entity_domain",excludeIDs:["tag"]}},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",autoconfig:{includeOnlyIDs:["name"],type:"string"}}},marker:{space:["entities","time"],axis_x:{use:"indicator",autoconfig:{type:"measure"},allow:{scales:["linear","log"]}},axis_y:{use:"property",allow:{scales:["ordinal","nominal"]},autoconfig:{type:"entity_domain"}},label:{use:"property",autoconfig:{includeOnlyIDs:["name"],type:"string"}},color:{syncModels:["marker_colorlegend"],autoconfig:{}}},marker_colorlegend:{space:["entities_colorlegend"],label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}}},locale:{},ui:{chart:{},datawarning:{doubtDomain:[],doubtRange:[]},buttons:["colors","find","show","moreoptions","fullscreen","presentation"],dialogs:{popup:["timedisplay","colors","find","axes","show","moreoptions"],sidebar:["timedisplay","colors","find"],moreoptions:["opacity","speed","colors","presentation","about"]},presentation:!1}},versionInfo:o})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Vizabi.utils,s=Vizabi.helpers["d3.axisWithLabelPicker"],u=Vizabi.iconset.question,c=Vizabi.iconset.warn,l=Vizabi.Component.extend("barrankchart",{init:function(t,e){var r=this;this.name="barrankchart",this.template=n(3),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}],this.model_binds={"change:time.value":function(){r.model._ready&&r._readyOnce&&r.onTimeChange()},"change:marker.select":function(){r._readyOnce&&(r._selectBars(),r._updateOpacity(),r._updateDoubtOpacity(),r._scroll())},"change:marker.axis_x.scaleType":function(){r._readyOnce&&r.loadData()&&r.draw(!0)},"change:marker.color.palette":function(){r._drawColors()},"change:marker.highlight":function(){r._updateOpacity()},"change:marker.opacitySelectDim":function(){r._updateOpacity()},"change:marker.opacityRegular":function(){r._updateOpacity()}},this._super(t,e),this.xScale=null,this.cScale=d3.scaleOrdinal(d3.schemeCategory10),this.xAxis=s("bottom")},onTimeChange:function(){var t=this;this.model.marker.getFrame(this.model.time.value,function(e){t.values=e,t.values&&t.loadData()&&t.draw()})},readyOnce:function(){this.element=d3.select(this.element),this.header=this.element.select(".vzb-br-header"),this.infoEl=this.element.select(".vzb-br-axis-info"),this.barViewport=this.element.select(".vzb-br-barsviewport"),this.barSvg=this.element.select(".vzb-br-bars-svg"),this.barContainer=this.element.select(".vzb-br-bars"),this.dataWarningEl=this.element.select(".vzb-data-warning"),this.wScale=d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange),this.xAxis.tickFormat(this.model.marker.axis_x.getTickFormatter()),this._localeId=this.model.locale.id,this._entityLabels={},this._presentation=!this.model.ui.presentation,this._formatter=this.model.marker.axis_x.getTickFormatter(),this.ready(),this._selectBars()},ready:function(){var t=this;this.model.marker.getFrame(this.model.time.value,function(e){t.values=e,t.values&&t.loadData()&&(t.draw(!0),t._updateOpacity(),t._drawColors())})},resize:function(){this.draw(!0),this._drawColors()},loadData:function(){var t=this,e=this;this.translator=this.model.locale.getTFunction();var n=this.values.axis_x;if(!Object.keys(n).length)return!1;this.sortedEntities=this._sortByIndicator(n),this.header.select(".vzb-br-title").select("text").on("click",function(){return t.parent.findChildByName("gapminder-treemenu").markerID("axis_x").alignX("left").alignY("top").updateView().toggle()}),this.xScale=this.model.marker.axis_x.getScale().copy(),this.cScale=this.model.marker.color.getScale(),a.setIcon(this.dataWarningEl,c).select("svg").attr("width",0).attr("height",0),this.dataWarningEl.append("text").text(this.translator("hints/dataWarning")),this.dataWarningEl.on("click",function(){return t.parent.findChildByName("gapminder-datawarning").toggle()}).on("mouseover",function(){return t._updateDoubtOpacity(1)}).on("mouseout",function(){return t._updateDoubtOpacity()});var r=this.model.marker.axis_x.getConceptprops();return a.setIcon(this.infoEl,u).select("svg").attr("width",0).attr("height",0).style("opacity",Number(Boolean(r.description||r.sourceLink))),this.infoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.infoEl.on("mouseover",function(){var t=this.getBBox(),n=a.makeAbsoluteContext(this,this.farthestViewportElement),r=n(t.x-10,t.y+t.height+10);e.parent.findChildByName("gapminder-datanotes").setHook("axis_x").show().setPos(r.x,r.y)}),this.infoEl.on("mouseout",function(){e.parent.findChildByName("gapminder-datanotes").hide()}),!0},draw:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.time_1=null==this.time?this.model.time.value:this.time,this.time=this.model.time.value;var e=this.model.time.playing&&this.time-this.time_1>0?this.model.time.delayAnimations:0;this.drawAxes(e,t)||this.drawData(e,t)},drawAxes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e={small:{margin:{top:60,right:5,left:5,bottom:20},headerMargin:{top:10,right:20,bottom:20,left:20},infoElHeight:16,infoElMargin:5,barHeight:18,barMargin:3,barRectMargin:5,barValueMargin:5,scrollMargin:20},medium:{margin:{top:60,right:5,left:5,bottom:20},headerMargin:{top:10,right:20,bottom:20,left:20},infoElHeight:16,infoElMargin:5,barHeight:21,barMargin:3,barRectMargin:5,barValueMargin:5,scrollMargin:25},large:{margin:{top:60,right:5,left:5,bottom:20},headerMargin:{top:10,right:20,bottom:20,left:20},infoElHeight:16,infoElMargin:5,barHeight:28,barMargin:4,barRectMargin:5,barValueMargin:5,scrollMargin:25}},n={medium:{margin:{top:60,right:10,left:10,bottom:40},headerMargin:{top:10,right:20,bottom:20,left:20},infoElHeight:25,infoElMargin:10,barHeight:25,barMargin:6},large:{margin:{top:60,right:10,left:10,bottom:40},headerMargin:{top:10,right:20,bottom:20,left:20},infoElHeight:16,infoElMargin:10,barHeight:30,barMargin:6}};this.activeProfile=this.getActiveProfile(e,n);var r=this.activeProfile,i=r.margin,o=r.headerMargin,s=r.infoElHeight,u=r.infoElMargin;if(this.height=parseInt(this.element.style("height"),10)||0,this.width=parseInt(this.element.style("width"),10)||0,!this.height||!this.width)return a.warn("Dialog resize() abort: vizabi container is too little or has display:none");this.barViewport.style("height",this.height-i.bottom-i.top+"px"),this.header.attr("height",i.top);var c=this.header.select(".vzb-br-title"),l=this.model.marker.axis_x.getConceptprops(),h=l.name,f=l.unit,d=c.select("text");f?(d.text(h+", "+f),o.left+c.node().getBBox().width+u+s>this.width-o.right&&d.text(h)):d.text(h);var p=c.node().getBBox(),v=o.left,g=o.top+p.height;c.attr("transform","translate("+v+", "+g+")");var m=this.infoEl;m.select("svg").attr("width",s+"px").attr("height",s+"px");var y=v+c.node().getBBox().width+u,b=o.top+s/4;m.attr("transform","translate("+y+", "+b+")");var _=this.header.select(".vzb-br-total");t?_.select("text").transition("text").delay(t).text(this.model.time.formatDate(this.time)):_.select("text").interrupt().text(this.model.time.formatDate(this.time)),_.style("opacity",Number("large"!==this.getLayoutProfile()));var x=_.node().getBBox(),w=this.width-o.right-x.width,M=o.top+x.height;_.attr("transform","translate("+w+", "+M+")").classed("vzb-transparent",p.width+x.width+10>this.width),this.element.select(".vzb-data-warning-svg").style("height",i.bottom+"px");var S=this.dataWarningEl.select("text").node().getBBox();this.dataWarningEl.attr("transform","translate("+(this.width-i.right-S.width)+", "+S.height+")").select("text"),this.dataWarningEl.select("svg").attr("width",S.height).attr("height",S.height).attr("x",-S.height-5).attr("y",1-S.height),this._updateDoubtOpacity()},drawData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._createAndDeleteBars(this.barContainer.selectAll(".vzb-br-bar").data(this.sortedEntities,function(t){return t.entity}));var r=this.model.ui.presentation,o=this._presentation!==r;o&&(this._presentation=r);var a=void 0===this._entitiesCount||this._entitiesCount!==this.sortedEntities.length;(o||a)&&a&&(this._entitiesCount=this.sortedEntities.length),this._resizeSvg(),this._scroll(e),this._drawColors();var s=this.activeProfile,u=s.barRectMargin,c=s.barValueMargin,l=s.scrollMargin,h=s.margin,f=this.model.marker.axis_x,d=f.getLimits(f.which),p=Math.abs(d.max)>=Math.abs(d.min),v=p?d.min<0:d.max>0,g=(this.width-h.right-h.left-u-l-(v?0:this._getWidestLabelWidth()))/(v?2:1);this.xScale.range([0,g]),"log"!==this.model.marker.axis_x.scaleType&&this.xScale.domain([0,Math.max.apply(Math,i(this.xScale.domain()))]);var m=v?g:this._getWidestLabelWidth(),y=function(e){return t.xScale(e)},b=function(t){return p?t>=0:t>0},_=function(t){return b(t)?"end":"start"},x=function(t){return b(t)?"start":"end"},w=function(e){return b(e)?h.left+m:t.width-m-l-h.right},M=function(t){return b(t)?w(t)+u:w(t)-u},S=function(t){return b(t)?M(t)+c:M(t)-c},k=this._getWidestLabelWidth(!0)+(p?h.left:h.right)<m;this.sortedEntities.forEach(function(r){var i=r.value;if((n||o||r.isNew||r.changedValue)&&(r.barLabel.attr("x",w(i)).attr("y",t.activeProfile.barHeight/2).attr("text-anchor",_(i)).text(k?r.labelFull:r.labelSmall),r.barRect.attr("rx",t.activeProfile.barHeight/4).attr("ry",t.activeProfile.barHeight/4).attr("height",t.activeProfile.barHeight),r.barValue.attr("x",S(i)).attr("y",t.activeProfile.barHeight/2).attr("text-anchor",x(i))),n||r.changedWidth||o){var a=Math.max(0,i&&y(Math.abs(i)))||0;(n||r.changedWidth||o)&&r.barRect.transition().duration(e).ease(d3.easeLinear).attr("width",a),r.barRect.attr("x",M(i)-(i<0?a:0)),(n||r.changedValue)&&r.barValue.text(t._formatter(i)||t.translator("hints/nodata"))}(n||r.changedIndex||o)&&(e?r.self.transition().duration(e).ease(d3.easeLinear):r.self).attr("transform","translate(0, "+t._getBarPosition(r.index)+")")})},_resizeSvg:function(){var t=this.activeProfile,e=t.barHeight,n=t.barMargin;this.barSvg.attr("height",(e+n)*this.sortedEntities.length+"px")},_scroll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.barContainer.select(".vzb-selected");if(!e.empty()){var n=e.datum(),r=this._getBarPosition(n.index),i=this.activeProfile.margin,o=this.height-i.top-i.bottom,a=r-(o+this.activeProfile.barHeight)/2;this.barViewport.transition().duration(t).tween("scrollfor"+n.entity,this._scrollTopTween(a))}},_createAndDeleteBars:function(t){var e=this,n=o(this.sortedEntities,1),r=n[0];this._entityLabels[r.entity]||(this._entityLabels[r.entity]=r.label);var i=this._entityLabels[r.entity]!==this.values.label[r.entity]&&this.model.locale.id!==this._localeId;i&&(this._localeId=this.model.locale.id,this._entityLabels[r.entity]=this.values.label[r.entity]),t.exit().remove(),t=(i?t:t.enter().append("g")).each(function(t){var n=d3.select(this),r=e.values.label[t.entity],o=r.length<12?r:r.substring(0,9)+"...",a=n.select(".vzb-br-label"),s=a.size()?a:n.append("text").attr("class","vzb-br-label").attr("dy",".325em"),u=s.text(r).node().getBBox().width,c=s.text(o).node().getBBox().width;if(Object.assign(t,{labelFullWidth:u,labelSmallWidth:c,labelFull:r,labelSmall:o,barLabel:s}),!i){n.attr("class","vzb-br-bar").classed("vzb-selected",e.model.marker.isSelected(t)).attr("id","vzb-br-bar-"+t.entity+"-"+e._id).on("mousemove",function(t){return e.model.marker.highlightMarker(t)}).on("mouseout",function(){return e.model.marker.clearHighlighted()}).on("click",function(t){e.model.marker.selectMarker(t)});var l=n.append("rect").attr("stroke","transparent"),h=n.append("text").attr("class","vzb-br-value").attr("dy",".325em");Object.assign(t,{self:n,isNew:!0,barRect:l,barValue:h})}}).merge(t)},_getWidestLabelWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?"labelFullWidth":"labelSmallWidth",n=t?"labelFull":"labelSmall",r=this.sortedEntities.reduce(function(t,n){return t[e]<n[e]?n:t}),i=r.barLabel.text(),o=r.barLabel.text(r[n]).node().getBBox().width;return r.barLabel.text(i),o},_drawColors:function(){var t=this,e=this;this.barContainer.selectAll(".vzb-br-bar>rect").each(function(t){var n=t.entity,r=d3.select(this),i=e.values.color[n],o=i||0===i,a=o?String(e._getColor(i)):"rgb(253, 253, 253)",s=o?"transparent":"rgb(51, 51, 51)";r.style("fill")!==a&&r.style("fill",a),r.style("stroke")!==s&&r.style("stroke",s)}),this.barContainer.selectAll(".vzb-br-bar>text").style("fill",function(e){var n=e.entity;return t._getDarkerColor(t.values.color[n]||null)})},_getColor:function(t){return d3.rgb(this.cScale(t))},_getDarkerColor:function(t){return this._getColor(t).darker(2)},_scrollTopTween:function(t){return function(){var e=this,n=d3.interpolateNumber(this.scrollTop,t);return function(t){e.scrollTop=n(t)}}},_getBarPosition:function(t){return(this.activeProfile.barHeight+this.activeProfile.barMargin)*t},_entities:{},_sortByIndicator:function(t){var e=this;return Object.keys(t).map(function(n){var i,o=e._entities[n],a=t[n],s=e.values.label[n],u=e._formatter(a);return o?Object.assign(o,{value:a,label:s,formattedValue:u,changedValue:u!==o.formattedValue,changedWidth:a!==o.value,isNew:!1}):e._entities[n]=(i={entity:n,value:a,formattedValue:u},r(i,e.model.entities.dim,n),r(i,"changedValue",!0),r(i,"changedWidth",!0),r(i,"isNew",!0),i)}).sort(function(t,e){var n=t.value;return e.value-n}).map(function(t,e){return Object.assign(t,{index:e,changedIndex:e!==t.index})})},_selectBars:function(){var t=this,e=this.model.entities.dim,n=this.model.marker.select;this.barContainer.classed("vzb-dimmed-selected",!1),this.barContainer.selectAll(".vzb-br-bar.vzb-selected").classed("vzb-selected",!1),n.length&&(this.barContainer.classed("vzb-dimmed-selected",!0),n.forEach(function(n){t.barContainer.select("#vzb-br-bar-"+n[e]+"-"+t._id).classed("vzb-selected",!0)}))},_updateOpacity:function(){var t=this.model.marker,e=t.highlight,n=t.select,r=t.opacityHighlightDim,i=t.opacitySelectDim,o=t.opacityRegular,a=e.length>0,s=n.length>0;this.barContainer.selectAll(".vzb-br-bar").style("opacity",function(e){return a&&t.isHighlighted(e)?1:s?t.isSelected(e)?o:i:a?r:o})},_updateDoubtOpacity:function(t){this.dataWarningEl.style("opacity",t||(this.model.marker.select.length?1:this.wScale(+this.model.time.value.getUTCFullYear().toString())))}});e.default=l},function(t,e){},function(t,e){t.exports='\x3c!-- Bar Chart Component --\x3e\n<div class="vzb-barrankchart">\n  <svg class="vzb-br-header">\n    <g class="vzb-br-title">\n      <text></text>\n    </g>\n    <g class="vzb-br-total">\n      <text></text>\n    </g>\n    <g class="vzb-br-axis-info vzb-noexport"></g>\n  </svg>\n\n  <div class="vzb-br-barsviewport vzb-dialog-scrollable">\n    <svg class="vzb-br-bars-svg">\n      <g class="vzb-br-bars"></g>\n    </svg>\n  </div>\n\n  <svg class="vzb-data-warning-svg">\n    <g class="vzb-data-warning vzb-noexport">\n      <svg></svg>\n      <text></text>\n    </g>\n  </svg>\n</div>\n'},function(t,e,n){t.exports=n(0)}])},OWbQ:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("NSJx"),o=n("lhZu"),a=n("mUVF"),s=n("mihg"),u=n("TA58"),c=n("wZOE"),l=n("wCVK"),h=n("2B7B"),f=n("bKpL"),d=n("AHF9"),p=n("DP67"),v=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return r(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[p.observable])return t instanceof f.Observable&&!n?t:new e(t,n);if(i.isArray(t))return new c.ArrayObservable(t,n);if(a.isPromise(t))return new s.PromiseObservable(t,n);if("function"==typeof t[h.iterator]||"string"==typeof t)return new u.IteratorObservable(t,n);if(o.isArrayLike(t))return new l.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[p.observable]().subscribe(t):e[p.observable]().subscribe(new d.ObserveOnSubscriber(t,n,0))},e}(f.Observable);e.FromObservable=v},"OmO/":function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(2);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={version:"1.2.4",build:1507740258403},a=Vizabi.Tool.extend("PopByAge",{init:function(t,e){this.name="popbyage",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.marker","state.marker_allpossible","state.entities","state.entities_side","state.entities_age","state.entities_allpossible","state.entities_geodomain","locale","ui"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},validate:function(t){if(t=this.model||t,this._super(t),!this.model){var e=t.state.entities,n=t.state.entities_allpossible.dim;if(Object.keys(e.show).length>0){var r={};e.show[e.dim]&&e.show[e.dim].$in&&(r[e.dim]={},r[e.dim].$in=e.show[e.dim].$in),e.dim!==n&&(r["is--"+n]=!0),e.show[e.dim]&&1==Object.keys(e.show).length||(e.show=r)}var i=t.state.entities_geodomain;i.skipFilter=(t.state.entities.dim===i.dim||t.state.entities_side.dim===i.dim)&&(Boolean(t.state.entities.getFilteredEntities().length)||!t.state.entities_side.skipFilter)}},default_model:{state:{marker_tags:{}},ui:{chart:{mode:"smallMultiples",stacked:!0,inpercent:!1,flipSides:!0,lockActive:!0,lockNonSelected:0},buttons:["colors","show","lock","side","inpercent","moreoptions","fullscreen"],dialogs:{popup:["timedisplay","colors","show","side","moreoptions"],sidebar:["timedisplay","colors","grouping","show"],moreoptions:["opacity","speed","grouping","colors","side","presentation","about"]},presentation:!1},locale:{}},versionInfo:o});e.default=a},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=Vizabi,o=i.utils,a=i.Component,s=i.helpers,u=s["d3.axisWithLabelPicker"],c=s["d3.dynamicBackground"],l=s.textEllipsis,h=i.iconset.question,f=a.extend("popbyage",{init:function(t,e){this.name="popbyage",this.template=n(3),this.model_expects=[{name:"time",type:"time"},{name:"marker",type:"marker"},{name:"marker_allpossible",type:"marker"},{name:"entities",type:"entities"},{name:"entities_side",type:"entities"},{name:"entities_age",type:"entities"},{name:"entities_allpossible",type:"entities"},{name:"entities_geodomain",type:"entities"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}];var r=this;this.model_binds={"change:time.startSelected":function(t){r._readyOnce&&r.model.time.set({startSelected:new Date(r.timeSteps[0])},!1,!1)},"change:time.endSelected":function(t){r._readyOnce&&r.model.time.set({endSelected:new Date(r.timeSteps[r.timeSteps.length-1])},!1,!1)},"change:time.value":function(t){if(r._readyOnce){if(1!=r.model.time.step&&!r.snapped&&!r.model.time.playing&&!r.model.time.dragging){if(r.snapTime)return void(+r.snapTime-r.model.time.value==0?(r.snapTime=null,r.model.time.snap()):r.model.time.value=new Date(r.snapTime));if(r.updateStartEnd(r.model.time.value,r.groupBy))return void r.ready();var e=d3.bisectLeft(r.timeSteps,r.model.time.value);if(0!=e&&r.timeSteps[e]-r.model.time.value){r.snapped=!0;var n=r.model.time.value,i=r.timeSteps[e-1];e=r.timeSteps[e];var o=n-i<e-n?i:e;r.model.time.value=new Date(o)}}if(!r.snapped)if(r.timeSteps.filter(function(t){return t-r.model.time.value==0}).length)r.model.marker.getFrame(r.model.time.value,function(t){t&&(r.frame=t,r.frameAxisX=t.axis_x,r._updateEntities(),r.updateBarsOpacity())});else if(r.model.time.value<r.model.time.startSelected||r.model.time.value>r.model.time.endSelected)r.snapTime=r.model.time.value;else{r.snapTime=null;var a=d3.bisectLeft(r.timeSteps,r.model.time.value),s=r.timeSteps[a-1],u=r.timeSteps[a],c=(r.model.time.value-s)/(u-s);r.model.marker.getFrame(u,function(t){r.model.marker.getFrame(s,function(e){r.frameAxisX=r.interpolateDiagonal(e.axis_x,t.axis_x,c),r._updateEntities(),r.updateBarsOpacity()})})}r.snapped=!1}},"change:marker.select":function(t){r.someSelected=r.model.marker.select.length>0,r.nonSelectedOpacityZero=!1,r.updateBarsOpacity()},"change:marker.highlight":function(t,e){r._readyOnce&&r._highlightBars()},"change:marker.opacitySelectDim":function(){r.updateBarsOpacity()},"change:marker.opacityRegular":function(){r.updateBarsOpacity()},"change:marker.color.palette":function(t){r._readyOnce&&r._updateEntities(!0)},"change:marker.color.scaleType":function(t){r._readyOnce&&r._updateEntities()},"change:marker.color.which":function(t){if(r._readyOnce){var e=void 0,n={},i={};if("constant"==r.model.marker.color.use)e=null;else{var o=r.model.marker.color.getConceptprops();if("entity_set"==o.concept_type){e=o.domain,n[e]={};var a=r.model.marker.side.getConceptprops();"entity_set"==a.concept_type&&e==a.domain&&r.model.marker.side.which!==r.model.marker.color.which&&r.model.marker.side.setWhich({concept:r.model.marker.color.which})}else e=r.model.marker.color.which}r.STACKDIM!==e&&(i.show=n),i.dim=e;var s=r.SIDEDIM!==r.geoDomainDimension||r.model.marker.color.which===r.model.marker.side.which;if(!s){var u={};u["is--"+r.model.marker.side.which]=!0,r.model.entities_side.set("show",u)}r.model.entities_side.skipFilter=s,r.model.entities.set(i),r.model.entities_geodomain.skipFilter=(e===r.geoDomainDimension||r.SIDEDIM===r.geoDomainDimension)&&(Boolean(r.model.entities.getFilteredEntities().length)||!r.model.entities_side.skipFilter),r.model.entities_allpossible.set("dim",e),r.model.marker_allpossible.color.set("which",r.model.marker.color.which)}},"change:marker.side.which":function(t){if(r._readyOnce){var e=void 0,n={},i={};if("constant"==r.model.marker.side.use)e=null;else{var o=r.model.marker.side.getConceptprops();if("entity_set"==o.concept_type){e=o.domain;var a=r.model.marker.color.getConceptprops();"entity_set"==a.concept_type&&e==a.domain&&r.model.marker.color.which!==r.model.marker.side.which&&r.model.marker.color.setWhich({concept:r.model.marker.side.which})}else e=r.model.marker.side.which}r.model.marker.side.clearSideState();var s=e!==r.geoDomainDimension||r.model.marker.color.which===r.model.marker.side.which;s||(n["is--"+r.model.marker.side.which]=!0),r.model.entities_side.skipFilter=s,i.show=n,i.dim=e,r.model.entities_side.set(i),r.model.entities_geodomain.skipFilter=(e===r.geoDomainDimension||r.STACKDIM===r.geoDomainDimension)&&(Boolean(r.model.entities.getFilteredEntities().length)||!r.model.entities_side.skipFilter),r.model.marker.color.which===r.model.marker.side.which&&r.model.entities.clearShow()}},"change:entities.show":function(t){if(r._readyOnce){if(r.model.entities.dim===r.model.entities_side.dim&&!o.isEmpty(r.model.entities_side.show)){var e=r.model.entities_side.getFilteredEntities().filter(function(t){return!r.model.entities.isShown(t)});e.length&&(r.model.marker.side.clearSideState(),r.model.entities_side.showEntity(e))}r.model.entities_geodomain.skipFilter=(r.SIDEDIM===r.geoDomainDimension||r.STACKDIM===r.geoDomainDimension)&&(Boolean(r.model.entities.getFilteredEntities().length)||!r.model.entities_side.skipFilter)}},"change:entities_side.show":function(t){if(r._readyOnce){var e=!1,n=null;if(o.forEach(r.model.marker.side._space,function(t){t.dim===r.model.entities_side.dim&&t._name!==r.model.entities_side._name&&t._name!==r.model.entities_geodomain._name&&(n=t)}),n){r.model.entities.getFilteredEntities();var i=r.model.entities_side.getFilteredEntities().filter(function(t){return!n.isShown(t)});i.length&&(n.showEntity(i),e=!0)}r.SIDEDIM!==r.model.entities_side.dim&&(e=!0),e||(r._updateIndicators(),r._updateSideTitles(),r.model._ready&&r.frame&&(r.smallMultiples?o.forEach(r.stackKeys,function(t,e){r._updateLimits(t,e)}):r._updateLimits(),r.resize(),r._updateEntities(!0),r._redrawLocked()))}},"change:entities_age.grouping":function(t){r.groupBy=+r.model.entities_age.grouping||1,r.model.time.step=r.groupBy,r.timeSteps=r.model.time.getAllSteps(),r.model.ui.chart.lockNonSelected=0,r.labels.text("")},"change:ui.chart.inpercent":function(t){r._readyOnce&&(r.smallMultiples?o.forEach(r.stackKeys,function(t,e){r._updateLimits(t,e)}):r._updateLimits(),r.resize(),r._updateEntities(),r._redrawLocked())},"change:ui.chart.flipSides":function(t){r._readyOnce&&(r.model.marker.side.switchSideState(),r._updateIndicators(),r._updateSideTitles(),r.resize(),r._updateEntities(!0),r._redrawLocked())},"change:ui.chart.lockNonSelected":function(t){if(r.lock=r.model.ui.chart.lockNonSelected,r.lock){if(!(r.stackKeys.length<=1||r.stackSkip||r.smallMultiples))return void(r.model.ui.chart.lockNonSelected=0);r.yearLocked.text(" "+r.lock),r._makeOutlines(r.frameAxisX,r.total)}else r.yearLocked.text(""),r.lockedPaths.text("")},"ready:marker":function(t){r._readyOnce&&r.updateStartEnd(r.model.time.value,r.groupBy)}},this._super(t,e),this.textEllipsis=new l(this),this.xScale=null,this.yScale=null,this.cScale=null,this.xAxis=u("bottom"),this.xAxisLeft=u("bottom"),this.yAxis=u("left"),this.xScales=[],this.SHIFTEDAGEDIM="s_age"},domReady:function(){this._super(),this.graphTemplate=(new XMLSerializer).serializeToString(d3.select(this.element).select(".vzb-bc-graph").node())},updateStartEnd:function(t,e){var n=this.model.time,r=n.formatDate(t),i=+n.formatDate(n.start),o=(+r-i)%e;return o!==n.offset&&(n.set("offset",o,!1,!1),this.timeSteps=n.getAllSteps(),n.set({startSelected:new Date(this.timeSteps[0]),endSelected:new Date(this.timeSteps[this.timeSteps.length-1])},!1,!1),!0)},getTimeOffset:function(t,e){var n=+t.formatDate(t.start);return(+ +t.formatDate(t.value)-n)%e},checkDimensions:function(){var t=this.model.entities.dim,e=this.model.entities_side.dim;this.colorUseConstant="constant"==this.model.marker.color.use,this.stackSkip=this.colorUseConstant||t==e,this.geoLess=t!==this.geoDomainDimension&&e!==this.geoDomainDimension,this.sideSkip="constant"==this.model.marker.side.use},readyOnce:function(){var t=this;this.el=this.el?this.el:d3.select(this.element),this.element=this.el,this.textEllipsis.setTooltip(this.element.select(".vzb-bc-tooltip")),this.interaction=this._interaction(),this.geoDomainDimension=this.model.entities_geodomain.getDimension(),this.geoDomainDefaultValue=this.model.entities_geodomain.show[this.geoDomainDimension].$in[0],this.xTitleEl=this.element.select(".vzb-bc-axis-x-title"),this.xInfoEl=this.element.select(".vzb-bc-axis-x-info"),this.yearEl=this.element.select(".vzb-bc-year-now"),this.year=new c(this.yearEl),this.year.setText(this.model.time.formatDate(this.model.time.value)),this.yearLocked=this.element.select(".vzb-bc-year-locked"),this.someSelected=this.model.marker.select.length>0,this.nonSelectedOpacityZero=!1,this.groupBy=+this.model.entities_age.grouping||1,this.on("resize",function(){t._updateEntities(),t._redrawLocked()}),this._attributeUpdaters={_newWidth:function(e,n){var r=void 0;return r=t.geoLess&&t.stackSkip&&t.sideSkip?(t.frameAxisX[e[t.AGEDIM]+t.ageShift]||{})[t.geoDomainDefaultValue]:t.geoLess&&t.stackSkip?t.colorUseConstant||e[t.PREFIXEDSIDEDIM]==e[t.PREFIXEDSTACKDIM]?(t.frameAxisX[e[t.PREFIXEDSIDEDIM]][e[t.AGEDIM]+t.ageShift]||{})[t.geoDomainDefaultValue]:0:t.geoLess&&t.sideSkip?(t.frameAxisX[e[t.PREFIXEDSTACKDIM]][e[t.AGEDIM]+t.ageShift]||{})[t.geoDomainDefaultValue]:t.stackSkip?t.colorUseConstant||e[t.PREFIXEDSIDEDIM]==e[t.PREFIXEDSTACKDIM]?t.frameAxisX[e[t.PREFIXEDSIDEDIM]][e[t.AGEDIM]+t.ageShift]:0:t.sideSkip?t.frameAxisX[e[t.PREFIXEDSTACKDIM]][e[t.AGEDIM]+t.ageShift]:t.frameAxisX[e[t.PREFIXEDSTACKDIM]][e[t.PREFIXEDSIDEDIM]][e[t.AGEDIM]+t.ageShift],e.width_=r?t.xScale(r):0,t.ui.chart.inpercent&&(e.width_/=t.total[e.i][e[t.PREFIXEDSIDEDIM]]),e.width_},_newX:function(t,e){var n=this.previousSibling;if(n){var r=d3.select(n).datum();t.x_=r.x_+r.width_}return t.x_}}},ready:function(){if(this.model.marker._ready){var t=this;this.lock=t.model.ui.chart.lockNonSelected,this.timeSteps=this.model.time.getAllSteps(),this.shiftScale=d3.scaleLinear().domain([this.timeSteps[0],this.timeSteps[this.timeSteps.length-1]]).range([0,this.timeSteps.length-1]),this.domains=[],this.SIDEDIM=this.model.entities_side.getDimension(),this.PREFIXEDSIDEDIM="side_"+this.SIDEDIM,this.STACKDIM=this.model.entities.getDimension(),this.PREFIXEDSTACKDIM="stack_"+this.STACKDIM,this.AGEDIM=this.model.entities_age.getDimension(),this.TIMEDIM=this.model.time.getDimension(),this.checkDimensions(),this.updateUIStrings(),this._updateIndicators(),this.smallMultiples="smallMultiples"===(this.model.ui.chart||{}).mode&&!this.stackSkip&&this.stackKeys.length>1,this._updateGraphs(this.smallMultiples?this.stackKeys:["undefined"]),this._updateSideTitles(),this.lock&&(this.stackKeys.length<=1||this.stackSkip||this.smallMultiples)?this.yearLocked.text(""+this.lock):t.model.ui.chart.lockNonSelected=0,this.model.ui.chart.set("lockUnavailable",!(this.stackKeys.length<=1||this.stackSkip||this.smallMultiples),!1,!1),this.frame=null,this.frameAllColor={},this.model.marker.getFrame(t.model.time.value,function(e,n){t.frame=e,t.frameAxisX=e.axis_x;var r={};r[n]=e,t.maxLimits={},t.inpercentMaxLimits={},t.totals={},t.smallMultiples?o.forEach(t.stackKeys,function(e,n){t._createLimits(r,e),t._updateLimits(e,n)}):(t._createLimits(r),t._updateLimits()),t._getLimits(),t.resize(),t.model.marker_allpossible.getFrame(t.model.time.value,function(e){t.frameAllColor=e.color||{},t._updateEntities(!0),t.updateBarsOpacity()})})}},_updateGraphs:function(t){var e=this,n=this.element.selectAll(".vzb-bc-graph").data(t);n.exit().remove(),n.enter().append(function(){return this.ownerDocument.importNode((new DOMParser).parseFromString(e.graphTemplate,"application/xml").documentElement,!0)}),this.element.select(".vzb-bc-tooltip").raise(),this.graph=this.element.selectAll(".vzb-bc-graph"),this.yAxisEl=this.graph.select(".vzb-bc-axis-y"),this.xAxisEl=this.graph.select(".vzb-bc-axis-x"),this.xAxisLeftEl=this.graph.select(".vzb-bc-axis-x-left"),this.yTitleEl=this.graph.select(".vzb-bc-axis-y-title"),this.title=this.graph.select(".vzb-bc-title"),this.titleRight=this.graph.select(".vzb-bc-title-right"),this.titleCenter=this.graph.select(".vzb-bc-title-center"),this.barsCrop=this.graph.select(".vzb-bc-bars-crop"),this.lockedCrop=this.graph.select(".vzb-bc-locked-crop"),this.labelsCrop=this.graph.select(".vzb-bc-labels-crop"),this.bars=this.barsCrop.select(".vzb-bc-bars"),this.lockedPaths=this.lockedCrop.select(".vzb-bc-paths"),this.labels=this.labelsCrop.select(".vzb-bc-labels")},_getLimits:function(){var t=this;return function(){var e=t.groupBy;t.model.marker.getFrame(null,function(n){n&&e===t.groupBy&&(t.smallMultiples?o.forEach(t.stackKeys,function(e,r){t._createLimits(n,e),t._updateLimits(e,r)}):(t._createLimits(n),t._updateLimits()),t.resize(),t._updateEntities(!0),t.updateBarsOpacity(),t._redrawLocked())})}()},_redrawLocked:function(){var t=this,e=this;this.lock&&this.model.marker.getFrame(this.model.time.parse(""+this.lock),function(n,r){if(n){e.lockedPaths.text("");var i={};t.ui.chart.inpercent&&(t.smallMultiples?o.forEach(t.stackKeys,function(e,n){i[n]=t.totals[e][r]?t.totals[e][r]:t._interpolateBetweenTotals(t.timeSteps,t.totals[e],r)}):i[0]=t.totals[r]?t.totals[r]:t._interpolateBetweenTotals(t.timeSteps,t.totals,r),!i[0])||e._makeOutlines(n.axis_x,i)}})},interpolateDiagonal:function(t,e,n){var r=this,i={},a=void 0,s=void 0,u=void 0,c=void 0,l=this.groupBy;return this.geoLess&&this.stackSkip&&this.sideSkip?(a=i,o.forEach(r.ageKeys,function(i){c=+i+l,s=t[i][r.geoDomainDefaultValue],u=(e[c]||{})[r.geoDomainDefaultValue]||0,a[c]={},a[c][r.geoDomainDefaultValue]=null==s||null==u?null:s+(u-s)*n}),a[0]={},a[0][r.geoDomainDefaultValue]=e[0][r.geoDomainDefaultValue]||0):this.stackSkip&&this.geoLess?o.forEach(r.sideKeys,function(h){a=i[h]={},o.forEach(r.ageKeys,function(i){c=+i+l,s=t[h][i][r.geoDomainDefaultValue],u=(e[h][c]||{})[r.geoDomainDefaultValue]||0,a[c]={},a[c][r.geoDomainDefaultValue]=null==s||null==u?null:s+(u-s)*n}),a[0]={},a[0][r.geoDomainDefaultValue]=e[h][0][r.geoDomainDefaultValue]||0}):this.stackSkip?o.forEach(r.sideKeys,function(h){a=i[h]={},o.forEach(r.ageKeys,function(r){c=+r+l,s=t[h][r],u=e[h][c]||0,a[c]=null==s||null==u?null:s+(u-s)*n}),a[0]=e[h][0]||0}):this.sideSkip&&this.geoLess?o.forEach(r.stackKeys,function(h){a=i[h]={},o.forEach(r.ageKeys,function(i){c=+i+l,s=t[h][i][r.geoDomainDefaultValue],u=(e[h][c]||{})[r.geoDomainDefaultValue]||0,a[c]={},a[c][r.geoDomainDefaultValue]=null==s||null==u?null:s+(u-s)*n}),a[0]={},a[0][r.geoDomainDefaultValue]=e[h][0][r.geoDomainDefaultValue]||0}):this.sideSkip?o.forEach(r.stackKeys,function(h){a=i[h]={},o.forEach(r.ageKeys,function(r){c=+r+l,s=t[h][r],u=e[h][c]||0,a[c]=null==s||null==u?null:s+(u-s)*n}),a[0]=e[h][0]||0}):o.forEach(r.stackKeys,function(h){i[h]={},o.forEach(r.sideKeys,function(f){a=i[h][f]={},o.forEach(r.ageKeys,function(r){c=+r+l,s=t[h][f][r],u=e[h][f][c]||0,a[c]=null==s||null==u?null:s+(u-s)*n}),a[0]=e[h][f][0]||0})}),i},updateUIStrings:function(){var t=this;this.translator=this.model.locale.getTFunction(),this.xTitleEl.selectAll("text").data([0]).enter().append("text").text(t.translator("popbyage/title"));var e=this.model.marker.axis_x.getConceptprops();o.setIcon(this.xInfoEl,h).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(e.description||e.sourceLink))),this.xInfoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.xInfoEl.on("mouseover",function(){if(!t.model.time.dragging){var e=this.getBBox(),n=o.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("axis_x").show().setPos(n.x+i.left-r.left,n.y)}}),this.xInfoEl.on("mouseout",function(){t.model.time.dragging||t.parent.findChildByName("gapminder-datanotes").hide()})},_updateIndicators:function(){var t=this,e=this;this.duration=this.model.time.delayAnimations,this.yScale=this.model.marker.axis_y.getScale(),this.xScale=this.model.marker.axis_x.getScale(),this.yAxis.tickFormat(e.model.marker.axis_y.getTickFormatter()),this.xAxis.tickFormat(e.model.marker.axis_x.getTickFormatter()),this.xAxisLeft.tickFormat(e.model.marker.axis_x.getTickFormatter());var n=this.SIDEDIM,r=this.STACKDIM,i=this.AGEDIM,a=this.groupBy,s=this.model.marker.getKeys(i),u=[];u=s.map(function(t){return t[i]}),this.ageKeys=u,this.shiftedAgeKeys=this.timeSteps.map(function(t,e){return-e*a}).slice(1).reverse().concat(u),this.sideItems=this.model.marker.label_side.getItems();var c=[];if(!o.isEmpty(this.sideItems)){var l=!!this.model.marker.side.getEntity().show[n];if(c=this.model.marker.getKeys(n).filter(function(e){return!l||t.model.marker.side.getEntity().isShown(e)}).map(function(t){return t[n]}),c.length>2&&(c.length=2),c.length>1){var h=this.ui.chart.flipSides?d3.ascending:d3.descending;c.sort(h)}}c.length||c.push("undefined"),this.sideKeys=c;var f=this.model.marker.getKeys(r),d=f.map(function(t){return t[r]}),p=o.keys(this.model.marker.color.getPalette()).reduce(function(t,e){return-1!=d.indexOf(e)&&t.push(e),t},[]);p.length!=d.length&&(p=d.reduce(function(t,e){return-1==t.indexOf(e)&&t.push(e),t},p)),this.stackKeys=p,this.stackItems=this.model.marker.label_stack.getItems(),this.stacked=this.ui.chart.stacked&&"constant"!=this.model.marker.color.use&&this.model.entities.getDimension(),this.twoSided=this.sideKeys.length>1,this.twoSided&&(this.xScaleLeft=this.xScale.copy()),this.cScale=this.model.marker.color.getScale(),this.markers=this.model.marker.getKeys(i)},_updateSideTitles:function(){var t=this,e=this.sideItems;if(this.titleRight.classed("vzb-hidden",!this.twoSided),this.twoSided)this.title.text(e[this.sideKeys[1]]).call(this.textEllipsis.clear),this.titleRight.text(e[this.sideKeys[0]]).call(this.textEllipsis.clear);else{var n=this.sideKeys.length&&e[this.sideKeys[0]]?e[this.sideKeys[0]]:"";this.title.text(n).call(this.textEllipsis.clear)}if(this.smallMultiples)this.titleCenter.call(this.textEllipsis.clear).each(function(e,n){d3.select(this).text(t.stackItems[t.stackKeys[n]])});else{var r=this.stackKeys.length&&this.stackItems[this.stackKeys[0]]?this.stackItems[this.stackKeys[0]]:"";this.titleCenter.text(r).call(this.textEllipsis.clear)}},_createLimits:function(t,e){var n=this,i=e?[e]:this.stackKeys,a=Object.keys(this.model.marker.side.getNestedItems([this.SIDEDIM]));a.length||a.push("undefined");var s={},u={},c={},l=this.geoLess,h=this.geoDomainDefaultValue;a.forEach(function(t){c[t]=[],u[t]=[]}),n.stackSkip&&n.sideSkip?o.forEach(t,function(t,e){var r=t.axis_x;s[e]={};var i=0,l=[];o.forEach(n.ageKeys,function(t){var e=0;r[t]&&(e+=r[t][h],i+=e),l.push(e)}),s[e][a[0]]=i;var f=Math.max.apply(Math,l);u[a[0]].push(f/i),c[a[0]].push(f)}):n.sideSkip?o.forEach(t,function(t,e){var r=t.axis_x;s[e]={};var f=0,d=[];o.forEach(n.ageKeys,function(t){var e=0;o.forEach(i,function(n){r[n]&&r[n][t]&&(e+=l?r[n][t][h]:r[n][t],f+=e)}),d.push(e)}),s[e][a[0]]=f;var p=Math.max.apply(Math,d);u[a[0]].push(p/f),c[a[0]].push(p)}):n.stackSkip?o.forEach(t,function(t,e){var r=t.axis_x;s[e]={},o.forEach(a,function(t){var i=0,a=[];o.forEach(n.ageKeys,function(e){var n=0;r[t]&&r[t][e]&&(n+=l?r[t][e][h]:r[t][e],i+=n),a.push(n)}),s[e][t]=i;var f=Math.max.apply(Math,a);u[t].push(f/i),c[t].push(f)})}):o.forEach(t,function(t,e){var r=t.axis_x;s[e]={},o.forEach(a,function(t){var a=0,f=[];o.forEach(n.ageKeys,function(e){var n=0;o.forEach(i,function(i){r[i][t]&&r[i][t][e]&&(n+=l?r[i][t][e][h]:r[i][t][e],a+=n)}),f.push(n)}),s[e][t]=a;var d=Math.max.apply(Math,f);u[t].push(d/a),c[t].push(d)})}),e?(this.maxLimits[e]={},this.inpercentMaxLimits[e]={},a.forEach(function(t){n.maxLimits[e][t]=Math.max.apply(Math,r(c[t])),n.inpercentMaxLimits[e][t]=Math.max.apply(Math,r(u[t]))}),this.totals[e]=s):(a.forEach(function(t){n.maxLimits[t]=Math.max.apply(Math,r(c[t])),n.inpercentMaxLimits[t]=Math.max.apply(Math,r(u[t]))}),this.totals=s)},_updateLimits:function(t,e){var n=this,i=this.model.marker.axis_x;this.smallMultiples&&t?this.ui.chart.inpercent?this.domains[e]=[0,Math.max.apply(Math,r(this.sideKeys.map(function(e){return n.inpercentMaxLimits[t][e]})))]:this.domains[e]=null!=i.domainMin&&null!=i.domainMax?[+i.domainMin,+i.domainMax]:[0,Math.max.apply(Math,r(this.sideKeys.map(function(e){return n.maxLimits[t][e]})))]:this.ui.chart.inpercent?this.domains[0]=[0,Math.max.apply(Math,r(this.sideKeys.map(function(t){return n.inpercentMaxLimits[t]})))]:this.domains[0]=null!=i.domainMin&&null!=i.domainMax?[+i.domainMin,+i.domainMax]:[0,Math.max.apply(Math,r(this.sideKeys.map(function(t){return n.maxLimits[t]})))],this.xScale.domain(this.domains[0]),this.xScaleLeft&&this.xScaleLeft.domain(this.xScale.domain()),this.domainScalers=this._calcDomainScalers()},_calcDomainScalers:function(){var t=this.domains.map(function(t){return t[1]-t[0]}),e=t.reduce(function(t,e){return t+e});return t.map(function(t){return t/e})},_interpolateBetweenTotals:function(t,e,n){var r=d3.bisectLeft(t,n),i=(n-t[r-1])/(t[r]-t[r-1]),a={};return o.forEach(this.sideKeys,function(n){a[n]=e[t[r]][n]*i+e[t[r-1]][n]*(1-i)}),a},_updateEntities:function(t){var e=this,n=this,r=this.model.time,i=this.SIDEDIM,a=this.PREFIXEDSIDEDIM,s=this.AGEDIM,u=this.STACKDIM,c=this.PREFIXEDSTACKDIM,l=(this.TIMEDIM,r.playing?r.delayAnimations:0),h=this.groupBy;this.ui.chart.inpercent&&(this.total={},this.smallMultiples?o.forEach(this.stackKeys,function(t,n){e.total[n]=e.totals[t][r.value]?e.totals[t][r.value]:e._interpolateBetweenTotals(e.timeSteps,e.totals[t],r.value)}):this.total[0]=this.totals[r.value]?this.totals[r.value]:this._interpolateBetweenTotals(this.timeSteps,this.totals,r.value));var f=this.yScale.domain(),d=d3.bisectLeft(this.timeSteps,r.value),p=this.SHIFTEDAGEDIM,v=this.markers.map(function(t){var e={};return e[s]=e[p]=+t[s],e[s]-=d*h,e}),g=v.slice(0),m={};m[p]=v.length*h,m[s]=m[p]-d*h,this.ageShift=d*h,d&&g.push(m);var y=n.stacked?n.stackKeys:[n.geoDomainDefaultValue],b=this.geoDomainDefaultValue,_=this.geoDomainDimension;this.barsData=[];var x=this.bars.selectAll(".vzb-bc-bar").data(function(t,r){return n.barsData[r]=g.map(function(t){var e={};return e[s]=t[s],e[p]=t[p],e.i=r,e}),e.barsData[r]},function(t){return t[s]});x.exit().remove();var w=this.oneBarHeight,M=this.barHeight,S=this.firstBarOffsetY;x=x.enter().append("g").attr("class",function(t){return"vzb-bc-bar vzb-bc-bar-"+t[s]}).attr("transform",function(t,e){return"translate(0,"+(S-(t[p]-f[0]-h)*w)+")"}).merge(x);var k=x.selectAll(".vzb-bc-side").data(function(t,e){return t.side=n.sideKeys.map(function(e){var n={};return n[s]=t[s],n[p]=t[p],n[a]=e,n[i]=e,n.i=t.i,n}),t.side},function(t){return t[a]});k.exit().remove(),k=k.enter().append("g").attr("class",function(t,e){return"vzb-bc-side vzb-bc-side-"+(!e!=!n.twoSided?"right":"left")}).attr("transform",function(t,e){return e?"scale(-1,1) translate("+n.activeProfile.centerWidth+",0)":""}).merge(k),t&&k.attr("class",function(t,e){return"vzb-bc-side vzb-bc-side-"+(!e!=!n.twoSided?"right":"left")}).attr("transform",function(t,e){return e?"scale(-1,1) translate("+n.activeProfile.centerWidth+",0)":""});var E=this._attributeUpdaters,O=k.selectAll(".vzb-bc-stack").data(function(t){return t.stack=(n.smallMultiples?[y[t.i]]:y).map(function(e){var n={};return n[_]=b,n[s]=t[s],n[p]=t[p],n[i]=t[i],n[u]=e,n[a]=t[a],n[c]=e,n.x_=0,n.width_=0,n.i=t.i,n}),t.stack},function(t){return t[c]});O.exit().remove(),O=O.enter().append("rect").attr("class",function(t,e){return"vzb-bc-stack vzb-bc-stack-"+e+(n.highlighted?" vzb-dimmed":"")}).attr("y",0).attr("height",M-(h>2?1:0)).attr("fill",function(t){return n.cScale(n.frameAllColor[t[c]]||t[c])}).attr("x",E._newX).on("mouseover",n.interaction.mouseover).on("mouseout",n.interaction.mouseout).on("click",n.interaction.click).onTap(n.interaction.tap).merge(O),t&&O.attr("class",function(t,e){return"vzb-bc-stack vzb-bc-stack-"+e+(n.highlighted?" vzb-dimmed":"")}).attr("fill",function(t){return n.cScale(n.frameAllColor[t[c]]||t[c])}).order();var T=g[0][p]-g[0][s]-this.shiftScale(r.value)*h;if(l){var C=d3.transition().duration(l).ease(d3.easeLinear);x.transition(C).attr("transform",function(t,e){return"translate(0,"+(S-(t[p]-f[0]-T)*w)+")"}),O.transition(C).attr("width",E._newWidth).attr("x",E._newX)}else x.interrupt().attr("transform",function(t,e){return"translate(0,"+(S-(t[p]-f[0]-T)*w)+")"}),O.interrupt().attr("width",E._newWidth).attr("x",E._newX);this.ageBars=x,this.sideBars=k,this.stackBars=O,this.entityLabels=this.labels.selectAll(".vzb-bc-label text").data(v),this.entityLabels.exit().remove(),this.entityLabels=this.entityLabels.enter().append("g").attr("class",function(t){return"vzb-bc-label vzb-bc-label-"+t[p]}).append("text").attr("class","vzb-bc-age").merge(this.entityLabels).each(function(t,e){var r=n.translator("popbyage/yearOlds"),i=parseInt(t[p],10);if(h>1){var o=i+h-1;i=i+"-to-"+(o>f[1]?f[1]:o)}t.text=i+r}).attr("y",function(t,e){return S-(t[p]-f[0])*w-10}).attr("dy",function(t,e){return t[p]+h>f[1]?(h-f[1]+t[p])/h*M:0}),this.year.setText(this.model.time.formatDate(r.value),this.duration)},_makeOutlines:function(t,e){var n=this,r=this,i=o.unique(this.model.marker._getAllDimensions({exceptType:"time"}));i.forEach(function(t,e){t===r.AGEDIM&&(i[e]=r.SHIFTEDAGEDIM)});var a=this.groupBy,s=this.barHeight,u=this.firstBarOffsetY+s,c=d3.line().curve(d3.curveStepBefore).x(function(t){return t.x}).y(function(t,e){return u-s*e-(a>2?1:0)}),l=this.barsData.map(function(a,s){var u=[0,0];return n.sideKeys.map(function(n,c){r.stackSkip&&a[0].side[c].stack.forEach(function(t,e){t[r.PREFIXEDSIDEDIM]===t[r.PREFIXEDSTACKDIM]&&(u[c]=e)});var l={};return l.d=a.map(function(n){var a={},l=o.getValueMD(n.side[c].stack[u[c]],t,i);return a.x=l?r.xScale(l):0,r.ui.chart.inpercent&&(a.x/=e[s][n.side[c].stack[u[c]][r.PREFIXEDSIDEDIM]]),a}),l})}),h=this.bars.selectAll(".vzb-bc-side-left").selectAll(".vzb-bc-stack-0").data();r.cScale(h[0][this.PREFIXEDSTACKDIM]),this.model.marker.color.getColorShade({colorID:r.frameAllColor[h[0][this.PREFIXEDSTACKDIM]]||h[0][this.PREFIXEDSTACKDIM],shadeID:"shade"}),this.lockedPaths.each(function(t,e){var n=d3.select(this).selectAll("path").data(l[e]);n.exit().remove(),n.enter().append("path").merge(n).attr("d",function(t,e){return c(t.d)}).attr("stroke","#000").attr("transform",function(t,e){return e?"scale(-1,1) translate("+r.activeProfile.centerWidth+",0)":""})})},_setYear:function(t){var e=this.model.time.formatDate(t);return function(){d3.select(this).text(e)}},_interaction:function(){var t=this;return{mouseover:function(e,n){o.isTouchDevice()||(t.model.marker.highlightMarker(e),t._showLabel(e))},mouseout:function(e,n){o.isTouchDevice()||t.model.marker.clearHighlighted()},click:function(e,n){o.isTouchDevice()||t.model.marker.selectMarker(e)},tap:function(e){d3.event.stopPropagation(),t.model.marker.selectMarker(e)}}},_highlightBars:function(t){var e=this;e.someHighlighted=e.model.marker.highlight.length>0,e.updateBarsOpacity(),e.someHighlighted||e.labels.selectAll(".vzb-hovered").classed("vzb-hovered",!1)},_showLabel:function(t){var e=this,n=e.ui.chart.inpercent?d3.format(".1%"):e.model.marker.axis_x.getTickFormatter(),r=e.SIDEDIM,i=(e.AGEDIM,e.STACKDIM),o=e.sideKeys.indexOf(t[r])>0,a=7;this.smallMultiples||(a+=+d3.select(d3.event.target).attr("x"));var s=e.labels.select(".vzb-bc-label-"+t.s_age).nodes()[t.i],u=d3.select(s);u.selectAll(".vzb-bc-age").text(function(r){var o=e.stackKeys.length>1?e.stackItems[t[i]]:r.text;o=e.twoSided?o:r.text+" "+e.stackItems[t[i]];var a=e.xScale.invert(t.width_);return o+": "+n(a)}).attr("x",o?-this.activeProfile.centerWidth-a:a).attr("dx",0).classed("vzb-text-left",o),u.classed("vzb-prehovered",!0);var c=s.getBBox(),l=e.element.node().getScreenCTM().inverse().multiply(s.getScreenCTM()),h=Math.max(-c.x-l.e,0),f=Math.min(e.fullWidth-c.x-c.width-l.e,0);u.selectAll(".vzb-bc-age").attr("dx",h+f),u.classed("vzb-prehovered",!1),u.classed("vzb-hovered",!0)},getGraphWidth:function(t,e){var n=t||this.width;if(this.smallMultiples){var r=this.graph.data().length;return n-=e*(r-1),this.domainScalers.map(function(t){return n*t})}return[n]},getYAxisVisibility:function(t){return 0==t},presentationProfileChanges:{medium:{margin:{top:120,right:50,left:80,bottom:60,between:30},infoElHeight:32},large:{margin:{top:120,right:70,left:100,bottom:70,between:30},infoElHeight:32}},profiles:{small:{margin:{top:50,right:20,left:40,bottom:20,between:10},infoElHeight:16,centerWidth:2,titlesSpacing:5},medium:{margin:{top:70,right:40,left:60,bottom:20,between:20},infoElHeight:20,centerWidth:2,titlesSpacing:10},large:{margin:{top:80,right:60,left:60,bottom:30,between:20},infoElHeight:22,centerWidth:2,titlesSpacing:20}},resize:function(){var t=this,e=this;this.activeProfile=this.getActiveProfile(this.profiles,this.presentationProfileChanges);var n=this.activeProfile.margin,r=this.activeProfile.infoElHeight,i=this.sideSkip?.23*n.top:0;if(this.height=parseInt(this.element.style("height"),10)+i-n.top-n.bottom||0,this.width=parseInt(this.element.style("width"),10)-n.left-n.right||0,this.fullWidth=parseInt(this.element.style("width"),10)||0,this.graphWidth=this.getGraphWidth(this.width,n.between),this.height<=0||this.width<=0)return o.warn("Pop by age resize() abort: vizabi container is too little or has display:none");var a=0,s=0,u=this.graphWidth.map(function(t){return s=a,a+=t,s});this.graph.attr("transform",function(t,e){return"translate("+(n.left+n.between*e+u[e])+","+(n.top-i)+")"}),this.barsCrop.attr("width",function(e,n){return t.graphWidth[n]}).attr("height",Math.max(0,this.height)),this.lockedCrop.attr("width",function(e,n){return t.graphWidth[n]}).attr("height",Math.max(0,this.height)),this.labelsCrop.attr("width",function(e,n){return t.graphWidth[n]}).attr("height",Math.max(0,this.height));var c=this.groupBy,l=this.yScale.domain();this.oneBarHeight=this.height/(l[1]-l[0]);var h=this.barHeight=this.oneBarHeight*c;this.firstBarOffsetY=this.height-this.barHeight,this.stackBars&&this.stackBars.attr("height",h-(c>2?1:0)),this.sideBars&&this.sideBars.attr("transform",function(t,n){return n?"scale(-1,1) translate("+e.activeProfile.centerWidth+",0)":""}),this.yScale.range([this.height,0]);var f=this.yScale.copy();c>2&&(f.ticks=function(){return d3.range(l[0],l[1]+1,c)}),this.yAxisEl.each(function(t,r){e.yAxis.scale(f.range([e.height,0])).tickSizeInner(-e.graphWidth[r]).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-e.graphWidth[r],0).labelerOptions({scaleType:e.model.marker.axis_y.scaleType,toolMargin:n,limitMaxTickNumber:19,fitIntoScale:"optimistic",isPivotAuto:!1}),d3.select(this).attr("transform","translate(0,0)").call(e.yAxis).classed("vzb-bc-axis-text-hidden",!e.getYAxisVisibility(r))}),this.yAxisEl.select(".tick line").classed("vzb-hidden",!0);var d=e.twoSided?.5*(e.graphWidth[0]-e.activeProfile.centerWidth):e.graphWidth[0];this.xScale.range([0,d]);var p=this.ui.chart.inpercent?d3.format(".1%"):this.model.marker.axis_x.getTickFormatter(),v=[];this.xAxisEl.each(function(t,r){var i=e.twoSided?.5*(e.graphWidth[r]-e.activeProfile.centerWidth):e.graphWidth[r];v[r]=e.twoSided?.5*(e.graphWidth[r]+e.activeProfile.centerWidth):0,e.xAxis.scale(e.xScale.copy().domain(e.domains[r]).range([0,i])).tickFormat(p).tickSizeInner(-e.height).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-e.height,0).labelerOptions({scaleType:e.model.marker.axis_x.scaleType,toolMargin:n,limitMaxTickNumber:6}),d3.select(this).attr("transform","translate("+v[r]+","+e.height+")").call(e.xAxis);var o=d3.select(this).selectAll(".tick text");if(o.size()>1){var a=o.node().getBBox().width;d3.select(o.node()).attr("dx",-(e.activeProfile.centerWidth+a)*(e.twoSided?.5:.15))}}),this.xAxisEl.select(".tick line").classed("vzb-hidden",!0),this.xAxisLeftEl.classed("vzb-hidden",!this.twoSided),this.twoSided&&(this.xScaleLeft.range([.5*(this.graphWidth[0]-this.activeProfile.centerWidth),0]),this.xAxisLeftEl.each(function(t,r){e.xAxisLeft.scale(e.xScaleLeft.copy().domain(e.domains[r]).range([.5*(e.graphWidth[r]-e.activeProfile.centerWidth),0])).tickFormat(p).tickSizeInner(-e.height).tickSizeOuter(0).tickPadding(6).tickSizeMinor(-e.height,0).labelerOptions({scaleType:e.model.marker.axis_x.scaleType,toolMargin:n,limitMaxTickNumber:6}),d3.select(this).attr("transform","translate(0,"+e.height+")").call(e.xAxisLeft);var i=d3.select(this).selectAll(".tick").classed("vzb-hidden",!1).nodes();d3.select(i[i.length-1]).classed("vzb-hidden",!0)}));var g=this.model.locale.isRTL();this.bars.attr("transform",function(t,e){return"translate("+v[e]+",0)"}),this.lockedPaths.attr("transform",function(t,e){return"translate("+v[e]+",0)"}),this.labels.attr("transform",function(t,e){return"translate("+v[e]+",0)"});var m=function(n){return v[n]-t.activeProfile.titlesSpacing<0?.5*e.activeProfile.centerWidth:e.activeProfile.titlesSpacing};if(this.title.attr("x",function(n,r){return t.twoSided?v[r]-.5*e.activeProfile.centerWidth-m(r):0}).style("text-anchor",this.twoSided?"end":"").attr("y",.275*-n.top-i).each(function(t,r){e.textEllipsis.wrap(this,e.twoSided?.5*(e.graphWidth[r]+n.between-m(r)):e.graphWidth[r]+n.between)}),this.titleRight.attr("x",function(t,n){return v[n]-.5*e.activeProfile.centerWidth+m(n)}).attr("y",.275*-n.top-i).each(function(t,r){e.textEllipsis.wrap(this,.5*(e.graphWidth[r]+n.between-m(r)))}),this.titleCenter.attr("x",function(n,r){return t.twoSided?v[r]-.5*e.activeProfile.centerWidth:.5*e.graphWidth[r]}).style("text-anchor","middle").attr("y",.035*(-n.top-i)).each(function(t,r){e.textEllipsis.wrap(this,e.graphWidth[r]+n.between)}),this.xTitleEl.style("font-size",r+"px").attr("transform","translate("+(g?n.left+this.width:.4*n.left)+","+.35*n.top+")"),this.xInfoEl.select("svg").node()){var y=this.xTitleEl.node().getBBox(),b=o.transform(this.xTitleEl.node()),_=g?y.x+b.translateX-1.4*r:y.x+b.translateX+y.width+.4*r;this.xInfoEl.select("svg").attr("width",r+"px").attr("height",r+"px"),this.xInfoEl.attr("transform","translate("+_+","+(b.translateY-.8*r)+")")}var x={topOffset:this.ui.presentation?25:"small"===this.getLayoutProfile()?10:15,rightOffset:"small"===this.getLayoutProfile()?5:10,xAlign:"right",yAlign:"top",heightRatio:(this.ui.presentation,.5)};this.year.setConditions(x).resize(this.fullWidth,n.top),this.yearLocked.attr("x",g?.4*n.left:this.width+n.left+n.right-10).attr("y",(n.top-i)*(this.getLayoutProfile(),1.27))},updateBarsOpacity:function(t){var e=this,n=this.model.marker.opacityHighlightDim,r=this.model.marker.opacityRegular,i=this.model.marker.opacitySelectDim,o=e.model.marker.opacitySelectDim<.01,a=o!=this.nonSelectedOpacityZero,s=this.someSelected,u=this.someHighlighted;this.stackBars.each(function(t){var c=!!s&&e.model.marker.isSelected(t),l=!!u&&e.model.marker.isHighlighted(t),h=d3.select(this);h.style("opacity",l?1:s?c?1:i:u?n:r).style("stroke",c?"#333":null).style("y",c?"0.5px":null),a&&h.style("pointer-events",s&&o&&!c?"none":"visible")}),this.nonSelectedOpacityZero=e.model.marker.opacitySelectDim<.01}});e.default=f},function(t,e){},function(t,e){t.exports='\x3c!-- PopByAge Component --\x3e\n<svg class="vzb-popbyage">\n    <g class="vzb-bc-header">\n        <g class="vzb-bc-axis-x-title"></g>\n        <g class="vzb-bc-axis-x-info vzb-noexport"></g>\n        <g class="vzb-bc-year-now"></g>\n        <text class="vzb-bc-year vzb-bc-year-locked"></text>\n    </g>\n    <g class="vzb-bc-graph">\n        <text class="vzb-bc-title"></text>\n        <text class="vzb-bc-title vzb-bc-title-right"></text>\n        <text class="vzb-bc-title vzb-bc-title-center"></text>\n\n        <g class="vzb-bc-axis-y-title"></g>\n\n        <g class="vzb-bc-axis-y"></g>\n\n        <svg class="vzb-bc-bars-crop">\n            <g class="vzb-bc-bars"></g>\n        </svg>\n        \n        <svg class="vzb-bc-locked-crop">\n            <g class="vzb-bc-paths"></g>\n        </svg>\n\n        <g class="vzb-bc-axis-x"></g>\n        <g class="vzb-bc-axis-x vzb-bc-axis-x-left"></g>\n\n        <svg class="vzb-bc-labels-crop">\n            <g class="vzb-bc-labels"></g>\n        </svg>\n\n        <g class="vzb-bc-axis-labels">\n            \x3c!-- <text class="vzb-x_label">Lifespan</text>\n                  <text class="vzb-y_label">Lifespan</text> --\x3e\n        </g>\n    </g>\n    <g class="vzb-bc-tooltip vzb-hidden">\n        <rect class="vzb-tooltip-border"></rect>\n        <text class="vzb-tooltip-text"></text>\n    </g>\n</svg>\n'},function(t,e,n){t.exports=n(0)}])},P6IN:function(t,e,n){var r=n("tose").f,i=n("rMsi"),o=n("3r0D")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},"PM/s":function(t,e,n){var r=n("CDXM");r(r.S,"Object",{is:n("pHtE")})},PNtC:function(t,e,n){var r=n("R5c1"),i=n("a/Sk").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},PX9N:function(t,e,n){var r=n("CDXM");r(r.P,"String",{repeat:n("tDHD")})},PeZi:function(t,e,n){var r=n("9wYb"),i=n("Wy9r");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},Pic8:function(t,e,n){"use strict";var r=n("bKpL"),i=n("aCMF");r.Observable.prototype.switchMap=i.switchMap},Ps07:function(t,e,n){"use strict";var r=n("3LDD"),i=n("Y5fy");t.exports=n("cpZ/")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},PwgJ:function(t,e,n){"use strict";(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}var i=n("3msI"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?i.a.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.a=r}).call(e,n("qhgb")(t))},Q7OE:function(t,e,n){"use strict";var r=n("CDXM"),i=n("+GRi"),o=n("9wYb"),a=n("rppw"),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n("bhtb")(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},"QN+J":function(t,e,n){var r=n("CDXM"),i=n("b4gG"),o=n("umMR");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},QU9E:function(t,e,n){"use strict";var r=n("mihg");e.fromPromise=r.PromiseObservable.create},QZhw:function(t,e,n){"use strict";var r,i=n("BCYq")(0),o=n("lfBE"),a=n("xI8H"),s=n("rIdM"),u=n("XRS9"),c=n("JXkd"),l=n("umMR"),h=n("Y5fy"),f=a.getWeak,d=Object.isExtensible,p=u.ufstore,v={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=f(t);return!0===e?p(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(h(this,"WeakMap"),t,e)}},y=t.exports=n("cpZ/")("WeakMap",g,m,u,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(v),7).get(v)})&&(r=u.getConstructor(g,"WeakMap"),s(r.prototype,m),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!d(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},QcIQ:function(t,e,n){"use strict";var r=n("ptrv"),i=n("rMsi"),o=n("VceJ"),a=n("Ula3"),s=n("A1WY"),u=n("umMR"),c=n("PNtC").f,l=n("6De9").f,h=n("tose").f,f=n("kFjN").trim,d=r.Number,p=d,v=d.prototype,g="Number"==o(n("51pc")(v)),m="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():f(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?u(function(){v.valueOf.call(n)}):"Number"!=o(n))?a(new p(y(e)),n,d):y(e)};for(var b,_=n("V+0c")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;_.length>x;x++)i(p,b=_[x])&&!i(d,b)&&h(d,b,l(p,b));d.prototype=v,v.constructor=d,n("lfBE")(r,"Number",d)}},R5c1:function(t,e,n){var r=n("rMsi"),i=n("+GRi"),o=n("vyV2")(!1),a=n("yIWP")("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},R61s:function(t,e,n){"use strict";var r=n("zijX"),i=n("wQte");e.Map=r.root.Map||function(){return i.MapPolyfill}()},RSwQ:function(t,e,n){n("V+0c")&&"g"!=/./g.flags&&n("tose").f(RegExp.prototype,"flags",{configurable:!0,get:n("8H1R")})},RT4T:function(t,e,n){var r=n("Wy9r");t.exports=function(t){return Object(r(t))}},RXfV:function(t,e,n){var r=n("CDXM"),i=Math.imul;r(r.S+r.F*n("umMR")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},RdI5:function(t,e,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(t){return a.errorObject.e=t,a.errorObject}}function i(t){return o=t,r}var o,a=n("XRvs");e.tryCatch=i},RfZa:function(t,e,n){var r=n("CDXM");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},Rjcp:function(t,e,n){n("K1rc"),n("4D9a"),n("RSwQ"),n("dVlF"),n("CjAR"),n("Zy8t"),n("nFOG"),t.exports=n("b4gG").RegExp},"Rl2/":function(t,e,n){"use strict";var r=n("PeZi")(!0);n("WsSm")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},SJ56:function(t,e,n){"use strict";function r(){return this.lift(new a)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.dematerialize=r;var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(o.Subscriber)},SkRu:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},SxDa:function(t,e,n){var r=n("CDXM");r(r.P,"Array",{fill:n("atYZ")}),n("YymB")("fill")},"T+CM":function(t,e,n){"use strict";n("kFjN")("trim",function(t){return function(){return t(this,3)}})},T0iK:function(t,e,n){var r=n("ptrv").parseFloat,i=n("kFjN").trim;t.exports=1/r(n("9BUF")+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},"T14+":function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("fclq"),o=n("xFbG"),a=n("LiYJ"),s=n("dkwD"),u=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=n,this},e}(o.Subscription);e.Subscriber=u;var c=function(t){function e(e,n,r,o){t.call(this),this._parentSubscriber=e;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},T7WM:function(t,e){t.exports={state:{time:{step:1,delayThresholdX2:0,delayThresholdX4:0,immediatePlay:!0,delay:200,dim:"year"},entities:{dim:"geo",show:{geo:{$in:["world"]}}},entities_geodomain:{dim:"geo",show:{geo:{$in:["world"]}},skipFilter:!0},entities_colorlegend:{dim:"geo"},entities_age:{dim:"age",show:{age:{$nin:["80plus","100plus"]}},grouping:1},entities_side:{show:{},dim:null,skipFilter:!0},marker:{space:["entities","time","entities_side","entities_age","entities_geodomain"],label_stack:{use:"property",spaceRef:"entities",which:"name"},label_side:{use:"property",spaceRef:"entities_side",which:"name"},axis_y:{use:"property",which:"age",spaceRef:"entities_age",domainMax:100,domainMin:0,_important:!1},axis_x:{use:"indicator",which:"population"},color:{use:"property",which:"world_4region",scaleType:"ordinal",spaceRef:"entities",allow:{scales:["ordinal"]},palette:{world:"#ffb600"},syncModels:["marker_colorlegend"]},side:{use:"constant",which:"_default",spaceRef:"entities_side",allow:{scales:["ordinal"]}}},entities_allpossible:{dim:"geo",show:{$or:[{"is--country":!0},{"is--global":!0},{"is--world_4region":!0}]}},marker_allpossible:{space:["entities_allpossible"],label:{use:"property",which:"name"},color:{use:"property",which:"world_4region"}},entities_allpossibleside:{show:{},dim:null,skipFilter:!1},marker_allpossibleside:{space:["entities_allpossibleside"],label:{use:"property",which:"name"}},marker_colorlegend:{space:["entities_colorlegend"],label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},entities_tags:{},marker_tags:{space:["entities_tags"],label:{},hook_parent:{}}},ui:{splash:!0}}},TA58:function(t,e,n){"use strict";function r(t){var e=t[l.iterator];if(!e&&"string"==typeof t)return new f(t);if(!e&&void 0!==t.length)return new d(t);if(!e)throw new TypeError("object is not iterable");return t[l.iterator]()}function i(t){var e=+t.length;return isNaN(e)?0:0!==e&&o(e)?(e=a(e)*Math.floor(Math.abs(e)),e<=0?0:e>p?p:e):e}function o(t){return"number"==typeof t&&u.root.isFinite(t)}function a(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n("zijX"),c=n("bKpL"),l=n("2B7B"),h=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=r(e)}return s(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,r=t.iterator,i=t.subscriber;if(n)return void i.error(t.error);var o=r.next();return o.done?void i.complete():(i.next(o.value),t.index=e+1,i.closed?void("function"==typeof r.return&&r.return()):void this.schedule(t))},e.prototype._subscribe=function(t){var n=this,r=n.iterator,i=n.scheduler;if(i)return i.schedule(e.dispatch,0,{index:0,iterator:r,subscriber:t});for(;;){var o=r.next();if(o.done){t.complete();break}if(t.next(o.value),t.closed){"function"==typeof r.return&&r.return();break}}},e}(c.Observable);e.IteratorObservable=h;var f=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[l.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),d=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=i(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[l.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),p=Math.pow(2,53)-1},THYR:function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.every=r;var a=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg,this.source))},t}(),s=function(t){function e(e,n,r,i){t.call(this,e),this.predicate=n,this.thisArg=r,this.source=i,this.index=0,this.thisArg=r||this}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},TIdC:function(t,e,n){"use strict";function r(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("yW9Z"),a=n("ktfo");e.mergeAll=r;var s=function(){function t(t){this.concurrent=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.concurrent))},t}();e.MergeAllOperator=s;var u=function(t){function e(e,n){t.call(this,e),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,t))):this.buffer.push(t)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeAllSubscriber=u},TJLg:function(t,e,n){var r=n("rMsi"),i=n("RT4T"),o=n("yIWP")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},TM12:function(t,e,n){var r=n("JXkd"),i=n("VceJ"),o=n("3r0D")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},TQn8:function(t,e,n){"use strict";function r(t,e){return this.lift(new i.MergeMapOperator(t,e,1))}var i=n("cPhF");e.concatMap=r},TjnC:function(t,e,n){var r=n("tose").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n("V+0c")&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"Tl+Y":function(t,e,n){"use strict";function r(t){return!!t.propDecorators}function i(t){var e=t.propDecorators;return Object.keys(e).reduce(function(t,n){return t.concat(o(e[n],n))},[])}function o(t,e){return t.filter(function(t){return t.type===u}).map(function(t){var n=!0;return t.args&&t.args.length&&(n=!!t.args[0].dispatch),{propertyName:e,dispatch:n}})}function a(t){return r(t.constructor)?i(t.constructor):I.hasOwnMetadata(D,t)?I.getOwnMetadata(D,t):[]}function s(t,e){I.defineMetadata(D,e,t)}function u(t){var e=(void 0===t?{dispatch:!0}:t).dispatch;return function(t,n){var r=a(t),i={propertyName:n,dispatch:e};s(t,r.concat([i]))}}function c(t){return Object.getPrototypeOf(t)}function l(t){var e=c(t);return R in e&&"function"==typeof e[R]}function h(t){var e=c(t).constructor.name,n=j(t).map(function(n){var r=n.propertyName,i=n.dispatch,o="function"==typeof t[r]?t[r]():t[r];if(!1===i)return x.ignoreElements.call(o);var a=w.materialize.call(o);return M.map.call(a,function(n){return{effect:t[r],notification:n,propertyName:r,sourceName:e,sourceInstance:t}})});return _.merge.apply(void 0,n)}function f(t){var e=h(t);return l(t)?t.ngrxOnRunEffects(e):e}function d(t,e){p(t,e),v(t,e)}function p(t,e){if("E"===t.notification.kind){var n="Effect "+m(t)+" threw an error";e.report(n,{Source:t.sourceInstance,Effect:t.effect,Error:t.notification.error,Notification:t.notification})}}function v(t,e){if("N"===t.notification.kind){var n=t.notification.value;if(!g(n)){var r="Effect "+m(t)+" dispatched an invalid action";e.report(r,{Source:t.sourceInstance,Effect:t.effect,Dispatched:n,Notification:t.notification})}}}function g(t){return t&&t.type&&"string"==typeof t.type}function m(t){var e=t.propertyName,n=t.sourceInstance;return'"'+t.sourceName+"."+e+("function"==typeof n[e]?"()":"")+'"'}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}n.d(e,"b",function(){return u}),n.d(e,"a",function(){return L}),n.d(e,"d",function(){return Y}),n.d(e,"c",function(){return q}),n.d(e,"e",function(){return y}),n.d(e,"h",function(){return U}),n.d(e,"j",function(){return V}),n.d(e,"i",function(){return H}),n.d(e,"g",function(){return B}),n.d(e,"f",function(){return N});var b=n("ADVA"),_=n("LEug"),x=(n.n(_),n("ZQVD")),w=(n.n(x),n("/9bB")),M=(n.n(w),n("lx+J")),S=(n.n(M),n("/oeL")),k=n("bKpL"),E=(n.n(k),n("422b")),O=(n.n(E),n("jyAw")),T=(n.n(O),n("cPhF")),C=(n.n(T),n("9tb5")),z=(n.n(C),n("SJ56")),P=(n.n(z),n("rlar")),A=(n.n(P),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),D="@ngrx/effects",I=Reflect,j=Object(b.v)(a,c),R="ngrxOnRunEffects",L=function(t){function e(e){var n=t.call(this)||this;return e&&(n.source=e),n}return A(e,t),e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.ofType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E.filter.call(this,function(e){return t.some(function(t){return t===e.type})})},e}(k.Observable);L.decorators=[{type:S.u}],L.ctorParameters=function(){return[{type:k.Observable,decorators:[{type:S.t,args:[b.i]}]}]};var N=(new S.v("ngrx/effects: Immediate Effects"),new S.v("ngrx/effects: Root Effects")),F=new S.v("ngrx/effects: Feature Effects"),B=new S.v("Browser Console"),H=function(){function t(t){this.console=t}return t.prototype.report=function(t,e){this.console.group(t);for(var n in e)this.console.error(n+":",e[n]);this.console.groupEnd()},t}();H.decorators=[{type:S.u}],H.ctorParameters=function(){return[{type:void 0,decorators:[{type:S.t,args:[B]}]}]};var q=function(t){function e(e){var n=t.call(this)||this;return n.errorReporter=e,n}return A(e,t),e.prototype.addEffects=function(t){this.next(t)},e.prototype.toActions=function(){var t=this;return T.mergeMap.call(O.groupBy.call(this,c),function(e){return z.dematerialize.call(M.map.call(C.exhaustMap.call(e,f),function(e){return d(e,t.errorReporter),e.notification}))})},e}(P.Subject);q.decorators=[{type:S.u}],q.ctorParameters=function(){return[{type:H}]};var V=function(){function t(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}return t.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},t.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},t}();V.decorators=[{type:S.u}],V.ctorParameters=function(){return[{type:q},{type:b.l}]};var U=function(){function t(t,e,n,r){this.sources=t,e.start(),n.forEach(function(e){return t.addEffects(e)})}return t.prototype.addEffects=function(t){this.sources.addEffects(t)},t}();U.decorators=[{type:S.B,args:[{}]}],U.ctorParameters=function(){return[{type:q},{type:V},{type:Array,decorators:[{type:S.t,args:[N]}]},{type:b.m,decorators:[{type:S.I}]}]};var W=function(){function t(t,e,n){this.root=t,e.forEach(function(e){return e.forEach(function(e){return t.addEffects(e)})})}return t}();W.decorators=[{type:S.B,args:[{}]}],W.ctorParameters=function(){return[{type:U},{type:Array,decorators:[{type:S.t,args:[F]}]},{type:b.m,decorators:[{type:S.I}]}]};var Y=function(){function t(){}return t.forFeature=function(t){return{ngModule:W,providers:[t,{provide:F,multi:!0,deps:t,useFactory:y}]}},t.forRoot=function(t){return{ngModule:U,providers:[V,q,H,L,t,{provide:N,deps:t,useFactory:y},{provide:B,useValue:console}]}},t}();Y.decorators=[{type:S.B,args:[{}]}],Y.ctorParameters=function(){return[]}},TmDx:function(t,e,n){var r=n("3r0D")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},TpsG:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.EmptyError=i},Tq0x:function(t,e,n){"use strict";function r(t,e){var n=!1;return arguments.length>=2&&(n=!0),this.lift(new a(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.reduce=r;var a=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},t}();e.ReduceOperator=a;var s=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this.hasSeed=i,this.index=0,this.hasValue=!1,this.acc=r,this.hasSeed||this.index++}return i(e,t),e.prototype._next=function(t){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(t):(this.acc=t,this.hasValue=!0)},e.prototype._tryReduce=function(t){var e;try{e=this.accumulator(this.acc,t,this.index++)}catch(t){return void this.destination.error(t)}this.acc=e},e.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},e}(o.Subscriber);e.ReduceSubscriber=s},UKZQ:function(t,e,n){var r=n("a7b8");t.exports=function(t,e){return new(r(t))(e)}},ULWX:function(t,e,n){var r=n("+pQw");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},UPqz:function(t,e){t.exports={state:{entities:{dim:"geo",show:{"is--country":!0}},entities_colorlegend:{dim:"world_4region"},entities_tags:{dim:"tag"},time:{startOrigin:"1800",endOrigin:"2015",value:"2015",dim:"time"},marker:{space:["entities","time"],label:{use:"property",which:"name"},axis_y:{use:"indicator",which:"life_expectancy_years",zoomedMin:19,zoomedMax:86,domainMin:0,domainMax:100},axis_x:{use:"indicator",scaleType:"log",domainMax:18e4,domainMin:300,zoomedMax:15e4,zoomedMin:400,which:"income_per_person_gdppercapita_ppp_inflation_adjusted"},size:{use:"indicator",which:"population_total",domainMin:15,domainMax:14e8,scaleType:"linear",allow:{scales:["linear"]}},color:{use:"property",which:"world_4region",scaleType:"ordinal",syncModels:["marker_colorlegend"]}},marker_colorlegend:{space:["entities_colorlegend"],opacityRegular:.8,opacityHighlightDim:.3,label:{use:"property",which:"name"},hook_rank:{use:"property",which:"rank"},hook_geoshape:{use:"property",which:"shape_lores_svg"}},marker_tags:{space:["entities_tags"],label:{use:"property",which:"name"},hook_parent:{use:"property",which:"parent"}}},ui:{datawarning:{doubtDomain:[1800,1950,2015],doubtRange:[1,.3,.2]},splash:!0}}},UdES:function(t,e,n){var r=n("CDXM");r(r.S,"Array",{isArray:n("rKhO")})},UlVq:function(t,e,n){var r=n("3r0D")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},Ula3:function(t,e,n){var r=n("JXkd"),i=n("5oDA").set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},Umeq:function(t,e,n){n("KpXt")("Array")},"V+0c":function(t,e,n){t.exports=!n("umMR")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"V/jj":function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},V2Dj:function(t,e,n){var r=n("CDXM"),i=n("+pQw"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},VceJ:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},ViUi:function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return this.lift.call(i.apply(void 0,[this].concat(t)))}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return u.isScheduler(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof o.Observable?t[0]:new a.ArrayObservable(t,r).lift(new s.MergeAllOperator(n))}var o=n("bKpL"),a=n("wZOE"),s=n("TIdC"),u=n("MicL");e.merge=r,e.mergeStatic=i},Vooo:function(t,e){!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(2);var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={version:"1.0.16",build:1507740295509},a=Vizabi.Tool.extend("BubbleMap",{init:function(t,e){this.name="bubblemap",this.components=[{component:i.default,placeholder:".vzb-tool-viz",model:["state.time","state.entities","state.marker","locale","ui","data"]},{component:Vizabi.Component.get("timeslider"),placeholder:".vzb-tool-timeslider",model:["state.time","state.entities","state.marker","ui"]},{component:Vizabi.Component.get("dialogs"),placeholder:".vzb-tool-dialogs",model:["state","ui","locale"]},{component:Vizabi.Component.get("buttonlist"),placeholder:".vzb-tool-buttonlist",model:["state","ui","locale"]},{component:Vizabi.Component.get("treemenu"),placeholder:".vzb-tool-treemenu",model:["state.marker","state.marker_tags","state.time","locale"]},{component:Vizabi.Component.get("datawarning"),placeholder:".vzb-tool-datawarning",model:["locale"]},{component:Vizabi.Component.get("datanotes"),placeholder:".vzb-tool-datanotes",model:["state.marker","locale"]},{component:Vizabi.Component.get("steppedspeedslider"),placeholder:".vzb-tool-stepped-speed-slider",model:["state.time","locale"]}],this._super(t,e)},default_model:{state:{time:{delay:100,delayThresholdX2:50,delayThresholdX4:25},entities:{opacitySelectDim:.3,opacityRegular:1}},locale:{},ui:{map:{path:null,colorGeo:!1,preserveAspectRatio:!0,scale:.95,offset:{top:0,right:0,bottom:0,left:0},projection:"robinson",topology:{path:null,objects:{geo:"land",boundaries:"countries"},geoIdProperty:null}},chart:{superhighlightOnMinimapHover:!0,labels:{dragging:!0}},datawarning:{doubtDomain:[],doubtRange:[]},buttons:["colors","find","size","moreoptions","fullscreen","presentation"],dialogs:{popup:["colors","find","size","moreoptions"],sidebar:["colors","find","size"],moreoptions:["opacity","speed","size","colors","presentation","about"]},presentation:!1}},versionInfo:o});e.default=a},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=Vizabi,o=(i._globals,i.utils),a=i.Component,s=i.helpers,u=s.labels,c=s.topojson,l=s["d3.geoProjection"],h=s["d3.dynamicBackground"],f=i.iconset,d=f.warn,p=f.question,v=a.extend("bubblemap",{init:function(t,e){var r=this;this.name="bubblemap",this.template=n(3),this.bubblesDrawing=null,this.isMobile=o.isMobileOrTablet(),this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"locale",type:"locale"},{name:"ui",type:"ui"},{name:"data",type:"data"}];var i=this;this.model_binds={"change:time.value":function(t){i._readyOnce&&i.model.marker.getFrame(i.model.time.value,i.frameChanged.bind(i))},"change:marker.highlight":function(t){i._readyOnce&&(i.highlightMarkers(),i.updateOpacity())},"change:marker":function(t,e){i._readyOnce&&e.indexOf("scaleType")>-1&&i.ready()},"change:marker.size.extent":function(t,e){i._readyOnce&&i.entityBubbles&&(i.updateMarkerSizeLimits(),i.redrawDataPoints(null,!1))},"change:marker.color.palette":function(t,e){i._readyOnce&&i.redrawDataPoints(null,!1)},"change:marker.select":function(t){i._readyOnce&&(i.selectMarkers(),i.redrawDataPoints(null,!1),i.updateOpacity(),i.updateDoubtOpacity())},"change:marker.opacitySelectDim":function(t){i.updateOpacity()},"change:marker.opacityRegular":function(t){i.updateOpacity()},"change:marker.superHighlight":function(){return r._readyOnce&&r._blinkSuperHighlighted()}},this._super(t,e),this.sScale=null,this.cScale=d3.scaleOrdinal(d3.schemeCategory10),i.COLOR_WHITEISH="#fdfdfd",l(),this._labels=new u(this),this._labels.config({CSS_PREFIX:"vzb-bmc",LABELS_CONTAINER_CLASS:"vzb-bmc-labels",LINES_CONTAINER_CLASS:"vzb-bmc-lines",SUPPRESS_HIGHLIGHT_DURING_PLAY:!1})},readyOnce:function(){this.element=d3.select(this.element),this.graph=this.element.select(".vzb-bmc-graph"),this.mapSvg=this.element.select(".vzb-bmc-map-background"),this.bubbleContainerCrop=this.graph.select(".vzb-bmc-bubbles-crop"),this.bubbleContainer=this.graph.select(".vzb-bmc-bubbles"),this.labelListContainer=this.graph.select(".vzb-bmc-bubble-labels"),this.dataWarningEl=this.graph.select(".vzb-data-warning"),this.yTitleEl=this.graph.select(".vzb-bmc-axis-y-title"),this.cTitleEl=this.graph.select(".vzb-bmc-axis-c-title"),this.yInfoEl=this.graph.select(".vzb-bmc-axis-y-info"),this.cInfoEl=this.graph.select(".vzb-bmc-axis-c-info"),this.entityBubbles=null,this.yearEl=this.graph.select(".vzb-bmc-year"),this.year=new h(this.yearEl),this.year.setConditions({xAlign:"left",yAlign:"bottom"});var t=this;this.on("resize",function(){t.updateSize()||(t.updateMarkerSizeLimits(),t._labels.updateSize(),t.redrawDataPoints())}),this.initMap(),this.KEY=this.model.entities.getDimension(),this.TIMEDIM=this.model.time.getDimension(),this.updateUIStrings(),this.wScale=d3.scaleLinear().domain(this.model.ui.datawarning.doubtDomain).range(this.model.ui.datawarning.doubtRange),this._labels.readyOnce()},ready:function(){var t=this;this.updateUIStrings(),this.updateIndicators(),this.updateSize(),this.updateMarkerSizeLimits(),this.model.marker.getFrame(this.model.time.value,function(e,n){if(n.toString()!=t.model.time.value.toString())return void o.defer(function(){t.ready()});e&&(t.values=e,t.updateEntities(),t.updateTime(),t._labels.ready(),t.redrawDataPoints(),t.highlightMarkers(),t.selectMarkers(),t.updateDoubtOpacity(),t.updateOpacity())})},frameChanged:function(t,e){e.toString()==this.model.time.value.toString()&&t&&(this.values=t,this.updateTime(),this.updateDoubtOpacity(),this.redrawDataPoints(null,!1))},updateUIStrings:function(){var t=this;this.translator=this.model.locale.getTFunction();var e=t.model.marker.size.getConceptprops(),n=t.model.marker.color.getConceptprops();this.strings={title:{S:e.name,C:n.name}},this.yTitleEl.select("text").text(this.translator("buttons/size")+": "+this.strings.title.S).on("click",function(){t.parent.findChildByName("gapminder-treemenu").markerID("size").alignX(t.model.locale.isRTL()?"right":"left").alignY("top").updateView().toggle()}),this.cTitleEl.select("text").text(this.translator("buttons/color")+": "+this.strings.title.C).on("click",function(){t.parent.findChildByName("gapminder-treemenu").markerID("color").alignX(t.model.locale.isRTL()?"right":"left").alignY("top").updateView().toggle()}),o.setIcon(this.dataWarningEl,d).select("svg").attr("width","0px").attr("height","0px"),this.dataWarningEl.append("text").attr("text-anchor","end").text(this.translator("hints/dataWarning")),this.dataWarningEl.on("click",function(){t.parent.findChildByName("gapminder-datawarning").toggle()}).on("mouseover",function(){t.updateDoubtOpacity(1)}).on("mouseout",function(){t.updateDoubtOpacity()}),this.yInfoEl.html(p).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(e.description||e.sourceLink))),this.yInfoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.yInfoEl.on("mouseover",function(){var e=this.getBBox(),n=o.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("size").show().setPos(n.x+i.left-r.left,n.y)}),this.yInfoEl.on("mouseout",function(){t.parent.findChildByName("gapminder-datanotes").hide()}),this.cInfoEl.html(p).select("svg").attr("width","0px").attr("height","0px").style("opacity",Number(Boolean(n.description||n.sourceLink))),this.cInfoEl.on("click",function(){t.parent.findChildByName("gapminder-datanotes").pin()}),this.cInfoEl.on("mouseover",function(){var e=this.getBBox(),n=o.makeAbsoluteContext(this,this.farthestViewportElement)(e.x-10,e.y+e.height+10),r=t.root.element.getBoundingClientRect(),i=t.element.node().getBoundingClientRect();t.parent.findChildByName("gapminder-datanotes").setHook("color").show().setPos(n.x+i.left-r.left,n.y)}),this.cInfoEl.on("mouseout",function(){t.parent.findChildByName("gapminder-datanotes").hide()})},updateTitleNumbers:function(){var t=this,e=void 0;if(t.isMobile&&t.model.marker.select&&1===t.model.marker.select.length&&(e=t.model.marker.select[0]),t.hovered||e){var n=t.model.marker.size.getConceptprops(),r=t.model.marker.color.getConceptprops(),i=t.hovered||e,o=t.model.marker.size.getTickFormatter(),a=t.model.marker.color.getTickFormatter(),s=n.unit||"",u=r.unit||"",c=t.values.size[i[t.KEY]],l=t.values.color[i[t.KEY]];t.model.marker.color.isDiscrete()&&l&&(l=this.model.marker.color.getColorlegendMarker().label.getItems()[l]||""),t.yTitleEl.select("text").text(t.translator("buttons/size")+": "+o(c)+" "+s),t.cTitleEl.select("text").text(t.translator("buttons/color")+": "+(l||0===l?a(l)+" "+u:t.translator("hints/nodata"))),this.yInfoEl.classed("vzb-hidden",!0),this.cInfoEl.classed("vzb-hidden",!0)}else this.yTitleEl.select("text").text(this.translator("buttons/size")+": "+this.strings.title.S),this.cTitleEl.select("text").text(this.translator("buttons/color")+": "+this.strings.title.C),this.yInfoEl.classed("vzb-hidden",!1),this.cInfoEl.classed("vzb-hidden",this.cTitleEl.classed("vzb-hidden"))},updateDoubtOpacity:function(t){null==t&&(t=this.wScale(+this.time.getUTCFullYear().toString())),this.someSelected&&(t=1),this.dataWarningEl.style("opacity",t)},updateOpacity:function(){var t=this,e=this.model.marker.opacityRegular,n=this.model.marker.opacitySelectDim;this.entityBubbles.style("opacity",function(r){return t.someHighlighted&&t.model.marker.isHighlighted(r)?1:t.someSelected?t.model.marker.isSelected(r)?1:n:t.someHighlighted?.3:e}),this.entityBubbles.classed("vzb-selected",function(e){return t.model.marker.isSelected(e)});var r=t.model.marker.opacitySelectDim<.01;r!==this.nonSelectedOpacityZero&&this.entityBubbles.style("pointer-events",function(e){return t.someSelected&&r&&!t.model.marker.isSelected(e)?"none":"visible"}),this.nonSelectedOpacityZero=t.model.marker.opacitySelectDim<.01},updateIndicators:function(){this.sScale=this.model.marker.size.getScale(),this.cScale=this.model.marker.color.getScale()},updateEntities:function(){var t=this,e=this.KEY,n=this.TIMEDIM,r=function(r){return r=r||"",t.model.marker.getKeys().map(function(o){var a={};return a[e]=o[e],a[n]=i,a.sortValue=t.values.size[o[e]]||0,a[e]=r+o[e],a}).sort(function(t,e){return e.sortValue-t.sortValue})},i=this.model.time.end;this.model.marker.setVisible(r.call(this)),this.model.time.splash||this.unselectBubblesWithNoData(),this.entityBubbles=this.bubbleContainer.selectAll(".vzb-bmc-bubble").data(this.model.marker.getVisible(),function(t){return t[e]}).order(),this.entityBubbles.exit().remove(),this.entityBubbles=this.entityBubbles.enter().append("circle").attr("class","vzb-bmc-bubble").on("mouseover",function(e,n){o.isTouchDevice()||t._interact()._mouseover(e,n)}).on("mouseout",function(e,n){o.isTouchDevice()||t._interact()._mouseout(e,n)}).on("click",function(e,n){o.isTouchDevice()||(t._interact()._click(e,n),t.highlightMarkers())}).onTap(function(e,n){t._interact()._click(e,n),d3.event.stopPropagation()}).onLongTap(function(t,e){}).merge(this.entityBubbles)},unselectBubblesWithNoData:function(t){var e=this,n=this.KEY;t||(t=this.values),t&&t.size&&this.model.marker.select.forEach(function(r){t.size[r[n]]||0===t.size[r[n]]||e.model.marker.selectMarker(r)})},redrawDataPoints:function(t,e){var n=this;if(t||(t=this.duration),e||(e=!0),!this.entityBubbles)return o.warn("redrawDataPoints(): no entityBubbles defined. likely a premature call, fix it!");this.entityBubbles.each(function(r,i){var a=d3.select(this),s=d3.select("#"+r[n.KEY]),u=n.values.hook_lng[r[n.KEY]],c=n.values.hook_lat[r[n.KEY]],l=n.values.size[r[n.KEY]],h=n.values.color[r[n.KEY]],f=n.values.label[r[n.KEY]];r.hidden_1=r.hidden,r.hidden=!l&&0!==l||null==u||null==c,r.hidden!==r.hidden_1&&(t?a.transition().duration(t).ease(d3.easeLinear).style("opacity",0).on("end",function(){return a.classed("vzb-hidden",r.hidden).style("opacity",n.model.marker.opacityRegular)}):a.classed("vzb-hidden",r.hidden)),r.hidden?n._updateLabel(r,i,0,0,l,h,f,t):(r.r=o.areaToRadius(n.sScale(l||0)),r.label=f,a.classed("vzb-hidden",!1).attr("fill",null!=h?n.cScale(h):n.COLOR_WHITEISH),n.model.ui.map.colorGeo&&s.style("fill",null!=h?n.cScale(h):"#999"),e&&(r.cLoc=n.skew(n.projection([u||0,c||0])),a.attr("cx",r.cLoc[0]).attr("cy",r.cLoc[1])),t?a.transition().duration(t).ease(d3.easeLinear).attr("r",r.r):a.interrupt().attr("r",r.r).transition(),n._updateLabel(r,i,r.cLoc[0],r.cLoc[1],l,h,r.label,t))})},updateTime:function(){this.time_1=null==this.time?this.model.time.value:this.time,this.time=this.model.time.value,this.duration=this.model.time.playing&&this.time-this.time_1>0?this.model.time.delayAnimations:0,this.year.setText(this.model.time.formatDate(this.time),this.duration),this.updateTitleNumbers()},fitSizeOfTitles:function(){var t=this.yTitleEl.select("text");t.style("font-size",null);var e=this.cTitleEl.select("text");e.style("font-size",null);var n=t.node().getBBox(),r=this.cTitleEl.classed("vzb-hidden")?n:e.node().getBBox(),i=Math.max(parseInt(t.style("font-size")),parseInt(e.style("font-size")))*this.width/Math.max(n.width,r.width);Math.max(n.width,r.width)>this.width?(t.style("font-size",i+"px"),e.style("font-size",i+"px")):(t.style("font-size",null),e.style("font-size",null))},initMap:function(){var t=this;this.topology||o.warn("bubble map afterPreload: missing country shapes "+this.topology),this.projection=d3["geo"+o.capitalize(this.model.ui.map.projection)](),this.mapPath=d3.geoPath().projection(this.projection),this.mapGraph=this.element.select(".vzb-bmc-map-graph"),this.mapGraph.html(""),this.mapFeature=c.feature(this.topology,this.topology.objects[this.model.ui.map.topology.objects.geo]);var e=c.mesh(this.topology,this.topology.objects[this.model.ui.map.topology.objects.boundaries],function(t,e){return t!==e});this.projection.scale(1).translate([0,0]),this.mapBounds=this.mapPath.bounds(this.mapFeature),this.mapFeature.features?this.mapGraph.selectAll(".land").data(this.mapFeature.features).enter().insert("path").attr("d",this.mapPath).attr("id",function(e){return e.properties[t.model.ui.map.topology.geoIdProperty].toLowerCase()}).attr("class","land"):this.mapGraph.insert("path").datum(this.mapFeature).attr("class","land"),this.mapGraph.insert("path").datum(e).attr("class","boundary")},profiles:{small:{margin:{top:10,right:10,left:10,bottom:0},infoElHeight:16,minRadiusPx:.5,maxRadiusEm:.05},medium:{margin:{top:20,right:20,left:20,bottom:30},infoElHeight:20,minRadiusPx:1,maxRadiusEm:.05},large:{margin:{top:30,right:30,left:30,bottom:35},infoElHeight:22,minRadiusPx:1,maxRadiusEm:.05}},presentationProfileChanges:{medium:{infoElHeight:26},large:{infoElHeight:32}},updateSize:function(){this.activeProfile=this.getActiveProfile(this.profiles,this.presentationProfileChanges);var t=this.root.getVizWidthHeight();this.activeProfile.maxRadiusPx=Math.max(this.activeProfile.minRadiusPx,this.activeProfile.maxRadiusEm*o.hypotenuse(t.width,t.height));var e=this.activeProfile.margin;this.height=parseInt(this.element.style("height"),10)-e.top-e.bottom||0,this.width=parseInt(this.element.style("width"),10)-e.left-e.right||0,(this.height<=0||this.width<=0)&&(this.height=0,this.width=0,o.warn("Bubble map chart updateSize(): vizabi container is too little or has display:none")),this.repositionElements(),this.rescaleMap()},repositionElements:function(){var t=this.activeProfile.margin,e=this.activeProfile.infoElHeight,n=this.model.locale.isRTL();this.graph.attr("transform","translate("+t.left+","+t.top+")"),this.year.setConditions({widthRatio:.2}),this.year.resize(this.width,this.height),this.yTitleEl.style("font-size",e).attr("transform","translate("+(n?this.width:0)+","+t.top+")");var r=this.yTitleEl.select("text").node().getBBox();this.cTitleEl.attr("transform","translate("+(n?this.width:0)+","+(t.top+r.height)+")").classed("vzb-hidden","large"===this.getLayoutProfile()||"constant"==this.model.marker.color.use);var i=this.dataWarningEl.select("text").node().getBBox();if(this.dataWarningEl.select("svg").attr("width",.75*i.height).attr("height",.75*i.height).attr("x",-i.width-1.2*i.height).attr("y",.65*-i.height),this.dataWarningEl.attr("transform","translate("+this.width+","+(this.height-.5*i.height)+")").select("text"),this.yInfoEl.select("svg").node()){var a=this.yTitleEl.node().getBBox(),s=o.transform(this.yTitleEl.node()),u=n?a.x+s.translateX-1.4*e:a.x+s.translateX+a.width+.4*e;this.yInfoEl.select("svg").attr("width",e).attr("height",e),this.yInfoEl.attr("transform","translate("+u+","+(s.translateY-.8*e)+")")}if(this.cInfoEl.classed("vzb-hidden",this.cTitleEl.classed("vzb-hidden")),!this.cInfoEl.classed("vzb-hidden")&&this.cInfoEl.select("svg").node()){var c=this.cTitleEl.node().getBBox(),l=o.transform(this.cTitleEl.node()),h=n?c.x+l.translateX-1.4*e:c.x+l.translateX+c.width+.4*e;this.cInfoEl.select("svg").attr("width",e).attr("height",e),this.cInfoEl.attr("transform","translate("+h+","+(l.translateY-.8*e)+")")}},rescaleMap:function(){var t=this.model.ui.map.offset,e=this.activeProfile.margin,n=this.model.ui.map.scale/Math.max((this.mapBounds[1][0]-this.mapBounds[0][0])/this.width,(this.mapBounds[1][1]-this.mapBounds[0][1])/this.height),r=n*(this.mapBounds[1][0]-this.mapBounds[0][0]),i=n*(this.mapBounds[1][1]-this.mapBounds[0][1]),o=i*(1+t.top+t.bottom),a=r*(1+t.left+t.right),s=i*t.top,u=r*t.left,c=[(r-n*(this.mapBounds[1][0]+this.mapBounds[0][0]))/2,(i-n*(this.mapBounds[1][1]+this.mapBounds[0][1]))/2];this.projection.scale(n).translate(c),this.mapGraph.selectAll("path").attr("d",this.mapPath);var l=void 0,h=void 0;if(this.model.ui.map.preserveAspectRatio)l=1,h=1;else{var f=o,d=a;o=this.height*this.model.ui.map.scale,a=this.width*this.model.ui.map.scale,this.mapSvg.attr("preserveAspectRatio","none").attr("viewBox",[0,0,d,f].join(" ")),l=a/(r||1)/(1+t.left+t.right),h=o/(i||1)/(1+t.top+t.bottom)}this.mapGraph.attr("transform","translate("+u+","+s+")"),this.mapSvg.style("transform","translate3d("+(e.left+(this.width-a)/2)+"px,"+(e.top+(this.height-o)/2)+"px,0)").attr("width",a).attr("height",o);var p=this;this.skew=function(){var t=p.width,e=p.height;return function(n){return[n[0]*l+(t-a)/2+u*l,n[1]*h+(e-o)/2+s*h]}}()},updateMarkerSizeLimits:function(){var t=this.model.marker.size.extent||[0,1];if(!this.activeProfile)return o.warn("updateMarkerSizeLimits() is called before ready(). This can happen if events get unfrozen and getFrame() still didn't return data");var e=this.activeProfile.minRadiusPx,n=this.activeProfile.maxRadiusPx,r=o.radiusToArea(Math.max(n*t[0],e)),i=o.radiusToArea(Math.max(n*t[1],e)),a=r===i?[r,i]:d3.range(r,i,(i-r)/this.sScale.domain().length).concat(i);this.sScale.range(a)},_interact:function(){var t=this;return{_mouseover:function(e,n){t.model.time.dragging||(t.model.marker.highlightMarker(e),t.hovered=e,t.updateTitleNumbers(),t.fitSizeOfTitles(),t.model.marker.isSelected(e)?t._setTooltip():t._setTooltip(e))},_mouseout:function(e,n){t.model.time.dragging||(t._setTooltip(),t.hovered=null,t.updateTitleNumbers(),t.fitSizeOfTitles(),t.model.marker.clearHighlighted())},_click:function(e,n){t.model.marker.selectMarker(e)}}},_blinkSuperHighlighted:function(){var t=this;this.entityBubbles.classed("vzb-super-highlighted",function(e){return t.model.marker.isSuperHighlighted(e)})},highlightMarkers:function(){var t=this;this.someHighlighted=this.model.marker.highlight.length>0,o.isTouchDevice()&&(this.someHighlighted?t.hovered=this.model.marker.highlight[0]:t.hovered=null,t.updateTitleNumbers(),t.fitSizeOfTitles())},_updateLabel:function(t,e,n,r,i,a,s,u){var c=this;if(t[this.KEY]!=c.druging&&(null==u&&(u=c.duration),c.model.marker.isSelected(t))){var l=t.hidden!==t.hidden_1,h={};h.labelX0=n/this.width,h.labelY0=r/this.height,h.scaledS0=i?o.areaToRadius(c.sScale(i)):null,h.scaledC0=null!=a?c.cScale(a):c.COLOR_WHITEISH,this._labels.updateLabel(t,e,h,n/this.width,r/this.height,i,a,s,null,u,l)}},selectMarkers:function(){var t=this;this.KEY,this.someSelected=this.model.marker.select.length>0,o.isTouchDevice()?(t._labels.showCloseCross(null,!1),t.someHighlighted?t.model.marker.clearHighlighted():(t.updateTitleNumbers(),t.fitSizeOfTitles())):t.hovered&&!t.model.marker.isSelected(t.hovered)||t._setTooltip(),this.nonSelectedOpacityZero=!1},_setTooltip:function(t){if(t){var e=this.KEY,n=this.values,r={},i={},o=d3.mouse(this.graph.node()).map(function(t){return parseInt(t)}),a=t.cLoc[0]||o[0],s=t.cLoc[1]||o[1],u=t.r||0;r.valueS=n.size[t[e]],r.labelText=r.valueL=n.label[t[e]],i.labelX0=r.valueX=a/this.width,i.labelY0=r.valueY=s/this.height,i.scaledS0=u,i.scaledC0=null,this._labels.setTooltip(t,r.labelText,i,r)}else this._labels.setTooltip()},preload:function(){var t=this,e=this,n=function(t,n){e.model.data.getAsset(t,function(t){e.topology=t,n()})},i=o.getProp(this,["model","ui","map","topology","path"]),a=o.getProp(this,["model","ui","map","topology","which"]),s=o.getProp(this,["model","ui","map","topology","key"]);return new Promise(function(u,c){if(i)n(i,u);else if(a){var l=t.model.entities.dim,h={language:t.model.locale.id,from:"entities",select:{key:[l],value:[a]},where:{$and:[r({},l,"$"+l)]},join:r({},"$"+l,{key:l,where:r({},l,{$in:[s||"world"]})})},f=t.model.data.load(h,r({},a,function(t){return t}));f.then(function(t){n(e.model.data.getData(t)[0][a],u)},function(t){return o.warn("Problem with Preload query: ",t,JSON.stringify(h))})}else n("assets/world-50m.json",u)})}});e.default=v},function(t,e){},function(t,e){t.exports='\x3c!-- Bubble Map Chart Component --\x3e\n<div class="vzb-bubblemap">\n    <svg class="vzb-bmc-map-background vzb-export">\n        <g class="vzb-bmc-map-graph"></g>\n    </svg>\n    <svg class="vzb-bubblemap-svg vzb-export">\n        <g class="vzb-bmc-graph">\n            <g class="vzb-bmc-year"></g>\n\n            <g class="vzb-bmc-lines"></g>\n            <g class="vzb-bmc-bubbles"></g>\n            <g class="vzb-bmc-bubble-labels"></g>\n\n\n            <g class="vzb-bmc-axis-y-title">\n                <text></text>\n            </g>\n\n            <g class="vzb-bmc-axis-c-title">\n                <text></text>\n            </g>\n\n            <g class="vzb-bmc-axis-y-info vzb-noexport">\n            </g>\n\n            <g class="vzb-bmc-axis-c-info vzb-noexport">\n            </g>\n\n            <g class="vzb-data-warning vzb-noexport">\n                <svg></svg>\n                <text></text>\n            </g>\n            <g class="vzb-bmc-labels"></g>\n        </g>\n    </svg>\n</div>\n'},function(t,e,n){t.exports=n(0)}])},VsLy:function(t,e,n){function r(t,e,n){var u,f,d=arguments.length<4?t:arguments[3],p=o.f(l(t),e);if(!p){if(h(f=a(t)))return r(f,e,n,d);p=c(0)}return s(p,"value")?!(!1===p.writable||!h(d))&&(u=o.f(d,e)||c(0),u.value=n,i.f(d,e,u),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var i=n("tose"),o=n("6De9"),a=n("TJLg"),s=n("rMsi"),u=n("CDXM"),c=n("piOq"),l=n("+pQw"),h=n("JXkd");u(u.S,"Reflect",{set:r})},"W+Ug":function(t,e,n){var r=n("CDXM");r(r.S,"Object",{setPrototypeOf:n("5oDA").set})},W8w6:function(t,e,n){n("b8HQ"),n("Rl2/"),n("dU6i"),n("ZI9W"),t.exports=n("b4gG").Map},"WGJ/":function(t,e,n){var r=n("p/bR");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},WSkQ:function(t,e,n){"use strict";function r(t,e,n){return this.lift(new s(t,e,n,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("TpsG");e.last=r;var s=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),u=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,void 0!==i&&(this.lastValue=i,this.hasValue=!0)}return i(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new a.EmptyError)},e}(o.Subscriber)},Wo2w:function(t,e,n){var r=n("VceJ");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},WsSm:function(t,e,n){"use strict";var r=n("KGrn"),i=n("CDXM"),o=n("lfBE"),a=n("gxdV"),s=n("rMsi"),u=n("lexG"),c=n("9ScN"),l=n("P6IN"),h=n("TJLg"),f=n("3r0D")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,m,y){c(n,e,v);var b,_,x,w=function(t){if(!d&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",S="values"==g,k=!1,E=t.prototype,O=E[f]||E["@@iterator"]||g&&E[g],T=O||w(g),C=g?S?w("entries"):T:void 0,z="Array"==e?E.entries||O:O;if(z&&(x=h(z.call(new t)))!==Object.prototype&&x.next&&(l(x,M,!0),r||s(x,f)||a(x,f,p)),S&&O&&"values"!==O.name&&(k=!0,T=function(){return O.call(this)}),r&&!y||!d&&!k&&E[f]||a(E,f,T),u[e]=T,u[M]=p,g)if(b={values:S?T:w("values"),keys:m?T:w("keys"),entries:C},y)for(_ in b)_ in E||o(E,_,b[_]);else i(i.P+i.F*(d||k),e,b);return b}},Wy9r:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"X0O/":function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=n("TJLg"),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},XNum:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("xFbG"),o=function(t){function e(e,n){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i.Subscription);e.Action=o},XRS9:function(t,e,n){"use strict";var r=n("pBmS"),i=n("xI8H").getWeak,o=n("+pQw"),a=n("JXkd"),s=n("Lcie"),u=n("p/bR"),c=n("BCYq"),l=n("rMsi"),h=n("Y5fy"),f=c(5),d=c(6),p=0,v=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return f(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},XRvs:function(t,e,n){"use strict";e.errorObject={e:{}}},XbXt:function(t,e,r){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=185)}([function(t,e,n){var r=n(3),i=n(25),o=n(15),a=n(16),s=n(22),u=function(t,e,n){var c,l,h,f,d=t&u.F,p=t&u.G,v=t&u.S,g=t&u.P,m=t&u.B,y=p?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),_=b.prototype||(b.prototype={});p&&(n=e);for(c in n)l=!d&&y&&void 0!==y[c],h=(l?y:n)[c],f=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,y&&a(y,c,h,t&u.U),b[c]!=h&&o(b,c,f),g&&_[c]!=h&&(_[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";function r(t){return Boolean(t instanceof Date||t instanceof RegExp)}function i(t){if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function o(t){var e=[];return x(t,function(t,n){"object"===(void 0===t?"undefined":l(t))&&null!==t?d(t)?e[n]=o(t):r(t)?e[n]=i(t):e[n]=w({},t):e[n]=t}),e}function a(t,e){return function(n,r){var i=e.getBoundingClientRect(),o=t.getScreenCTM();return{x:o.a*n+o.c*r+o.e-i.left,y:o.b*n+o.d*r+o.f-i.top}}}function s(){function t(t){return t}function e(t){return"string"==typeof t?t.toLowerCase():t}function n(n,r){if(r="number"==typeof r?{direction:r}:r||{},"function"!=typeof n){var i=n;n=function(t){return t[i]?t[i]:""}}if(1===n.length){var o=n,a=r.ignoreCase?e:t;n=function(t,e){return a(o(t))<a(o(e))?-1:a(o(t))>a(o(e))?1:0}}return-1===r.direction?function(t,e){return-n(t,e)}:n}function r(t,e){var i="function"==typeof this&&this,o=n(t,e),a=i?function(t,e){return i(t,e)||o(t,e)}:o;return a.thenBy=r,a}return r}function u(t){var e=t.transform.baseVal.consolidate().matrix,n=e.a,r=e.b,i=e.c,o=e.d,a=e.e,s=e.f;return function(t,e,n,r,i,o){var a=void 0,s=void 0,u=void 0;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Math.PI/180,skewX:Math.atan(u)*Math.PI/180,scaleX:a,scaleY:s}}(n,r,i,o,a,s)}function c(t,e,n){for(var r=e,i=0,o=n.length;i<o&&(r=r[t[n[i]]]);i++);return r}Object.defineProperty(e,"__esModule",{value:!0}),e.px2num=e.getProp=e.isFunction=e.isMobileOrTablet=e.capitalize=e.setIcon=e.pruneTree=e.isTouchDevice=e.debounce=e.memoize=e.post=e.get=e.ajax=e.interpolatePoint=e.interpolateVector=e.nestArrayToObj=e.hashCode=e.clearDelay=e.delay=e.defer=e.diffObject=e.arrayLast=e.arrayMedian=e.arraySum=e.arrayMean=e.arrayMax=e.arrayMin=e.values=e.keys=e.throttle=e.hasClass=e.classed=e.removeClass=e.addClass=e.countDecimals=e.error=e.groupEnd=e.groupCollapsed=e.warn=e.timeStamp=e.areaToRadius=e.cathetus=e.hypotenuse=e.radiusToArea=e.preventAncestorScrolling=e.matchAny=e.filterAny=e.filter=e.find=e.uniqueLast=e.unique=e.without=e.deepClone=e.clone=e.merge=e.deepExtend=e.extend=e.forEach=e.strToFloat=e.roundStep=e.findScrollableAncestor=e.getViewportPosition=e.comparePlainObjects=e.arrayEquals=e.isPlainObject=e.isNumber=e.isEmpty=e.isNaN=e.isString=e.isDate=e.isObject=e.isArray=e.isElement=e.uniqueId=e.printAutoconfigResult=e.approxEqual=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.makeAbsoluteContext=a,e.firstBy=s,e.transform=u,e.getValueMD=c;var h=n(389),f=function(t){return t&&t.__esModule?t:{default:t}}(h),d=(e.approxEqual=function(t,e,n){return n=n||0,e>0?(1-n)*e<=t&&t<=e*(1+n):e<0?(1+n)*e<=t&&t<=e*(1-n):Math.abs(t)<=n},e.printAutoconfigResult=function(t){console.info("AUTOCONFIG: "+t._name+(t.use?" of "+t._parent._name:"")+" choses "+(t.dim||t.which)+" from "+(t.dataSource?t.dataSource._name:"<DATA SOURCE MISSING!>")+" to be "+("entities"===t._type||"time"===t._type?"DIM":"WHICH"))},e.uniqueId=function(){var t=0;return function(e){return e?e+(t+=1):t+=1}}(),e.isElement=function(t){return!(!t||1!==t.nodeType)},e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),p=e.isObject=function(t){return"object"===(void 0===t?"undefined":l(t))&&!!t},v=(e.isDate=function(t){return t instanceof Date},e.isString=function(t){return"string"==typeof t}),g=e.isNaN=function(t){return y(t)&&t!==+t},m=e.isEmpty=function(t){return 0===Object.keys(t).length&&t.constructor===Object},y=e.isNumber=function(t){return"number"==typeof t||!!t&&"object"===(void 0===t?"undefined":l(t))&&"[object Number]"===Object.prototype.toString.call(t)},b=e.isPlainObject=function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},_=e.arrayEquals=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},x=(e.comparePlainObjects=function(t,e){var n=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},r=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e=void 0===t?"undefined":l(t);return"object"===e&&(e=n(t).toLowerCase()),"number"===e?t.toString().indexOf(".")>0?"float":"integer":e},i=function(t,e){if(t===e)return!0;for(var n in t){if(!e.hasOwnProperty(n))return!1;if(!s(t[n],e[n]))return!1}for(var r in e)if(!t.hasOwnProperty(r))return!1;return!0},o=function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!s(t[n],e[n]))return!1;return!0},a={};a.array=o,a.object=i,a.date=function(t,e){return t.getTime()===e.getTime()},a.regexp=function(t,e){return t.toString()===e.toString()};var s=function(t,e){if(t!==e){var n=r(t);return n===r(e)&&(a.hasOwnProperty(n)?a[n](t,e):t==e)}return!0};return i(t,e)},e.getViewportPosition=function(t){for(var e=0,n=0;t;)e+=t.offsetLeft-t.scrollLeft+t.clientLeft,n+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;return{x:e,y:n}},e.findScrollableAncestor=function(t){for(var e=["scroll","auto"];t=t.parentNode;){if(t.scrollHeight>t.clientHeight&&-1!==e.indexOf(d3.select(t).style("overflow")))return t}return null},e.roundStep=function(t,e){return Math.round(t/e)*e},e.strToFloat=function(t){return+t.replace(/[^\d.-]/g,"")},e.forEach=function(t,e,n){if(t){var r=void 0,i=void 0;if(d(t))for(i=t.length,r=0;r<i;r+=1){var o=e.apply(n,[t[r],r]);if(!1===o)break}else{var a=Object.keys(t);for(i=a.length,r=0;r<i;r+=1){if(!1===e.apply(n,[t[a[r]],a[r]]))break}}}}),w=(e.extend=function(t){var e=Array.prototype.slice.call(arguments,1);return x(e,function(e,n){x(e,function(n,r){e.hasOwnProperty(r)&&(t[r]=n)})}),t},e.deepExtend=function t(){if(arguments.length<1||"object"!==l(arguments[0]))return!1;if(arguments.length<2)return arguments[0];var e=arguments[0],n="boolean"==typeof arguments[arguments.length-1],a=n&&arguments[arguments.length-1],s=Array.prototype.slice.call(arguments,1,n?-1:arguments.length),u=void 0,c=void 0;return x(s,function(n){"object"!==(void 0===n?"undefined":l(n))||d(n)||x(Object.keys(n),function(s){c=e[s],(u=n[s])===e||("object"!==(void 0===u?"undefined":l(u))||null===u||u._data?e[s]=u:d(u)?e[s]=o(u):r(u)?e[s]=i(u):"object"!==(void 0===c?"undefined":l(c))||null===c||d(c)?e[s]=t({},u):a&&m(u)?e[s]={}:e[s]=t(c,u,a))})}),e}),M=(e.merge=function(t){var e=Array.prototype.slice.call(arguments,1);return x(e,function(e,n){x(e,function(n,r){e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?(d(t[r])||(t[r]=[t[r]]),t[r].push(n)):t[r]=n)})}),t},e.clone=function(t,e,n){if(d(t))return t.slice(0);var r={};return x(t,function(i,o){e&&-1===e.indexOf(o)||n&&-1!==n.indexOf(o)||t.hasOwnProperty(o)&&(r[o]=i)}),r},e.deepClone=function t(e){var n={};return d(e)&&(n=[]),x(e,function(e,r){p(e)||d(e)?n[r]=t(e):n[r]=e}),n},e.without=function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},e.unique=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n={};return t.filter(function(t){var r=e(t);return!n.hasOwnProperty(r)&&(n[r]=1,!0)})},e.uniqueLast=function(t,e){var n={},r=[];e||(e=function(t){return t});for(var i=0,o=t.length;i<o;i+=1){var a=e(t[i]);n.hasOwnProperty(a)&&r.splice(n[a],1),r.push(t[i]),n[a]=r.length-1}return r},e.find=function(t,e){var n=void 0;return x(t,function(t){if(e(t))return n=t,!1}),n},e.filter=function(t,e){for(var n=-1,r=t.length,i=-1,o=[],a=Object.keys(e),s=a.length,u=void 0,c=void 0;(n+=1)<r;){var l=t[n],h=!0;for(u=0;u<s;u+=1)if(c=a[u],!l.hasOwnProperty(c)||l[c]!==e[c]){h=!1;break}h&&(o[i+=1]=l)}return o},e.filterAny=function(t,e,n){for(var r=-1,i=t.length,o=-1,a=[],s=Object.keys(e),u=s.length,c=void 0,l=void 0;(r+=1)<i;){var h=t[r],f=!0;for(c=0;c<u;c+=1)if(l=s[c],!h.hasOwnProperty(l)||!M(h[l],e[l],n)){f=!1;break}f&&(a[o+=1]=h)}return a},e.matchAny=function(t,e,n){d(t)||(t=[t]),n||(n="*");for(var r=!1,i=0;i<t.length;i++){var o=t[i];if(!d(e)&&o==e){r=!0;break}if(d(e)){for(var a=-1,s=0;s<e.length;s++){var u=e[s];if(!(d(u)||u!=o&&u!==n)){a=s;break}if(d(u)){var c=u[0],l=u[1]||c;if(o>=c&&o<=l){a=s;break}}}if(-1!==a){r=!0;break}}}return r}),S=(e.preventAncestorScrolling=function(t){var e=!1;t.on("mousewheel",function(n,r){var i=this.scrollTop,o=this.scrollHeight,a=t.node().offsetHeight,s=d3.event.wheelDelta,u=s>0,c=function(t){return function(){var e=this,n=d3.interpolateNumber(this.scrollTop,t);return function(t){e.scrollTop=n(t)}}};if(u?u&&(s>i&&i>0?(t.transition().delay(0).duration(0).tween("scrolltween",c(0)),e=!0,setTimeout(function(){e=!1},2e3)):o==a+i&&(e=!1)):-s>o-a-i&&o!=a+i?(t.transition().delay(0).duration(0).tween("scrolltween",c(o)),e=!0,setTimeout(function(){e=!1},2e3)):0==i&&(e=!1),e)return function(){return d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.returnValue=!1,!1}()})},e.radiusToArea=function(t){return t*t*Math.PI},e.hypotenuse=function(t,e){return Math.sqrt(t*t+e*e)},e.cathetus=function(t,e){return Math.sqrt(t*t-e*e)},e.areaToRadius=function(t){return Math.sqrt(t/Math.PI)},e.timeStamp=function(t){console&&"function"==typeof console.timeStamp&&console.timeStamp(t)},e.warn=function(t){return t=Array.prototype.slice.call(arguments).map(function(t){return t instanceof Object?JSON.stringify(t,null,4):t}).join(" "),console&&"function"==typeof console.warn&&console.warn(t),!0}),k=(e.groupCollapsed=function(t){t=Array.prototype.slice.call(arguments).join(" "),console&&"function"==typeof console.groupCollapsed&&console.groupCollapsed(t)},e.groupEnd=function(){console&&"function"==typeof console.groupEnd&&console.groupEnd()},e.error=function(t){console&&"function"==typeof console.error&&(t.stack?console.error(t.stack):console.error(t),arguments.length>1&&console.error.apply(this,Array.prototype.slice.call(arguments,1)))},e.countDecimals=function(t){return Math.floor(t.valueOf())===t.valueOf()?0:t.toString().split(".")[1].length||0},e.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e}),E=e.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},O=(e.classed=function(t,e,n){if(!0===n)k(t,e);else{if(!1!==n)return O(t,e);E(t,e)}},e.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}),T=(e.throttle=function(t,e){var n=!1,r=void 0,i=void 0,o=void 0,a=function(){n&&(n=!1,t.apply(i,r))},s=function(){if(o>Date.now())return n=!0,r=arguments,void(i=this);o=Date.now()+e,n=!1,t.apply(this,arguments),setTimeout(function(){a()},e)};return s.recallLast=a,s},e.keys=function(t){return Object.keys(t)},e.values=function(t){for(var e=[],n=Object.keys(t),r=n.length,i=0;i<r;i+=1)e.push(t[n[i]]);return e},e.arrayMin=function(t){return t.reduce(function(t,e){return t<e?t:e})},e.arrayMax=function(t){return t.reduce(function(t,e){return t>e?t:e})},e.arrayMean=function(t){return T(t)/t.length},e.arraySum=function(t){return t.reduce(function(t,e){return t+e})}),C=(e.arrayMedian=function(t){t=t.sort(function(t,e){return t-e});var e=Math.floor((t.length-1)/2);return t.length%2?t[e]:(t[e]+t[e+1])/2},e.arrayLast=function(t){return t.length?t[t.length-1]:null},e.diffObject=function t(e,n){var r={};return x(n,function(n,i){!e.hasOwnProperty(i)&&b(n)&&(r[i]=t({},n))}),x(e,function(e,i){if(n.hasOwnProperty(i)){if(e!==n[i])if(b(e)&&b(n[i]))if(m(e))m(n[i])||(r[i]={});else{var o=t(e,n[i]);Object.keys(o).length>0&&(r[i]=o)}else d(e)&&d(n[i])&&_(e,n[i])||(r[i]=e)}else r[i]=e}),r},e.defer=function(t){setTimeout(t,1)},e.delay=function(t){return new Promise(function(e){return setTimeout(e,t)})},e.clearDelay=function(t){return clearTimeout(t)},e.hashCode=function(t){v(t)||(t=JSON.stringify(t));var e=0,n=t.length,r=void 0;if(0===n)return e;for(var i=0;i<n;i+=1)r=t.charCodeAt(i),e=(e<<5)-e+r,e&=e;return e.toString()},e.nestArrayToObj=function t(e){if(!e||!e.length||!e[0].key)return e;for(var n={},r=0;r<e.length;r++)n[e[r].key]=t(e[r].values);return n},e.interpolateVector=function(){},e.interpolatePoint=function(t,e,n,r,i,o,a,s){if(!t||0===t.length)return S("interpolatePoint failed because incoming array is empty. It was "+n),null;if("constant"===e)return n;if("property"===e)return t[0][n];if(s){if(o-t[0][i]<=0)return t[0][n];if(o-t[t.length-1][i]>=0)return t[t.length-1][n]}else if(o<t[0][i]||o>t[t.length-1][i])return null;if(r||0===r||(r=d3.bisectLeft(t.map(function(t){return t[i]}),o)),0===r)return t[0][n];if(void 0===t[r]||null===t[r][n]||null===t[r-1][n]||""===t[r][n])return S("interpolatePoint failed because next/previous points are bad in "+n),null;var u=f.default[a||"linear"](t[r-1][i],t[r][i],t[r-1][n],t[r][n],o);return n===i&&(u=new Date(u)),g(u)&&(S("interpolatePoint failed because result is NaN. It was "+n),u=null),u},e.ajax=function(t){var e=new XMLHttpRequest;e.open(t.method,t.url,!0),"POST"!==t.method||t.json?"POST"===t.method&&t.json&&e.setRequestHeader("Content-Type","application/json; charset=UTF-8"):e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onload=function(){if(e.status>=200&&e.status<400){var n=t.json?JSON.parse(e.responseText):e.responseText;t.success&&t.success(n)}else t.error&&t.error()},e.onerror=function(){t.error&&t.error()},e.send(t.data)});e.get=function(t,e,n,r,i){e=e||[],x(e,function(t,n){e.push(n+"="+t)}),t=e.length?t+"?"+e.join("&"):t,C({method:"GET",url:t,success:n,error:r,json:i})},e.post=function(t,e,n,r,i){C({method:"POST",url:t,success:n,error:r,json:i,data:e})},e.memoize=function(t){return function(){for(var e=Array.prototype.slice.call(arguments),n="",r=e.length,i=null;r--;)i=e[r],n+=i===Object(i)?JSON.stringify(i):i,t.memoize||(t.memoize={});return n in t.memoize?t.memoize[n]:t.memoize[n]=t.apply(this,e)}},e.debounce=function(t,e,n){var r=void 0;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},e.isTouchDevice=function(){return null!=((d3.event||{}).sourceCapabilities||{}).firesTouchEvents?d3.event.sourceCapabilities.firesTouchEvents:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},e.pruneTree=function t(e,n){var r={},i=[];return e.hasOwnProperty("children")&&(i=e.children.map(function(e){return t(e,n)}).filter(function(t){return 0!==Object.keys(t).length})),(0!=i.length||n(e))&&x(e,function(t,e){r[e]=t}),0!=i.length&&(r.children=i),r},e.setIcon=function(t,e){return t.selectAll("*").remove(),t.node().appendChild(t.node().ownerDocument.importNode((new DOMParser).parseFromString(e,"application/xml").documentElement,!0)),t},e.capitalize=function(t){return t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()},e.isMobileOrTablet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))},e.isFunction=function(t){return"function"==typeof t},e.getProp=function(t,e,n){for(;e.length;){var r=e.shift();if(!t.hasOwnProperty(r))return n;t=t[r]}return t},e.px2num=function(t){return v(t)&&t.endsWith("px")?parseFloat(t):console.warn("Strange pixels value: "+t)||t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=function(e){return t.replace(/<%=([^%]*)%>/g,function(t){var n=t.match(/t\s*\(([^)]+)\)/g);return n.length?n=e.t(n[0].match(/"([^"]+)"/g)[0].split('"').join("")):(n=t.match(/([a-z\-A-Z]+([a-z\-A-Z0-9]?[a-zA-Z0-9]?)?)/g)[0],n=e[n]||n),n})},r=/<[a-z][\s\S]*>/i.test(t)?n:d[t]=d[t]||i(f.default.templates[t]);return e?r(e):r}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(50),u=r(s),c=n(49),l=r(c),h=n(107),f=r(h),d={},p=u.default.extend({init:function(t,e){if(this._id=this._id||a.uniqueId("c"),this._ready=!1,this._readyOnce=!1,this.name=this.name||t.name||this._id,this.template=this.template||"<div></div>",this.placeholder=this.placeholder||t.placeholder,this.template_data=this.template_data||{name:this.name},this.placeholder&&!a.isElement(this.placeholder))try{this.placeholder=e.placeholder.querySelector(this.placeholder)}catch(t){a.error("Error finding placeholder '"+this.placeholder+"' for component '"+this.name+"'")}this.parent=e||null,this.root=this.parent?this.parent.root:this,this.components=this.components||[],this._components_config=this.components.map(function(t){return a.clone(t)}),this.model_expects=this.model_expects||[],this.model_binds=this.model_binds||{},this.createModel(t.model),this.ui=this.model.ui||this.ui||t.ui,this._super(),this.registerListeners()},createModel:function(t){this.model=this._modelMapping(t)},registerListeners:function(){this.on({readyOnce:this.readyOnce,ready:this.ready,domReady:this.domReady,resize:this.resize})},startPreload:function(){var t=[];return t.push(this.preload()),a.forEach(this.components,function(e){return t.push(e.startPreload())}),Promise.all(t)},preload:function(){return Promise.resolve()},afterPreload:function(){this.model&&this.model.afterPreload(),a.forEach(this.components,function(t){t.afterPreload()})},render:function(){this.prerender(),this.postrender()},prerender:function(){this.loadTemplate(),this.loadSubComponents()},postrender:function(){var t=this;a.forEach(this.components,function(e){e.render(),t.on("resize",function(){e.trigger("resize")})}),this.startLoading()},startLoading:function(){var t=this;this.model.on("ready",function(){t.loadingDone()}),this.model&&this.model.isLoading()||this.loadingDone()},loadingDone:function(){a.removeClass(this.placeholder,"vzb-loading-first"),a.removeClass(this.placeholder,"vzb-loading-data"),this.setReady()},renderError:function(){a.removeClass(this.placeholder,"vzb-loading-first"),a.removeClass(this.placeholder,"vzb-loading-data"),a.addClass(this.placeholder,"vzb-error"),this.setError({type:"data"})},setError:function(t){"function"==typeof this.error&&this.error(t)},setReady:function(t){this._readyOnce||(this.trigger("readyOnce"),this._readyOnce=!0),this._ready=!0,this.trigger("ready")},loadTemplate:function(){var t=this.template,e=this.template_data,n="";if(this.placeholder){if(e=a.extend(e,{t:this.getTranslationFunction(!0)}),this.template)try{n=i(t,e)}catch(t){a.error("Templating error for component: '"+this.name+"' - Check if template name is unique and correct. E.g.: 'bubblechart'"),a.removeClass(this.placeholder,"vzb-loading-data"),a.addClass(this.placeholder,"vzb-error"),this.setError({type:"template"})}a.addClass(this.placeholder,"vzb-loading-data"),a.addClass(this.placeholder,"vzb-loading-first"),this.placeholder.innerHTML=n,this.element=this.placeholder.children[0],this.trigger("domReady")}},getActiveProfile:function(t,e){var n=this.getLayoutProfile(),r=this.getPresentationMode(),i=a.deepClone(t[n]);return r&&(e||{})[n]&&a.deepExtend(i,e[n]),i},loadSubComponents:function(){var t=this,e=void 0,n=void 0;this.components=[],a.forEach(this._components_config,function(r){if(r.model=r.model||{},!r.component)return void a.error("Error loading component: name not provided");if(n=a.isString(r.component)?p.get(r.component):r.component){e=a.extend(r,{name:r.component,ui:t._uiMapping(r.placeholder,r.ui)});var i=new n(e,t);t.components.push(i)}})},findChildByName:function(t){return a.find(this.components,function(e){return e.name===t})},getLayoutProfile:function(){return this.model.ui?this.model.ui.currentProfile():this.parent.getLayoutProfile()},getPresentationMode:function(){return this.model.ui?this.model.ui.getPresentationMode():this.parent.getPresentationMode()},_uiMapping:function(t,e){if(e)return new l.default("ui",e);if(t&&this.ui){t=t.replace(".","");var n=this.ui[t];if(n)return n}return this.ui},_modelMapping:function(t){function e(t){for(var e=t.split("."),r=n.parent.model,i="";e.length;)i=e.shift(),r=r[i];return{name:t,model:r,type:r?r.getType():null}}var n=this,r={};if(a.isArray(t)&&a.isArray(this.model_expects)){this.model_expects.length!==t.length&&(a.groupCollapsed("DIFFERENCE IN NUMBER OF MODELS EXPECTED AND RECEIVED"),a.warn("Please, configure the 'model_expects' attribute accordingly in '"+this.name+"' or check the models passed in '"+n.parent.name+"'.\n\nComponent: '"+n.parent.name+"'\nSubcomponent: '"+this.name+"'\nNumber of Models Expected: "+this.model_expects.length+"\nNumber of Models Received: "+t.length),a.groupEnd()),a.forEach(t,function(i,o){if(i){var s=e(i),u=void 0;n.model_expects[o]?(u=n.model_expects[o].name,!n.model_expects[o].type||s.type===n.model_expects[o].type||a.isArray(n.model_expects[o].type)&&-1!==n.model_expects[o].type.indexOf(s.type)||(a.groupCollapsed("UNEXPECTED MODEL TYPE: '"+s.type+"' instead of '"+n.model_expects[o].type+"'"),a.warn("Please, configure the 'model_expects' attribute accordingly in '"+n.name+"' or check the models passed in '"+n.parent.name+"'.\n\nComponent: '"+n.parent.name+"'\nSubcomponent: '"+n.name+"'\nExpected Model: '"+n.model_expects[o].type+"'\nReceived Model: '"+s.type+"'\nModel order: "+o),a.groupEnd())):(a.groupCollapsed("UNEXPECTED MODEL: '"+t[o]+"'"),a.warn("Please, configure the 'model_expects' attribute accordingly in '"+n.name+"' or check the models passed in '"+n.parent.name+"'.\n\nComponent: '"+n.parent.name+"'\nSubcomponent: '"+n.name+"'\nNumber of Models Expected: "+n.model_expects.length+"\nNumber of Models Received: "+t.length),a.groupEnd(),u=s.name),r[u]=s.model}});var i=t.length,o=this.model_expects.length;return o>i&&(this.model_expects.splice(0,i),a.forEach(o,function(t){r[t.name]={}})),new l.default(this.name,r,null,this.model_binds)}},getTranslationFunction:function(t){var e=void 0;try{e=this.model.get("locale").getTFunction()}catch(t){this.parent&&this.parent!==this&&(e=this.parent.getTranslationFunction())}return e||(e=function(t){return t}),t?this._translatedStringFunction(e):e},_translatedStringFunction:function(t){return function(e){return'<span data-vzb-translate="'+e+'">'+t(e)+"</span>"}},translateStrings:function(){var t=this.getTranslationFunction(),e=this.placeholder.querySelectorAll("[data-vzb-translate]");0!==e.length&&a.forEach(e,function(e){e&&e.getAttribute&&(e.innerHTML=t(e.getAttribute("data-vzb-translate")))})},readyOnce:function(){},ready:function(){},resize:function(){},domReady:function(){},clear:function(){this.freeze(),this.model&&this.model.freeze(),a.forEach(this.components,function(t){t.clear()})}});p.isComponent=function(t){return t._id&&("t"===t._id[0]||"c"===t._id[0])},e.default=p},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(61)("wks"),i=n(39),o=n(3).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(2),i=n(109),o=n(26),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(28),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=void 0,i=void 0,o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;return{move:function(e,n){t.style("right",e+"px"),t.style("top",n+"px")},dragStart:function(y){if(a.isTouchDevice()){var b=d3.touches(e.node());r=b[0][0],i=b[0][1]}else r=y.sourceEvent.clientX,i=y.sourceEvent.clientY;o=parseInt(t.style("top"))||0,s=parseInt(t.style("right"))||0,c=parseInt(t.style("margin-left"))||0,u=parseInt(t.style("margin-right"))||0,h=Math.min(n,c),l=Math.min(n,u),f=parseInt(t.style("width"),10)+c-h||0,d=parseInt(t.style("height"),10)||0,p=parseInt(e.style("width"),10)-u||0,v=parseInt(e.style("height"),10)||0,g=r+s,m=i-o},drag:function(t){if(a.isTouchDevice()){var n=d3.touches(e.node());r=n[0][0],i=n[0][1]}else r=t.sourceEvent.clientX,i=t.sourceEvent.clientY;var o=-r+g,s=i-m;o<-l&&(o=-l),s<0&&(s=0),o+f>p&&(o=p-f),s+d>v&&(s=v-d),this.move(o,s)}}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(5),u=r(s),c=n(21),l=n(104),h=r(l),f=(0,h.default)(n(401)),d=u.default.extend({isDialog:!0,init:function(t,e){this.name=this.name||"",this.model_expects=this.model_expects||[{name:"state",type:"model"},{name:"ui",type:"ui"},{name:"locale",type:"locale"}],this.template=f[this.name],this._super(t,e),this.transitionEvents=["webkitTransitionEnd","transitionend","msTransitionEnd","oTransitionEnd"]},readyOnce:function(){this.element=d3.select(this.element),this.titleEl=this.element.selectAll(".vzb-top-dialog > .vzb-dialog-modal > .vzb-dialog-title"),this.buttonsEl=this.element.selectAll(".vzb-top-dialog > .vzb-dialog-modal > .vzb-dialog-buttons"),this.contentEl=this.element.selectAll(".vzb-top-dialog > .vzb-dialog-modal > .vzb-dialog-content")},ready:function(){var t=this;this.placeholderEl=d3.select(this.placeholder),this.rootEl=this.root.element instanceof Array?this.root.element:d3.select(this.root.element),this.dragHandler=this.placeholderEl.select("[data-click='dragDialog']"),this.dragHandler.html(c.drag),this.pinIcon=this.placeholderEl.select("[data-click='pinDialog']"),this.pinIcon.html(c.pin),this.topPos="";var e=this.getLayoutProfile(),n=i(this.placeholderEl,this.rootEl,10),r=d3.drag().on("start",function(){var e=t.placeholderEl.node().offsetTop;t.placeholderEl.style("top",e+"px"),t.placeholderEl.style("bottom","auto"),t.trigger("dragstart"),n.dragStart(d3.event)}).on("drag",function(){t.trigger("drag"),n.drag(d3.event)}).on("end",function(){t.rightPos=t.placeholderEl.style("right"),t.topPos=t.placeholderEl.style("top"),t.trigger("dragend")});this.dragHandler.call(r),this.dragHandler.classed("vzb-hidden","small"===e),this.pinIcon.classed("vzb-hidden","small"===e),this.resize()},resize:function(){if(this.placeholderEl&&this.rootEl&&this.placeholderEl.classed("vzb-top-dialog")){this.placeholderEl.classed("notransition",!0);var t=this.getLayoutProfile();if("small"!==t){var e=parseInt(this.rootEl.style("width"),10)||0,n=parseInt(this.rootEl.style("height"),10)||0,r=parseInt(this.placeholderEl.style("width"),10)||0,i=parseInt(this.placeholderEl.style("height"),10)||0,o=parseInt(this.rightPos,10),s=parseInt(this.topPos,10),u=parseInt(this.placeholderEl.style("margin-right"),10)||0;a.isNumber(o)&&o>e-r-u&&this.rightPos&&(this.rightPos=e-r-u+"px",this.isOpen&&this.placeholderEl.style("right",this.rightPos)),a.isNumber(s)&&a.isNumber(i)&&s>=0&&s>n-i&&this.topPos&&(this.topPos=(n-i>0?n-i:0)+"px",this.isOpen&&this.placeholderEl.style("top",this.topPos)),this.topPos&&"large"===this.getLayoutProfile()&&this.rootEl.classed("vzb-dialog-expand-true")&&this.placeholderEl.style("bottom","auto"),this.rootEl.classed("vzb-landscape"),this.element.style("max-height","")}else this.rightPos="",this.topPos="",this.placeholderEl.attr("style","");this.dragHandler.classed("vzb-hidden","small"===t),this.pinIcon.classed("vzb-hidden","small"===t),this._setMaxHeight()}},_setMaxHeight:function(){var t=this.root.element.offsetHeight;if("small"!==this.getLayoutProfile())if(!this.topPos&&"large"===this.getLayoutProfile()&&this.rootEl.classed("vzb-dialog-expand-true")){var e=parseInt(this.placeholderEl.style("bottom"),10);t-=e}else{var n=this.topPos?parseInt(this.topPos,10):this.placeholderEl.node().offsetTop;t-=n}else t=this.rootEl.classed("vzb-portrait")?t-50:t-10;this.element.style("max-height",t+"px");var r=t-this.titleEl.node().offsetHeight-this.buttonsEl.node().offsetHeight;this.contentEl.style("max-height",r+"px")},beforeOpen:function(){var t=this;if(this.transitionEvents.forEach(function(e){t.placeholderEl.on(e,t.transitionEnd.bind(t,e))}),this.placeholderEl.classed("notransition",!0),this.placeholderEl.style("top",""),this.placeholderEl.style("bottom",""),this.topPos&&"large"===this.getLayoutProfile()&&this.rootEl.classed("vzb-dialog-expand-true")){var e=this.placeholderEl.node().offsetTop;this.placeholderEl.style("top",e+"px"),this.placeholderEl.style("bottom","auto")}else this.getLayoutProfile();this.placeholderEl.node().offsetTop,this.placeholderEl.classed("notransition",!1),"small"===this.getLayoutProfile()?this.placeholderEl.style("top",""):this.rootEl.classed("vzb-landscape")},open:function(){this.isOpen=!0,"small"!==this.getLayoutProfile()&&this.topPos&&(this.placeholderEl.style("top",this.topPos),this.placeholderEl.style("right",this.rightPos))},beforeClose:function(){this.rootEl.classed("vzb-portrait")&&"small"===this.getLayoutProfile()&&this.placeholderEl.style("top","auto"),"large"===this.getLayoutProfile()&&this.rootEl.classed("vzb-dialog-expand-true")&&(this.topPos0=this.topPos?this.placeholderEl.node().parentNode.offsetHeight-this.placeholderEl.node().offsetHeight+"px":""),this.placeholderEl.classed("notransition",!1),this.placeholderEl.node().offsetHeight},close:function(){this.rootEl.classed("vzb-portrait")&&"small"===this.getLayoutProfile()||(this.placeholderEl.style("top",""),this.placeholderEl.style("right","")),"large"===this.getLayoutProfile()&&this.rootEl.classed("vzb-dialog-expand-true")&&(this.placeholderEl.style("top",this.topPos0),this.placeholderEl.style("right","")),this.isOpen=!1,this.trigger("close")},transitionEnd:function(t){var e=this;this.transitionEvents.forEach(function(t){e.placeholderEl.on(t,null)}),this.isOpen&&this.placeholderEl.classed("notransition",!0)}});e.default=d},function(t,e,n){var r=n(27);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(9),i=n(38);t.exports=n(8)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(3),i=n(15),o=n(14),a=n(39)("src"),s=Function.toString,u=(""+s).split("toString");n(25).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var r=n(0),i=n(4),o=n(27),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){var r=n(56),i=n(27);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(57),i=n(38),o=n(18),a=n(26),s=n(14),u=n(109),c=Object.getOwnPropertyDescriptor;e.f=n(8)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(14),i=n(12),o=n(80)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.paintbrush='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1615 0q70 0 122.5 46.5t52.5 116.5q0 63-45 151-332 629-465 752-97 91-218 91-126 0-216.5-92.5t-90.5-219.5q0-128 92-212l638-579q59-54 130-54zm-909 1034q39 76 106.5 130t150.5 76l1 71q4 213-129.5 347t-348.5 134q-123 0-218-46.5t-152.5-127.5-86.5-183-29-220q7 5 41 30t62 44.5 59 36.5 46 17q41 0 55-37 25-66 57.5-112.5t69.5-76 88-47.5 103-25.5 125-10.5z"/></svg>',e.search='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>',e.circle='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1664 896q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>',e.expand='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M883 1056q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23zm781-864v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45z"/></svg>',e.asterisk='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1546 1050q46 26 59.5 77.5t-12.5 97.5l-64 110q-26 46-77.5 59.5t-97.5-12.5l-266-153v307q0 52-38 90t-90 38h-128q-52 0-90-38t-38-90v-307l-266 153q-46 26-97.5 12.5t-77.5-59.5l-64-110q-26-46-12.5-97.5t59.5-77.5l266-154-266-154q-46-26-59.5-77.5t12.5-97.5l64-110q26-46 77.5-59.5t97.5 12.5l266 153v-307q0-52 38-90t90-38h128q52 0 90 38t38 90v307l266-153q46-26 97.5-12.5t77.5 59.5l64 110q26 46 12.5 97.5t-59.5 77.5l-266 154z"/></svg>',e.trails='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M 1381.375 17.1875 C 1375.7825 17.176804 1370.1216 17.316078 1364.4375 17.5625 C 1273.4913 21.505489 1197.0982 57.199956 1135.2188 124.6875 C 1076.5961 188.62338 1047.6964 263.96059 1048.5312 350.65625 L 835.71875 433 C 797.77288 391.67699 749.96961 361.96416 692.3125 343.84375 C 604.96227 316.39162 520.95691 323.70366 440.25 365.8125 C 359.5432 407.92133 305.45225 472.64985 278 560 C 250.54783 647.35004 257.89117 731.38694 300 812.09375 C 342.10886 892.80075 406.83755 946.89147 494.1875 974.34375 C 576.9404 1000.3512 657.38873 994.58645 735.5625 957.09375 L 959.28125 1171.4375 L 972.375 1184.4062 C 966.2931 1198.3454 961.94845 1209.2226 959.34375 1217.0625 C 956.73915 1224.9024 953.7186 1236.224 950.25 1251.0312 L 711.03125 1285.1875 C 669.59175 1209.0324 607.72526 1157.2863 525.40625 1129.9375 C 438.51381 1101.0693 354.34933 1107.021 272.96875 1147.8125 C 191.58796 1188.6039 136.49335 1252.4513 107.625 1339.3438 C 78.756758 1426.2362 84.708528 1510.3694 125.5 1591.75 C 166.29138 1673.1307 230.1387 1728.2567 317.03125 1757.125 C 403.92369 1785.9933 488.05682 1780.0415 569.4375 1739.25 C 650.81799 1698.4587 705.94425 1634.6111 734.8125 1547.7188 C 737.41718 1539.8788 740.43763 1528.5573 743.90625 1513.75 L 983.125 1479.5938 C 1024.5644 1555.7487 1086.4309 1607.4948 1168.75 1634.8438 C 1255.6425 1663.7119 1339.8069 1657.7603 1421.1875 1616.9688 C 1502.5682 1576.1772 1557.6631 1512.3299 1586.5312 1425.4375 C 1615.3996 1338.5451 1609.4477 1254.4119 1568.6562 1173.0312 C 1527.8647 1091.6506 1464.0174 1036.5244 1377.125 1007.6562 C 1294.9259 980.34721 1214.5066 984.74084 1135.8438 1020.8125 L 1120.2812 1005.9062 L 898.0625 785.96875 C 902.79653 774.40321 906.33847 765.03422 908.5 758.15625 C 920.42249 720.22 925.7916 682.90194 924.59375 646.21875 L 1130.9688 566.34375 C 1141.2015 577.59424 1149.3796 586.0106 1155.4688 591.59375 C 1222.9566 653.47326 1302.1474 682.44278 1393.0938 678.5 C 1484.04 674.55731 1560.4642 638.83151 1622.3438 571.34375 C 1684.2232 503.85591 1713.1929 424.6337 1709.25 333.6875 C 1705.3072 242.74139 1669.5816 166.34819 1602.0938 104.46875 C 1538.8238 46.456824 1465.2625 17.347946 1381.375 17.1875 z "/></svg>',e.lock='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"/></svg>',e.unlock='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1376 768q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-320q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45q0-106-75-181t-181-75-181 75-75 181v320h736z"/></svg>',e.unexpand='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M896 960v448q0 26-19 45t-45 19-45-19l-144-144-332 332q-10 10-23 10t-23-10l-114-114q-10-10-10-23t10-23l332-332-144-144q-19-19-19-45t19-45 45-19h448q26 0 45 19t19 45zm755-672q0 13-10 23l-332 332 144 144q19 19 19 45t-19 45-45 19h-448q-26 0-45-19t-19-45v-448q0-26 19-45t45-19 45 19l144 144 332-332q10-10 23-10t23 10l114 114q10 10 10 23z"/></svg>',e.axes='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><path d="M430.25,379.655l-75.982-43.869v59.771H120.73V151.966h59.774l-43.869-75.983L92.767,0L48.898,75.983L5.029,151.966h59.775 v271.557c0,15.443,12.52,27.965,27.963,27.965h261.5v59.773l75.982-43.869l75.982-43.867L430.25,379.655z"/></svg>',e.gear='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg>',e.stack='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.849 54.849"><g><path d="M54.497,39.614l-10.363-4.49l-14.917,5.968c-0.537,0.214-1.165,0.319-1.793,0.319c-0.627,0-1.254-0.104-1.79-0.318     l-14.921-5.968L0.351,39.614c-0.472,0.203-0.467,0.524,0.01,0.716L26.56,50.81c0.477,0.191,1.251,0.191,1.729,0L54.488,40.33     C54.964,40.139,54.969,39.817,54.497,39.614z"/><path d="M54.497,27.512l-10.364-4.491l-14.916,5.966c-0.536,0.215-1.165,0.321-1.792,0.321c-0.628,0-1.256-0.106-1.793-0.321     l-14.918-5.966L0.351,27.512c-0.472,0.203-0.467,0.523,0.01,0.716L26.56,38.706c0.477,0.19,1.251,0.19,1.729,0l26.199-10.479     C54.964,28.036,54.969,27.716,54.497,27.512z"/><path d="M0.361,16.125l13.662,5.465l12.537,5.015c0.477,0.191,1.251,0.191,1.729,0l12.541-5.016l13.658-5.463     c0.477-0.191,0.48-0.511,0.01-0.716L28.277,4.048c-0.471-0.204-1.236-0.204-1.708,0L0.351,15.41     C-0.121,15.614-0.116,15.935,0.361,16.125z"/></g></svg>',e.drag='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M896 384q-53 0-90.5 37.5t-37.5 90.5v128h-32v-93q0-48-32-81.5t-80-33.5q-46 0-79 33t-33 79v429l-32-30v-172q0-48-32-81.5t-80-33.5q-46 0-79 33t-33 79v224q0 47 35 82l310 296q39 39 39 102 0 26 19 45t45 19h640q26 0 45-19t19-45v-25q0-41 10-77l108-436q10-36 10-77v-246q0-48-32-81.5t-80-33.5q-46 0-79 33t-33 79v32h-32v-125q0-40-25-72.5t-64-40.5q-14-2-23-2-46 0-79 33t-33 79v128h-32v-122q0-51-32.5-89.5t-82.5-43.5q-5-1-13-1zm0-128q84 0 149 50 57-34 123-34 59 0 111 27t86 76q27-7 59-7 100 0 170 71.5t70 171.5v246q0 51-13 108l-109 436q-6 24-6 71 0 80-56 136t-136 56h-640q-84 0-138-58.5t-54-142.5l-308-296q-76-73-76-175v-224q0-99 70.5-169.5t169.5-70.5q11 0 16 1 6-95 75.5-160t164.5-65q52 0 98 21 72-69 174-69z"/></svg>',e.warn='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.209 512.209"><path d="M507.345,439.683L288.084,37.688c-3.237-5.899-7.71-10.564-13.429-13.988c-5.705-3.427-11.893-5.142-18.554-5.142   s-12.85,1.718-18.558,5.142c-5.708,3.424-10.184,8.089-13.418,13.988L4.859,439.683c-6.663,11.998-6.473,23.989,0.57,35.98   c3.239,5.517,7.664,9.897,13.278,13.128c5.618,3.237,11.66,4.859,18.132,4.859h438.529c6.479,0,12.519-1.622,18.134-4.859   c5.62-3.23,10.038-7.611,13.278-13.128C513.823,463.665,514.015,451.681,507.345,439.683z M292.655,411.132   c0,2.662-0.91,4.897-2.71,6.704c-1.807,1.811-3.949,2.71-6.427,2.71h-54.816c-2.474,0-4.616-0.899-6.423-2.71   c-1.809-1.807-2.713-4.042-2.713-6.704v-54.248c0-2.662,0.905-4.897,2.713-6.704c1.807-1.811,3.946-2.71,6.423-2.71h54.812   c2.479,0,4.62,0.899,6.428,2.71c1.803,1.807,2.71,4.042,2.71,6.704v54.248H292.655z M292.088,304.357   c-0.198,1.902-1.198,3.47-3.001,4.709c-1.811,1.238-4.046,1.854-6.711,1.854h-52.82c-2.663,0-4.947-0.62-6.849-1.854   c-1.908-1.243-2.858-2.807-2.858-4.716l-4.853-130.47c0-2.667,0.953-4.665,2.856-5.996c2.474-2.093,4.758-3.14,6.854-3.14h62.809   c2.098,0,4.38,1.043,6.854,3.14c1.902,1.331,2.851,3.14,2.851,5.424L292.088,304.357z"/></svg>',e.pin='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M800 864v-448q0-14-9-23t-23-9-23 9-9 23v448q0 14 9 23t23 9 23-9 9-23zm672 352q0 26-19 45t-45 19h-429l-51 483q-2 12-10.5 20.5t-20.5 8.5h-1q-27 0-32-27l-76-485h-404q-26 0-45-19t-19-45q0-123 78.5-221.5t177.5-98.5v-512q-52 0-90-38t-38-90 38-90 90-38h640q52 0 90 38t38 90-38 90-90 38v512q99 0 177.5 98.5t78.5 221.5z"/></svg>',e.question='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="17 17 483 483"> <circle stroke-width="40" cx="258.57" cy="258.57" r="220"/> <path d="M299.756,413.021v-61.78c0-3.003-0.966-5.472-2.896-7.401s-4.398-2.896-7.401-2.896h-61.78 c-3.003,0-5.47,0.965-7.4,2.896c-1.932,1.931-2.896,4.398-2.896,7.401v61.78c0,3.002,0.965,5.47,2.896,7.399 c1.931,1.931,4.396,2.896,7.4,2.896h61.779c3.003,0,5.472-0.967,7.401-2.896S299.756,416.021,299.756,413.021z"/> <path d="M382.128,196.789c0-18.877-5.952-36.36-17.856-52.449c-11.905-16.088-26.762-28.53-44.566-37.325 c-17.804-8.795-36.037-13.192-54.7-13.192c-52.127,0-91.919,22.845-119.377,68.537c-3.218,5.148-2.359,9.653,2.574,13.514 l42.474,32.177c1.502,1.287,3.54,1.931,6.114,1.931c3.433,0,6.115-1.287,8.044-3.861c11.369-14.587,20.594-24.454,27.672-29.603 c7.294-5.148,16.519-7.723,27.673-7.723c10.297,0,19.468,2.789,27.513,8.366c8.044,5.578,12.065,11.906,12.065,18.985 c0,8.151-2.146,14.694-6.437,19.628c-4.29,4.934-11.583,9.76-21.881,14.479c-13.514,6.006-25.901,15.284-37.164,27.834 c-11.263,12.549-16.894,26.01-16.894,40.382v11.583c0,3.004,0.965,5.472,2.896,7.401c1.931,1.93,4.396,2.896,7.4,2.896h61.779 c3.003,0,5.471-0.965,7.401-2.896c1.93-1.931,2.896-4.397,2.896-7.401c0-4.075,2.306-9.385,6.917-15.928 c4.612-6.542,10.458-11.852,17.537-15.927c6.863-3.861,12.119-6.918,15.768-9.171c3.646-2.252,8.579-6.008,14.802-11.263 c6.22-5.255,10.993-10.402,14.317-15.443c3.325-5.042,6.328-11.53,9.01-19.467C380.788,214.916,382.128,206.228,382.128,196.789z"/> </svg>',e.close='<svg class="vzb-icon vzb-icon-pin" viewBox="-150 -250 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1149 414q0 26 -19 45l-181 181l181 181q19 19 19 45q0 27 -19 46l-90 90q-19 19 -46 19q-26 0 -45 -19l-181 -181l-181 181q-19 19 -45 19q-27 0 -46 -19l-90 -90q-19 -19 -19 -46q0 -26 19 -45l181 -181l-181 -181q-19 -19 -19 -45q0 -27 19 -46l90 -90q19 -19 46 -19 q26 0 45 19l181 181l181 -181q19 -19 45 -19q27 0 46 19l90 90q19 19 19 46z"/></svg>',e.presentation='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path id="flip-chart-1" d="M334.549,393.834l58.607,68.666h-45.096l-58.709-68.666H334.549z M240.333,462.5h34.333v-68.666h-34.333 V462.5z M360.5,153.5h-34.334v137.334H360.5V153.5z M121.566,462.5h45.113l58.709-68.666h-45.197L121.566,462.5z M206,273.666 h-34.333v17.168H206V273.666z M257.5,239.333h-34.333v51.5H257.5V239.333z M309,205h-34.334v85.834H309V205z M446.334,102h-17.168 v257.5H85.833V102H68.667V50.5h377.667V102z M394.834,102H120.167v223.166h274.667V102z"/></svg>',e.about='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792"><path d="M1088 1256v240q0 16-12 28t-28 12h-240q-16 0-28-12t-12-28v-240q0-16 12-28t28-12h240q16 0 28 12t12 28zm316-600q0 54-15.5 101t-35 76.5-55 59.5-57.5 43.5-61 35.5q-41 23-68.5 65t-27.5 67q0 17-12 32.5t-28 15.5h-240q-15 0-25.5-18.5t-10.5-37.5v-45q0-83 65-156.5t143-108.5q59-27 84-56t25-76q0-42-46.5-74t-107.5-32q-65 0-108 29-35 25-107 115-13 16-31 16-12 0-25-8l-164-125q-13-10-15.5-25t5.5-28q160-266 464-266 80 0 161 31t146 83 106 127.5 41 158.5z"/></svg>',e.cursorArrow='<svg class="vzb-icon" viewBox="-200 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1389 1043q31 30 14 69-17 40-59 40h-382l201 476q10 25 0 49t-34 35l-177 75q-25 10-49 0t-35-34l-191-452-312 312q-19 19-45 19-12 0-24-5-40-17-40-59v-1504q0-42 40-59 12-5 24-5 27 0 45 19z"/></svg>',e.cursorPlus='<svg class="vzb-icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1088 800v64q0 13-9.5 22.5t-22.5 9.5h-224v224q0 13-9.5 22.5t-22.5 9.5h-64q-13 0-22.5-9.5t-9.5-22.5v-224h-224q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h224v-224q0-13 9.5-22.5t22.5-9.5h64q13 0 22.5 9.5t9.5 22.5v224h224q13 0 22.5 9.5t9.5 22.5zm128 32q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 53-37.5 90.5t-90.5 37.5q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>',e.cursorMinus='<svg class="vzb-icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1088 800v64q0 13-9.5 22.5t-22.5 9.5h-576q-13 0-22.5-9.5t-9.5-22.5v-64q0-13 9.5-22.5t22.5-9.5h576q13 0 22.5 9.5t9.5 22.5zm128 32q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 53-37.5 90.5t-90.5 37.5q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>',e.hundredPercent='<svg class="vzb-icon" xmlns="http://www.w3.org/2000/svg"><g transform="translate(18 11)"><text transform="scale(0.9 1)" x="0" y="0">100</text><text transform="scale(0.6 1)" class="percent" x="0" y="0">%</text></g></svg>',e.percent='<svg class="vzb-icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 1280q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm-768-768q0-52-38-90t-90-38-90 38-38 90 38 90 90 38 90-38 38-90zm1024 768q0 159-112.5 271.5t-271.5 112.5-271.5-112.5-112.5-271.5 112.5-271.5 271.5-112.5 271.5 112.5 112.5 271.5zm-96-1088q0 20-13 38l-1056 1408q-19 26-51 26h-160q-26 0-45-19t-19-45q0-20 13-38l1056-1408q19-26 51-26h160q26 0 45 19t19 45zm-672 320q0 159-112.5 271.5t-271.5 112.5-271.5-112.5-112.5-271.5 112.5-271.5 271.5-112.5 271.5 112.5 112.5 271.5z"/></svg>',e.side='<svg class="vzb-icon" viewBox="-120 -1540 1792 1792" xmlns="http://www.w3.org/2000/svg"><path transform="rotate(-90) scale(1.2)" d="M1024 448q0 -26 -19 -45l-448 -448q-19 -19 -45 -19t-45 19l-448 448q-19 19 -19 45t19 45t45 19h896q26 0 45 -19t19 -45zM1024 832q0 -26 -19 -45t-45 -19h-896q-26 0 -45 19t-19 45t19 45l448 448q19 19 45 19t45 -19l448 -448q19 -19 19 -45z"/></svg>',e.cursorHand='<svg class="vzb-icon" viewBox="0 -1540 1792 1792" xmlns="http://www.w3.org/2000/svg"><path transform="scale(1,-1)" d="M880 1408q-46 0 -79 -33t-33 -79v-656h-32v528q0 46 -33 79t-79 33t-79 -33t-33 -79v-528v-256l-154 205q-38 51 -102 51q-53 0 -90.5 -37.5t-37.5 -90.5q0 -43 26 -77l384 -512q38 -51 102 -51h688q34 0 61 22t34 56l76 405q5 32 5 59v498q0 46 -33 79t-79 33t-79 -33t-33 -79v-272h-32v528q0 46 -33 79t-79 33t-79 -33t-33 -79v-528h-32v656q0 46 -33 79t-79 33zM880 1536q68 0 125.5 -35.5t88.5 -96.5q19 4 42 4q99 0 169.5 -70.5t70.5 -169.5v-17q105 6 180.5 -64t75.5 -175v-498q0 -40 -8 -83l-76 -404q-14 -79 -76.5 -131t-143.5 -52h-688q-60 0 -114.5 27.5t-90.5 74.5l-384 512q-51 68 -51 154q0 106 75 181t181 75q78 0 128 -34v434q0 99 70.5 169.5t169.5 70.5q23 0 42 -4q31 61 88.5 96.5t125.5 35.5z"/></svg>'},function(t,e,n){var r=n(13);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(0),i=n(25),o=n(4);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(22),i=n(56),o=n(12),a=n(10),s=n(97);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var v,g,m=o(e),y=i(m),b=r(s,p,3),_=a(y.length),x=0,w=n?d(e,_):u?d(e,0):void 0;_>x;x++)if((f||x in y)&&(v=y[x],g=b(v,x,m),t))if(n)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(l)return!1;return h?-1:c||l?l:w}}},function(t,e,n){"use strict";function r(t,e){function n(){this.trackInstances&&n.instances.push(this),!o&&this.init&&this.init.apply(this,arguments)}e=1===arguments.length?t:e;var s=this.prototype;o=!0;var u=new this;return o=!1,(0,i.forEach)(e,function(t,n){"function"==typeof e[n]&&"function"==typeof s[n]&&a.test(e[n])?u[n]=function(t,e){return function(){var n=this._super;this._super=s[t];var r=e.apply(this,arguments);return this._super=n,r}}(n,e[n]):u[n]=t}),n.prototype=u,n.prototype.constructor=n,n.extend=r,n._collection={},n.instances=[],n.register=function(t,e){void 0!==this._collection[t]&&(0,i.warn)('"'+t+'" is already registered. Overwriting...'),this._collection[t]=e},n.unregister=function(t){this._collection[t]=void 0},n.getCollection=function(){return this._collection},n.define=function(t,e){this.prototype[t]=e},n.get=function(t,e){return this._collection.hasOwnProperty(t)?this._collection[t]:(e||(0,i.warn)('"'+t+'" was not found.'),!1)},arguments.length>1&&this.register&&this.register(t,n),n}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=!1,a=/xyz/.test(function(){})?/\b_super\b/:/.*/,s=function(){};s.extend=r,e.default=s},function(t,e,n){"use strict";if(n(8)){var r=n(40),i=n(3),o=n(4),a=n(0),s=n(71),u=n(103),c=n(22),l=n(46),h=n(38),f=n(15),d=n(48),p=n(28),v=n(10),g=n(135),m=n(42),y=n(26),b=n(14),_=n(58),x=n(6),w=n(12),M=n(94),S=n(43),k=n(20),E=n(44).f,O=n(96),T=n(39),C=n(7),z=n(30),P=n(62),A=n(69),D=n(99),I=n(53),j=n(66),R=n(45),L=n(98),N=n(125),F=n(9),B=n(19),H=F.f,q=B.f,V=i.RangeError,U=i.TypeError,W=i.Uint8Array,Y=Array.prototype,X=u.ArrayBuffer,K=u.DataView,G=z(0),Z=z(2),Q=z(3),J=z(4),$=z(5),tt=z(6),et=P(!0),nt=P(!1),rt=D.values,it=D.keys,ot=D.entries,at=Y.lastIndexOf,st=Y.reduce,ut=Y.reduceRight,ct=Y.join,lt=Y.sort,ht=Y.slice,ft=Y.toString,dt=Y.toLocaleString,pt=C("iterator"),vt=C("toStringTag"),gt=T("typed_constructor"),mt=T("def_constructor"),yt=s.CONSTR,bt=s.TYPED,_t=s.VIEW,xt=z(1,function(t,e){return Et(A(t,t[mt]),e)}),wt=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Mt=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),St=function(t,e){var n=p(t);if(n<0||n%e)throw V("Wrong offset!");return n},kt=function(t){if(x(t)&&bt in t)return t;throw U(t+" is not a typed array!")},Et=function(t,e){if(!(x(t)&&gt in t))throw U("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Tt(A(t,t[mt]),e)},Tt=function(t,e){for(var n=0,r=e.length,i=Et(t,r);r>n;)i[n]=e[n++];return i},Ct=function(t,e,n){H(t,e,{get:function(){return this._d[n]}})},zt=function(t){var e,n,r,i,o,a,s=w(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=O(s);if(void 0!=f&&!M(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(s.length),i=Et(this,n);n>e;e++)i[e]=h?l(s[e],e):s[e];return i},Pt=function(){for(var t=0,e=arguments.length,n=Et(this,e);e>t;)n[t]=arguments[t++];return n},At=!!W&&o(function(){dt.call(new W(1))}),Dt=function(){return dt.apply(At?ht.call(kt(this)):kt(this),arguments)},It={copyWithin:function(t,e){return N.call(kt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(kt(this),arguments)},filter:function(t){return Ot(this,Z(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){G(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(kt(this),arguments)},lastIndexOf:function(t){return at.apply(kt(this),arguments)},map:function(t){return xt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(kt(this),arguments)},reduceRight:function(t){return ut.apply(kt(this),arguments)},reverse:function(){for(var t,e=this,n=kt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return Q(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(kt(this),t)},subarray:function(t,e){var n=kt(this),r=n.length,i=m(t,r);return new(A(n,n[mt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:m(e,r))-i))}},jt=function(t,e){return Ot(this,ht.call(kt(this),t,e))},Rt=function(t){kt(this);var e=St(arguments[1],1),n=this.length,r=w(t),i=v(r.length),o=0;if(i+e>n)throw V("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Lt={entries:function(){return ot.call(kt(this))},keys:function(){return it.call(kt(this))},values:function(){return rt.call(kt(this))}},Nt=function(t,e){return x(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Nt(t,e=y(e,!0))?h(2,t[e]):q(t,e)},Bt=function(t,e,n){return!(Nt(t,e=y(e,!0))&&x(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(t,e,n):(t[e]=n.value,t)};yt||(B.f=Ft,F.f=Bt),a(a.S+a.F*!yt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Bt}),o(function(){ft.call({})})&&(ft=dt=function(){return ct.call(this)});var Ht=d({},It);d(Ht,Lt),f(Ht,pt,Lt.values),d(Ht,{slice:jt,set:Rt,constructor:function(){},toString:ft,toLocaleString:Dt}),Ct(Ht,"buffer","b"),Ct(Ht,"byteOffset","o"),Ct(Ht,"byteLength","l"),Ct(Ht,"length","e"),H(Ht,vt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,u){u=!!u;var c=t+(u?"Clamped":"")+"Array",h="get"+t,d="set"+t,p=i[c],m=p||{},y=p&&k(p),b=!p||!s.ABV,w={},M=p&&p.prototype,O=function(t,n){var r=t._d;return r.v[h](n*e+r.o,wt)},T=function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,wt)},C=function(t,e){H(t,e,{get:function(){return O(this,e)},set:function(t){return T(this,e,t)},enumerable:!0})};b?(p=n(function(t,n,r,i){l(t,p,c,"_d");var o,a,s,u,h=0,d=0;if(x(n)){if(!(n instanceof X||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return bt in n?Tt(p,n):zt.call(p,n);o=n,d=St(r,e);var m=n.byteLength;if(void 0===i){if(m%e)throw V("Wrong length!");if((a=m-d)<0)throw V("Wrong length!")}else if((a=v(i)*e)+d>m)throw V("Wrong length!");s=a/e}else s=g(n),a=s*e,o=new X(a);for(f(t,"_d",{b:o,o:d,l:a,e:s,v:new K(o)});h<s;)C(t,h++)}),M=p.prototype=S(Ht),f(M,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&j(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,r,i){l(t,p,c);var o;return x(n)?n instanceof X||"ArrayBuffer"==(o=_(n))||"SharedArrayBuffer"==o?void 0!==i?new m(n,St(r,e),i):void 0!==r?new m(n,St(r,e)):new m(n):bt in n?Tt(p,n):zt.call(p,n):new m(g(n))}),G(y!==Function.prototype?E(m).concat(E(y)):E(m),function(t){t in p||f(p,t,m[t])}),p.prototype=M,r||(M.constructor=p));var z=M[pt],P=!!z&&("values"==z.name||void 0==z.name),A=Lt.values;f(p,gt,!0),f(M,bt,c),f(M,_t,!0),f(M,mt,p),(u?new p(1)[vt]==c:vt in M)||H(M,vt,{get:function(){return c}}),w[c]=p,a(a.G+a.W+a.F*(p!=m),w),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){m.of.call(p,1)}),c,{from:zt,of:Pt}),"BYTES_PER_ELEMENT"in M||f(M,"BYTES_PER_ELEMENT",e),a(a.P,c,It),R(c),a(a.P+a.F*Mt,c,{set:Rt}),a(a.P+a.F*!P,c,Lt),r||M.toString==ft||(M.toString=ft),a(a.P+a.F*o(function(){new p(1).slice()}),c,{slice:jt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){M.toLocaleString.call([1,2])})),c,{toLocaleString:Dt}),I[c]=P?z:A,r||P||f(M,pt,A)}}else t.exports=function(){}},function(t,e,n){var r=n(130),i=n(0),o=n(61)("metadata"),a=o.store||(o.store=new(n(133))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},u=function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},c=function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},l=function(t,e,n,r){s(n,r,!0).set(t,e)},h=function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},d=function(t){i(i.S,"Reflect",t)};t.exports={store:a,map:s,has:u,get:c,set:l,keys:h,key:f,exp:d}},function(t,e,n){var r=n(39)("meta"),i=n(6),o=n(14),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(4)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,r)&&l(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,n){var r=n(7)("unscopables"),i=Array.prototype;void 0==i[r]&&n(15)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(55),u=r(s),c=n(50),l=(r(c),u.default.extend({_important:!1,objectLeafs:["autoconfig"],dataConnectedChildren:["use","which"],getClassDefaults:function(){var t={data:"data",which:null};return a.deepExtend(this._super(),t)},buildScale:function(){},setInterModelListeners:function(){var t=this,e=this._parent.getSpace(this);a.forEach(e,function(e){t._space[e]=t.getClosestModel(e),t._space[e].on("dataConnectedChange",t.handleDataConnectedChange.bind(t))}),this.getClosestModel("locale").on("dataConnectedChange",this.handleDataConnectedChange.bind(this))},onSuccessfullLoad:function(){this.validate(),this.buildScale(),this._super()},setWhich:function(t){var e={which:t.concept};t.dataSource&&(e.data=t.dataSource);var n=this.getClosestModel(e.data||this.data),r=n.getConceptprops(t.concept);"_default"===t.which?e.use="constant":r.use&&(e.use=r.use),r.scales&&(e.scaleType=r.scales[0]),"axis"!==this.getType()&&"size"!==this.getType()||(e.domainMin=null,e.domainMax=null,e.zoomedMin=null,e.zoomedMax=null),this.set(e)},setScaleType:function(t){this.buildScale(t)},preloadData:function(){return this.dataSource=this.getClosestModel(this.data),this._super()},afterPreload:function(){this.autoconfigureModel()},autoconfigureModel:function(){if(!this.which&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig);t&&(this.which=t.concept),a.printAutoconfigResult(this)}},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.which)return Promise.resolve();this.trigger("hook_change"),this.dataSource=this.getClosestModel(this.data);var e=this.getQuery(t.splashScreen);if(!0===e)return Promise.resolve();this._loadCall=!0,this.setReady(!1),a.timeStamp("Vizabi Model: Loading Data: "+this._id);var n=this._getAllParsers(),r=this.dataSource.load(e,n);return r.then(this.afterLoad.bind(this),function(t){return a.warn("Problem with query: ",t,JSON.stringify(e))}),r},handleDataConnectedChange:function(t){var e=this;a.defer(function(){e.startLoading().catch(a.warn)})},_isLoading:function(){return!this._loadedOnce||this._loadCall},afterLoad:function(t){this._dataId=t;var e=this._parent._getGrouping();e&&this.dataSource.setGrouping(t,e),a.timeStamp("Vizabi Model: Data loaded: "+this._id)},getQuery:function(t){var e=void 0;if(Object.keys(this._space).length<1)return a.error("Error:",this._id,"can't find the space"),!0;var n="property"===this.use||"constant"===this.use,r=n?{exceptType:"time"}:{},i=a.unique(this._getAllDimensions(r)),o=n&&i.length>1?[this.spaceRef?this._space[this.spaceRef].dim:this.which]:i;if(!(o=o.filter(function(t){return"_default"!==t}))||!o.length)return a.warn("getQuery() produced no query because no keys are available"),!0;var s={key:o,value:-1!=o.indexOf(this.which)||"constant"===this.use?[]:[this.which]},u=this._getFirstDimension({type:"time"}),c=n?"entities":"datapoints";if(e=this._getAllFilters(r,t),n&&i.length>1){var l={};e[o]&&(l[o]=e[o]),e=l}var h={};if(Object.keys(e).length>0){h.$and=[];for(var f in e){var d={};d[f]=e[f],h.$and.push(d)}}var p=this._getAllJoins(r,t);if(n&&i.length>1){var v={};p["$"+o]&&(v["$"+o]=p["$"+o]),p=v}return{language:this.getClosestModel("locale").id,from:c,animatable:u,select:s,where:h,join:p,order_by:n?["rank"]:[this._space.time.dim]}},_getAllDimensions:function(t){return this._parent._getAllDimensions(t)},_getFirstDimension:function(t){return this._parent._getFirstDimension(t)},_getAllFilters:function(t,e){t=t||{};var n={},r=this;return a.forEach(this._space,function(i){if(t.exceptType&&i.getType()===t.exceptType)return!0;if(t.onlyType&&i.getType()!==t.onlyType)return!0;if(!i.skipFilter&&!r._parent.skipFilter)if(a.arrayEquals(r._getAllDimensions(t),[i.getDimension()]))n=a.extend(n,i.getFilter(e));else{var o=i.getFilter(e);if(null!=o&&!a.isEmpty(o)){var s={};s[i.getDimension()]="$"+i.getDimension(),n=a.extend(n,s)}}}),n},_getAllJoins:function(t,e){var n={},r=this;return a.forEach(this._space,function(i){if(t.exceptType&&i.getType()===t.exceptType)return!0;if(t.onlyType&&i.getType()!==t.onlyType)return!0;if(a.arrayEquals(r._getAllDimensions(t),[i.getDimension()]))return!0;if(!i.skipFilter&&!r._parent.skipFilter){var o=i.getFilter(e);null==o||a.isEmpty(o)||(n["$"+i.getDimension()]={key:i.getDimension(),where:i.getFilter(e)})}}),n},_getAllParsers:function(){return Object.values(this._space).concat(this).reduce(function(t,e){var n=e.getParser(),r=e.getDimensionOrWhich();return n&&r&&!(r in t)&&(t[r]=n),t},{})},getTickFormatter:function(){var t=this;return function(e,n,r,i,o){if(o=t.getConceptprops().format,"share"===o&&(e*=100),a.isDate(e))return t._space.time.formatDate(e);if("time"===t.scaleType&&!a.isDate(e))return t._space.time.formatDate(new Date(e));if(a.isString(e)||!e&&0!==e)return e;if(Math.abs(e)<1e-14)return"0";var s="";if(i)return d3.format(".3r")(e);switch(Math.floor(Math.log(Math.abs(e))/Math.LN10+1e-14)){case-13:e*=1e12,s="p";break;case-10:e*=1e9,s="n";break;case-7:case-6:case-5:e*=1e6,s="\xb5";break;case-4:case-3:case-2:case-1:case 0:case 1:case 2:case 3:break;case 4:case 5:e/=1e3,s="k";break;case 6:case 7:case 8:e/=1e6,s="M";break;case 9:case 10:case 11:e/=1e9,s="B";break;case 12:case 13:case 14:e/=1e12,s="TR";break;default:return d3.format(".3s")(e).replace("G","B")}var u=d3.format(".3r")(e);return u.indexOf(".")>-1&&(u=u.replace(/0+$/,"").replace(/\.$/,"")),u+s+("percent"===o||"share"===o?"%":"")}},getScale:function(){return null==this.scale&&console.warn("scale is null"),this.scale},getUnique:function(t){if(this.isHook())return t||(t=this._getFirstDimension({type:"time"})),this.dataSource.getData(this._dataId,"unique",t)},getData:function(){return this.dataSource.getData(this._dataId)},getValidItems:function(){return this.dataSource.getData(this._dataId,"valid",this.which)},getNestedItems:function(t){return t?this.dataSource.getData(this._dataId,"nested",t):a.warn("No keys provided to getNestedItems(<keys>)")},getHaveNoDataPointsPerKey:function(){return this.dataSource.getData(this._dataId,"haveNoDataPointsPerKey",this.which)},getLimits:function(t){return this.dataSource.getData(this._dataId,"limits",t)},getFrame:function(t,e,n){return this.dataSource.getFrame(this._dataId,t,e,n)},getFrames:function(t,e){return this.dataSource.getFrames(this._dataId,t,e)},getItems:function(){var t=this,e=this.spaceRef&&this._space[this.spaceRef]?this._space[this.spaceRef].dim:t._getFirstDimension({exceptType:"time"}),n={},r=this.getValidItems();return a.isArray(r)&&r.forEach(function(r){n[r[e]]=r[t.which]}),n},getLimitsByDimensions:function(t){var e=this.dataSource.getData(this._dataId,"nested",t),n={},r=this.which,i=function(t,e,n){for(var i=t.reduce(function(t,e){var n=a.isDate(e[r])?e[r]:parseFloat(e[r]);return isNaN(n)||t.push(n),t},[]),o=void 0,s=void 0,u={},c=0;c<i.length;c+=1){var l=i[c];(void 0===o||l<o)&&(o=l),(void 0===s||l>s)&&(s=l)}u.min=o||0,u.max=s||100,e[n]=u};return function t(e,n,r,i){n--,a.forEach(e,function(e,o){n?(r[o]={},t(e,n,r[o],i)):i(e,r,o)})}(e,t.length,n,i),n},getConceptprops:function(){return"constant"!==this.use&&this.dataSource?this.dataSource.getConceptprops(this.which):{}},isDiscrete:function(){return"ordinal"===this.scaleType},validate:function(){var t=this;if(this._super(),this.which){var e=this.scaleType,n=this.getConceptprops(),r=n.scales,o=void 0===r?[]:r;this.allow&&this.allow.scales&&this.allow.scales.length>0&&(o=o.filter(function(e){return-1!=t.allow.scales.indexOf(e)}));var a=o.includes(e),s=o.includes("log")&&"genericLog"===e;if(!a&&!s&&o.length>0){var u=o,c=i(u,1),l=c[0];this.set({scaleType:"nominal"===l?"ordinal":l},null,!1)}}},getEntity:function(){return this._space[this.spaceRef||this._parent.getSpace()[0]]}}));e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(5),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=n(21),u=a.default.extend({init:function(t,e){this.name="gapminder-indicatorpicker",this.template='<span class="vzb-ip-holder"><span class="vzb-ip-select"></span><span class="vzb-ip-info"></span></span>';var n=this;this.model_expects=[{name:"time",type:"time"},{name:"targetModel"},{name:"locale",type:"locale"}],this.showHoverValues=t.showHoverValues||!1,this.model_binds={"translate:locale":function(t){n.updateView()},ready:function(t){n.updateView()}},this.model_binds["change:targetModel"]=function(t,e){-1!=e.indexOf("."+n.targetProp)&&n.updateView()},this._super(t,e),this.model.targetModel.isHook()&&this.showHoverValues&&this.model.targetModel._parent.on("change:highlight",function(t,e){var r=n.model.targetModel;if(r.isHook()){var o=r._parent;if(n.showHoverValues&&"constant"!=r.use){var a=o.getHighlighted();a.length>1||(a.length?o.getFrame(n.model.time.value,function(t){if(!n._highlighted&&t){var e=n.multiDim&&!r.isDiscrete()&&r.which!==o._getFirstDimension({type:"time"}),a=e?null:r.getEntity().getDimension(),s=o.getHighlighted(a);if(s.length){var u=e?i.getValueMD(s[0],t[r._name],n.KEYS):t[r._name][s[0]];if(u&&"color"===r._type&&r.isDiscrete()){var c=r.getColorlegendMarker();c.label.getItems()[u]&&(u=c.label.getItems()[u])}n._highlightedValue=u,n._highlighted=!n._highlightedValue&&0!==n._highlightedValue||"constant"!==r.use,n.updateView()}}}):(null!==e&&"highlight"!==e?e&&(n._highlightedValue=e[r._name],n._highlighted=!n._highlightedValue&&0!==n._highlightedValue||"constant"!==r.use):n._highlighted=!1,n.updateView()))}}}),this.targetProp=t.targetProp||this.model.targetModel.isHook()?"which":this.model.targetModel.isEntities()?"dim":null},ready:function(){this.KEYS=this.model.targetModel.isHook()?i.unique(this.model.targetModel._parent._getAllDimensions({exceptType:"time"})):[],this.multiDim=this.KEYS.length>1,this.updateView()},readyOnce:function(){var t=this;this.el_select=d3.select(this.element).select(".vzb-ip-select"),this.el_select.on("click",function(){var e=t.el_select.node().getBoundingClientRect(),n=t.root.element instanceof Array?t.root.element:d3.select(t.root.element),r=n.node().getBoundingClientRect(),i=t.root.findChildByName("gapminder-treemenu"),o=i.activeProfile.col_width,a=parseInt(i.wrapper.style("padding-left"),10)||0,s=parseInt(i.wrapper.style("padding-right"),10)||0,u=e.bottom-r.top,c=e.left-r.left-.5*(a+s+o-e.width);i.targetModel(t.model.targetModel).alignX("left").alignY("top").top(u).left(c).updateView().toggle()}),this.infoEl=d3.select(this.element).select(".vzb-ip-info"),t.model.targetModel.isHook()&&(i.setIcon(this.infoEl,s.question).select("svg").attr("width","0px").attr("height","0px"),this.infoEl.on("click",function(){t.root.findChildByName("gapminder-datanotes").pin()}),this.infoEl.on("mouseover",function(){var e=t.el_select.node().getBoundingClientRect(),n=t.root.element.getBoundingClientRect(),r=e.bottom-n.top,i=e.left-n.left+e.width;t.root.findChildByName("gapminder-datanotes").setHook(t.model.targetModel._name).show().setPos(i,r)}),this.infoEl.on("mouseout",function(){t.root.findChildByName("gapminder-datanotes").hide()}))},updateView:function(){if(this._readyOnce){var t=this,e=this.model.locale.getTFunction(),n=t.model.targetModel,r=n[t.targetProp],o=n._type,a=void 0;n.isHook()?a=n.getConceptprops():i.forEach(n._root._data,function(e){"data"===e._type&&(a=e.getConceptprops(n[t.targetProp]))});var s=void 0;if(this.showHoverValues&&n.isHook()&&this._highlighted){var u=a.unit?" "+a.unit:"",c=n.getTickFormatter();s=this._highlightedValue||0===this._highlightedValue?c(this._highlightedValue)+u:e("hints/nodata")}else s="_default"===r?e("indicator/_default/"+o):a.name;this.el_select.text(s).attr("title",function(t){return this.offsetWidth<this.scrollWidth?s:null});var l=!a.description&&!a.sourceName&&!a.sourceLink;this.infoEl.classed("vzb-invisible",l)}}});e.default=u},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(111),i=n(81);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(28),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(2),i=n(112),o=n(81),a=n(80)("IE_PROTO"),s=function(){},u=function(){var t,e=n(78)("iframe"),r=o.length;for(e.style.display="none",n(82).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(111),i=n(81).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(3),i=n(9),o=n(8),a=n(7)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(22),i=n(123),o=n(94),a=n(2),s=n(10),u=n(96),c={},l={},e=t.exports=function(t,e,n,h,f){var d,p,v,g,m=f?function(){return t}:u(t),y=r(n,h,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=s(t.length);d>b;b++)if((g=e?y(a(p=t[b])[0],p[1]):y(t[b]))===c||g===l)return g}else for(v=m.call(t);!(p=v.next()).done;)if((g=i(v,y,p.value,e))===c||g===l)return g};e.BREAK=c,e.RETURN=l},function(t,e,n){var r=n(16);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){Object.defineProperty(t,e,{configurable:!0,get:function(e){return function(){return t.get(e)}}(e),set:function(e){return function(n){return t.set(e,n)}}(e)})}function o(t,e,r,i){function o(t,e){r._ready&&(e=r._name+"."+e,r.trigger(t,e))}function a(t,e){r.trigger(t,e)}function s(t,e){r.setReady(!1),u.defer(function(){r.setReady()})}var c=void 0;if(!u.isPlainObject(e)||u.isArray(e)||r.isObjectLeaf(t)){c=new d(t,e,r,{change:o},i)}else{var l={change:o,hook_change:a,load_error:function(){return r.trigger.apply(r,arguments)},dataLoaded:function(){return r.trigger.apply(r,arguments)},ready:s};if(p.isModel(e,!0))c=e,c.on(l);else{var h=t.split("_")[0],f=p.get(h,!0);if(!f)try{f=n(391)("./"+h).default}catch(t){f=p}c=new f(t,e,r,l)}}return c}function a(t){return t._intervals||(t._parent?a(t._parent):new f.default)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),c=n(50),l=r(c),h=n(390),f=r(h),d=l.default.extend({_name:"",_parent:null,_persistent:!0,init:function(t,e,n,r,i){Object.defineProperty(this,"value",{get:this.get,set:this.set}),Object.defineProperty(this,"persistent",{get:function(){return this._persistent}}),this._super(),this._name=t,this._parent=n,this._root=n._root,this.set(e,!1,i),this.on(r)},get:function(t){return t&&!this._persistent?this._persistentVal:this._val},set:function(t,e,n){return!!this.isSetAllowed(t,e)&&(n=void 0===n||n,n&&(this._persistentVal=t),this._previousVal=u.deepClone(this._val),this._val=t,this._persistent=n,this.trigger(new c.ChangeEvent(this),this._name),!0)},isSetAllowed:function(t,e){return e||this._val!==t&&JSON.stringify(this._val)!==JSON.stringify(t)},setTreeFreezer:function(t){t?this.freeze(["hook_change"]):this.unfreeze()}}),p=l.default.extend({getClassDefaults:function(){return{}},objectLeafs:[],init:function(t,e,n,r){this._type=this._type||"model",this._id=this._id||u.uniqueId("m"),this._data={},this._parent=n,this._root=n?n._root:this,this._name=t,this._ready=!1,this._readyOnce=!1,this._loadedOnce=!1,this._intervals=a(this),this._space={},this._dataId=!1,this._limits={},this._super();var i=u.deepExtend({},this.getClassDefaults(),e);this.set(i),r&&this.on(r)},get:function(t){if(t){var e=this._data[t];return p.isModel(e)?e:e.value}return this._data},set:function(t,e,n,r){var a=this._setting,s=void 0,c=!1;if(u.isPlainObject(t)?(s=t,r=n,n=e):(s={})[t]=e,0!==Object.keys(s).length){this._setting=!0,this._freeze||(c=!0,this.setTreeFreezer(!0));var l=[];for(var h in s){e=s[h];var f=u.isPlainObject(e)&&this._data[h]instanceof p,v=(!u.isPlainObject(e)||this.isObjectLeaf(h))&&this._data[h]instanceof d;if(this._data[h]&&(f||v)){var g=this._data[h].value,m=this._data[h].set(e,n,r);v&&m&&l.push(h);var y="set"+u.capitalize(h);this.isHook()&&u.isFunction(this[y])&&e!==g&&this[y]("which"===h?{concept:e,dataSource:this.data}:e)}else this._data[h]=o(h,e,this,r),i(this,h)}a||(this.checkDataChanges(l),this.validate&&this.validate()),a&&!n||(this._setting=!1,!c||this.isHook()&&this.isLoading()||this.setTreeFreezer(!1),this.isHook()||this.isLoading()||this.setReady())}},checkDataChanges:function(){},setTreeFreezer:function(t){u.forEach(this._data,function(e){e.setTreeFreezer(t)}),t?this.freeze(["hook_change"]):this.unfreeze()},getType:function(){return this._type},getSubmodels:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=t?{}:[];return u.forEach(this._data,function(r,i){r&&void 0!==r._id&&p.isModel(r)&&e(r)&&(t?n[i]=r:n.push(r))}),n},getPlainObject:function(t){var e={},n=this;return u.forEach(this._data,function(r,i){if(r instanceof p)e[i]=r.getPlainObject(t);else if(!t||r.persistent){var o=r.get(t);u.isDate(o)&&(o=n.formatDate(o)),e[i]=o}}),e},formatDate:function(t){return t.toString()},getModelObject:function(t){return t?this._data[t]:this},clear:function(){var t=this.getSubmodels();for(var e in t)t[e].clear();this.setReady(!1),this.off(),this._intervals.clearAllIntervals(),this._data={}},validate:function(){},_isLoading:function(){return!1},isLoading:function(){if(this._isLoading())return!0;var t=this.getSubmodels(),e=void 0;for(e=0;e<t.length;e+=1)if(t[e].isLoading())return!0;return!1},setReady:function(t){if(!1===t)return this._ready=!1,void(this._parent&&this._parent.setReady&&this._parent.setReady(!1));var e=this._ready;this._ready=!this.isLoading()&&!this._setting,this._ready&&e!==this._ready&&(this._readyOnce||(this._readyOnce=!0,this.trigger("readyOnce")),this.trigger("ready"))},setInterModelListeners:function(){u.forEach(this.getSubmodels(),function(t){return t.setInterModelListeners()})},startPreload:function(){var t=[];return t.push(this.preloadData()),u.forEach(this.getSubmodels(),function(e){return t.push(e.startPreload())}),Promise.all(t)},preloadData:function(){return Promise.resolve()},startLoading:function(t){var e=this,n=[];return n.push(this.loadData(t)),u.forEach(this.getSubmodels(),function(e){return n.push(e.startLoading(t))}),Promise.all(n).then(this.onSuccessfullLoad.bind(this)).catch(function(t){var n=e.getClosestModel("locale").getTFunction();e.triggerLoadError([n("crash/error"),window.navigator.userAgent,t].join("<br>"))})},loadData:function(t){return this.isHook()&&u.warn("Hook "+this._name+" is not loading because it's not extending Hook prototype."),Promise.resolve()},loadSubmodels:function(t){var e=[],n=this.getSubmodels();return u.forEach(n,function(n){e.push(n.startLoading(t))}),e.length>0?Promise.all(e):Promise.resolve()},onSuccessfullLoad:function(){var t=this;this.validate(),u.timeStamp("Vizabi Model: Model loaded: "+this._name+"("+this._id+")"),this._loadedOnce=!0,this._loadCall=!1,this.setTreeFreezer(!1),u.defer(function(){return t.setReady()})},handleLoadError:function(){throw arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDefaultErrorMessage()},getDefaultErrorMessage:function(){return this.getClosestModel("locale").getTFunction()("connection/error")},triggerLoadError:function(t){u.error(t),this.trigger("load_error",t)},afterPreload:function(){var t=this.getSubmodels();u.forEach(t,function(t){t.afterPreload()})},isHook:function(){return Boolean(this.use)},getSubhooks:function(t){return this.getSubmodels(t,function(t){return t.isHook()})},getHookWhich:function(t){var e=[];return this.use&&this.use===t&&e.push(this.which),u.forEach(this.getSubmodels(),function(n){e=u.unique(e.concat(n.getHookWhich(t)))}),e},getIndicators:function(){return this.getHookWhich("indicator")},getProperties:function(){return this.getHookWhich("property")},getDimension:function(){return this.dim||!1},getDimensionOrWhich:function(){return this.dim||"constant"!=this.use&&this.which},getFilter:function(){return{}},mapValue:function(t){return t},getParser:function(){return null},getDefaults:function(){return u.deepExtend({},this.getClassDefaults(),this.getSubmodelDefaults())},getSubmodelDefaults:function(){var t={};return u.forEach(this.getSubmodels(!0),function(e,n){t[n]=e.getDefaults()}),t},isObjectLeaf:function(t){return-1!==this.objectLeafs.indexOf(t)},getClosestModel:function(t){var e=this.findSubmodel(t);return e||(this._parent?this._parent.getClosestModel(t):null)},findSubmodel:function(t){for(var e in this._data)if(e===t&&p.isModel(this._data[e]))return this._data[e];return null},isEntities:function(){return!1}});p.isModel=function(t,e){return t&&(t.hasOwnProperty("_data")||e&&t.hasOwnProperty("_val"))},e.default=p},function(t,e,n){"use strict";function r(t){l=!0,t&&(s.isArray(t)||(t=[t]),s.forEach(t,function(t){f[t]=!0}))}function i(){l=!1,f={};for(var t=Object.keys(h),e=0;e<t.length;e++){var n=h[t[e]];n&&n.unfreeze()}h={}}Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeEvent=e.DefaultEvent=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),u=n(31),c=function(t){return t&&t.__esModule?t:{default:t}}(u),l=!1,h=[],f={},d=e.DefaultEvent=c.default.extend({source:"",type:"default",init:function(t,e){this.source=t,e&&(this.type=e)}}),p=(e.ChangeEvent=d.extend("change",{type:"change",init:function(t){this._super(t)}}),c.default.extend({init:function(){this._id=this._id||s.uniqueId("e"),this._events={},this._freeze=!1,this._freezer=[],this._freezeExceptions={}},on:function(t,e,n){if(!this.splitEventParameters(t,e,n,this.on)){var r=this.traversePath(e);r&&(r._events[t]=r._events[t]||[],"function"==typeof n?r._events[t].push(n):s.warn("Can't bind event '"+t+"'. It must be a function."))}},off:function(t,e,n){if(0==arguments.length)return void(this._events={});if(!this.splitEventParameters(t,e,n,this.off)){var r=this.traversePath(e);if(r&&r._events.hasOwnProperty(t)){if(void 0===n)return void(r._events[t]=[]);var i=r._events[t].indexOf(n);i>-1?r._events[t].splice(i,1):s.warn("Could not unbind function "+n.name+". Function not in bound function list.")}}},splitEventParameters:function(t,e,n,r){var i=void 0;if(s.isArray(t)){for(i=0;i<t.length;i+=1)r.call(this,t[i],n);return!0}if(s.isObject(t)){for(i in t)r.call(this,i,t[i]);return!0}if("function"==typeof e){if(n=e,-1!==t.indexOf(":")){var o=t.split(":");t=o[0],e=o[1]}else e=void 0;return r.call(this,t,e,n),!0}if(s.isArray(e)){for(i=0;i<e.length;i+=1)r.call(this,t,e[i],n);return!0}if(n&&s.isArray(n)){for(i=0;i<n.length;i+=1)r.call(this,t,e,n[i]);return!0}return!1},traversePath:function(t){if(void 0===t||s.isArray(t)&&0==t.length)return this;if("string"==typeof t&&(t=t.split(".")),!s.isArray(t))return s.error("Path is wrong type. Path should be a string or array but is "+(void 0===t?"undefined":o(t))+"."),null;var e=t.shift();if(void 0!==this[e])return this.getModelObject(e).traversePath(t);s.warn("Can't find child \""+e+'" of the model '+this._name+".")},createEventFromType:function(t){if(t instanceof d)return t;var e=d.get(t,!0);return e?new e(this):new d(this,t)},trigger:function(t,e){var n=this,r=void 0,i=void 0;if(s.isArray(t))for(r=0,i=t.length;r<i;r+=1)this.trigger(t[r],e);else{var o=this.createEventFromType(t);if(this._events.hasOwnProperty(o.type)){var a=this;s.forEach(this._events[o.type],function(t){var r=function(){var n="Vizabi Event: "+o.type;s.timeStamp(n),t.apply(a,[o,e])};n.allowExecution(o)?r():(n._freezer.push(r),l&&!h[n._id]&&(n.freeze(),h[n._id]=n))})}}},allowExecution:function(t){return!this._freeze&&!l||l&&f.hasOwnProperty(t.type)||!l&&this._freeze&&this._freezeExceptions.hasOwnProperty(t.type)},freeze:function(t){if(this._freeze=!0,t){s.isArray(t)||(t=[t]);for(var e=0;e<t.length;e+=1)this._freezeExceptions[t[e]]=!0}},unfreeze:function(){for(this._freeze=!1,this._freezeExceptions={};this._freezer.length;){this._freezer.shift()()}},clearFrozen:function(){this._freeze=!1,this._freezeExceptions={},this._freezer=[]}}));p.freezeAll=r,p.unfreezeAll=i,e.default=p},function(t,e,n){var r=n(9).f,i=n(14),o=n(7)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(0),i=n(27),o=n(4),a=n(84),s="["+a+"]",u="\u200b\x85",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),h=function(t,e,n){var i={},s=o(function(){return!!a[t]()||u[t]()!=u}),c=i[t]=s?e(f):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},f=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=h},function(t,e){t.exports={}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(49),s=r(a),u=n(50),c=(r(u),s.default.extend({dataConnectedChildren:[],checkDataChanges:function(t){var e=this;if(t&&this.dataConnectedChildren&&(!o.isArray(t)&&o.isObject(t)&&(t=Object.keys(t)),0!=t.length&&0!=this.dataConnectedChildren.length)){t.filter(function(t){return-1!==e.dataConnectedChildren.indexOf(t)}).length>0&&(this.trigger("dataConnectedChange"),this.startLoading())}}}));e.default=c},function(t,e,n){var r=n(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(23),i=n(7)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(76),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={THUMB_HEIGHT:17,THUMB_STROKE_WIDTH:3},u={small:{},medium:{},large:{}},c=a.default.extend({init:function(t,e){this.name="singlehandleslider";var n=i.extend({},s);this.options=i.extend(n,this.options||{});var r=i.extend({},u);this.profiles=i.extend(r,this.profiles||{}),this.slider_properties=t.properties||{};var o=this.slider_properties.roundDigits;(o||0==o)&&(this.options.ROUND_DIGITS=o),this.slider_properties.domain&&(this.options.EXTENT_MIN=this.slider_properties.domain[0],this.options.EXTENT_MAX=this.slider_properties.domain[1]),this._super(t,e)},readyOnce:function(){this._super();var t=this.options,e=t.BAR_WIDTH,n=t.THUMB_HEIGHT;this.padding.top=.5*(n+t.THUMB_STROKE_WIDTH),this.padding.bottom=.5*(n+t.THUMB_STROKE_WIDTH)-e;var r=this._getComponentWidth();r<0&&(r=0),this.rescaler.domain(this.slider_properties.domain||[this.options.EXTENT_MIN,this.options.EXTENT_MAX]),this.rescaler.range(d3.range(0,r,r/(this.rescaler.domain().length-1)).concat([r])),this.sliderEl.call(this.brush.handleSize(t.THUMB_HEIGHT+t.THUMB_STROKE_WIDTH)),this.sliderEl.selectAll(".w").classed("vzb-hidden",!0),this.sliderEl.select(".selection").classed("vzb-hidden",!0),this.sliderEl.select(".overlay").lower().style("stroke-opacity","0").style("stroke-width",.5*n+"px").attr("rx",.5*e).attr("ry",.5*e),this.sliderEl.selectAll(".vzb-slider-thumb-badge").style("stroke-width",this.options.THUMB_STROKE_WIDTH+"px")},_getBrushEventListeners:function(){var t=this,e=this,n=this._super();return{start:n.start,brush:function(){!e.nonBrushChange&&d3.event.sourceEvent&&(e.slider_properties.suppressInput?e._snap(d3.event.selection):n.brush.apply(n,arguments))},end:function(){!e.nonBrushChange&&d3.event.sourceEvent&&(e.slider_properties.snapValue&&t._snap(d3.event.selection),e._setFromExtent(!0,!0))}}},_snap:function(t){var e=this.rescaler.invert(this._extentToValue(t)),n=this.rescaler.domain(),r=n[n.length-1]>n[0],i=d3.bisector(d3[r?"ascending":"descending"]).left(n,e)||1;e=(r?1:-1)*(e-n[i-1]-(n[i]-e))>0?n[i]:n[i-1],this._moveBrush(this._valueToExtent(e))},_createThumbs:function(t){var e=(this.options.BAR_WIDTH,.5*this.options.THUMB_HEIGHT),n=d3.arc().outerRadius(e).startAngle(0).endAngle(2*Math.PI);t.attr("transform","translate("+(e+.5*this.options.THUMB_STROKE_WIDTH)+","+(e+.5*this.options.THUMB_STROKE_WIDTH)+")").append("path").attr("d",n)},_resize:function(){this._super();var t=this._getComponentWidth();this.rescaler.range(d3.range(0,t||1,t/(this.rescaler.domain().length-1)||1).concat([t]))},_valueToExtent:function(t){return[this.rescaler.domain()[0],t]},_extentToValue:function(t){return t[1]},_setModel:function(t,e,n){if(this.slider_properties.suppressInput){if(this._extentToValue(t).toFixed(this.options.ROUND_DIGITS)==this.model.submodel[this.arg])return}this._super(t,e,n)}});e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default.extend({init:function(t,e){this.template='<span class="vzb-sc-holder vzb-dialog-checkbox"><input type="checkbox"><label></label></span>';var n=this;this.name="gapminder-simplecheckbox",this.checkbox=t.checkbox,this.submodel=t.submodel,this.model_expects=[{name:"mdl"},{name:"locale",type:"locale"}],this.model_binds={"change:mdl":function(t){n.updateView()},"translate:locale":function(t){n.updateView()}};var r=this.submodel?this.submodel+":":"";this.model_binds["change:mdl."+r+this.checkbox]=function(){n.updateView()},this._super(t,e)},ready:function(){this.parentModel=this.submodel?this.model.mdl[this.submodel]:this.model.mdl,this.updateView()},readyOnce:function(){var t=this;this.element=d3.select(this.element);var e="-check-"+t._id;this.labelEl=this.element.select("label").attr("for",e),this.checkEl=this.element.select("input").attr("id",e).on("change",function(){t._setModel(d3.select(this).property("checked"))})},updateView:function(){this.translator=this.model.locale.getTFunction(),this.labelEl.text(this.translator("check/"+this.checkbox)),this.checkEl.property("checked",!!this.parentModel[this.checkbox])},_setModel:function(t){this.parentModel[this.checkbox]=t}})},function(t,e,n){var r=n(3),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(18),i=n(10),o=n(42);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(23);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(6),i=n(23),o=n(7)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(7)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(15),i=n(16),o=n(4),a=n(27),s=n(7);t.exports=function(t,e,n){var u=s(t),c=n(a,u,""[t]),l=c[0],h=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,n){var r=n(2),i=n(13),o=n(7)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";var r=n(3),i=n(0),o=n(16),a=n(48),s=n(34),u=n(47),c=n(46),l=n(6),h=n(4),f=n(66),d=n(51),p=n(85);t.exports=function(t,e,n,v,g,m){var y=r[t],b=y,_=g?"set":"add",x=b&&b.prototype,w={},M=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||x.forEach&&!h(function(){(new b).entries().next()}))){var S=new b,k=S[_](m?{}:-0,1)!=S,E=h(function(){S.has(1)}),O=f(function(t){new b(t)}),T=!m&&h(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});O||(b=e(function(e,n){c(e,b,t);var r=p(new y,e,b);return void 0!=n&&u(n,g,r[_],r),r}),b.prototype=x,x.constructor=b),(E||T)&&(M("delete"),M("has"),g&&M("get")),(T||k)&&M(_),m&&x.clear&&delete x.clear}else b=v.getConstructor(e,t,g,_),a(b.prototype,n),s.NEED=!0;return d(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=y),w),m||v.setStrong(b,t,g),b}},function(t,e,n){for(var r,i=n(3),o=n(15),a=n(39),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=n(40)||!n(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(3)[t]})},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(0),i=n(13),o=n(22),a=n(47);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),e=void 0!==u,e&&i(u),void 0==t?new this:(n=[],e?(r=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(31),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=u.default.extend({QUERY_FROM_CONCEPTS:"concepts",QUERY_FROM_DATAPOINTS:"datapoints",QUERY_FROM_ENTITIES:"entities",CONDITION_CALLBACKS:{$gt:function(t,e){return e>t},$gte:function(t,e){return e>=t},$lt:function(t,e){return e<t},$lte:function(t,e){return e<=t},$in:function(t,e){return t.includes(e)}},ERRORS:{GENERIC_ERROR:"reader/error/generic"},_name:"reader",load:function(){return Promise.resolve({rows:[],columns:[]})},read:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=this._normalizeQuery(t,n);var r=t,i=r.select,o=r.from;return this.load().then(function(r){var a=r.rows,s=r.columns;switch(e.ensureDataIsCorrect(r,n),!0){case o===e.QUERY_FROM_CONCEPTS:return e._getConcepts(s,e._mapRows(a,t,n));case e._isDataQuery(o)&&i.key.length>0:return e._getData(a,t,n);default:return[]}}).catch(function(t){throw"[object Error]"==={}.toString.call(t)?e.error(e.ERRORS.GENERIC_ERROR,t):t})},ensureDataIsCorrect:function(){},_normalizeQuery:function(t,e){var n=Object.assign({},t),r=n.where,o=n.join;return r.$and&&(r.$and=r.$and.reduce(function(t,n){return Object.keys(n).forEach(function(r){var a=n[r];if("string"==typeof a&&a.startsWith("$")){var s=o[a].where;Object.keys(s).forEach(function(n){var r=s[n],o=e[n];t[n]=o?"object"===(void 0===r?"undefined":i(r))?Object.keys(r).reduce(function(t,e){return t[e]=o(r[e]),t},{}):o(r):r})}else{var u=e[r];t[r]=u?u(a):a}}),t},{})),n},_getConcepts:function(t,e){var n=this;return t.map(function(i,o){var s={concept:i};if(o<n.keySize)s.concept_type="entity_domain";else if(o===n.keySize)s.concept_type="time";else{s.concept_type="measure";for(var u=e.length-1;u>-1;--u)if(a.isString(e[u][i])&&""!==e[u][i]){s.concept_type="entity_set";var c=r(t,1);s.domain=c[0];break}}return s})},_getData:function(t,e,n){var i=e.order_by,o=void 0===i?[]:i,a=r(o,1),s=a[0];return this._mapRows(t,e,n).reduce(this._applyQuery(e),[]).sort(function(t,e){return t[s]-e[s]})},_isDataQuery:function(t){return[this.QUERY_FROM_DATAPOINTS,this.QUERY_FROM_ENTITIES].includes(t)},_mapRows:function(t,e,n){return t.map(this._getRowMapper(e,n))},_getRowMapper:function(t,e){var n=this;return function(r){var i=!0,o=Object.keys(r).reduce(function(o,s){if(i){var u=r[s],c=String(u).trim(),l=e[s],h=a.isString(u)?l?l(c):n._parse(c):u;h||0===h?o[s]=h:t.select.key.includes(s)&&(i=!1)}return o},{});return i&&o}},_parse:function(t){return t},_applyQuery:function(t){var e=this,n=t.select,i=t.from,o=r(n.key,1),a=o[0],s=[];return function(r,o){if(o){var u=o[a],c=i!==e.QUERY_FROM_ENTITIES||!s.includes(u);if(e._isSuitableRow(t,o)&&c){i===e.QUERY_FROM_ENTITIES&&s.push(u);var l=Object.keys(o).reduce(function(t,e){return(n.key.includes(e)||n.value.includes(e))&&(t[e]=o[e]),t},{});r.push(l)}}return r}},_isSuitableRow:function(t,e){var n=this,r=t.where;return!r.$and||Object.keys(r.$and).every(function(t){var o=r.$and[t],s=e[t];return void 0===s||("object"!==(void 0===o?"undefined":i(o))?s===o||!0===o&&a.isString(s)&&"true"===s.toLowerCase().trim()||!1===o&&a.isString(s)&&"false"===s.toLowerCase().trim():Object.keys(o).every(function(t){return n.CONDITION_CALLBACKS[t](o[t],s)}))})},error:function(t,e,n){return{code:t,message:e,payload:n}}});e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(5),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={EXTENT_MIN:0,EXTENT_MAX:1,BAR_WIDTH:6,THUMB_HEIGHT:20,THUMB_STROKE_WIDTH:4,INTRO_DURATION:250,ROUND_DIGITS:2},u={small:{},medium:{},large:{}},c=a.default.extend({init:function(t,e){this.name=this.name||"brushslider";var r=i.extend({},s);this.options=i.extend(r,this.options||{});var o=i.extend({},u);this.profiles=i.extend(o,this.profiles||{}),this.template=this.template||n(398),this.arg=t.arg||"extent",this.model_expects=this.model_expects||[{name:"submodel"},{name:"locale",type:"locale"}],this.model_binds=this.model_binds||{},this.model_binds.ready||(this.model_binds.ready=this.readyHandler.bind(this)),this.model_binds["change:submodel."+this.arg]||(this.model_binds["change:submodel."+this.arg]=this.changeHandler.bind(this)),this._setModel=i.throttle(this._setModel,50),this._super(t,e)},changeHandler:function(t,e){var n=this._valueToExtent(this.model.submodel[this.arg])||[this.options.EXTENT_MIN,this.options.EXTENT_MAX];this._moveBrush(n)},readyHandler:function(t){},readyOnce:function(){var t=this;this.element=d3.select(this.element),this.sliderSvg=this.element.select(".vzb-slider-svg"),this.sliderWrap=this.sliderSvg.select(".vzb-slider-wrap"),this.sliderEl=this.sliderWrap.select(".vzb-slider").classed("vzb-slider-"+this.name,!0);var e=this.options,n=e.BAR_WIDTH,r=.5*e.THUMB_HEIGHT,i=(this.padding={top:.5*n,left:r,right:r,bottom:r+e.THUMB_STROKE_WIDTH},this._getComponentWidth()||0);i<0&&(i=0),this.rescaler=d3.scaleLinear().domain([e.EXTENT_MIN,e.EXTENT_MAX]).range([0,i]).clamp(!0),this.brushEventListeners=this._getBrushEventListeners(),this.brush=d3.brushX().handleSize(2*r+2*n).on("start",this.brushEventListeners.start).on("brush",this.brushEventListeners.brush).on("end",this.brushEventListeners.end),this.sliderThumbs=this.sliderEl.selectAll(".handle").data([{type:"w"},{type:"e"}],function(t){return t.type}).enter().append("svg").attr("class",function(t){return"handle handle--"+t.type+" "+t.type}).classed("vzb-slider-thumb",!0),this._createThumbs(this.sliderThumbs.append("g").attr("class","vzb-slider-thumb-badge")),this.sliderEl.call(t.brush),this.sliderEl.selectAll(".selection,.overlay").attr("height",n).attr("rx",.25*n).attr("ry",.25*n).attr("transform","translate(0,"+.5*-n+")"),this.on("resize",function(){t._resize(),t._updateView()})},ready:function(){this.isRTL=this.model.locale.isRTL(),this._resize(),this._updateView()},_getBrushEventListeners:function(){var t=this;return{start:function(){if(!t.nonBrushChange&&d3.event.sourceEvent){if(d3.event.selection&&d3.event.selection[0]==d3.event.selection[1]){t.sliderEl.node().__brush.selection[1][0]+=.01}t._setFromExtent(!1,!1,!1)}},brush:function(){if(!t.nonBrushChange&&d3.event.sourceEvent){if(d3.event.selection&&d3.event.selection[0]==d3.event.selection[1]){t.sliderEl.node().__brush.selection[1][0]+=.01}t._setFromExtent(!0,!1,!1)}},end:function(){!t.nonBrushChange&&d3.event.sourceEvent&&t._setFromExtent(!0,!0)}}},_createThumbs:function(t){var e=this.options.BAR_WIDTH,n=.5*this.options.THUMB_HEIGHT;t.append("path").attr("d","M"+(n+e)+" "+(n+1.5*e)+"l"+-n+" "+1.5*n+"h"+2*n+"Z")},_updateThumbs:function(t){},_updateSize:function(){var t=this._getComponentWidth()+this.padding.left+this.padding.right;this.sliderSvg.attr("height",this._getComponentHeight()+this.padding.top+this.padding.bottom).attr("width",t),this.sliderWrap.attr("transform",this.isRTL?"translate("+(t-this.padding.right)+","+this.padding.top+") scale(-1,1)":"translate("+this.padding.left+","+this.padding.top+")")},_resize:function(){this._updateSize();var t=this._getComponentWidth();this.rescaler.range([0,t])},_getComponentWidth:function(){var t=this.element.node().offsetWidth-this.padding.left-this.padding.right;return t<0?0:t},_getComponentHeight:function(){return this.options.BAR_WIDTH},_updateView:function(){this.sliderEl.call(this.brush.extent([[0,0],[this._getComponentWidth(),this._getComponentHeight()]]));var t=this._valueToExtent(this.model.submodel[this.arg])||[this.options.EXTENT_MIN,this.options.EXTENT_MAX];this._moveBrush(t)},_moveBrush:function(t){var e=t.map(this.rescaler);this.nonBrushChange=!0,this.sliderEl.call(this.brush.move,[e[0],e[1]+.01]),this.nonBrushChange=!1,this._setFromExtent(!1,!1,!1)},_valueToExtent:function(t){return t},_extentToValue:function(t){return t},_setFromExtent:function(t,e,n){var r=d3.brushSelection(this.sliderEl.node());r&&(r=[this.rescaler.invert(r[0]),this.rescaler.invert(+r[1].toFixed(1))],this._updateThumbs(r),t&&this._setModel(r,e,n))},_setModel:function(t,e,n){var r=this.options.ROUND_DIGITS;t=[+t[0].toFixed(r),+t[1].toFixed(r)];var i={};i[this.arg]=this._extentToValue(t),this.model.submodel.set(i,e,n)}});e.default=c},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(6),i=n(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(3),i=n(25),o=n(40),a=n(110),s=n(9).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(61)("keys"),i=n(39);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(3).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(6),i=n(2),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(22)(Function.call,n(19).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,e,n){var r=n(6),i=n(83).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(28),i=n(27);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(28),i=n(27);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(40),i=n(0),o=n(16),a=n(15),s=n(14),u=n(53),c=n(91),l=n(51),h=n(20),f=n(7)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,v,g,m,y){c(n,e,v);var b,_,x,w=function(t){if(!d&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",S="values"==g,k=!1,E=t.prototype,O=E[f]||E["@@iterator"]||g&&E[g],T=O||w(g),C=g?S?w("entries"):T:void 0,z="Array"==e?E.entries||O:O;if(z&&(x=h(z.call(new t)))!==Object.prototype&&x.next&&(l(x,M,!0),r||s(x,f)||a(x,f,p)),S&&O&&"values"!==O.name&&(k=!0,T=function(){return O.call(this)}),r&&!y||!d&&!k&&E[f]||a(E,f,T),u[e]=T,u[M]=p,g)if(b={values:S?T:w("values"),keys:m?T:w("keys"),entries:C},y)for(_ in b)_ in E||o(E,_,b[_]);else i(i.P+i.F*(d||k),e,b);return b}},function(t,e,n){"use strict";var r=n(43),i=n(38),o=n(51),a={};n(15)(a,n(7)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(65),i=n(27);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(7)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(53),i=n(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(9),i=n(38);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(58),i=n(7)("iterator"),o=n(53);t.exports=n(25).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(278);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(12),i=n(42),o=n(10);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(35),i=n(126),o=n(53),a=n(18);t.exports=n(90)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r,i,o,a=n(22),s=n(116),u=n(82),c=n(78),l=n(3),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){y.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},d=function(t){delete m[t]},"process"==n(23)(h)?r=function(t){h.nextTick(a(y,t,1))}:v&&v.now?r=function(t){v.now(a(y,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,n){var r=n(3),i=n(100).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(23)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=l=!l}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(13);t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e,n){var r,i,o,a=Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?N(2,-24)-N(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for(t=L(t),t!=t||t===j?(i=t!=t?1:0,r=u):(r=F(B(t)/H),t*(o=N(2,-r))<1&&(r--,o*=2),t+=r+c>=1?l/o:l*N(2,1-c),t*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*N(2,e),r+=c):(i=t*N(2,c-1)*N(2,e),r=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*f,a}function i(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-j:j;r+=N(2,e),l-=a}return(c?-1:1)*r*N(2,l-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function c(t){return r(t,52,8)}function l(t){return r(t,23,4)}function h(t,e,n){E(t[C],e,{get:function(){return this[n]}})}function f(t,e,n,r){var i=+n,o=S(i);if(o+e>t[V])throw I(z);var a=t[q]._b,s=o+t[U],u=a.slice(s,s+e);return r?u:u.reverse()}function d(t,e,n,r,i,o){var a=+n,s=S(a);if(s+e>t[V])throw I(z);for(var u=t[q]._b,c=s+t[U],l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]}var p=n(3),v=n(8),g=n(40),m=n(71),y=n(15),b=n(48),_=n(4),x=n(46),w=n(28),M=n(10),S=n(135),k=n(44).f,E=n(9).f,O=n(98),T=n(51),C="prototype",z="Wrong index!",P=p.ArrayBuffer,A=p.DataView,D=p.Math,I=p.RangeError,j=p.Infinity,R=P,L=D.abs,N=D.pow,F=D.floor,B=D.log,H=D.LN2,q=v?"_b":"buffer",V=v?"_l":"byteLength",U=v?"_o":"byteOffset";if(m.ABV){if(!_(function(){P(1)})||!_(function(){new P(-1)})||_(function(){return new P,new P(1.5),new P(NaN),"ArrayBuffer"!=P.name})){P=function(t){return x(this,P),new R(S(t))};for(var W,Y=P[C]=R[C],X=k(R),K=0;X.length>K;)(W=X[K++])in P||y(P,W,R[W]);g||(Y.constructor=P)}var G=new A(new P(2)),Z=A[C].setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||b(A[C],{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},!0)}else P=function(t){x(this,P,"ArrayBuffer");var e=S(t);this._b=O.call(Array(e),0),this[V]=e},A=function(t,e,n){x(this,A,"DataView"),x(t,P,"DataView");var r=t[V],i=w(e);if(i<0||i>r)throw I("Wrong offset!");if(n=void 0===n?r-i:M(n),i+n>r)throw I("Wrong length!");this[q]=t,this[U]=i,this[V]=n},v&&(h(P,"byteLength","_l"),h(A,"buffer","_b"),h(A,"byteLength","_l"),h(A,"byteOffset","_o")),b(A[C],{getInt8:function(t){return f(this,1,t)[0]<<24>>24},getUint8:function(t){return f(this,1,t)[0]},getInt16:function(t){var e=f(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=f(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return o(f(this,4,t,arguments[1]))},getUint32:function(t){return o(f(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(f(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(f(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){d(this,1,t,a,e)},setUint8:function(t,e){d(this,1,t,a,e)},setInt16:function(t,e){d(this,2,t,s,e,arguments[2])},setUint16:function(t,e){d(this,2,t,s,e,arguments[2])},setInt32:function(t,e){d(this,4,t,u,e,arguments[2])},setUint32:function(t,e){d(this,4,t,u,e,arguments[2])},setFloat32:function(t,e){d(this,4,t,l,e,arguments[2])},setFloat64:function(t,e){d(this,8,t,c,e,arguments[2])}});T(P,"ArrayBuffer"),T(A,"DataView"),y(A[C],m.VIEW,!0),e.ArrayBuffer=P,e.DataView=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t.match(/\//g).length},i=function(t,e){var n=t.keys();return e&&(n=n.filter("function"==typeof e?function(t){return e(r(t))}:function(t){return r(t)===e+1})),n.reduce(function(e,n){var r=/([^\/]+)\..+$/.exec(n)[1];try{var i=t(n);e[r]=i.default||i}catch(t){console.warn("Import error",n,t)}return e},{})};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({_important:!0,getClassDefaults:function(){var t={use:null,which:null,domainMin:null,domainMax:null,zoomedMin:null,zoomedMax:null,scaleType:"linear",allow:{scales:["linear","log","genericLog","time","pow"]}};return i.deepExtend(this._super(),t)},autoconfigureModel:function(){if(!this.which&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig)||this.dataSource.getConcept({type:"time"});t&&(this.which=t.concept),i.printAutoconfigResult(this)}},_type:"axis",validate:function(){if(this._super(),this.scale&&"time"==this.scaleType){var t={};null==this.zoomedMin||i.isDate(this.zoomedMin)||(t.zoomedMin=this._space.time.parse(this.zoomedMin.toString())),null==this.zoomedMax||i.isDate(this.zoomedMax)||(t.zoomedMax=this._space.time.parse(this.zoomedMax.toString())),this.set(t)}},buildScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scaleType,e=void 0;if("time"==t){var n=this._space.time,r=n.splash?{min:n.parse(n.startOrigin),max:n.parse(n.endOrigin)}:{min:n.start,max:n.end};e=[r.min,r.max],this.scale=d3.scaleUtc().domain(e)}else{if(this.isDiscrete())e="constant"===this.use?[this.which]:this.getUnique(this.which);else{var o=this.getLimits(this.which);e=[o.min,o.max],e[0]=null!=this.domainMin?+this.domainMin:e[0],e[1]=null!=this.domainMax?+this.domainMax:e[1]}t=d3.min(e)<=0&&d3.max(e)>=0&&"log"===t?"genericLog":t;var a=("ordinal"===t?"point":t)||"linear";this.scale=d3["scale"+i.capitalize(a)]().domain(e)}this.scaleType=t},formatDate:function(t){return this._space.time.formatDate(t)},_getZoomed:function(t){var e=this["zoomed"+t];return null!==e?e:d3[t.toLowerCase()](this.getScale().domain())},getZoomedMin:function(){return this._getZoomed("Min")},getZoomedMax:function(){return this._getZoomed("Max")}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(49),s=r(a),u=n(75),c=r(u),l=n(50),h=r(l),f=n(392),d=s.default.extend({getClassDefaults:function(){var t={reader:"csv"};return o.deepExtend(this._super(),t)},trackInstances:!0,init:function(t,e,n,r){this._type="data",this.queryQueue={},this._collection={},this._collectionPromises={},this._super(t,e,n,r),this.readerObject=this.getReader()},preloadData:function(){return this.loadConceptProps()},load:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dataset&&(t.dataset=this.dataset),this.version&&(t.version=this.version);var r=f.DataStorage.getDataId(t,this.readerObject);return r?Promise.resolve(r):(o.timeStamp("Vizabi Data: Loading Data"),h.default.freezeAll(["hook_change","resize"]),f.DataStorage.loadFromReader(t,n,this.readerObject).then(function(t){return h.default.unfreezeAll(),t}).catch(function(n){return e.handleLoadError(n,t)}))},getAsset:function(t,e){var n=this;return this.readerObject.getAsset(t).then(function(t){return e(t)}).catch(function(e){return n.handleLoadError(e,t)})},getReader:function(){var t=c.default.get(this.reader);if(!t)throw new Error("Unknown reader: "+this.reader);return new t(this.getPlainObject())},getData:function(t,e,n,r){return t?f.DataStorage.getData(t,e,n,r):o.warn("Data.js 'get' method doesn't like the dataId you gave it: "+t)},loadConceptProps:function(){var t=this,e={select:{key:["concept"],value:["concept_type","domain","indicator_url","color","scales","interpolation","tags","name","name_short","name_catalog","description","format"]},from:"concepts",where:{},language:this.getClosestModel("locale").id};return this.load(e).then(this.handleConceptPropsResponse.bind(this)).catch(function(n){return t.handleLoadError(n,e)})},handleConceptPropsResponse:function(t){var e=this;this.conceptDictionary={_default:{concept_type:"string",use:"constant",scales:["ordinal"],tags:"_root"}},this.conceptArray=[],this.getData(t).forEach(function(t){var n={};t.concept_type&&(n.use="measure"==t.concept_type||"time"==t.concept_type?"indicator":"property"),n.concept_type=t.concept_type,n.sourceLink=t.indicator_url;try{n.color=t.color&&""!==t.color?JSON.parse(t.color):null}catch(t){n.color=null}try{n.scales=t.scales?JSON.parse(t.scales):null}catch(t){n.scales=null}if(!n.scales)switch(t.concept_type){case"measure":n.scales=["linear","log"];break;case"string":n.scales=["nominal"];break;case"entity_domain":case"entity_set":n.scales=["ordinal"];break;case"time":n.scales=["time"]}null==n.scales&&(n.scales=["linear","log"]),t.interpolation?n.interpolation=t.interpolation:"measure"==t.concept_type?n.interpolation=n.scales&&"log"==n.scales[0]?"exp":"linear":"time"==t.concept_type?n.interpolation="linear":n.interpolation="stepMiddle",n.concept=t.concept,n.domain=t.domain,n.tags=t.tags,n.format=t.format,n.name=t.name||t.concept||"",n.name_catalog=t.name_catalog||"",n.name_short=t.name_short||t.name||t.concept||"",n.description=t.description,e.conceptDictionary[t.concept]=n,e.conceptArray.push(n)})},getConceptprops:function(t){return t?o.getProp(this,["conceptDictionary",t])||o.warn("The concept "+t+" is not found in the dictionary"):this.conceptDictionary},getConcept:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index,n=void 0===e?0:e,r=t.type,i=void 0===r?null:r,o=t.includeOnlyIDs,a=void 0===o?[]:o,s=t.excludeIDs,u=void 0===s?[]:s;if(!i&&0==a.length&&0==u.length)return null;var c=this.conceptArray.filter(function(t){return!(i&&t.concept_type&&t.concept_type!==i||0!=a.length&&-1===a.indexOf(t.concept)||0!=u.length&&-1!=u.indexOf(t.concept))});return c[n]||c[c.length-1]},getDatasetName:function(){if(this.readerObject.getDatasetInfo){var t=this.readerObject.getDatasetInfo();return t.name+(t.version?" "+t.version:"")}return this._name},setGrouping:function(t,e){f.DataStorage.setGrouping(t,e)},getFrames:function(t,e,n){return f.DataStorage.getFrames(t,e,n,this.getConceptprops())},getFrame:function(t,e,n,r){return f.DataStorage.getFrame(t,e,n,r)},listenFrame:function(t,e,n,r){f.DataStorage.listenFrame(t,e,n,r)},handleLoadError:function(t,e){if(o.isObject(t)){t=((this.getClosestModel("locale").getTFunction()(t.code,t.payload)||"")+" "+(t.message||"")).trim()}o.warn("Problem with query: ",e),this._super(t)}});e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={build:1507740149342,version:"0.26.4"}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){return function e(n){function i(t,e,n){return n.indexOf(t)===e}function o(t){var e=o.scale().domain(),r=o.scale().range();if(!e[0]&&0!==e[0]||!e[1]&&0!==e[1]||!r[0]&&0!==r[0]||!r[1]&&0!==r[1])return a.warn("d3.axisSmart() skips action because of invalid domain "+JSON.stringify(e)+" or range "+JSON.stringify(r)+" of the attached scale");if(null!=m)return void o.highlightValueRun(t);var i=t.append("g").attr("class","tick widthSampling"),s=i.append("text").text("0");M.cssMargin||(M.cssMargin={}),M.cssMargin.top=s.style("margin-top"),M.cssMargin.bottom=s.style("margin-bottom"),M.cssMargin.left=s.style("margin-left"),M.cssMargin.right=s.style("margin-right"),M.widthOfOneDigit=s.node().getBBox().width,M.heightOfOneDigit=s.node().getBBox().height,i.remove(),o.labelFactory(M);var u=null;n(M.transitionDuration>0?u=t.transition().duration(M.transitionDuration):t),t.attr("fill",null),t.attr("font-size",null),t.attr("font-family",null),t.attr("text-anchor",null);var c="top"==o.orient()||"bottom"==o.orient()?h:l,p=c==h&&o.pivot()||c==l&&!o.pivot()?d:f;t.selectAll(".vzb-axis-value").data([null]).enter().append("g").attr("class","vzb-axis-value").classed("vzb-hidden",!0).append("text");var v=o.tickPadding();if(t.selectAll("text").each(function(t,e){if(null!=o.pivot()){var n=d3.select(this);n.attr("transform","rotate("+(o.pivot()?-90:0)+")"),n.style("text-anchor",p==f?"middle":"end"),n.attr("x",p==f?c==l?-v:0:-v),n.attr("y",p==f?c==l?0:v:0),n.attr("dx",p==f&&c==l?v:0),n.attr("dy",p==f?c==l?-v:".72em":".32em")}}),null!=o.repositionLabels()){var g=function(){t.selectAll(".tick").each(function(t){var e=d3.select(this).select("text"),n=o.repositionLabels()[t]||{x:0,y:0};e.attr("x",+e.attr("x")+n.x),e.attr("y",+e.attr("y")+n.y)})};u?u.on("end",function(){return g()}):g()}var y=o.scale();M.viewportLength&&t.selectAll(".tick").classed("vzb-hidden",function(t){return y(t)<0||y(t)>M.viewportLength}),null==o.tickValuesMinor()&&o.tickValuesMinor([]);var b=t.selectAll(".tick-minor").data(x);b.exit().remove(),b=b.enter().append("line").attr("class","tick-minor").merge(b);var _=o.tickSizeMinor().outbound,w=o.tickSizeMinor().inbound;b.classed("vzb-hidden",function(t){return y(t)<0||y(t)>M.viewportLength}).attr("y1",c==h?("top"==o.orient()?1:-1)*w:y).attr("y2",c==h?("top"==o.orient()?-1:1)*_:y).attr("x1",c==l?("right"==o.orient()?-1:1)*w:y).attr("x2",c==l?("right"==o.orient()?1:-1)*_:y),t.selectAll("path").remove();var S=t.selectAll(".vzb-axis-line").data([0]);S.exit().remove(),S=S.enter().append("line").attr("class","vzb-axis-line").merge(S),M.viewportLength?S.attr("x1",c==l?0:-1).attr("x2",c==l?0:M.viewportLength).attr("y1",0).attr("y2",c==h?0:M.viewportLength):S.attr("x1",c==l?0:d3.min(y.range())-(M.bump||0)-1).attr("x2",c==l?0:d3.max(y.range())+(M.bump||0)).attr("y1",c==h?0:d3.min(y.range())-(M.bump||0)).attr("y2",c==h?0:d3.max(y.range())+(M.bump||0))}function s(t,e){null==e&&(e=!0);var n=[],r=[];-1!=t.indexOf(0)&&(n.push([0]),r.push(t.indexOf(0)));for(var i=t.length;i>=1;i=i<4?i-1:i/2)!function(i){n.push(t.filter(function(t,n){return!(n%Math.floor(i)!=0||-1!=r.indexOf(n)&&e)&&(r.push(n),!0)}))}(i);return n}function u(t,e,n,r,i){if(!t)return null;var o={},a=n==l?{head:e.toolMargin.top,tail:e.toolMargin.bottom}:{head:e.toolMargin.right,tail:e.toolMargin.left},s=r.range(),u=e.bump;return e.viewportLength&&(t=t.filter(function(t){return r(t)>=0&&r(t)<=e.viewportLength}),s=[0,e.viewportLength],u=0),t.forEach(function(c,f){if(0==f||f==t.length-1){var d=Math.min(a.head,.5*e.widthOfOneDigit)+u+(n==h?1:0)*d3.max(s)-(n==h?0:1)*d3.min(s)+(n==h?-1:1)*r(c)-("x"==i)*e.formatter(c).length*e.widthOfOneDigit/2-("y"==i)*e.heightOfOneDigit/2-("x"==i)*parseInt(e.cssMargin.right)-("y"==i)*parseInt(e.cssMargin.top),p=Math.min(a.tail,.5*e.widthOfOneDigit)+u+(n==l?1:0)*d3.max(s)-(n==l?0:1)*d3.min(s)+(n==l?-1:1)*r(c)-("x"==i)*e.formatter(c).length*e.widthOfOneDigit/2-("y"==i)*e.heightOfOneDigit/2-("x"==i)*parseInt(e.cssMargin.left)-("y"==i)*parseInt(e.cssMargin.bottom);d>0&&(d=0),p>0&&(p=0),o[c]={x:0,y:0},o[c][i]=("y"==i&&n==l?-1:1)*(d-p)}}),t.forEach(function(a,s){if(0!=s&&s!=t.length-1){var u=Math.abs(r(a)-r(t[t.length-1]))-("y"==i)*(n==h?-1:1)*o[t[t.length-1]][i]-("x"==i)*(n==h?1:-1)*o[t[t.length-1]][i]-("x"==i)*e.widthOfOneDigit/2*e.formatter(a).length-("x"==i)*e.widthOfOneDigit/2*e.formatter(t[t.length-1]).length-("y"==i)*e.heightOfOneDigit*.7-("x"==i)*parseInt(e.cssMargin.left)-("y"==i)*parseInt(e.cssMargin.bottom),c=Math.abs(r(a)-r(t[0]))-("y"==i)*(n==l?-1:1)*o[t[0]][i]-("x"==i)*(n==l?1:-1)*o[t[0]][i]-("x"==i)*e.widthOfOneDigit/2*e.formatter(a).length-("x"==i)*e.widthOfOneDigit/2*e.formatter(t[0]).length-("y"==i)*e.heightOfOneDigit*.7-("x"==i)*parseInt(e.cssMargin.left)-("y"==i)*parseInt(e.cssMargin.bottom);u>0&&(u=0),c>0&&(c=0),o[a]={x:0,y:0},o[a][i]=("y"==i&&n==l?-1:1)*(u-c)}}),o}function c(){var t;o.labelerOptions().isDevMode&&(t=console).log.apply(t,arguments)}var l="vertical axis",h="horizontal axis",f="labels stack side by side",d="labels stack top to bottom",p="optimistic approximation: labels have different lengths",v="pessimistic approximation: all labels have the largest length";o.highlightValueRun=function(t){M.viewportLength&&"none"!=m&&(o.scale()(m)>M.viewportLength||o.scale()(m)<0)&&(m="none");var e="top"==o.orient()||"bottom"==o.orient()?h:l,n=e==h&&o.pivot()||e==l&&!o.pivot()?"y":"x",r=o.pivot()?-1:1;t.select(".vzb-axis-value").classed("vzb-hidden","none"==m);var i=void 0,a={};"none"!=m&&(i=t.select(".vzb-axis-value").node().getBBox(),a.bump=M.bump,a.formatter=M.formatter,a.viewportLength=M.viewportLength,a.toolMargin=M.toolMargin,a.cssMargin=M.cssMargin,a.widthOfOneDigit=i[o.pivot()?"height":"width"]/M.formatter(m).length,a.heightOfOneDigit=i[o.pivot()?"width":"height"]);var s=("none"==m?{x:0,y:0}:u([m],a,e,o.scale(),n)[m])[n],c=function(t){return"none"==m?"translate(0,0)":"translate("+(e==h?o.scale()(m)+s*r:0)+","+(e==l?o.scale()(m)+s*r:0)+")"},f=function(t,a,u){if("none"==m)return 1;var c=e==h?"width":"height",l=(o.repositionLabels()[t]||{x:0,y:0})[n];return o.hlOpacityScale()(Math.abs(o.scale()(t)+l*r-o.scale()(m)-s*r)-u.getBBox()[c]/2-i[c]/2)};y?(t.select(".vzb-axis-value").transition().duration(y).ease(d3.easeLinear).attr("transform",c),t.select(".vzb-axis-value").select("text").transition("text").delay(y).text("none"==m?"":M.formatter(m)),t.selectAll(".tick:not(.vzb-hidden)").each(function(t,e){d3.select(this).select("text").transition().duration(y).ease(d3.easeLinear).style("opacity",f(t,0,this))})):(t.select(".vzb-axis-value").interrupt().attr("transform",c).transition(),t.select(".vzb-axis-value").select("text").interrupt().text("none"==m?"":M.formatter(m)).transition(),t.selectAll(".tick:not(.vzb-hidden)").each(function(t,e){d3.select(this).select("text").interrupt().style("opacity",f(t,0,this)).transition()})),m=null};var g=d3.scaleLinear().domain([0,5]).range([0,1]).clamp(!0);o.hlOpacityScale=function(t){return arguments.length?(g=t,o):g};var m=null;o.highlightValue=function(t){return arguments.length?(m=t,o):m};var y=0;o.highlightTransDuration=function(t){return arguments.length?(y=t,o):y};var b=null;o.repositionLabels=function(t){return arguments.length?(b=t,o):b};var _=!1;o.pivot=function(t){return arguments.length?(_=!!t,o):_};var x=[];o.tickValuesMinor=function(t){return arguments.length?(x=t,o):x};var w={outbound:0,inbound:0};o.tickSizeMinor=function(t,e){return arguments.length?(w={outbound:t,inbound:e||0},c("setting",w),o):w};var M={};return o.labelerOptions=function(t){return arguments.length?(M=t,o):M},o.METHOD_REPEATING="repeating specified powers",o.METHOD_DOUBLING="doubling the value",o.labelFactory=function(t){function e(e,n){return 0==e||0==n?0:(null==n&&(n=t.logBase),Math.log(e)/Math.log(n))}if(null==t&&(t={}),"linear"!=t.scaleType&&"time"!=t.scaleType&&"genericLog"!=t.scaleType&&"log"!=t.scaleType&&"ordinal"!=t.scaleType)return o.ticks(t.limitMaxTickNumber).tickFormat(null).tickValues(null).tickValuesMinor(null).pivot(null).repositionLabels(null);if("ordinal"==t.scaleType)return o;null==t.logBase&&(t.logBase=10),null==t.stops&&(t.stops=[1,2,5,3,7,4,6,8,9]),null==t.removeAllLabels&&(t.removeAllLabels=!1),null==t.formatter&&(t.formatter=o.tickFormat()?o.tickFormat():function(t){return t+""}),t.cssLabelMarginLimit=5,null==t.cssMargin&&(t.cssMargin={}),(null==t.cssMargin.left||parseInt(t.cssMargin.left)<t.cssLabelMarginLimit)&&(t.cssMargin.left=t.cssLabelMarginLimit+"px"),(null==t.cssMargin.right||parseInt(t.cssMargin.right)<t.cssLabelMarginLimit)&&(t.cssMargin.right=t.cssLabelMarginLimit+"px"),(null==t.cssMargin.top||parseInt(t.cssMargin.top)<t.cssLabelMarginLimit)&&(t.cssMargin.top=t.cssLabelMarginLimit+"px"),(null==t.cssMargin.bottom||parseInt(t.cssMargin.bottom)<t.cssLabelMarginLimit)&&(t.cssMargin.bottom=t.cssLabelMarginLimit+"px"),null==t.toolMargin&&(t.toolMargin={left:30,bottom:30,right:30,top:30}),null==t.bump&&(t.bump=0),null==t.viewportLength&&(t.viewportLength=0),null==t.pivotingLimit&&(t.pivotingLimit=t.toolMargin[this.orient()]),null==t.showOuter&&(t.showOuter=!1),null==t.limitMaxTickNumber&&(t.limitMaxTickNumber=0);var n="top"==this.orient()||"bottom"==this.orient()?h:l;null==t.isPivotAuto&&(t.isPivotAuto=n==l),null==t.cssFontSize&&(t.cssFontSize="13px"),null==t.widthToFontsizeRatio&&(t.widthToFontsizeRatio=.75),null==t.heightToFontsizeRatio&&(t.heightToFontsizeRatio=1.2),null==t.widthOfOneDigit&&(t.widthOfOneDigit=parseInt(t.cssFontSize)*t.widthToFontsizeRatio),null==t.heightOfOneDigit&&(t.heightOfOneDigit=parseInt(t.cssFontSize)*t.heightToFontsizeRatio),null!=t.fitIntoScale&&"pessimistic"!=t.fitIntoScale||(t.fitIntoScale=v),"optimistic"==t.fitIntoScale&&(t.fitIntoScale=p),c("********** "+n+" **********");var a=o.scale().domain(),f=o.scale().range(),d=(Math.abs(a[a.length-1]-a[0]),Math.abs(f[f.length-1]-f[0])),g=d3.min([a[0],a[a.length-1]]),m=d3.max([a[0],a[a.length-1]]),y=("linear"==t.scaleType?g<0:g<=0)&&m>=0&&"time"!=t.scaleType,b=t.showOuter?[g,m]:[],_=[],x=5,w=d3.max(d3.range(g,m,(m-g)/17).concat(m).map(function(e){return t.formatter(e).replace(".","").length}))*t.widthOfOneDigit+parseInt(t.cssMargin.left),M=t.isPivotAuto&&(w>t.pivotingLimit&&n==l||!(w>t.pivotingLimit)&&!(n==l)),S=n==h&&M||n==l&&!M,k=!S&&t.heightOfOneDigit>t.pivotingLimit;if(t.removeAllLabels)return o.tickValues([]);if(g==m)return o.tickValues([g]).ticks(1).tickFormat(t.formatter);var E=function(e,n,r,i){if(null==e||e.length<=1)return!0;if(null==r&&(r=v),null==i&&(scaleType="none"),S)return n>e.length*(t.heightOfOneDigit+parseInt(t.cssMargin.top)+parseInt(t.cssMargin.bottom));var a=parseInt(t.cssMargin.left)+parseInt(t.cssMargin.right),s=d3.max(e.map(function(e){return t.formatter(e).length}));return"log"==i?(n=Math.abs(o.scale()(d3.max(e))-o.scale()(d3.min(e))))>d3.sum(e.map(function(e){return(t.widthOfOneDigit*(r==v?s:t.formatter(e).length)+a)*(1+Math.log(e.toString().replace(/([0.])/g,"")[0])/Math.LN10)})):n>e.length*a+(r==v?t.widthOfOneDigit*e.length*s:0)+(r==p?t.widthOfOneDigit*e.map(function(e){return t.formatter(e)}).join("").length:0)},O=function(e,n){if(null==n||0==n.length)return!1;n instanceof Array||(n=[n]);for(var r=0;r<n.length;r++)if(e!=n[r]&&0!=e&&Math.abs(o.scale()(e)-o.scale()(n[r]))<(S?t.heightOfOneDigit:(t.formatter(e).length+t.formatter(n[r]).length)*t.widthOfOneDigit/2))return!0;return!1};if("genericLog"==t.scaleType||"log"==t.scaleType){var T=o.scale().eps?o.scale().eps():0,C=y?[0]:[],z=m<T?[]:d3.range(Math.floor(e(Math.max(T,g))),Math.ceil(e(m)),1).concat(Math.ceil(e(m))).map(function(e){return Math.pow(t.logBase,e)}),P=g>-T?[]:d3.range(Math.floor(e(Math.max(T,-m))),Math.ceil(e(-g)),1).concat(Math.ceil(e(-g))).map(function(e){return-Math.pow(t.logBase,e)});if(null==t.method){var A=y?Math.max(Math.abs(m),Math.abs(g))/T:Math.max(Math.abs(m),Math.abs(g))/Math.min(Math.abs(m),Math.abs(g));t.method=10<=A&&A<=1024?this.METHOD_DOUBLING:this.METHOD_REPEATING}if(t.method==this.METHOD_DOUBLING&&function(){var t=[];y&&b.push(0);var e=[].concat(b),n=m<T?null:4*z[Math.floor(z.length/2)-1],r=g>-T?null:4*P[Math.floor(P.length/2)-1];if(n)for(var o=n;o<=m;o*=2)t.push(o);if(n)for(var a=n/2;a>=Math.max(g,T);a/=2)t.push(a);if(r)for(var u=r;u>=g;u*=2)t.push(u);if(r)for(var c=r/2;c<=Math.min(m,-T);c/=2)t.push(c);t=t.sort(d3.ascending).filter(function(t){return g<=t&&t<=m}),_=_.concat(t),t=s(t,!1);for(var l=b,h=0;h<t.length;h++){var f=l.concat(t[h]).filter(function(t){return!O(t,e)}).filter(i);if(!E(f,d,v,"none"))break;b=f}}(),t.method==this.METHOD_REPEATING){var D=C.concat(z).concat(P).sort(d3.ascending);t.stops.forEach(function(t,e){_=_.concat(D.map(function(e){return e*t}))}),D=s(D);var I=C.concat(b),j=!1;t.stops.forEach(function(e,n){if(0==n){for(var o,a=0;a<D.length;a++){var s=b.concat(D[a].map(function(t){return t*e})).filter(function(t){return!O(t,I)}).filter(function(t){return g<=t&&t<=m}).filter(i);if(!E(s,d,v,"none"))break;b=s}D=(o=[]).concat.apply(o,r(D))}else{if(j)return;var u=b.concat(D.map(function(t){return t*e})).filter(function(t){return g<=t&&t<=m}).filter(i);if(!E(u,d,v,"log"))return void(j=!0);if(b.length>t.limitMaxTickNumber&&0!=t.limitMaxTickNumber)return void(j=!0);b=u}})}}return"linear"!=t.scaleType&&"time"!=t.scaleType||function(){y&&b.push(0);var e=[].concat(b);x=S?Math.max(Math.floor(d/(t.heightOfOneDigit+parseInt(t.cssMargin.top))),2):Math.max(Math.floor(d/w),2),0!=t.limitMaxTickNumber&&x>t.limitMaxTickNumber&&(x=t.limitMaxTickNumber);var n=o.scale().ticks(x).sort(d3.ascending).filter(function(t){return g<=t&&t<=m});_=_.concat(n),n=s(n,!1);for(var r=b,a=0;a<n.length;a++){var u=r.concat(n[a]).filter(function(t){return!O(t,e)}).filter(i);if(!E(u,d,t.fitIntoScale,"none"))break;b=u}b=b.filter(function(t){return!O(t,e)}).filter(i)}(),null!=b&&b.length<=2&&!y&&(b=Math.abs(o.scale()(g)-o.scale()(m))<(S?t.heightOfOneDigit:(t.formatter(g).length+t.formatter(m).length)*t.widthOfOneDigit)?[m]:[g,m],1!=b.length||"linear"!=t.scaleType&&"time"!=t.scaleType||(_=[])),null!=b&&b.length<=3&&y&&(b=O(0,[g,m])?[g,m]:[g,0,m]),null!=b&&b.sort(function(t,e){return(n==h?-1:1)*(o.scale()(e)-o.scale()(t))}),k&&(b=[]),_=_.filter(function(t){return-1==b.indexOf(t)&&g<=t&&t<=m}),c("final result",b),o.ticks(x).tickFormat(t.formatter).tickValues(b).tickValuesMinor(_).pivot(M).repositionLabels(u(b,t,n,o.scale(),S?"y":"x"))},o.copy=function(){return e(d3["axis"+a.capitalize(t)]())},o.orient=function(){return arguments.length?o:t},d3.rebind(o,n,"scale","ticks","tickArguments","tickValues","tickFormat","tickSize","tickSizeInner","tickSizeOuter","tickPadding")}(d3["axis"+a.capitalize(t)]())}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o)},function(t,e,n){t.exports=!n(8)&&!n(4)(function(){return 7!=Object.defineProperty(n(78)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(7)},function(t,e,n){var r=n(14),i=n(18),o=n(62)(!1),a=n(80)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(9),i=n(2),o=n(41);t.exports=n(8)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(18),i=n(44).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){"use strict";var r=n(41),i=n(63),o=n(57),a=n(12),s=n(56),u=Object.assign;t.exports=!u||n(4)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,g=0;v>g;)h.call(d,f=p[g++])&&(n[f]=d[f]);return n}:u},function(t,e,n){"use strict";var r=n(13),i=n(6),o=n(116),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(3).parseInt,i=n(52).trim,o=n(84),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(3).parseFloat,i=n(52).trim;t.exports=1/r(n(84)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(23);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(6),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(87),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),l=r(t);return i<u?l*c(i/u/a)*u*a:(e=(1+a/o)*i,n=e-(e-i),n>s||n!=n?l*(1/0):l*n)}},function(t,e,n){var r=n(2);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(13),i=n(12),o=n(56),a=n(10);t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),h=a(c.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(s=e(s,l[f],f,c));return s}},function(t,e,n){"use strict";var r=n(12),i=n(42),o=n(10);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),h=1;for(u<s&&s<u+l&&(h=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=h,u+=h;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(8)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(67)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(2),i=n(6),o=n(102);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(131),i=n(54);t.exports=n(70)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(9).f,i=n(43),o=n(48),a=n(22),s=n(46),u=n(47),c=n(90),l=n(126),h=n(45),f=n(8),d=n(34).fastKey,p=n(54),v=f?"_s":"size",g=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=p(this,e),r=g(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(p(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return p(this,e)[v]}}),l},def:function(t,e,n){var r,i,o=g(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var r=n(131),i=n(54);t.exports=n(70)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(30)(0),o=n(16),a=n(34),s=n(114),u=n(134),c=n(6),l=n(4),h=n(54),f=a.getWeak,d=Object.isExtensible,p=u.ufstore,v={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=f(t);return!0===e?p(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(h(this,"WeakMap"),t,e)}},y=t.exports=n(70)("WeakMap",g,m,u,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(v),7).get(v)})&&(r=u.getConstructor(g,"WeakMap"),s(r.prototype,m),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!d(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(48),i=n(34).getWeak,o=n(2),a=n(6),s=n(46),u=n(47),c=n(30),l=n(14),h=n(54),f=c(5),d=c(6),p=0,v=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},m=function(t,e){return f(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(h(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(28),i=n(10);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(44),i=n(63),o=n(2),a=n(3).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";function r(t,e,n,c,l,h,f,d){for(var p,v,g=l,m=0,y=!!f&&s(f,d,3);m<c;){if(m in n){if(p=y?y(n[m],m,e):n[m],v=!1,o(p)&&(v=p[u],v=void 0!==v?!!v:i(p)),v&&h>0)g=r(t,e,p,a(p.length),g,h-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=p}g++}m++}return g}var i=n(64),o=n(6),a=n(10),s=n(22),u=n(7)("isConcatSpreadable");t.exports=r},function(t,e,n){var r=n(10),i=n(86),o=n(27);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var h=l-u,f=i.call(c,Math.ceil(h/c.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(t,e,n){var r=n(41),i=n(18),o=n(57).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){var r=n(58),i=n(141);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(47);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(49),u=r(s),c=n(5),l=r(c),h=n(21),f=n(50),d=r(f),p=u.default.extend({init:function(t,e){this._id=a.uniqueId("tm"),this._type="tool",this._component=t,this.getClassDefaults=function(){return t.default_model};var n=a.extend(t.getToolListeners(),e.bind);delete e.bind,this._super(t.name,e,null,n)},getDefaults:function(){return a.deepExtend({},this.getSubmodelDefaults(),this.getClassDefaults())},validate:function(){function t(r){var i=JSON.stringify(n.getPlainObject());n._component.validate(n);var o=JSON.stringify(n.getPlainObject());r>=e?a.error("Max validation loop."):i!==o&&t(r++)}var e=10,n=this;t(0)},onSuccessfullLoad:function(){this.checkTimeLimits(),this._super()},checkTimeLimits:function(){var t=this.state.time,e=this.state.getSubmodels(!1,function(t){return"marker"==t._type&&t.space.includes("time")});if(t&&e.length){var n={};if(e.forEach(function(t){var e=t.getTimeLimits();n.min=d3.max([n.min,e.min]),n.max=d3.min([n.max,e.max])}),!a.isDate(n.min)||!a.isDate(n.max))return a.warn("checkTimeLimits(): min-max look wrong: "+n.min+" "+n.max+". Expecting Date objects. Ensure that time is properly parsed in the data from reader");var r={};t.start-n.min==0&&(t.start||t.startOrigin)||(r.start=d3.max([n.min,t.parse(t.startOrigin)])),t.end-n.max==0&&(t.end||t.endOrigin)||(r.end=d3.min([n.max,t.parse(t.endOrigin)])),t.set(r,!1,!1),(r.start||r.end)&&e.forEach(function(e){a.forEach(e.getSubhooks(),function(e){e.which==t.dim&&e.buildScale()})}),t.validate()}}}),v=l.default.extend({init:function(t,e){this._id=a.uniqueId("t"),this.template=this.getToolTemplate(),this._super({placeholder:t,model:e}),this.prerender(),this.setCSSClasses(),this.setResizeHandler(),this.postrender()},createModel:function(t){t=t||{},t.bind=t.bind||{},this.model=new p(this,t),this.model.setInterModelListeners()},getToolTemplate:function(){return this.template||'<div class="vzb-tool vzb-tool-'+this.name+'"><div class="vzb-tool-stage"><div class="vzb-tool-viz"></div><div class="vzb-tool-time-speed-sliders"><div class="vzb-tool-timeslider"></div><div class="vzb-tool-stepped-speed-slider"></div></div></div><div class="vzb-tool-sidebar"><div class="vzb-tool-dialogs"></div><div class="vzb-tool-buttonlist"></div></div><div class="vzb-tool-datanotes vzb-hidden"></div><div class="vzb-tool-treemenu vzb-hidden"></div><div class="vzb-tool-datawarning vzb-hidden"></div><div class="vzb-tool-labels vzb-hidden"></div></div>'},getToolListeners:function(){var t=this,e=this;return a.extend(this.model_binds,{readyOnce:function(){return t.setResizeHandler()},change:function(t,n){e._ready&&(e.model.validate(),t.source.persistent&&e.model.trigger(new f.DefaultEvent(t.source,"persistentChange")))},hook_change:function(){e.model.state.time.splash||e.beforeLoading()},"resize:ui":function(){e._ready&&e.triggerResize()},"translate:locale":function(){e.translateStrings(),e.model.ui.setRTL(e.model.locale.isRTL())},load_error:function(){t.renderError(),t.error.apply(t,arguments)}})},setResizeHandler:function(){this.model.ui.setContainer(this.element)},getVizWidthHeight:function(){var t=0,e=0;return this.element?(t=d3.select(this.element).select(".vzb-tool-viz").node().clientWidth,e=d3.select(this.element).select(".vzb-tool-viz").node().clientHeight):a.warn("Tool getVizWidthHeight(): missing this.element"),{width:t,height:e}},triggerResize:a.throttle(function(){this.trigger("resize")},100),startLoading:function(){var t=this;this._super(),Promise.all([this.model.startPreload(),this.startPreload()]).then(this.afterPreload.bind(this)).then(this.loadSplashScreen.bind(this)).then(function(){return a.delay(300)}).then(this.model.startLoading.bind(this.model)).then(this.finishLoading.bind(this)).catch(function(e){d.default.unfreezeAll(),t.model.triggerLoadError(e)})},loadSplashScreen:function(){return this.model.ui.splash?(this.model.state.time.splash=!0,this.model.startLoading({splashScreen:!0})):Promise.resolve()},finishLoading:function(){this.model.state.time.splash=!1},getPersistentModel:function(){function t(e){for(var n in e)"function"==typeof e[n]?(delete e[n],a.warn("minModel validation. Function found in enumerable properties of "+n+". This key is deleted from minModel")):"object"===i(e[n])&&t(e[n])}var e=this.model.getPlainObject(!0);return t(e),e},getPersistentMinimalModel:function(t){var e=this.model.getDefaults(),n=this.getPersistentModel(),r=a.deepExtend(e,t);return a.diffObject(n,r)},clear:function(){this.model.ui.clear(),this.setModel=this.getModel=function(){},this._super()},error:function(t,e){e||(e=t&&"data"===t.type?"Error loading chart data. <br>Please, try again later.":"Error loading chart"),this.placeholder.innerHTML='<div class="vzb-error-message"><h1>'+h.warn+"</h1><p>"+e+"</p></div>"},setModel:function(t,e){e?this.model.reset(t):this.model.set(t),this.setCSSClasses()},getModel:function(){return this.model.getPlainObject()||{}},beforeLoading:function(){a.addClass(this.placeholder,"vzb-loading-data")},validate:function(t){if(!(t=this.model||t)||!t.state)return a.warn("tool validation aborted: model.state looks wrong: "+t)},setCSSClasses:function(){a.addClass(this.placeholder,"vzb-placeholder"),this.model.ui&&this.model.ui.buttons&&this.model.ui.buttons.length?a.removeClass(this.element,"vzb-buttonlist-off"):a.addClass(this.element,"vzb-buttonlist-off")}});e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={_continuous:{_default:"#ffb600",0:"hsl(270, 80%, 55%)",25:"hsl(202.5, 80%, 55%)",50:"hsl(135, 80%, 55%)",75:"hsl(48, 70%, 62%)",100:"hsl(0, 80%, 55%)"},_discrete:{_default:"#ffb600",0:"#4cd843",1:"#e83739",2:"#ff7f00",3:"#c027d4",4:"#d66425",5:"#0ab8d8",6:"#bcfa83",7:"#ff8684",8:"#ffb04b",9:"#f599f5",10:"#f4f459",11:"#7fb5ed"},_default:{_default:"#ffb600"}},u=a.default.extend({getClassDefaults:function(){var t={use:null,which:null,scaleType:null,syncModels:[],palette:{},paletteLabels:null,allow:{scales:["linear","log","genericLog","time","pow","ordinal"]}};return i.deepExtend(this._super(),t)},autoconfigureModel:function(){if(!this.which&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig);if(t){var e={which:t.concept,use:t.use||"indicator",scaleType:t.scales&&t.scales[0]?t.scales[0]:"linear"};this.set(e)}else{var n={which:"_default",use:"constant",scaleType:"ordinal"};this.set(n)}i.printAutoconfigResult(this)}},init:function(t,e,n,r){var i=this;this._type="color",this._super(t,e,n,r),this._syncModelReferences={},this._hasDefaultColor=!1,this.on("hook_change",function(){if(!i._readyOnce&&!i._loadCall&&(i._setSyncModels(),i.palette&&0!==Object.keys(i.palette._data).length)){var t=i.getDefaultPalette(),e=i.getPalette(!0),n={};Object.keys(t).forEach(function(r){e[r]&&t[r]!=e[r]||(n[r]=t[r])}),i.set("palette",n,!1,!1)}})},setInterModelListeners:function(){this._super(),this._setSyncModels()},getColorShade:function(t){var e=this.getPalette();if(!t)return i.warn("getColorShade() is missing arguments");if(t.colorID&&e[t.colorID]||(t.colorID="_default"),!i.isArray(e[t.colorID]))return"shade"==t.shadeID?d3.rgb(e[t.colorID]).darker(.5).toString():e[t.colorID];var n=this.getConceptprops().color,r=t.shadeID&&n&&n.shades&&n.shades[t.shadeID]?n.shades[t.shadeID]:0;return e[t.colorID][r]},isUserSelectable:function(){var t=this.getConceptprops().color;return null==t||null==t.selectable||t.selectable},setWhich:function(t){this.palette&&(this.palette._data={}),this._super(t),this._setSyncModels()},_setSyncModels:function(){var t=this;this.syncModels.forEach(function(e){var n=t.getClosestModel(e),r=n.isHook()?n._parent:n,i=r.getClosestModel(r.space[0]);t._syncModelReferences[e]={model:n,marker:r,entities:i},t.isDiscrete()&&t._setSyncModel(n,r,i)})},_setSyncModel:function(t,e,n){if(t==e){var r={dim:this.which,show:{}};e.setDataSourceForAllSubhooks(this.data),n.set(r,!1,!1)}else t.isDiscrete()&&"constant"!==t.use&&t.set({which:this.which,data:this.data},!1,!1)},getColorlegendMarker:function(){return(this._syncModelReferences.marker_colorlegend||{}).marker},getColorlegendEntities:function(){return(this._syncModelReferences.marker_colorlegend||{}).entities},setColor:function(t,e,n){var r=this.getPalette();r[e]=t,this.scale.range(i.values(r)),this.palette.set(e,t,n,n)},mapValue:function(t){return null!=this.scale&&this.isDiscrete()&&this._hasDefaultColor&&-1==this.scale.domain().indexOf(t)&&(t="_default"),this._super(t)},getDefaultPalette:function(){var t=this.getConceptprops().color,e=void 0;return this.discreteDefaultPalette=!1,t&&t.palette?e=i.clone(t.palette):s[this.which]?e=i.clone(s[this.which]):"constant"===this.use?e=/^#([0-9a-f]{3}|[0-9a-f]{6})$/.test(this.which)?{_default:this.which}:i.clone(s._default):(e=i.clone(s[this.isDiscrete()?"_discrete":"_continuous"]),this.discreteDefaultPalette=!0),e},_getPaletteLabels:function(){var t=this.getConceptprops().color,e=null;return t&&t.paletteLabels&&(e=i.clone(t.paletteLabels)),e},getPaletteLabels:function(){return this.paletteLabels.getPlainObject()},getPalette:function(t){if(!this.palette||0===Object.keys(this.palette._data).length){var e=this.getDefaultPalette();this.set("palette",e,!1,!1);var n=this._getPaletteLabels();this.set("paletteLabels",n,!1,!1)}var r=this.palette.getPlainObject();return"indicator"!==this.use||t||delete r._default,r},buildScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scaleType,e=this,n=e.getPalette(),r=Object.keys(n),o=i.values(n);if(this._hasDefaultColor=r.indexOf("_default")>-1,"time"==t){var a=this._space.time,s=a.splash?{min:a.parse(a.startOrigin),max:a.parse(a.endOrigin)}:{min:a.start,max:a.end},u=s.max-s.min==0;r=r.sort(function(t,e){return t-e}),o=r.map(function(t){return u?n[r[0]]:n[t]}),r=r.map(function(t){return s.min.valueOf()+t/100*(s.max.valueOf()-s.min.valueOf())}),this.scale=d3.scaleUtc().domain(r).range(o).interpolate(d3.interpolateCubehelix)}else if(this.isDiscrete())o=o.map(function(t){return i.isArray(t)?t[0]:t}),t="ordinal",this.discreteDefaultPalette&&(r=r.concat(this.getUnique(this.which))),this.scale=d3["scale"+i.capitalize(t)]().domain(r).range(o);else{var c=this.getLimits(this.which);c=[c.min,c.max];var l=c[1]-c[0]==0;if(r=r.sort(function(t,e){return t-e}),o=r.map(function(t){return l?n[r[0]]:n[t]}),r=r.map(function(t){return c[0]+t/100*(c[1]-c[0])}),d3.min(r)<=0&&d3.max(r)>=0&&"log"===t&&(t="genericLog"),"log"===t||"genericLog"===t){var h=d3.scaleGenericlog().domain(c).range(c);r=r.map(function(t){return h.invert(t)})}this.scale=d3["scale"+i.capitalize(t)]().domain(r).range(o).interpolate(d3.interpolateCubehelix)}this.scaleType=t}});e.default=u},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(55),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=s.default.extend({getClassDefaults:function(){var t={show:{},dim:null,skipFilter:!1};return o.deepExtend(this._super(),t)},objectLeafs:["show","autoconfig"],dataConnectedChildren:["show","dim","grouping"],init:function(t,e,n,r){this._type="entities",this._super(t,e,n,r)},preloadData:function(){return this.dataSource=this.getClosestModel(this.data||"data"),this._super()},afterPreload:function(){this.autoconfigureModel()},autoconfigureModel:function(){if(!this.dim&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig);t&&(this.dim=t.concept),o.printAutoconfigResult(this)}},getDimension:function(){return this.dim},setDimension:function(t){if(this.dim!==t.concept){var e={};e.show={},e.dim=t.concept,this.set(e)}},getFilter:function(){var t=void 0;return this.skipFilter?t={}:(t=o.deepClone(this.show),t[this.dim]&&o.isEmpty(t[this.dim])&&delete t[this.dim]),t},showEntity:function(t){var e=this,n=o.deepClone(this.show),r=this.getDimension(),i=void 0;i=o.isArray(t)?t:[t];var a=[];this.show[r]&&this.show[r].$in&&o.isArray(this.show[r].$in)&&(a=this.show[r].$in),o.forEach(i,function(t){var n=t[r];a=e.isShown(t)?a.filter(function(t){return t!==n}):a.concat(n)}),0===a.length?delete n[r]:n[r]={$in:a},this.show=n},isShown:function(t){var e=this.getDimension();return o.getProp(this.show,[e,"$in"],[]).includes(t[e])},clearShow:function(){var t=this.getDimension(),e=o.deepClone(this.show);delete e[t],this.show=e},getFilteredEntities:function(){var t=this.getDimension(),e=this.show[t]||{},n=e.$in;return(void 0===n?[]:n).map(function(e){return r({},t,e)})},isEntities:function(){return!0}});e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({getClassDefaults:function(){var t={use:null,which:null,merge:!1,manualSorting:null,scaleType:"ordinal"};return i.deepExtend(this._super(),t)},init:function(t,e,n,r){this._type="model",this._super(t,e,n,r)},validate:function(){this.scale&&(this.scale=null),"property"!=this.use&&"constant"!=this.use&&(i.warn("group model: use must be 'property' or 'constant'. Resetting to property..."),this.use="property")}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({getClassDefaults:function(){var t={use:null,which:null};return i.deepExtend(this._super(),t)},init:function(t,e,n,r){this._type="label",this._super(t,e,n,r)},autoconfigureModel:function(){if(!this.which&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig)||this.dataSource.getConcept({type:"entity_domain"});t&&(this.which=t.concept),i.printAutoconfigResult(this)}}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(55),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=["ar","ar-SA"],u=a.default.extend({getClassDefaults:function(){var t={id:"en",filePath:"assets/translation/"};return i.deepExtend(this._super(),t)},dataConnectedChildren:["id"],strings:{},init:function(t,e,n,r){this._type="locale",this._super(t,e,n,r)},_isLoading:function(){return!this._loadedOnce||this._loadCall},preloadData:function(){return this.loadData()},loadData:function(){var t=this;this.setReady(!1),this._loadCall=!0;var e=[];return i.forEach(this._root._data,function(t){"data"===t._type&&e.push(t.loadConceptProps())}),this.strings[this.id]||e.push(new Promise(function(e,n){d3.json(t.filePath+t.id+".json",function(r,i){if(r)return n(r);t._handleNewStrings(i),e()})})),Promise.all(e).then(function(){return t.trigger("translate")}).catch(function(){return t.handleLoadError()})},_handleNewStrings:function(t){this.strings[this.id]=this.strings[this.id]?i.extend(this.strings[this.id],t):t},getUIString:function(t){return this.strings&&this.strings[this.id]&&(this.strings[this.id][t]||""===this.strings[this.id][t])?this.strings[this.id][t]:(this.strings&&this.strings[this.id]||i.warn("Strings are not loaded for the "+this.id+" locale. Check if translation JSON is valid"),t)},getTFunction:function(){var t=this;return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(n).reduce(function(t,e){var r=new RegExp("{{"+e+"}}","g");return t.replace(r,n[e])},t.getUIString(e))}},isRTL:function(){return-1!==s.indexOf(this.id)}});e.default=u},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(49),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=s.default.extend({getClassDefaults:function(){var t={select:[],highlight:[],superHighlight:[],opacityHighlightDim:.1,opacitySelectDim:.3,opacityRegular:1,allowSelectMultiple:!0,skipFilter:!1};return o.deepExtend(this._super(),t)},init:function(t,e,n,r,i){var o=this;this._type="marker",this._visible=[],this._super(t,e,n,r,i),this.on("readyOnce",function(){var t={exceptType:"time"},e=o._getAllDimensions(t);o._multiDim=e.length>1})},setDataSourceForAllSubhooks:function(t){var e={};this.getSubhooks().forEach(function(n){e[n._name]={data:t}}),this.set(e,null,!1)},validate:function(){var t=this.getDimension(),e=this._visible.map(function(e){return e[t]});e.length&&(this.select=this.select.filter(function(n){return-1!==e.indexOf(n[t])}),this.setHighlight(this.highlight.filter(function(n){return-1!==e.indexOf(n[t])})))},setVisible:function(t){this._visible=t},getVisible:function(t){return this._visible},getSelected:function(t){return t?this.select.map(function(e){return e[t]}):this.select},selectMarker:function(t){var e=this,n=this._createValue(t);this.isSelected(t)?this.select=this.select.filter(function(t){return JSON.stringify(e._createValue(t))!==JSON.stringify(n)}):this.select=this.allowSelectMultiple?this.select.concat(n):[n]},selectAll:function(t,e){if(this.allowSelectMultiple){var n=void 0,r=this._getFirstDimension({exceptType:"time"});this.select=this._visible.map(function(t){return n={},n[r]=t[r],n})}},isSelected:function(t){var e=this,n=this._createValue(t);return-1!==this.select.map(function(t){return JSON.stringify(e._createValue(t))===JSON.stringify(n)}).indexOf(!0)},_createValue:function(t){return this._getAllDimensions({exceptType:"time"}).reduce(function(e,n){return e[n]=t[n],e},{})},getHighlighted:function(t){return t?this.highlight.map(function(e){return e[t]}):this.highlight},setHighlight:function(t){if(!o.isArray(t))return void this.setHighlight([].concat(t));this.getModelObject("highlight").set(t,!1,!1)},setSuperHighlight:function(t){this.getModelObject("superHighlight").set(o.isArray(t)?t:[t],!1,!1)},clearSuperHighlighted:function(){this.setSuperHighlight([])},isSuperHighlighted:function(t){var e=JSON.stringify(this._createValue(t));return~this.superHighlight.findIndex(function(t){return JSON.stringify(t)===e})},setSelect:function(t){if(!o.isArray(t))return void this.setSelect([].concat(t));this.getModelObject("select").set(t)},highlightMarker:function(t){var e=this._createValue(t);this.isHighlighted(t)||this.setHighlight(this.highlight.concat(e))},unhighlightEntity:function(t){var e=this._createValue(t);this.isHighlighted(t)&&this.setHighlight(this.highlight.filter(function(t){return t[dimension]!==e}))},isHighlighted:function(t){var e=this,n=this._createValue(t);return-1!==this.highlight.map(function(t){return JSON.stringify(e._createValue(t))===JSON.stringify(n)}).indexOf(!0)},clearHighlighted:function(){this.setHighlight([])},clearSelected:function(){this.select=[]},setLabelOffset:function(t,e){0===e[0]&&1===e[1]||(this.select.find(function(e){return o.comparePlainObjects(e,t)}).labelOffset=[Math.round(1e3*e[0])/1e3,Math.round(1e3*e[1])/1e3],this.set("select",this.select,!0))},getTimeLimits:function(){var t=this,e=this._parent.time,n=[],r=[],i=void 0,a=void 0,s={};this.cachedTimeLimits||(this.cachedTimeLimits={}),o.forEach(this.getSubhooks(),function(u){if("indicator"===u.use&&u._important){var c=t.cachedTimeLimits[u._dataId+u.which];c?(i=c.min,a=c.max):(s=u.getValidItems().map(function(t){return t[e.getDimension()]}),0==s.length&&o.warn("getTimeLimits() was unable to work with an empty array of valid datapoints"),i=d3.min(s),a=d3.max(s)),t.cachedTimeLimits[u._dataId+u.which]={min:i,max:a},n.push(i),r.push(a)}});var u=d3.max(n),c=d3.min(r);return u>c&&(o.warn("getTimeLimits(): Availability of the indicator's data has no intersection. I give up and just return some valid time range where you'll find no data points. Enjoy!"),u=d3.min(n),c=d3.max(r)),!(!i&&!a)&&{min:u,max:c}},getImportantHooks:function(){var t=[];return o.forEach(this._dataCube||this.getSubhooks(!0),function(e,n){e._important&&t.push(n)}),t},getLabelHookNames:function(){var t=this;return o.unique(this._getAllDimensions({exceptType:"time"})).map(function(e){var n={};return o.forEach(t._dataCube||t.getSubhooks(!0),function(t,r){return"label"===t._type&&t.getEntity().dim===e&&(n.label=r),"label"!==t._type&&t.getEntity().dim===e&&(n.key=r),!n.label||!n.key}),n.label||n.key})},getKeysMD:function(){var t=[],e=o.unique(this._getAllDimensions({exceptType:"time"})),n=this._getFirstDimension({type:"time"});return o.forEach(this._dataCube||this.getSubhooks(!0),function(i,o){function a(e,n,i,o,s){var u=Object.keys(n);if(o<s)for(var c=o+1,l=0,h=u.length;l<h;l++){var f={};f[i[o]]=u[l],a(f,n[u[l]],i,c,s)}else t.push.apply(t,r(u.map(function(t){var n=Object.assign({},e);return n[i[o]]=t,n})))}if("constant"!==i.use&&"property"!==i.use&&i._important){a({},i.getNestedItems(e.concat(n)),e,0,e.length-1)}}),t},getKeys:function(t){var e=[];t=t||this._getFirstDimension();var n=this._getFirstDimension({type:"time"}),r=this._getGrouping();return o.forEach(this._dataCube||this.getSubhooks(!0),function(i,o){if("constant"!==i.use){var a=i.getNestedItems([t,n]),s=i.getHaveNoDataPointsPerKey();a.undefined&&delete a.undefined;var u=Object.keys(a),c=Object.keys(s||[]);if(u.length>0&&r&&r.key===t){var l=r.grouping;u=u.filter(function(t){return+t%l==0})}0==e.length&&(e=u),i._important&&(e=e.filter(function(t){return u.indexOf(t)>-1&&-1==c.indexOf(t)}))}}),e.map(function(e){var n={};return n[t]=e,n})},_getCachePath:function(t){var e=this._parent.time.getAllSteps(),n=this.getClosestModel("locale").id+" - "+e[0]+" - "+e[e.length-1];this._dataCube=this._dataCube||this.getSubhooks(!0);var r=!1,i=this._getGrouping();return o.forEach(this._dataCube,function(t,e){t._loadCall&&(r=!0),n=n+"_"+t._dataId+t.which}),r?null:(i&&(n=n+"_grouping_"+i.key+":"+i.grouping),t&&(n=n+"_"+t.join(",")),n)},_getGrouping:function(){var t=this._dataCube||this.getSubhooks(!0),e=t[Object.keys(t)[0]]._space,n={};return o.forEach(e,function(t){if(t.grouping)return n.grouping=t.grouping,n.key=t.dim,!1}),!!n.grouping&&n},_getAllDimensions:function(t){var e=[],n=this;o.forEach(this.space,function(t){e.push(n.getClosestModel(t))}),t=t||{};var r=[],i=void 0;return o.forEach(e,function(e){return!(!t.exceptType||e.getType()!==t.exceptType)||(!(!t.onlyType||e.getType()===t.onlyType)||void((i=e.getDimension())&&r.push(i)))}),r},_getFirstDimension:function(t){var e=[],n=this;o.forEach(this.space,function(t){e.push(n.getClosestModel(t))}),t=t||{};var r=!1;return o.forEach(e,function(e){return t.exceptType&&e.getType()!==t.exceptType?(r=e.getDimension(),!1):t.type&&e.getType()===t.type?(r=e.getDimension(),!1):t.exceptType||t.type?void 0:(r=e.getDimension(),!1)}),r},framesAreReady:function(){var t=this._getCachePath();return!!this.cachedFrames&&Object.keys(this.cachedFrames[t]).length==this._parent.time.getAllSteps().length},getFrame:function(t,e,n){var r=this;this.cachedFrames||(this.cachedFrames={});var i=this._parent.time.getAllSteps(),a=this._getCachePath();if(!a)return e(null,t);if(t&&r.cachedFrames[a]&&r.cachedFrames[a][t])return e(r.cachedFrames[a][t],t);if(!(a=this._getCachePath(n)))return e(null,t);if(t&&r.cachedFrames[a]&&r.cachedFrames[a][t])return e(r.cachedFrames[a][t],t);if(t&&i.length>1){var s=d3.bisectLeft(i,t);if(!i[s])return o.warn("The requested frame is out of range: "+t),e(null,t),null;if(i[s].toString()!=t.toString())return this._interpolateBetweenFrames(t,s,i,function(n){e(n,t)},n),null}r.getFrames(t,n).then(function(){return!t&&r.cachedFrames[a]?e(r.cachedFrames[a],t):r.cachedFrames[a]&&r.cachedFrames[a][t]?e(r.cachedFrames[a][t],t):(o.warn("marker.js getFrame: Data is not available for frame: "+t),e(null,t))})},_interpolateBetweenFrames:function(t,e,n,r,i){var a=this;if(0==e)this.getFrame(n[e],function(t){return r(t)},i);else{var s=n[e-1],u=n[e];this.getFrame(s,function(e){a.getFrame(u,function(n){function i(e,n,r,i,a,s,u){e[n]=i[n],o.isDate(s)?a[r]=t:o.isNumber(s)?a[r]=null==s||null==u?null:s+(u-s)*c:a[r]=s}var c=(t-s)/(u-s),l={};o.forEach(e,function(e,r){if(l[r]={},a._multiDim&&"indicator"==a[r].use&&a[r].which!==a._getFirstDimension({type:"time"})){var s=l[r],u=a[r].dataSource.getData(a[r]._dataId,"query"),h=u.animatable,f=u.select.key.slice(0);h&&-1!=f.indexOf(h)&&f.splice(f.indexOf(h),1);var d=f.length-1;!function t(e,n,r,o,a,u){for(var c=Object.keys(o),l=0,h=c.length;l<h;l++)if(0==u&&(r=c[l]),u==d)i(s,r,c[l],e,n,o[c[l]],a[c[l]]);else{0==u&&(n=e={});var f=u+1;n[c[l]]={},t(e,n[c[l]],r,o[c[l]],a[c[l]],f)}}(null,null,null,e,n[r],0)}else o.forEach(e,function(e,i){var a=n[r][i];o.isDate(e)?l[r][i]=t:o.isNumber(e)?l[r][i]=null==e||null==a?null:e+(a-e)*c:l[r][i]=e})}),r(l)},i)},i)}},getFrames:function(t,e){var n=this;this.cachedFrames||(this.cachedFrames={});var r=this._getFirstDimension(),i=this._getFirstDimension({type:"time"});this.frameQueues||(this.frameQueues={}),this.partialResult||(this.partialResult={});var a=this._parent.time.getAllSteps(),s=this._getCachePath(e);return s?(this.frameQueues[s]&&this.frameQueues[s]instanceof Promise||(this.frameQueues[s]=new Promise(function(t,u){n.partialResult[s]={},a.forEach(function(t){n.partialResult[s][t]={}});var c=n.getKeys(),l=[];if(o.forEach(n._dataCube,function(t,e){"constant"===t.use?a.forEach(function(i){n.partialResult[s][i][e]={},c.forEach(function(o){n.partialResult[s][i][e][o[r]]=t.which})}):t.which===r?a.forEach(function(t){n.partialResult[s][t][e]={},c.forEach(function(i){n.partialResult[s][t][e][i[r]]=i[r]})}):t.which===i?a.forEach(function(t){n.partialResult[s][t][e]={},c.forEach(function(i){n.partialResult[s][t][e][i[r]]=new Date(t)})}):l.push(t)}),l.length>0){var h=[];o.forEach(l,function(t){h.push(new Promise(function(r,i){var u={name:t._name,which:t.which};t.getFrames(a,e).then(function(t){o.forEach(t,function(t,e){n.partialResult[s][e][u.name]=t[u.which]}),r()})}))}),Promise.all(h).then(function(){n.cachedFrames[s]=n.partialResult[s],t()})}else n.cachedFrames[s]=n.partialResult[s],t()})),new Promise(function(u,c){if(a.length<2||!t)n.frameQueues[s].then(function(){u()});else{var l=[];o.forEach(n._dataCube,function(o,u){"constant"!==o.use&&o.which!==r&&o.which!==i&&function(r,i){l.push(new Promise(function(o,u){r.getFrame(a,t,e).then(function(e){n.partialResult[s][t][i]=e[t][r.which],o()})}))}(o,u)}),l.length>0?Promise.all(l).then(function(){n.cachedFrames[s]||(n.cachedFrames[s]={}),n.cachedFrames[s][t]=n.partialResult[s][t],u()}):u()}})):new Promise(function(t,e){t()})},listenFramesQueue:function(t,e){var n=this,r=this._getFirstDimension(),i=this._getFirstDimension({type:"time"}),a=this._parent.time.getAllSteps(),s={};this.getFrames();var u=[],c=a.length,l=!1;o.forEach(n._dataCube,function(o,h){"constant"!==o.use&&o.which!==r&&o.which!==i&&(u.includes(o._dataId)||(u.push(o._dataId),o.dataSource.listenFrame(o._dataId,a,t,function(t,r){var i=r.toString();void 0===s[i]&&(s[i]=[]),s[i].includes(t)||s[i].push(t),s[i].length===u.length&&(l||c!==Object.keys(s).length||(l=!0,n.trigger("dataLoaded")),e(r))})))})},getEntityLimits:function(t){var e=this,n=this._parent.time.getAllSteps(),r=[],i=[];o.forEach(e.getSubhooks(),function(t){"constant"!=t.use&&t._important&&i.push(t._name)});var a=function(e){if(!e)return!1;for(var n=0,r=i.length;n<r;n++)if(!e[i[n]][t]&&0!==e[i[n]][t])return!1;return!0},s=function t(r,i){var o=r();null!=o&&e.getFrame(n[o],function(e){a(e)?i(o):t(r,i)})},u=[];return u.push(new Promise(function(t,e){s(function(){var t=n.length,e=0;return function(){return e<t?e++:null}}(),function(e){r[0]=n[e],t()})})),u.push(new Promise(function(t,e){s(function(){var t=n.length-1;return function(){return t>=0?t--:null}}(),function(e){r[1]=n[e],t()})})),Promise.all(u).then(function(){return{min:r[0],max:r[1]}})},getSpace:function(){if(o.isArray(this.space))return this.space;o.error('ERROR: space not found.\n You must specify the objects this hook will use under the "space" attribute in the state.\n Example:\n space: ["entities", "time"]')}});e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({getClassDefaults:function(){var t={use:null,which:null};return i.deepExtend(this._super(),t)},init:function(t,e,n,r){this._type="side",r.readyOnce=this.readyOnce,this.state={left:{},right:{}},this._super(t,e,n,r)},readyOnce:function(){if(this.spaceRef){var t=this._space[this.spaceRef].dataConnectedChildren.slice(0);t.splice(t.indexOf("show"),1),this._space[this.spaceRef].dataConnectedChildren=t}},switchSideState:function(){var t=this.state.left;this.state.left=this.state.right,this.state.right=t},clearSideState:function(){this.state={left:{},right:{}}}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(105),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=i.default.extend({getClassDefaults:function(){var t={use:null,which:null,domainMin:null,domainMax:null,zoomedMin:null,zoomedMax:null,extent:[0,.85],scaleType:null,allow:{scales:["ordinal","linear","log","genericLog","pow"]}};return a.deepExtend(this._super(),t)},_type:"size",buildScale:function(){this._super(),"ordinal"!==this.scaleType&&this.scale.clamp(!0)},autoconfigureModel:function(){if(!this.which&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig);t?(this.which=t.concept,this.use="indicator",this.scaleType="linear"):(this.which="_default",this.use="constant",this.scaleType="ordinal"),a.printAutoconfigResult(this)}}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={ALL:"all",_default:"none"},u=a.default.extend({getClassDefaults:function(){var t={use:null,which:null,merge:!1};return i.deepExtend(this._super(),t)},init:function(t,e,n,r){this._type="model",this._super(t,e,n,r)},validate:function(){this.scale&&(this.scale=null),"indicator"===this.use&&(i.warn("stack model: use must not be 'indicator'. Resetting use to 'constant' and which to '"+s._default),this.use="constant",this.which=s._default),"constant"===this.use&&-1==i.values(s).indexOf(this.which)&&(i.warn("stack model: the requested value '"+this.which+"' is not allowed. resetting to '"+s._default),this.which)},getPalettes:function(){return s},buildScale:function(){}});e.default=u},function(t,e,n){"use strict";function r(){var t=function(t){return e(t)+"w"+n(t)};t.parse=function(t){var e=t.match(/^(\d{4})w(\d{2})$/);return e?r(e[1],e[2]):null};var e=function(t){var e=+t;return new Date(e+864e5*(4-(t.getUTCDay()||7))).getUTCFullYear()},n=function(t){var e=+t,n=new Date(e+864e5*(4-(t.getUTCDay()||7))),r=Math.ceil(((n.getTime()-n.setUTCMonth(0,1))/864e5+1)/7);return r<10?"0"+r:r},r=function(t,e){var n=parseInt(e),r=t,i=new Date;i.setUTCFullYear(r),i.setUTCMonth(0),i.setUTCDate(4);var o=i.getUTCDay()||7,a=7*n+1-(o+4),s=c.year.parse(r);return s=new Date(s.getTime()+24*a*60*60*1e3)};return t}function i(){var t=function(t){return c.year.data(t)+"q"+e(t)};t.parse=function(t){var e=t.match(/^(\d{4})q(\d)$/);return e?n(e[1],e[2]):null};var e=function(t){return t instanceof Date||(t=new Date(+t)),1+(t.getUTCMonth()/3|0)},n=function(t,e){var n=parseInt(e),r=3*n-2,i=t;return c.month.data.parse([i,(r<9?"0":"")+r].join("-"))};return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),s=n(55),u=function(t){return t&&t.__esModule?t:{default:t}}(s);Date.prototype.utc=Date.prototype.toUTCString;var c={year:{data:d3.time.format.utc("%Y"),ui:d3.time.format.utc("%Y")},month:{data:d3.time.format.utc("%Y-%m"),ui:d3.time.format.utc("%b %Y")},day:{data:d3.time.format.utc("%Y%m%d"),ui:d3.time.format.utc("%c")},hour:{data:d3.time.format.utc("%Y%m%dT%H"),ui:d3.time.format.utc("%b %d %Y, %H")},minute:{data:d3.time.format.utc("%Y%m%dT%H%M"),ui:d3.time.format.utc("%b %d %Y, %H:%M")},second:{data:d3.time.format.utc("%Y%m%dT%H%M%S"),ui:d3.time.format.utc("%b %d %Y, %H:%M:%S")},week:{data:r(),ui:r()},quarter:{data:i(),ui:i()}},l=u.default.extend({objectLeafs:["autoconfig"],getClassDefaults:function(){var t={dim:null,value:null,start:null,end:null,startOrigin:null,endOrigin:null,startSelected:null,endSelected:null,playable:!0,playing:!1,loop:!1,round:"round",delay:150,delayThresholdX2:90,delayThresholdX4:45,unit:"year",format:{data:null,ui:null},step:1,immediatePlay:!0,record:!1,offset:0};return a.deepExtend(this._super(),t)},dataConnectedChildren:["startOrigin","endOrigin","dim"],init:function(t,e,n,r){this._type="time",this._super(t,e,n,r);var i=this;this.initFormatters(),this.dragging=!1,this.postponePause=!1,this.allSteps={},this.delayAnimations=this.delay,this.on({"change:playing":function(){!0===i.playing?i._startPlaying():i._stopPlaying()},"change:format":function(){i.initFormatters()}})},initFormatters:function(){c[this.unit]&&(this.formatters=c[this.unit]),"string"==typeof this.format?this.formatters.data=this.formatters.ui=d3.time.format.utc(this.format):(this.format.data&&(this.formatters.data=d3.time.format.utc(this.format.data)),this.format.ui&&(this.formatters.ui=d3.time.format.utc(this.format.ui))),this.validateFormatting()},preloadData:function(){return this.dataSource=this.getClosestModel(this.data||"data"),this._super()},afterPreload:function(){this.autoconfigureModel()},autoconfigureModel:function(){if(!this.dim&&this.autoconfig){var t=this.dataSource.getConcept(this.autoconfig);t&&(this.dim=t.concept),a.printAutoconfigResult(this)}},_formatToDates:function(){for(var t=["value"],e=["value","start","end","startSelected","endSelected"],n=0;n<e.length;n++){var r=e[n];if(!a.isDate(this[r])){var i=this.parse(this[r]);this.set(r,i,null,-1!==t.indexOf(r))}}},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";return-1===["data","ui"].indexOf(e)&&(a.warn("Time.formatDate type parameter ("+e+') invalid. Using "data".'),e=data),null==t?null:this.formatters[e](t)},parse:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";return null==t?null:this.formatters[e].parse(t.toString())},findFormat:function(t){for(var e=Object.keys(c),n=0;n<e.length;n++){var r=c[e[n]].data.parse(t);if(r)return{unit:e[n],time:r,type:"data"};if(r=c[e[n]].ui.parse(t))return{unit:e[n],time:r,type:"ui"}}return null},validate:function(){null==this.start&&this.startOrigin&&this.set("start",this.startOrigin,null,!1),null==this.end&&this.endOrigin&&this.set("end",this.endOrigin,null,!1),this.formatters&&this.validateFormatting(),c[this.unit]||(a.warn(this.unit+' is not a valid time unit, using "year" instead.'),this.unit="year"),this.step<1&&(this.step=1),this.end<this.start&&null!=this.start&&this.set("end",new Date(this.start),null,!1),this.value<this.startSelected&&null!=this.startSelected&&(this.value=new Date(this.startSelected)),this.value>this.endSelected&&null!=this.endSelected&&(this.value=new Date(this.endSelected)),!1===this.splash&&((!this.startSelected||this.startSelected<this.start)&&null!=this.start&&this.set({startSelected:new Date(this.start)},null,!1),(!this.endSelected||this.endSelected>this.end)&&null!=this.end&&this.set({endSelected:new Date(this.end)},null,!1)),this.value<this.start&&null!=this.start?this.value=new Date(this.start):this.value>this.end&&null!=this.end&&(this.value=new Date(this.end)),!1===this.playable&&!0===this.playing&&this.set("playing",!1,null,!1)},validateFormatting:function(){null==this.value&&this.set("value",this.parse(this.formatDate(new Date)),null,!1),a.isDate(this.start)&&a.isDate(this.end)&&a.isDate(this.value)&&a.isDate(this.startSelected)&&a.isDate(this.endSelected)||this._formatToDates()},play:function(){this._startPlaying()},pause:function(t){t?this.postponePause=!0:this.playing&&(this.set("playing",!1,null,!1),this.set("value",this.value,!0,!0))},dragStart:function(){this.dragging=!0},dragStop:function(){this.dragging=!1},getRange:function(){var t=this.getIntervalAndStep();return d3["utc"+t.interval].range(this.start,this.end,t.step)},getIntervalAndStep:function(){var t=void 0,e=void 0;switch(this.unit){case"week":t="monday",e=this.step;break;case"quarter":t="month",e=3*this.step;break;default:t=this.unit,e=this.step}return{interval:a.capitalize(t),step:e}},getFilter:function(t){var e=this.parse(this.startOrigin),n=this.parse(this.endOrigin),r=this.getDimension(),i=null;if(t)null!=this.value&&(i={},i[r]=this.formatters.data(this.value));else{var o=void 0,a=void 0;null!=e&&(o=this.formatters.data(e)),null!=n&&(a=this.formatters.data(n)),(o||a)&&(i={},i[r]={},o&&(i[r].$gte=o),a&&(i[r].$lte=a))}return i},getParser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data";return this.formatters[t].parse},getFormatter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data";return this.formatters[t]},getAllSteps:function(){if(!this.start||!this.end)return a.warn("getAllSteps(): invalid start/end time is detected: "+this.start+", "+this.end),[];var t=""+this.offset+this.start+this.end+this.step;if(this.allSteps[t])return this.allSteps[t];this.allSteps[t]=[];for(var e=this.getIntervalAndStep(),n=d3["utc"+e.interval].offset(this.start,this.offset);+n<=+this.end;){var r=this.getIntervalAndStep();this.allSteps[t].push(n),n=d3["utc"+r.interval].offset(n,r.step)}return this.allSteps[t]},snap:function(t){if(this.round){null==t&&(t="value");var e="round";"ceil"===this.round&&(e="ceil"),"floor"===this.round&&(e="floor");var n=this.getIntervalAndStep(),r=d3["utc"+n.interval][e](this[t]);this.value-r==0&&this.value-this.start!=0&&this.value-this.end!=0||this.set(t,r,!0)}},_startPlaying:function(){if(this.playable){var t=this;this.value>=this.endSelected&&t.getModelObject("value").set(t.startSelected,null,!1),this.set("playing",!0,null,!1),this.playInterval(this.immediatePlay),this.trigger("play")}},playInterval:function(t){if(this.playing){var e=this;this.delayAnimations=this.delay,this.delay<this.delayThresholdX2&&(this.delayAnimations*=2),this.delay<this.delayThresholdX4&&(this.delayAnimations*=2);var n=t?1:this.delayAnimations;this._intervals.setInterval("playInterval_"+this._id,function(){if(e.value>=e.endSelected)e.loop?e.getModelObject("value").set(e.startSelected,null,!1):e.set("playing",!1,null,!1);else if(e._intervals.clearInterval("playInterval_"+e._id),e.postponePause||!e.playing)e.set("playing",!1,null,!1),e.postponePause=!1,e.getModelObject("value").set(e.value,!0,!0);else{var t=e.getIntervalAndStep();e.delay<e.delayThresholdX2&&(t.step*=2),e.delay<e.delayThresholdX4&&(t.step*=2);var n=d3["utc"+t.interval].offset(e.value,t.step);n>=e.endSelected?e.getModelObject("value").set(e.endSelected,null,!0):e.getModelObject("value").set(n,null,!1),e.playInterval()}},n)}},incrementTime:function(t){var e=this.getIntervalAndStep();return d3["utc"+e.interval].offset(t,e.step)},decrementTime:function(t){var e=this.getIntervalAndStep();return d3["utc"+e.interval].offset(t,-e.step)},_stopPlaying:function(){this._intervals.clearInterval("playInterval_"+this._id),this.trigger("pause")}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(49),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({screen_profiles:{small:{min_width:0,min_height:0},medium:{min_width:600,min_height:400},large:{min_width:900,min_height:520}},getClassDefaults:function(){var t={presentation:!1,buttons:[],dialogs:{popup:[],sidebar:[],moreoptions:[]},splash:!1};return i.deepExtend(this._super(),t)},init:function(t,e,n,r){this._type="ui",this._container=null,this._curr_profile="small",this._prev_size={},this.resizeHandler=this.resizeHandler.bind(this),window.addEventListener("resize",this.resizeHandler),r["change:presentation"]=this.updatePresentation.bind(this),this._super(t,e,n,r);(function(){var t=/(?:iPad|iPhone|iPod).+OS\s+(\d+)_(\d+)/.exec(navigator.userAgent);return t&&+t[1]>=10&&+t[2]>2&&!window.MSStream})()&&(this.setSize=i.debounce(this.setSize,500))},resizeHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._container&&this.setSize(t.force||!1)},setSize:function(t){var e=this,n=this._container.clientWidth,r=this._container.clientHeight;if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&navigator.userAgent.match(/iPhone/i)&&(this._container.style.top=0,this._container.clientWidth>this._container.clientHeight&&this._container.clientWidth<700)){var o=this._container.clientHeight,a=window.innerHeight;2<o-a&&o-a<=45&&(this._container.style.top="44px",document.body.scrollTop=44)}(t||!this._prev_size||this._prev_size.width!==n||this._prev_size.height!==r)&&n&&r&&(i.forEach(this.screen_profiles,function(t,o){i.removeClass(e._container,"vzb-"+o),n>=t.min_width&&r>=t.min_height&&(e._curr_profile=o)}),i.addClass(this._container,"vzb-"+this._curr_profile),i.classed(this._container,"vzb-portrait",n<r),i.classed(this._container,"vzb-landscape",!(n<r)),this._prev_size.width=n,this._prev_size.height=r,this.trigger("resize"))},setContainer:function(t){t.clientWidth&&t.clientHeight||i.warn("Vizabi is being initialised with a container of incorrect width or height. While this may be handled without a crash, it's not considered a healthy behavior. You should call Vizabi(placeholder,...) function when placeholder is not display:none and has some >0 !=auto width and height"),this._container=t,this.setSize(),this.updatePresentation()},updatePresentation:function(){i.classed(this._container,"vzb-presentation",this.presentation),this.trigger("resize")},getPresentationMode:function(){return this.presentation},setRTL:function(t){i.classed(this._container,"vzb-rtl",t)},currentProfile:function(){return this._curr_profile},clear:function(){window.removeEventListener("resize",this.resizeHandler)}});e.default=s},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(){return function t(e){function n(t){var e=y(t);return l?l(e.scale(t*e.sign)):e.scale(t*e.sign)}var i=[],o=[],a=.1,s=5,u=e.domain(),c=e.range(),l=null,h=void 0,f=void 0,d=function(t){return t instanceof Array?t.map(function(t){return Math.abs(t)}):Math.abs(t)},p=function(t,e){return{domain:t,sign:1,range:e,scale:d3.scaleLinear().domain(t).range(e)}},v=function(t,e,n){var r=t;return n&&(r=d(t)),{domain:t,sign:n?-1:1,range:e,scale:d3.scaleLog().domain(r).range(e)}},g=function(){h=c[0]<c[c.length-1];var t=h?1:-1;if(i=[],1==o.length)i=o[0][0]<=0&&o[0][1]>=0?[p(o[0],c)]:[v(o[0],c,o[0][0]<=0)];else{var n=d3.max(d(u)),r=d(d3.max(c)-d3.min(c)),l=1,g=0,m=0,y=0,b=0;e.domain([a,n]).range([0,r]);var _=s;0!=u[0]&&d(u[0])>a&&(g=e(d(u[0]))),0!=u[u.length-1]&&d(u.length-1)>a&&(m=e(d(u[u.length-1]))),d(u[0])>a&&(y=_),d(u[u.length-1])>a&&(b=_),r=r-y-b,0!=m&&(l=d(g/m));var x=void 0,w=void 0;2==o.length?0==u[0]||d(u[0])<=a?(x=c[0]+g*l*t+b*t,i=[p(o[0],[c[0],x]),v(o[1],[x,c[c.length-1]],!f)]):(0==u[u.length-1]||d(u[u.length-1])<=a)&&(x=c[c.length-1]-(y+b)*l*t,i=[v(o[0],[c[0],x],f),p(o[1],[x,c[c.length-1]])]):(x=c[0]+r/(1/l+1)*t,w=c[0]+(r/(1/l+1)+y+b)*t,i=[v(o[0],[c[0],x],f),p(o[1],[x,w]),v(o[2],[w,c[c.length-1]],!f)])}},m=function(){if(f=u[0]<u[u.length-1],o=[],d3.min(u)>0&&d3.max(u)>0||d3.min(u)<0&&d3.max(u)<0)o=[u];else{var t=void 0,e=void 0;f?(t=u[0],e=u[u.length-1]):(t=u[u.length-1],e=u[0]);for(var n=function(t,e){f?o.push([t,e]):o.unshift([e,t])};t!=e;)e<=-a||t>=-a&&e<=a||t>=a?(n(t,e),t=e):t<-a&&e>=-a?(n(t,-a),t=-a):t>=-a&&e>=a?(n(t,a),t=a):(console.warn("Something wrong while build subdomains: "+t+" "+e),t=e)}g()},y=function(t){if(f){if(t<u[0])return i[0];if(t>u[u.length-1])return i[i.length-1];for(var e=0;e<i.length;e++)if(t>=i[e].domain[0]&&t<=i[e].domain[i[e].domain.length-1])return i[e]}else{if(t>u[0])return i[0];if(t<u[u.length-1])return i[i.length-1];for(var n=0;n<i.length;n++)if(t<=i[n].domain[0]&&t>=i[n].domain[i[n].domain.length-1])return i[n]}},b=function(t){if(h){if(t<c[0])return i[0];if(t>c[c.length-1])return i[i.length-1];for(var e=0;e<i.length;e++)if(t>=i[e].range[0]&&t<=i[e].range[i[e].range.length-1])return i[e]}else{if(t>c[0])return i[0];if(t<c[c.length-1])return i[i.length-1];for(var n=0;n<i.length;n++)if(t<=i[n].range[0]&&t>=i[n].range[1])return i[n]}};return Math.sign=Math.sign||function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1},n.eps=function(t){return arguments.length?(a=t,n.domain(u),n):a},n.delta=function(t){return arguments.length?(s=t,n.range(c),n):s},n.domain=function(t){if(!arguments.length)return u;switch(t.length){case 0:t=u;break;case 1:t=[t[0]/2,2*t[0]]}t[0]==t[t.length-1]&&(t[0]/=2,t[t.length-1]=2*t[t.length-1]),u=t;var e=d3.min(d(u).filter(function(t){return!!t}));return e&&(a=Math.min(a,e/100)),m(),n},n.range=function(t,e){if(!arguments.length)return l?l.range():c;switch(t.length){case 0:t=c;break;case 1:t=[t[0]-100,t[0]+100]}if(l&&!e)l.range(t);else{c=t;var r=d3.min(d(c).filter(function(t){return!!t}));r&&(s=Math.min(s,r/100)),g()}return n},n.interpolate=function(t){var e=u;if(o.length>1){var r=u,i=c,a=[u[0],u[u.length-1]];n.domain(a).range(a),e=r.map(function(t){return n(t)}),n.domain(r).range(i)}return l=d3.scaleLinear().domain(e).range(c).interpolate(t),n.range(l.domain(),!0),n},n.invert=function(t){var e=b(t);return e.scale.invert(t)*e.sign},n.ticks=function(t){for(var e=void 0,n=[],o=0;o<i.length;o++)e=-1==i[o].sign?i[o].scale.ticks().reverse().map(function(t){return-1*t}):i[o].scale.ticks(),n.length>0&&e.length>0&&n[n.length-1]==e[0]&&e.splice(0,1),n.push.apply(n,r(e));return n},n.copy=function(){return t(e).domain(u).range(c).delta(s).eps(a)},d3.rebind(n,e,"base","rangeRound","clamp","nice","tickFormat")}(d3.scaleLog().domain([.1,200]).range([0,1e3]))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";function r(t,e,n){var r,i,o,a=e?".onTap":".onLongTap";d3.select(t).on("touchstart"+a,function(t,e){r=d3.event.timeStamp,i=d3.event.changedTouches[0].screenX,o=d3.event.changedTouches[0].screenY}).on("touchend"+a,function(t,a){return i=Math.abs(i-d3.event.changedTouches[0].screenX),o=Math.abs(o-d3.event.changedTouches[0].screenY),i<5&&o<5?d3.event.timeStamp-r<500?e?e(t,a):void 0:n?n(t,a):void 0:void 0})}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return this.each(function(){r(this,t)})},o=function(t){return this.each(function(){r(this,null,t)})};e.default={onTap:i,onLongTap:o},e.onTap=i,e.onLongTap=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(395),s=r(a),u=n(75),c=r(u),l={},h=c.default.extend({_name:"csv",init:function(t){var e=this;this._data=[],this._lastModified=t.lastModified||"",this._basepath=t.path,this.delimiter=t.delimiter,this.keySize=t.keySize||1,this._parseStrategies=[].concat(i([",.",".,"].map(function(t){return e._createParseStrategy(t)})),[function(t){return t}]),Object.assign(this.ERRORS,{WRONG_TIME_COLUMN_OR_UNITS:"reader/error/wrongTimeUnitsOrColumn",NOT_ENOUGH_ROWS_IN_FILE:"reader/error/notEnoughRows",UNDEFINED_DELIMITER:"reader/error/undefinedDelimiter",EMPTY_HEADERS:"reader/error/emptyHeaders"})},ensureDataIsCorrect:function(t,e){var n=t.columns,r=t.rows,i=n[this.keySize],a=o(r,1),s=a[0],u=e[i],c=s[i].trim();if(u&&!u(c))throw this.error(this.ERRORS.WRONG_TIME_COLUMN_OR_UNITS,void 0,{currentYear:(new Date).getFullYear(),foundYear:c});if(!n.filter(Boolean).length)throw this.error(this.ERRORS.EMPTY_HEADERS)},getDatasetInfo:function(){return{name:this._basepath.split("/").pop()}},load:function(){var t=this,e=this._basepath,n=this._lastModified;return new Promise(function(r,i){var o=l[e+n];o?r(o):d3.text(e).get(function(o,a){if(!a)return i("No permissions or empty file: "+e+". "+o);if(o)return i("Error happened while loading csv file: "+e+". "+o);try{var s=t.delimiter,u=void 0===s?t._guessDelimiter(a):s,c=d3.dsvFormat(u),h=c.parse(a,function(t){return Object.keys(t).every(function(e){return!t[e]})?null:t}),f=h.columns,d={columns:f,rows:h};l[e+n]=d,r(d)}catch(t){return i(t)}})})},_guessDelimiter:function(t){var e=this._getRows(t.replace(/"[^\r]*?"/g,""),2);if(2!==e.length)throw this.error(this.ERRORS.NOT_ENOUGH_ROWS_IN_FILE);var n=o(e,2),r=n[0],i=n[1],a=this._countCharsInLine(r,","),s=this._countCharsInLine(r,";"),u=this._countCharsInLine(i,","),c=this._countCharsInLine(i,";");if(this._checkDelimiters(a,u,s,c))return",";if(this._checkDelimiters(s,c,a,u))return";";throw this.error(this.ERRORS.UNDEFINED_DELIMITER)},_checkDelimiters:function(t,e,n,r){return t===e&&t>1&&(n!==r||!n&&!r||t>n&&e>r)},_getRows:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=/([^\r\n]+)/g,r=[],i=0,o=!0;o&&i!==e;)(o=n.exec(t))&&o.length>1&&(++i,r.push(o[1]));return r},_countCharsInLine:function(t,e){var n=new RegExp(e,"g"),r=t.match(n);return r?r.length:0},_createParseStrategy:function(t){var e=this;return function(n){if(!new RegExp("[^\\d"+t+"]").test(n)&&n){var r=(0,s.default)(n,t);return isFinite(r)&&!isNaN(r)||(e._isParseSuccessful=!1),r}return n}},_mapRows:function(t,e,n){var r=this._getRowMapper(e,n),i=!0,o=!1,a=void 0;try{for(var s,u=this._parseStrategies[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;this._parse=c,this._isParseSuccessful=!0;var l=[],h=!0,f=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value,m=r(g);if(!this._isParseSuccessful)break;l.push(m)}}catch(t){f=!0,d=t}finally{try{!h&&v.return&&v.return()}finally{if(f)throw d}}if(this._isParseSuccessful)return l}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}},versionInfo:{version:"0.26.4",build:1507740149342}});e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(76),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={TEXT_PARAMS:{TOP:11,LEFT:10,MAX_WIDTH:42,MAX_HEIGHT:16},THUMB_STROKE_WIDTH:4},u={small:{minRadiusPx:.5,maxRadiusEm:.05},medium:{minRadiusPx:1,maxRadiusEm:.05},large:{minRadiusPx:1,maxRadiusEm:.05}},c=a.default.extend({init:function(t,e){this.name="bubblesize";var n=i.extend({},s);this.options=i.extend(n,this.options||{});var r=i.extend({},u);this.profiles=i.extend(r,this.profiles||{}),this.model_expects=[{name:"submodel",type:"size"},{name:"locale",type:"locale"}];this.changeHandler=this.changeHandler.bind(this),this.readyHandler=this.readyHandler.bind(this),this.model_binds={"change:submodel.domainMin":this.changeHandler,"change:submodel.domainMax":this.changeHandler},this._setModel=i.throttle(this._setModel,50),this._super(t,e)},changeHandler:function(t,e){var n=this.model.submodel.extent||[this.options.EXTENT_MIN,this.options.EXTENT_MAX];this._updateLabels(n),this._super(t,e)},readyHandler:function(t){this._super(t),this.sizeScaleMinMax=this.model.submodel.getScale().domain(),this._setLabelsText()},readyOnce:function(){var t=this;this._super(),this.showArcs=!1!==t.model.submodel.showArcs,this.padding.bottom=this.options.BAR_WIDTH+this.options.TEXT_PARAMS.MAX_HEIGHT,t.showArcs&&this.sliderEl.selectAll(".vzb-bs-slider-thumb-arc").data([0,0]).enter().append("path").attr("class","vzb-bs-slider-thumb-arc"),this.sliderArcsEl=this.sliderEl.selectAll(".vzb-bs-slider-thumb-arc"),this.sliderLabelsWrapperEl=this.sliderEl.append("g"),this.sliderLabelsWrapperEl.selectAll("text").data([0,0]).enter().append("text").attr("class","vzb-bs-slider-thumb-label").attr("text-anchor",function(t,e){return e?"start":"end"}).attr("dy",function(t,e){return e?"-0.7em":"1.4em"}),this.sliderLabelsEl=this.sliderEl.selectAll("text.vzb-bs-slider-thumb-label"),this.sizeScaleMinMax=this.model.submodel.getScale().domain(),this.sizeScaleMinMax&&this._setLabelsText()},ready:function(){this._super(),this._updateLabels()},getMinMaxBubbleRadius:function(){var t=this.root.getVizWidthHeight(),e=i.hypotenuse(t.width,t.height),n=this.profiles[this.getLayoutProfile()].minRadiusPx,r=this.profiles[this.getLayoutProfile()].maxRadiusEm*e;return n>r&&(r=n),{min:n,max:r}},_updateSize:function(){var t=this;this._super(),this.sliderLabelsWrapperEl.attr("transform",this.isRTL?"scale(-1,1)":null),this.sliderLabelsEl.attr("text-anchor",function(e,n){return(t.isRTL?!n:n)?"start":"end"})},_resize:function(){var t=this.getMinMaxBubbleRadius(),e=this.element.node().offsetWidth-2*t.max;this.padding.top=t.max+this.options.BAR_WIDTH,this.padding.left=.5*e,this.padding.right=.5*e,this.rescaler.range([2*t.min,2*t.max]),this._super()},_getComponentWidth:function(){return 2*this.getMinMaxBubbleRadius().max},_updateThumbs:function(t){this._updateArcs(t),this._updateLabels(t)},_updateArcs:function(t){if(this.showArcs){var e=this,n=d3.arc().outerRadius(function(t){return.5*e.rescaler(t)}).innerRadius(function(t){return.5*e.rescaler(t)}).startAngle(.5*-Math.PI).endAngle(.5*Math.PI);this.sliderArcsEl.data(t).attr("d",n).attr("transform",function(t){return"translate("+.5*e.rescaler(t)+",0)"})}},_updateLabels:function(t){var e=this,n=this;t&&this.sliderLabelsEl.data(t),this.sliderLabelsEl.attr("transform",function(t,r){var i={v:e.options.TEXT_PARAMS.TOP,h:e.options.TEXT_PARAMS.LEFT},o=i.h*(r?.5:-1)+n.rescaler(t);return"translate("+(n.isRTL?-1:1)*o+",0)"})},_setLabelsText:function(){var t=this,e=[t.model.submodel.getTickFormatter()(t.sizeScaleMinMax[0]),t.model.submodel.getTickFormatter()(t.sizeScaleMinMax[1])];t.sliderLabelsEl.text(function(t,n){return e[n]})}});e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(76),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={},u={small:{minLabelTextSize:7,maxLabelTextSize:21,defaultLabelTextSize:12},medium:{minLabelTextSize:7,maxLabelTextSize:30,defaultLabelTextSize:15},large:{minLabelTextSize:6,maxLabelTextSize:48,defaultLabelTextSize:20}},c=a.default.extend({init:function(t,e){this.name="sizeslider";var n=i.extend({},s);this.options=i.extend(n,this.options||{});var r=i.extend({},u);this.profiles=i.extend(r,this.profiles||{}),this.propertyName=t.propertyname,this.model_expects=[{name:"submodel",type:"size"},{name:"locale",type:"locale"}];this.changeHandler=this.changeHandler.bind(this),this.readyHandler=this.readyHandler.bind(this),this.model_binds={"change:submodel.domainMin":this.changeHandler,"change:submodel.domainMax":this.changeHandler},this._setModel=i.throttle(this._setModel,50),this._super(t,e)},changeHandler:function(t,e){var n=this.model.submodel.extent||[this.options.EXTENT_MIN,this.options.EXTENT_MAX];this._updateLabels(n),this._super(t,e)},readyHandler:function(t){this.modelUse=this.model.submodel.use;var e=this.model.submodel.extent||[this.options.EXTENT_MIN,this.options.EXTENT_MAX];if("constant"!=this.modelUse)this.sizeScaleMinMax=this.model.submodel.getScale().domain(),this.sliderEl.selectAll(".w").classed("vzb-hidden",!1),this.sliderEl.select(".selection").classed("vzb-hidden",!1),this.sliderEl.select(".overlay").classed("vzb-pointerevents-none",!1),this._setLabelsText();else if(this.sliderEl.selectAll(".w").classed("vzb-hidden",!0),this.sliderEl.select(".selection").classed("vzb-hidden",!0),this.sliderEl.select(".overlay").classed("vzb-pointerevents-none",!0),!this.model.submodel.which){var n=this.propertyActiveProfile;e[1]=(n.default-n.min)/(n.max-n.min),this.model.submodel.which="_default"}this._moveBrush(e)},readyOnce:function(){this._super();var t=this.options,e=t.BAR_WIDTH;this.propertyActiveProfile=this.getPropertyActiveProfile(),this.propertyScale=d3.scaleLinear().domain([t.EXTENT_MIN,t.EXTENT_MAX]).range([this.propertyActiveProfile.min,this.propertyActiveProfile.max]).clamp(!0),this.padding.top=this.propertyActiveProfile.max+1.25*e,this.translator=this.model.locale.getTFunction(),this.sliderLabelsWrapperEl=this.sliderEl.append("g"),this.sliderLabelsWrapperEl.selectAll("text").data([0,0]).enter().append("text").attr("class",function(t,e){return"vzb-szs-slider-thumb-label "+(e?"e":"w")}).attr("dy",1.25*-e+"px"),this.sliderLabelsEl=this.sliderEl.selectAll("text.vzb-szs-slider-thumb-label"),this.sizeScaleMinMax=this.model.submodel.getScale().domain(),this.sizeScaleMinMax&&this._setLabelsText(),this.model._ready&&this.readyHandler()},ready:function(){this._super(),this._updateLabels()},getPropertyActiveProfile:function(){var t=this.profiles[this.getLayoutProfile()];return{min:t["min"+this.propertyName],max:t["max"+this.propertyName],default:t["default"+this.propertyName]}},_updateSize:function(){var t=this;this._super(),this.sliderLabelsWrapperEl.attr("transform",this.isRTL?"scale(-1,1)":null),this.sliderLabelsEl.attr("text-anchor",function(e,n){return(t.isRTL?n:!n)?"start":"end"})},_resize:function(){this.propertyActiveProfile=this.getPropertyActiveProfile(),this.propertyScale.range([this.propertyActiveProfile.min,this.propertyActiveProfile.max]),this.padding.top=this.propertyActiveProfile.max+1.25*this.options.BAR_WIDTH,this._super()},_updateThumbs:function(t){this._updateLabels(t)},_updateLabels:function(t){var e=this;t&&this.sliderLabelsEl.data(t),this.sliderLabelsEl.attr("transform",function(t,n){var r=e.rescaler(n);return"translate("+(e.isRTL?-1:1)*r+",0)"}).attr("font-size",function(t,n){return e.propertyScale(t)}),"constant"===e.model.submodel.use&&this.sliderLabelsEl.text(function(t){return~~e.propertyScale(t)+(e.translator(e.ui.constantUnit)||"")})},_setLabelsText:function(){var t=this,e=[t.model.submodel.getTickFormatter()(t.sizeScaleMinMax[0]),t.model.submodel.getTickFormatter()(t.sizeScaleMinMax[1])];t.sliderLabelsEl.text(function(t,n){return e[n]})}});e.default=c},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){return!!window&&(void 0!==window.document.webkitIsFullScreen?window.document.webkitIsFullScreen:void 0!==window.document.mozFullScreen?window.document.mozFullScreen:void 0!==window.document.msFullscreenElement&&window.document.msFullscreenElement)}function o(t){i()||(s.call(this),this.resizeInExitHandler?this.root.ui.resizeHandler():t())}function a(t){if(window){var e=window.document;this.exitFullscreenHandler=o.bind(this,t),e.addEventListener("webkitfullscreenchange",this.exitFullscreenHandler,!1),e.addEventListener("mozfullscreenchange",this.exitFullscreenHandler,!1),e.addEventListener("fullscreenchange",this.exitFullscreenHandler,!1),e.addEventListener("MSFullscreenChange",this.exitFullscreenHandler,!1)}}function s(){var t=window.document;t.removeEventListener("webkitfullscreenchange",this.exitFullscreenHandler),t.removeEventListener("mozfullscreenchange",this.exitFullscreenHandler),t.removeEventListener("fullscreenchange",this.exitFullscreenHandler),t.removeEventListener("MSFullscreenChange",this.exitFullscreenHandler)}function u(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&l()&&t.webkitRequestFullscreen()}function c(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&l()?document.webkitExitFullscreen():(s.call(this),this.resizeInExitHandler=!1)}function l(){return!(navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS"))}Object.defineProperty(e,"__esModule",{value:!0});var h=n(1),f=r(h),d=n(5),p=function(t){return t&&t.__esModule?t:{default:t}}(d),v=n(21),g=r(v),m=p.default.extend({init:function(t,e){var n=this;this.name=this.name||"gapminder-buttonlist",this.model_expects=[{name:"state",type:"model"},{name:"ui",type:"ui"},{name:"locale",type:"locale"}],this._available_buttons={find:{title:"buttons/find",icon:"search",required:!1},show:{title:"buttons/show",icon:"asterisk",required:!1},moreoptions:{title:"buttons/more_options",icon:"gear",required:!0},colors:{title:"buttons/colors",icon:"paintbrush",required:!1},mapcolors:{title:"buttons/mapcolors",icon:"paintbrush",required:!1},size:{title:"buttons/size",icon:"circle",required:!1},zoom:{title:"buttons/zoom",icon:"cursorPlus",required:!1},fullscreen:{title:"buttons/expand",icon:"expand",func:this.toggleFullScreen.bind(this),required:!0},trails:{title:"buttons/trails",icon:"trails",func:this.toggleBubbleTrails.bind(this),required:!1,statebind:"ui.chart.trails",statebindfunc:this.setBubbleTrails.bind(this)},lock:{title:"buttons/lock",icon:"lock",func:this.toggleBubbleLock.bind(this),required:!1,statebind:"ui.chart.lockNonSelected",statebindfunc:this.setBubbleLock.bind(this)},inpercent:{title:"buttons/inpercent",icon:"percent",func:this.toggleInpercent.bind(this),required:!1,statebind:"ui.chart.inpercent",statebindfunc:this.setInpercent.bind(this)},presentation:{title:"buttons/presentation",icon:"presentation",func:this.togglePresentationMode.bind(this),required:!1,statebind:"ui.presentation",statebindfunc:this.setPresentationMode.bind(this)},about:{title:"buttons/about",icon:"about",required:!1},axes:{title:"buttons/axes",icon:"axes",required:!1},axesmc:{title:"buttons/axesmc",icon:"axes",required:!1},stack:{title:"buttons/stack",icon:"stack",required:!1},side:{title:"buttons/side",icon:"side",required:!1},_default:{title:"Button",icon:"asterisk",required:!1}},this._active_comp=!1,this.model_binds={"change:state.marker.select":function(t){n._readyOnce&&(n.setBubbleTrails(),n.setBubbleLock(),n._toggleButtons())},"change:ui.chart":function(t,e){(e.indexOf("lockActive")>-1||e.indexOf("lockUnavailable")>-1)&&n.setBubbleLock()}},t.ui.buttons.forEach(function(t){var e=n._available_buttons[t];e&&e.statebind&&(n.model_binds["change:"+e.statebind]=function(n){e.statebindfunc(t,n.source.value)})}),this._super(t,e),this.validatePopupButtons(this.model.ui.buttons,this.model.ui.dialogs)},readyOnce:function(){var t=this;this.element=d3.select(this.placeholder),this.element.selectAll("div").remove(),this.root.findChildByName("gapminder-dialogs").on("close",function(e,n){t.setButtonActive(n.id,!1)});var e=(this.model.ui.dialogs||{}).sidebar||[],n=[].concat(this.model.ui.buttons);this.model.ui.buttons=n,this._addButtons(n,e),this._prev_body_overflow=document.body.style.overflow,this.setBubbleTrails(),this.setBubbleLock(),this.setInpercent(),this.setPresentationMode(),this._toggleButtons()},proceedClick:function(t){var e=this,n=e.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']"),r=n.attr("class"),i=e._available_buttons[t];if(i&&i.func)i.func(t);else{var o=-1===r.indexOf("vzb-active");n.classed("vzb-active",o);var a={};a.id=t,a.active=o,e.trigger("click",a)}},validatePopupButtons:function(t,e){for(var n=this,r=e.popup,i=t.filter(function(t){return n._available_buttons[t]&&!n._available_buttons[t].func}),o=0,a=i.length;o<a;o++)if(-1==r.indexOf(i[o]))return f.error('Buttonlist: bad buttons config: "'+i[o]+'" is missing in popups list');return!1},_showAllButtons:function(){this.element.selectAll(".vzb-buttonlist-btn").each(function(t,e){d3.select(this).style("display","")})},_toggleButtons:function(){var t=this,e=this.parent.element.node?this.parent.element:d3.select(this.parent.element),n=(this.model.ui.dialogs||{}).sidebar||[];t._showAllButtons();var r=this.element.selectAll(".vzb-buttonlist-btn"),i=(this.element.node().getBoundingClientRect(),[]),o=[],a=80,s=80,u=this.element.node().getBoundingClientRect().width,c=this.element.node().getBoundingClientRect().height,l=0,h=0;r.each(function(e,r){var u=e,c=d3.select(this),f=-1!==n.indexOf(u.id),d={top:parseInt(c.style("margin-top")),right:parseInt(c.style("margin-right")),left:parseInt(c.style("margin-left")),bottom:parseInt(c.style("margin-bottom"))};a=c.node().getBoundingClientRect().width+d.right+d.left,s=c.node().getBoundingClientRect().height+d.top+d.bottom,c.classed("vzb-hidden")||(f&&"large"===t.getLayoutProfile()?c.style("display","none"):(l+=a,h+=s,u.required?o.push(c):i.push(c)))});var f=l-u,d=h-c,p=1;e.classed("vzb-large")&&e.classed("vzb-dialog-expand-true")||e.classed("vzb-small")&&e.classed("vzb-portrait")?(f>0&&f<=10&&(u+=f),(p=Math.floor(u/a)-o.length)<0&&(p=0)):(d>0&&d<=10&&(c+=d),(p=Math.floor(c/s)-o.length)<0&&(p=0)),i.reverse();for(var v=[],g=0,m=i.length-p;g<m;g++)i[g].style("display","none"),v.push(i[g].attr("data-btn"));var y={};y.hiddenButtons=v,t.trigger("toggle",y)},_addButtons:function(t,e){var n=this;this._components_config=[];var r=[];if(t.length){for(var i=0;i<t.length;i++){var o=t[i],a=this._available_buttons[o],s=a?o:"_default",u=f.clone(this._available_buttons[s]);"_default"==s&&(u.title="buttons/"+o),u.id=o,u.icon=g[u.icon],r.push(u)}var c=this.getTranslationFunction(!0);this.element.selectAll("button").data(r).enter().append("button").attr("class",function(t){var n="vzb-buttonlist-btn";return e.length>0&&e.indexOf(t.id)>-1&&(n+=" vzb-dialog-side-btn"),n}).attr("data-btn",function(t){return t.id}).html(function(t){return"<span class='vzb-buttonlist-btn-icon fa'>"+t.icon+"</span><span class='vzb-buttonlist-btn-title'>"+c(t.title)+"</span>"});this.element.selectAll(".vzb-buttonlist-btn").on("click",function(){d3.event.preventDefault(),d3.event.stopPropagation();var t=d3.select(this).attr("data-btn");n.proceedClick(t)})}},scrollToEnd:function(){var t=0,e=d3.select(".vzb-tool");e.classed("vzb-portrait")&&e.classed("vzb-small")?(this.model.state.marker.select.length>0&&(t=this.element.node().scrollWidth),this.element.node().scrollLeft=t):(this.model.state.marker.select.length>0&&(t=this.element.node().scrollHeight),this.element.node().scrollTop=t)},resize:function(){if(!this.element.selectAll)return f.warn("buttonlist resize() aborted because element is not yet defined");"small"===this.getLayoutProfile()&&this.model.ui.presentation&&this.togglePresentationMode(),this._toggleButtons()},setButtonActive:function(t,e){this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']").classed("vzb-active",e)},toggleBubbleTrails:function(){this.model.ui.chart.trails=!this.model.ui.chart.trails,this.setBubbleTrails()},setBubbleTrails:function(){var t=(this.model.ui.chart||{}).trails;if(t||!1===t){var e=this.element.selectAll(".vzb-buttonlist-btn[data-btn='trails']");if(!e.node())return f.warn("setBubbleTrails: no button 'trails' found in DOM. doing nothing");e.classed("vzb-active-locked",t),e.classed("vzb-hidden",0==this.model.state.marker.select.length)}},toggleBubbleLock:function(t){var e=(this.model.ui.chart||{}).lockActive;if(0!=this.model.state.marker.select.length||e){var n=this.model.ui.chart.lockNonSelected,r=this.model.state.time;n=n?0:r.formatDate(r.value),this.model.ui.chart.lockNonSelected=n,this.setBubbleLock()}},setBubbleLock:function(){var t=(this.model.ui.chart||{}).lockNonSelected,e=(this.model.ui.chart||{}).lockActive,n=(this.model.ui.chart||{}).lockUnavailable||!1;if(t||0===t){0===t||0!==this.model.state.marker.select.length||e||(t=this.model.ui.chart.lockNonSelected=0);var r=this.element.selectAll(".vzb-buttonlist-btn[data-btn='lock']");if(!r.node())return f.warn("setBubbleLock: no button 'lock' found in DOM. doing nothing");var i=this.model.locale.getTFunction();r.classed("vzb-unavailable",n),void 0===e?r.classed("vzb-hidden",0==this.model.state.marker.select.length):r.classed("vzb-hidden",!e),r.classed("vzb-active-locked",t),r.select(".vzb-buttonlist-btn-icon").html(g[t?"lock":"unlock"]),r.select(".vzb-buttonlist-btn-title>span").text(t||i("buttons/lock")).attr("data-vzb-translate",t?null:"buttons/lock")}},toggleInpercent:function(){this.model.ui.chart.inpercent=!this.model.ui.chart.inpercent,this.setInpercent()},setInpercent:function(){if(void 0!==(this.model.ui.chart||{}).inpercent){this.model.locale.getTFunction();this.element.selectAll(".vzb-buttonlist-btn[data-btn='inpercent']").classed("vzb-active-locked",this.model.ui.chart.inpercent)}},togglePresentationMode:function(){this.model.ui.presentation=!this.model.ui.presentation,this.setPresentationMode()},setPresentationMode:function(){this.model.locale.getTFunction();this.element.selectAll(".vzb-buttonlist-btn[data-btn='presentation']").classed("vzb-active-locked",this.model.ui.presentation)},toggleFullScreen:function(t,e){if(window){for(var n=this,r=n.placeholder,i=this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']"),o=!this.model.ui.fullscreen,s=o?"hidden":this._prev_body_overflow;!f.hasClass(r,"vzb-placeholder");)n=n.parent,r=n.placeholder;o?(this.resizeInExitHandler=!1,u(r),a.call(this,this.toggleFullScreen.bind(this,t,!0))):(this.resizeInExitHandler=!e,c.call(this)),f.classed(r,"vzb-force-fullscreen",o),"undefined"!=typeof container&&f.classed(container,"vzb-container-fullscreen",o),this.model.ui.fullscreen=o;var l=this.model.locale.getTFunction();i.classed("vzb-active-locked",o),i.select(".vzb-buttonlist-btn-icon").html(g[o?"unexpand":"expand"]),i.select(".vzb-buttonlist-btn-title>span").text(l("buttons/"+(o?"unexpand":"expand"))).attr("data-vzb-translate","buttons/"+(o?"unexpand":"expand")),document.body.style.overflow=s,this.resizeInExitHandler||this.root.ui.resizeHandler()}}});e.default=m},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(r(i),n(160)),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=n(21),u=(r(s),a.default.extend({init:function(t,e){this.name="gapminder-optionsbuttonlist",this._super(t,e)},readyOnce:function(){var t=this;Object.keys(this._available_buttons).forEach(function(e){var n=t._available_buttons[e];n.required=!n.required}),this.buttonListComp=this.root.findChildByName("gapminder-buttonlist"),this.buttonListComp.on("click",function(e,n){t.element.selectAll(".vzb-buttonlist-btn[data-btn='"+n.id+"']").classed("vzb-active",n.active)}),this.buttonListComp.on("toggle",function(e,n){var r=0;t.element.selectAll(".vzb-buttonlist-btn").each(function(t){var e=d3.select(this),i=-1==n.hiddenButtons.indexOf(t.id);e.style("display",i?"none":""),i||r++})}),this._super()},proceedClick:function(t){var e=this;this.buttonListComp.proceedClick(t),this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']").datum().func&&setTimeout(function(){e.root.findChildByName("gapminder-dialogs").closeAllDialogs()},200)},_toggleButtons:function(){}}));e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=r(a),u=n(163),c=r(u),l=n(108),h=r(l),f=n(21),d=s.default.extend({init:function(t,e){var n=this;this.template='<div class="vzb-cl-outer"></div>',this.name="colorlegend",this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"color",type:"color"},{name:"locale",type:"locale"},{name:"ui",type:"ui"}],this.model_binds={"change:color.scaleType":function(t,e){n._readyOnce&&!n.colorModel.isDiscrete()&&n.updateView()},"change:color.palette":function(t,e){!n._readyOnce||n.colorModel.isDiscrete()&&!n.frame||n.updateView()},"change:marker.highlight":function(t,e){n.colorModel.isDiscrete()&&n.model.marker.getFrame(n.model.time.value,function(t){if(t){var e=n.model.marker.getHighlighted(n.KEY);n.updateGroupsOpacity(e.map(function(e){return t[n.colorModel._name][e]}))}else n.updateGroupsOpacity()})},"translate:locale":function(){n.colorPicker.translate(n.model.locale.getTFunction())}},this._super(t,e)},readyOnce:function(){var t=this;this.element=d3.select(this.element),d3.select(this.placeholder.parentNode).classed("vzb-dialog-scrollable",!0),this.colorModel=this.model.color,this.colorlegendMarker=this.colorModel.getColorlegendMarker(),this.colorlegendMarker&&this.colorlegendMarker.on("ready",function(){t.ready()}),this.listColorsEl=this.element.append("div").attr("class","vzb-cl-holder").append("div").attr("class","vzb-cl-colorlist"),this.rainbowEl=this.listColorsEl.append("div").attr("class","vzb-cl-rainbow"),this.rainbowCanvasEl=this.rainbowEl.append("canvas"),this.minimapEl=this.listColorsEl.append("div").attr("class","vzb-cl-minimap"),this.rainbowLegendEl=this.listColorsEl.append("div").attr("class","vzb-cl-rainbow-legend"),this.rainbowLegendSVG=this.rainbowLegendEl.append("svg"),this.rainbowLegendG=this.rainbowLegendSVG.append("g"),this.rainbowLegend=null,this.labelScaleEl=this.listColorsEl.append("div").attr("class","vzb-cl-labelscale"),this.labelScaleSVG=this.labelScaleEl.append("svg"),this.labelScaleG=this.labelScaleSVG.append("g"),this.unitDiv=this.listColorsEl.append("div").attr("class","vzb-cl-unit"),this.unitText=this.unitDiv.append("span").attr("class","vzb-cl-unit-text"),this.minimapSVG=this.minimapEl.append("svg"),this.minimapG=this.minimapSVG.append("g"),this.colorPicker=new c.default(o.isArray(this.root.element)?this.root.element:d3.select(this.root.element)),this.colorPicker.translate(this.model.locale.getTFunction()),this._initSelectDialog()},_initSelectDialog:function(){var t=this.model.locale.getTFunction();this.moreOptionsHint=this.listColorsEl.append("span").classed("vzb-cl-more-hint vzb-hidden",!0).text(t("hints/color/more")),this.selectDialog=this.listColorsEl.append("div").classed("vzb-cl-select-dialog vzb-hidden",!0),this._initSelectDialogItems()},_initSelectDialogItems:function(){var t=this,e=this.model.locale.getTFunction();this.selectDialogTitle=this.selectDialog.append("div").classed("vzb-cl-select-dialog-title",!0),this.selectDialog.append("div").classed("vzb-cl-select-dialog-close",!0).html(f.close).on("click",function(){return t._closeSelectDialog()}),this.selectAllButton=this.selectDialog.append("div").classed("vzb-cl-select-dialog-item",!0).text("\u2705 "+e("dialogs/color/select-all")),this.removeElseButton=this.selectDialog.append("div").classed("vzb-cl-select-dialog-item",!0).text("\ud83d\uddd1\ufe0f "+e("dialogs/color/remove-else")),this.editColorButton=this.selectDialog.append("div").classed("vzb-cl-select-dialog-item vzb-cl-select-dialog-item-moreoptions",!0).text("\ud83c\udfa8 "+e("dialogs/color/edit-color")),this.editColorButtonTooltip=this.editColorButton.append("div").classed("vzb-cl-select-dialog-item-tooltip",!0).text("Dataset author doesn't want you to change this")},_closeSelectDialog:function(){this.selectDialog.classed("vzb-hidden",!0)},_bindSelectDialogItems:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[1],o=n[2];this.selectDialogTitle.text(o[i].textContent),this.selectAllButton.on("click",function(){var e;(e=t._interact()).clickToSelect.apply(e,n),t._closeSelectDialog()}),this.removeElseButton.on("click",function(){var e;(e=t._interact()).clickToShow.apply(e,n),t._closeSelectDialog()}),this.editColorButton.on("click",function(){var e;(e=t._interact()).clickToChangeColor.apply(e,n),t._closeSelectDialog()})},ready:function(){var t=this;if(this.KEY=this.model.entities.getDimension(),this.colorlegendDim=this.KEY,this.canShowMap=!1,this.colorModel.isDiscrete()&&"constant"!==this.colorModel.use&&this.colorlegendMarker){if(!this.colorlegendMarker._ready)return;return this.colorlegendDim=this.colorModel.getColorlegendEntities().getDimension(),void this.colorlegendMarker.getFrame(this.model.time.value,function(e){if(!e)return o.warn("colorlegend received empty frame in ready()");t.frame=e,t.canShowMap=o.keys((t.frame||{}).hook_geoshape||{}).length,t.colorlegendKeys=t.colorlegendMarker.getKeys(t.colorlegendDim),t.colorlegendKeys.forEach(function(e){((t.frame||{}).hook_geoshape||{})[e[t.colorlegendDim]]||(t.canShowMap=!1)}),t.updateView(),t.updateGroupsOpacity()})}t.updateView(),t.updateGroupsOpacity()},updateView:function(){var t=this;if(!this.element.selectAll)return o.warn("colorlegend resize() aborted because element is not yet defined");var e=this,n=(this.KEY,this.colorModel.getPalette()),r=this.canShowMap,i=this.colorlegendKeys||[],a=this.listColorsEl.selectAll(".vzb-cl-option"),s=r||"_default"==this.colorModel.which||this.colorlegendMarker&&this.colorlegendDim==this.KEY&&i.length>10&&o.comparePlainObjects(this.colorModel.getColorlegendEntities().getFilter(),this.model.entities.getFilter());a.classed("vzb-hidden",s),this._updateSelectDialog(),this.rainbowEl.classed("vzb-hidden",this.colorModel.isDiscrete()),this.labelScaleEl.classed("vzb-hidden",this.colorModel.isDiscrete()),this.rainbowLegendEl.classed("vzb-hidden",this.colorModel.isDiscrete()),this.minimapEl.classed("vzb-hidden",!r||!this.colorModel.isDiscrete()),this.unitDiv.classed("vzb-hidden",!0);var u=this.colorModel.getScale();if(this.colorModel.isDiscrete())if(r){var c=this.minimapEl.append("div").attr("class","vzb-temp");this.minimapSVG.attr("viewBox",null),this.minimapSVG.selectAll("g").remove(),this.minimapG=this.minimapSVG.append("g"),this.minimapG.selectAll("path").data(i,function(t){return t[e.colorlegendDim]}).enter().append("path").on("mouseover",e._interact().mouseover).on("mouseout",e._interact().mouseout).on("click",function(){t._bindSelectDialogItems.apply(t,arguments),t.selectDialog.classed("vzb-hidden",!1)}).each(function(t){var n=e.frame.hook_geoshape[t[e.colorlegendDim]].trim();"<svg"==n.slice(0,4)&&(c.html(n),n=c.select("svg").select("path").attr("d")),d3.select(this).attr("d",n).style("fill",u(t[e.colorlegendDim])).append("title").text(e.frame.label[t[e.colorlegendDim]]),c.html("")});var l=this.minimapG.node().getBBox();this.minimapSVG.attr("viewBox","0 0 "+1.05*l.width+" "+1.05*l.height),c.remove()}else a="_default"==this.colorModel.which?a.data([]):a.data(s?[]:i.length?i:Object.keys(this.colorModel.getPalette()).map(function(t){var n={};return n[e.colorlegendDim]=t,n}),function(t){return t[e.colorlegendDim]}),a.exit().remove(),a=a.enter().append("div").attr("class","vzb-cl-option").each(function(){var t=this;d3.select(this).append("div").attr("class","vzb-cl-color-sample").on("click",function(){t._bindSelectDialogItems.apply(t,arguments),t.selectDialog.classed("vzb-hidden",!1)}),d3.select(this).append("div").attr("class","vzb-cl-color-legend")}).on("mouseover",e._interact().mouseover).on("mouseout",e._interact().mouseout).on("click",function(){t._bindSelectDialogItems.apply(t,arguments),t.selectDialog.classed("vzb-hidden",!1)}).merge(a),a.each(function(t,n){d3.select(this).select(".vzb-cl-color-sample").style("background-color",u(t[e.colorlegendDim])).style("border","1px solid "+u(t[e.colorlegendDim]));var r=e.colorlegendMarker?e.frame.label[t[e.colorlegendDim]]:null;r||0===r||(r=t[e.colorlegendDim]),d3.select(this).select(".vzb-cl-color-legend").text(r)});else{var f=this.rainbowEl.node().getBoundingClientRect().width,d=Object.keys(n).map(parseFloat),p=void 0,v=void 0,g=this.colorModel.getTickFormatter(),m=null,y=this.colorModel.paletteLabels;if(y){m="optimistic",p=y.map(function(t){return parseFloat(t)});var b=d3.max(p);v=p.map(function(t){return t/b*f})}else{p=u.domain();var _=d3.max(d);v=d.map(function(t){return t/_*f})}var x=d3.min(p)<=0&&d3.max(p)>=0&&"log"===this.colorModel.scaleType?"genericLog":this.colorModel.scaleType,w=d3["scale"+o.capitalize("time"===x?"linear":x)]().domain(p).range(v),M=parseInt(this.rainbowEl.style("left"),10)||0,S=parseInt(this.rainbowEl.style("right"),10)||M;this.labelScaleSVG.style("width",M+f+S+"px"),this.labelScaleG.attr("transform","translate("+M+",0)"),this.rainbowLegendSVG.style("width",M+f+S+"px"),this.rainbowLegendG.attr("transform","translate("+M+", 7)");var k=(0,h.default)("bottom");k.scale(w).tickSizeOuter(0).tickPadding(6).tickSizeMinor(3,0).labelerOptions({scaleType:this.colorModel.scaleType,toolMargin:{right:S,left:M},showOuter:!0,formatter:g,bump:M,cssFontSize:"11px",fitIntoScale:m}),this.labelScaleG.call(k);var E=u.range(),O=v.map(function(t,e){return{val:t,color:E[e],paletteKey:d[e]}});this.rainbowLegend=this.rainbowLegendG.selectAll("circle").data(O),this.rainbowLegend.exit().remove(),this.rainbowLegend=this.rainbowLegend.enter().append("circle").attr("r","6px").attr("stroke","#000").on("click",e._interact().clickToChangeColor).merge(this.rainbowLegend),this.rainbowLegend.each(function(t,e){d3.select(this).attr("fill",t.color),d3.select(this).attr("cx",t.val)}),this.rainbowCanvasEl.attr("width",f).attr("height",1).style("width",f+"px").style("height","100%");for(var T,C=this.rainbowCanvasEl.node().getContext("2d"),z=C.createImageData(f,1),P=0,A=-1;P<f;++P)T=d3.rgb(u(w.invert(P))),z.data[++A]=T.r,z.data[++A]=T.g,z.data[++A]=T.b,z.data[++A]=255;C.putImageData(z,0,0);var D=this.colorModel.getConceptprops().unit||"";this.unitDiv.classed("vzb-hidden",""==D),this.unitText.text(D),a.classed("vzb-hidden",!0)}},_updateSelectDialog:function(){var t=this.colorModel.isUserSelectable();this.editColorButtonTooltip.classed("vzb-hidden",t),this.editColorButton.classed("vzb-cl-select-dialog-item-disabled",!t),this.selectDialog.classed("vzb-hidden",!0)},_highlight:function(t){o.getProp(this,["model","ui","chart","superhighlightOnMinimapHover"])?this.model.marker.setSuperHighlight(t):this.model.marker.setHighlight(t)},_unhighlight:function(){o.getProp(this,["model","ui","chart","superhighlightOnMinimapHover"])?this.model.marker.clearSuperHighlighted():this.model.marker.clearHighlighted()},_interact:function(){var t=this,e=this.KEY,n=this.colorlegendDim;return{mouseover:function(r,i){if(t.moreOptionsHint.classed("vzb-hidden",!1),t.colorModel.isDiscrete()){var a=(d3.select(this),r[n]),s=t.colorModel.getValidItems().filter(function(e){return e[t.colorModel.which]==a}).map(function(t){return o.clone(t,[e])});t._highlight(s)}},mouseout:function(e,n){t.moreOptionsHint.classed("vzb-hidden",!0),t.colorModel.isDiscrete()&&t._unhighlight()},clickToChangeColor:function(e,r){if(t.colorModel.isUserSelectable()){var i=t.colorModel.getPalette(),o=t.colorModel.getDefaultPalette(),a=(d3.select(this),t.colorModel.isDiscrete()?e[n]:e.paletteKey);t.colorPicker.colorOld(i[a]).colorDef(o[a]).callback(function(e,n){return t.colorModel.setColor(e,a,n)}).fitToScreen([d3.event.pageX,d3.event.pageY]).show(!0)}},clickToShow:function(e,r){if(t.colorModel.isDiscrete()){var i=(d3.select(this),e[n],t.model.entities.show[n]&&t.model.entities.show[n].$in?o.clone(t.model.entities.show[n].$in):[]),a=i.indexOf(e[n]);-1!==a?i.splice(a,1):i.push(e[n]);var s={};i.length>0&&(s[n]={$in:i}),t.model.entities.set({show:s})}},clickToSelect:function(r,i){if(t.colorModel.isDiscrete()){var a=(d3.select(this),r[n]),s=t.colorModel.getValidItems().filter(function(e){return e[t.colorModel.which]==a}).map(function(t){return o.clone(t,[e])});s.filter(function(e){return t.model.marker.isSelected(e)}).length==s.length?t.model.marker.clearSelected():t.model.marker.setSelect(s)}}}},resize:function(){this.frame&&this.updateView(),this.colorPicker.resize(d3.select(".vzb-colorpicker-svg"))},updateGroupsOpacity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,n=this.colorModel.getColorlegendMarker()||{},r=n.opacityRegular||.8,i=n.opacityHighlightDim||.5,o=e.canShowMap?".vzb-cl-minimap path":".vzb-cl-option .vzb-cl-color-sample";this.listColorsEl.selectAll(o).style("opacity",function(n){return t.length?t.indexOf(n[e.colorlegendDim])>-1?1:i:r})}});e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a={INVISIBLE:"vzb-invisible",COLOR_POINTER:"vzb-colorpicker-pointer",COLOR_BUTTON:"vzb-colorpicker-cell",COLOR_DEFAULT:"vzb-colorpicker-default",COLOR_SAMPLE:"vzb-colorpicker-sample",COLOR_PICKER:"vzb-colorpicker-svg",COLOR_CIRCLE:"vzb-colorpicker-circle",COLOR_CIRCLES:"vzb-colorpicker-circles",COLOR_SEGMENT:"vzb-colorpicker-segment",COLOR_BACKGR:"vzb-colorpicker-background"},s=function(){function t(e){r(this,t),this._container=e,this._wrapper=this._container.select("."+a.COLOR_PICKER),this._init()}return i(t,[{key:"_init",value:function(){this._initVariables(),this._initCircles(),this._style(),this.resize(this._svg)}},{key:"_initVariables",value:function(){this._maxWidth=280,this._maxHeight=323,this._colorOld="#000",this._colorDef="#000",this._colorWhite="#f8f8f8",this._margin={top:.1,bottom:.1,left:.1,right:.1},this._initSvg();var t=getComputedStyle(this._svg.node()),e=t.width,n=t.height;this._width=this.constructor.px2num(e),this._height=this.constructor.px2num(n),this._maxRadius=this._width/2*(1-this._margin.left-this._margin.right),this._nCellsH=15,this._minH=0,this._nCellsL=4,this._minL=.5,this._satConstant=.7,this._outerL_display=.4,this._outerL_meaning=.3,this._firstAngleSat=0,this._minRadius=15,this._arc=d3.arc(),this._pie=d3.pie().sort(null).value(function(t){return 1}),this._colorPointer=null,this._showColorPicker=!1,this._sampleRect=null,this._sampleText=null,this._callback=function(t){return console.info("Color picker callback example. Setting color to "+t)},this._colorData=this._generateColorData()}},{key:"_generateColorData",value:function(){for(var t=this._minL,e=this._minH,n=this._nCellsL,r=this._nCellsH,i=this._firstAngleSat,o=this._satConstant,a=this._outerL_display,s=this._outerL_meaning,u=[],c=0;c<n;c++){var l=t+(1-t)/n*c;u.push([]);for(var h=0;h<=r;h++){var f=e+(1-e)/r*h;u[c].push({display:this.constructor.hsl2rgb(f,0===h?i:o,0===c?a:l),meaning:this.constructor.hsl2rgb(f,0===h?i:o,0===c?s:l)})}}return u}},{key:"_initSvg",value:function(){var t=this;this._wrapper=this._container.append("div").style("position","absolute").style("top","0").style("left","0").style("width","100%").style("max-width",this._maxWidth+"px").style("height","100%").style("max-height",this._maxHeight+"px").style("z-index",9999).attr("class",a.COLOR_PICKER+" vzb-dialog-shadow").classed(a.INVISIBLE,!this._showColorPicker).on("mouseout",function(){return t._cellHover(t._colorOld)}),this._svg=this._wrapper.append("svg").style("width","100%").style("height","100%")}},{key:"_initCircles",value:function(){var t=this,e=this._svg,n=this._maxHeight,r=this._width,i=this._height,o=this._margin,s=this._colorData,u=this._nCellsL,c=this._minRadius,l=this._maxRadius,h=this._colorWhite;e.append("rect").attr("width",r).attr("height",n).attr("class",a.COLOR_BACKGR).on("mouseover",function(){return t._cellHover(t._colorOld)}).on("click",function(){d3.event.stopPropagation(),t._changeColor(t._colorOld),t.show(!1)});var f=l+r*o.left,d=l+i*o.top,p=e.append("g").attr("class",a.COLOR_CIRCLES).attr("transform","translate("+f+", "+d+")");e.append("rect").attr("class",a.COLOR_SAMPLE).attr("width",r/2).attr("height",i*o.top/2),this._sampleRect=e.append("rect").attr("class",a.COLOR_SAMPLE).attr("width",r/2).attr("x",r/2).attr("height",i*o.top/2),e.append("text").attr("x",r*o.left).attr("y",i*o.top/2).attr("dy","1.3em").attr("class",a.COLOR_SAMPLE).style("text-anchor","start"),this._sampleText=e.append("text").attr("x",r*(1-o.right)).attr("y",i*o.top/2).attr("dy","1.3em").attr("class",a.COLOR_SAMPLE).style("text-anchor","end"),e.append("text").attr("x",.1*r).attr("y",i*(1-o.bottom)).attr("dy","1.2em").attr("class","vzb-default-label").style("text-anchor","start").text("default"),e.append("circle").attr("class",a.COLOR_DEFAULT+" "+a.COLOR_BUTTON).attr("r",r*o.left/2).attr("cx",r*o.left*1.5).attr("cy",i*(1-1.5*o.bottom)).on("mouseover",function(){d3.select(this).style("stroke","#444"),v._cellHover(v._colorDef)}).on("mouseout",function(){d3.select(this).style("stroke","none")});var v=this;p.selectAll("."+a.COLOR_CIRCLE).data(s).enter().append("g").attr("class",a.COLOR_CIRCLE).each(function(t,e){v._arc.outerRadius(c+(l-c)/u*(u-e)).innerRadius(c+(l-c)/u*(u-e-1)),d3.select(this).selectAll("."+a.COLOR_SEGMENT).data(v._pie(t)).enter().append("g").attr("class",a.COLOR_SEGMENT).append("path").attr("class",a.COLOR_BUTTON).attr("d",v._arc).style("fill",function(t){return t.data.display}).style("stroke",function(t){return t.data.display}).on("mouseover",function(t){v._cellHover(t.data.meaning,this)}).on("mouseout",function(){return v._cellUnhover()})}),p.append("circle").attr("r",c).attr("fill",h).attr("class",a.COLOR_BUTTON).on("mouseover",function(){d3.select(this).style("stroke","#555"),v._cellHover(h)}).on("mouseout",function(){d3.select(this).style("stroke","none")}),this._colorPointer=p.append("path").attr("class",a.COLOR_POINTER+" "+a.INVISIBLE),e.selectAll("."+a.COLOR_BUTTON).on("click",function(e){d3.event.stopPropagation(),t._changeColor(e?e.data.meaning:t._colorDef,!0),t.show(!1)})}},{key:"_style",value:function(){var t=this._svg,e=this._colorWhite;t.select("."+a.COLOR_BACKGR).style("fill","white"),t.select("."+a.COLOR_POINTER).style("stroke-width",2).style("stroke",e).style("pointer-events","none").style("fill","none"),t.selectAll("."+a.COLOR_BUTTON).style("cursor","pointer"),t.selectAll("text").style("pointer-events","none").style("fill","#D9D9D9").style("font-size","0.7em").style("text-transform","uppercase"),t.selectAll("circle."+a.COLOR_BUTTON).style("stroke-width",2),t.selectAll("rect."+a.COLOR_SAMPLE).style("pointer-events","none")}},{key:"_cellHover",value:function(t,e){null!=e&&this._colorPointer.classed(a.INVISIBLE,!1).attr("d",d3.select(e).attr("d")),this._sampleRect.style("fill",t),this._sampleText.text(t);var n=(0,o.isTouchDevice)();this._changeColor(t,n),n&&this.show(!1)}},{key:"_changeColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._callback(t,e)}},{key:"_cellUnhover",value:function(){this._colorPointer.classed(a.INVISIBLE,!0)}},{key:"resize",value:function(t){if(arguments.length){if(void 0!==t){var e=this._margin,n=t,r=getComputedStyle(n.node()),i=r.width,o=r.height,s=this.constructor.px2num(i),u=this.constructor.px2num(o),c=s/2*(1-e.left-e.right),l=n.select("."+a.COLOR_DEFAULT),h=n.select(".vzb-default-label"),f=n.select("."+a.COLOR_CIRCLES),d=c+u*e.top,p=(1+.5*e.top)*u*.5,v=c+s*e.left,g=d>p?p:d;f.attr("transform","translate("+v+", "+g+")"),l.attr("cx",s*e.left*1.5).attr("cy",u*(1-1.5*e.bottom)),h.attr("x",.1*s).attr("y",u*(1-e.bottom))}return this.fitToScreen()}}},{key:"fitToScreen",value:function(t){var e=this._container.node().getBoundingClientRect(),n=void 0,r=void 0,i=getComputedStyle(this._wrapper.node()),o=i.width,a=i.height,s=i.right,u=i.top,c=this.constructor.px2num(o),l=this.constructor.px2num(a);t?(n=t[0]-e.left,r=t[1]-e.top):(n=e.width-this.constructor.px2num(s)-c,r=this.constructor.px2num(u));var h={left:""};return.8*e.width<=c?h.right=.5*(e.width-c)+"px":n+c>e.width?h.right=Math.min(.1*e.width,20)+"px":h.right=e.width-n-c+"px",h.right&&this._wrapper.style("right",h.right),.8*e.height<=l?h.top=.5*(e.height-l)+"px":r+1.2*l>e.height?h.top=.9*e.height-l+"px":h.top=r+"px",h.top&&this._wrapper.style("top",h.top),this._wrapper.style("left",h.left),this}},{key:"show",value:function(t){if(!arguments.length)return this._showColorPicker;null==this._svg&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),this._showColorPicker="toggle"==t?!this._showColorPicker:t,this._showColorPicker||(this._callback=function(){}),this._wrapper.classed(a.INVISIBLE,!this._showColorPicker)}},{key:"_getOrSet",value:function(t,e){return t="_"+t,arguments.length>1?(this[t]=e,this):this[t]}},{key:"nCellsH",value:function(){return this._getOrSet.apply(this,["nCellsH"].concat(Array.prototype.slice.call(arguments)))}},{key:"minH",value:function(){return this._getOrSet.apply(this,["minH"].concat(Array.prototype.slice.call(arguments)))}},{key:"nCellsL",value:function(){return this._getOrSet.apply(this,["nCellsL"].concat(Array.prototype.slice.call(arguments)))}},{key:"minL",value:function(){return this._getOrSet.apply(this,["minL"].concat(Array.prototype.slice.call(arguments)))}},{key:"outerL_display",value:function(){return this._getOrSet.apply(this,["outerL_display"].concat(Array.prototype.slice.call(arguments)))}},{key:"outerL_meaning",value:function(){return this._getOrSet.apply(this,["outerL_meaning"].concat(Array.prototype.slice.call(arguments)))}},{key:"satConstant",value:function(){return this._getOrSet.apply(this,["satConstant"].concat(Array.prototype.slice.call(arguments)))}},{key:"firstAngleSat",value:function(){return this._getOrSet.apply(this,["firstAngleSat"].concat(Array.prototype.slice.call(arguments)))}},{key:"minRadius",value:function(){return this._getOrSet.apply(this,["minRadius"].concat(Array.prototype.slice.call(arguments)))}},{key:"margin",value:function(){return this._getOrSet.apply(this,["margin"].concat(Array.prototype.slice.call(arguments)))}},{key:"callback",value:function(){return this._getOrSet.apply(this,["callback"].concat(Array.prototype.slice.call(arguments)))}},{key:"colorDef",value:function(t){return arguments.length?(void 0!==t&&(this._colorDef=t),null==this._svg&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),this._svg.select("."+a.COLOR_DEFAULT).style("fill",this._colorDef),this):this._colorDef}},{key:"translate",value:function(t){return"function"==typeof t&&this._svg.select(".vzb-default-label").text(t("colorpicker/default")),this}},{key:"colorOld",value:function(t){return arguments.length?(this._colorOld=t,null==this._svg&&console.warn("Color picker is missing SVG element. Was init sequence performed?"),this._svg.select("rect."+a.COLOR_SAMPLE).style("fill",this._colorOld),this._svg.select("text."+a.COLOR_SAMPLE).text(this._colorOld),this):this._colorOld}}],[{key:"hsl2rgb",value:function(t,e,n){var r=void 0,i=void 0,o=void 0;if(0==e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;r=this.hue2rgb(s,a,t+1/3),i=this.hue2rgb(s,a,t),o=this.hue2rgb(s,a,t-1/3)}return"#"+Math.round(255*r).toString(16)+Math.round(255*i).toString(16)+Math.round(255*o).toString(16)}},{key:"hue2rgb",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}},{key:"px2num",value:function(t){return parseFloat(t)||0}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(11)),a=r(o),s=n(107),u=r(s),c=n(143),l=(r(c),n(106)),h=r(l),f=a.default.extend("about",{init:function(t,e){this.name="about",this._super(t,e)},readyOnce:function(){var t=u.default.version,e=new Date(parseInt(u.default.build));this.element=d3.select(this.element),this.element.select(".vzb-about-text0").html("This chart is made with Vizabi,"),this.element.select(".vzb-about-text1").html("a project by <a href='http://gapminder.org'>Gapminder Foundation</a>"),this.element.select(".vzb-about-version").html("<a href='https://github.com/Gapminder/vizabi/releases/tag/v"+t+"'>Version: "+t+"</a>"),this.element.select(".vzb-about-updated").html("Build: "+d3.time.format("%Y-%m-%d at %H:%M")(e)),this.element.select(".vzb-about-report").html("<a href='https://getsatisfaction.com/gapminder/'>Report a problem</a>"),this.element.select(".vzb-about-credits").html("<a href='https://github.com/Gapminder/vizabi/graphs/contributors'>Contributors</a>");var n=h.default,r={},i=this.root.versionInfo;r.version=i?i.version:"N/A",r.build=i?d3.time.format("%Y-%m-%d at %H:%M")(new Date(parseInt(i.build))):"N/A",r.name=this.root.name;var o=this.element.select(".vzb-about-tool");o.html(""),o.append("p").text("Tool: "+r.name),o.append("p").text("-version: "+r.version),o.append("p").text("-build: "+r.build);var a=n.instances.map(function(t){var e={},n=t.readerObject.versionInfo;return e.version=n?n.version:"N/A",e.build=n?d3.time.format("%Y-%m-%d at %H:%M")(new Date(parseInt(n.build))):"N/A",e.name=t.readerObject._name,e}),s=this.element.select(".vzb-about-readers").selectAll(".vzb-about-reader").data(a);s.exit().remove(),s=s.enter().append("p").attr("class","vzb-about-reader"),s.append("p").text(function(t){return t.name}),s.append("p").text(function(t){return"-version: "+t.version}),s.append("p").text(function(t){return"-build: "+t.build});var c=n.instances.map(function(t){return t.getDatasetName()}),l=this.element.select(".vzb-about-datasets").selectAll(".vzb-about-dataset").data(c);l.exit().remove(),l=l.enter().append("p").attr("class","vzb-about-dataset"),l.append("p").text(function(t){return t})}});e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(37),c=r(u),l=n(166),h=r(l),f=s.default.extend("axes",{init:function(t,e){this.name="axes";this.components=[{component:c.default,placeholder:".vzb-xaxis-selector",model:["state.time","state.marker.axis_x","locale"]},{component:h.default,placeholder:".vzb-xaxis-minmax",model:["state.marker","state.time","locale"],markerID:"axis_x",ui:{selectDomainMinMax:!1,selectZoomedMinMax:!0}},{component:c.default,placeholder:".vzb-yaxis-selector",model:["state.time","state.marker.axis_y","locale"]},{component:h.default,placeholder:".vzb-yaxis-minmax",model:["state.marker","state.time","locale"],markerID:"axis_y",ui:{selectDomainMinMax:!1,selectZoomedMinMax:!0}}],this._super(t,e)}});e.default=f},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=s.default.extend({init:function(t,e){var i,a=this;this.name="gapminder-minmaxinputs",this.template=n(418),this.model_expects=[{name:"marker",type:"marker"},{name:"time",type:"time"},{name:"locale",type:"locale"}],this.markerID=t.markerID,t.markerID||o.warn("minmaxinputs.js complains on 'markerID' property: "+t.markerID),this.model_binds=(i={"translate:locale":function(){a.updateView()}},r(i,"change:marker."+this.markerID,function(){a.updateView()}),r(i,"ready",function(){a.updateView()}),i),this._super(t,e),this.ui=o.extend({selectDomainMinMax:!1,selectZoomedMinMax:!1},this.ui.getPlainObject())},ready:function(){this.updateView()},readyOnce:function(){var t=this;this.element=d3.select(this.element),this.el_domain_labelMin=this.element.select(".vzb-mmi-domainmin-label"),this.el_domain_labelMax=this.element.select(".vzb-mmi-domainmax-label"),this.el_domain_fieldMin=this.element.select(".vzb-mmi-domainmin"),this.el_domain_fieldMax=this.element.select(".vzb-mmi-domainmax"),this.el_break=this.element.select(".vzb-mmi-break"),this.el_zoomed_labelMin=this.element.select(".vzb-mmi-zoomedmin-label"),this.el_zoomed_labelMax=this.element.select(".vzb-mmi-zoomedmax-label"),this.el_zoomed_fieldMin=this.element.select(".vzb-mmi-zoomedmin"),this.el_zoomed_fieldMax=this.element.select(".vzb-mmi-zoomedmax"),t.el_domain_fieldMin.on("change",function(){t._setModel("domainMin",this.value)}),t.el_domain_fieldMax.on("change",function(){t._setModel("domainMax",this.value)}),t.el_zoomed_fieldMin.on("change",function(){t._setModel("zoomedMin",this.value)}),t.el_zoomed_fieldMax.on("change",function(){t._setModel("zoomedMax",this.value)}),this.element.selectAll("input").on("keypress",function(){13==d3.event.which&&document.activeElement.blur()})},updateView:function(){var t=this;this.translator=this.model.locale.getTFunction(),this.el_domain_labelMin.text(this.translator("hints/min")+":"),this.el_domain_labelMax.text(this.translator("hints/max")+":"),this.el_zoomed_labelMin.text(this.translator("hints/min")+":"),this.el_zoomed_labelMax.text(this.translator("hints/max")+":"),this.el_domain_labelMin.classed("vzb-hidden",!this.ui.selectDomainMinMax),this.el_domain_labelMax.classed("vzb-hidden",!this.ui.selectDomainMinMax),this.el_domain_fieldMin.classed("vzb-hidden",!this.ui.selectDomainMinMax),this.el_domain_fieldMax.classed("vzb-hidden",!this.ui.selectDomainMinMax),this.el_break.classed("vzb-hidden",!(this.ui.selectDomainMinMax&&this.ui.selectZoomedMinMax)),this.el_zoomed_labelMin.classed("vzb-hidden",!this.ui.selectZoomedMinMax),this.el_zoomed_labelMax.classed("vzb-hidden",!this.ui.selectZoomedMinMax),this.el_zoomed_fieldMin.classed("vzb-hidden",!this.ui.selectZoomedMinMax),this.el_zoomed_fieldMax.classed("vzb-hidden",!this.ui.selectZoomedMinMax);var e=function(e){return e||0===e?o.isDate(e)?t.model.time.formatDate(e):d3.format(".2r")(e):e},n=this.model.marker[this.markerID],r=n.getScale().domain();this.el_domain_fieldMin.property("value",e(d3.min(r))),this.el_domain_fieldMax.property("value",e(d3.max(r))),this.el_zoomed_fieldMin.property("value",e(n.getZoomedMin())),this.el_zoomed_fieldMax.property("value",e(n.getZoomedMax()))},_setModel:function(t,e){this.model.marker[this.markerID][t]=o.strToFloat(e)}});e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(162),c=r(u),l=n(37),h=r(l),f=s.default.extend("colors",{init:function(t,e){this.name="colors",this.components=[{component:h.default,placeholder:".vzb-caxis-selector",model:["state.time","state.marker.color","locale"],showHoverValues:!0},{component:c.default,placeholder:".vzb-clegend-container",model:["state.time","state.entities","state.marker","state.marker.color","locale","ui"]}],this._super(t,e)}});e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),u=n(5),c=r(u),l=c.default.extend({init:function(t,e){this.name="gapminder-dialogs",this._curr_dialog_index=20,this.model_expects=[{name:"state",type:"model"},{name:"ui",type:"ui"},{name:"locale",type:"locale"}];var n=o.default.getCollection();this._available_dialogs=Object.keys(n).reduce(function(t,e){var r=n[e];return r.prototype.isDialog&&!e.startsWith("_")&&(t[e]={dialog:r}),t},{}),this._super(t,e)},domReady:function(){var t=(this.model.ui.dialogs||{}).popup||[],e=(this.model.ui.dialogs||{}).sidebar||[];this.rootEl=this.root.element instanceof Array?this.root.element:d3.select(this.root.element),!0===e&&(e=t,(this.model.ui.dialogs||{}).sidebar=e),0!==e.length&&this.rootEl.classed("vzb-dialog-expand-true",!0),this.dialog_popup=t,this.dialog_sidebar=e},readyOnce:function(){var t=this;if(this.element=d3.select(this.placeholder),this.element.selectAll("div").remove(),s.isTouchDevice()&&this.element.classed("vzb-no-hover",!0),this._addDialogs(this.dialog_popup,this.dialog_sidebar),s.defer(function(){t.trigger("resize")}),0!==this.dialog_popup.length){this.root.findChildByName("gapminder-buttonlist").on("click",function(e,n){t._available_dialogs[n.id]&&(n.active?t.openDialog(n.id):t.closeDialog(n.id))});var e=this.element.selectAll(".vzb-top-dialog").filter(function(e){return t.dialog_popup.indexOf(e.id)>-1});e.select(".vzb-top-dialog>.vzb-dialog-modal>.vzb-dialog-buttons>[data-click='closeDialog']").on("click",function(e,n){t.closeDialog(e.id)});e.select(".vzb-top-dialog>.vzb-dialog-modal>[data-click='pinDialog']").on("click",function(e,n){t.pinDialog(e.id)}),this.rootEl.node().addEventListener("click",function(){t.closeAllDialogs()}),this.rootEl.on("mousedown",function(e){if(this._active_comp){for(var n=d3.event.target,r=!0;n;){if(n.classList.contains("vzb-dialog-modal")){r=!1;break}n=n.parentElement}r&&t.closeAllDialogs()}})}this.element.on("click",function(){d3.event.stopPropagation()})},resize:function(){if(!this.element.selectAll)return s.warn("dialogs resize() aborted because element is not yet defined");var t=this,e=this.getLayoutProfile();this.element.selectAll(".vzb-top-dialog").each(function(n){var r=d3.select(this),i=r.attr("class").replace(" vzb-popup","").replace(" vzb-sidebar","");"large"===e&&t.dialog_sidebar.indexOf(n.id)>-1?i+=" vzb-sidebar":t.dialog_popup.indexOf(n.id)>-1&&(i+=" vzb-popup"),r.attr("class",i)})},_addDialogs:function(t,e){var n=(this.getLayoutProfile(),[]);n=t?n.concat(t):n,n=e?n.concat(e):n,n=s.unique(n),this._components_config=[];var r=[];if(n.length){for(var i=0;i<n.length;i++){var o=n[i],a=this._available_dialogs[o];if(a&&a.dialog){var u=this._components_config;u.push({component:a.dialog,placeholder:'.vzb-dialogs-dialog[data-dlg="'+o+'"]',model:["state","ui","locale"]}),a.component=u.length-1}a.id=o,r.push(a)}this.element.selectAll("div").data(r).enter().append("div").attr("data-dlg",function(t){return t.id}).attr("class","vzb-top-dialog vzb-dialogs-dialog vzb-dialog-shadow"),this.loadSubComponents();var c=this;s.forEach(this.components,function(t){t.render(),c.on("resize",function(){t.trigger("resize")}),t.on("dragstart",function(){c.bringForward(t.name)}),t.on("close",function(){this.placeholderEl.each(function(t){var e={};e.id=t.id,c.trigger("close",e)})})})}},bringForward:function(t){this.element.select(".vzb-popup.vzb-dialogs-dialog[data-dlg='"+t+"']").style("z-index",this._curr_dialog_index),this._curr_dialog_index+=10},openDialog:function(t){var e="small"===this.getLayoutProfile();this.closeAllDialogs(e);var n=this.element.selectAll(".vzb-popup.vzb-dialogs-dialog[data-dlg='"+t+"']");this._active_comp=this.components[this._available_dialogs[t].component],this._active_comp.beforeOpen(),n.classed("vzb-active",!0),this.bringForward(t),this._active_comp.open()},pinDialog:function(t){var e=this.element.select(".vzb-popup.vzb-dialogs-dialog[data-dlg='"+t+"']");this._available_dialogs[t].ispin?(e.classed("pinned",!1),this._available_dialogs[t].ispin=!1):(e.classed("pinned",!0),this._available_dialogs[t].ispin=!0)},closeDialog:function(t){var e=this.element.selectAll(".vzb-popup.vzb-dialogs-dialog[data-dlg='"+t+"']");this._active_comp=this.components[this._available_dialogs[t].component],this._active_comp&&!this._active_comp.isOpen||(this._available_dialogs[t].ispin&&this.pinDialog(t),this._active_comp&&this._active_comp.beforeClose(),e.classed("vzb-active",!1),this._active_comp&&this._active_comp.close(),this._active_comp=!1)},closeAllDialogs:function(t){var e=this,n=t?".vzb-popup.vzb-dialogs-dialog.vzb-active":".vzb-popup.vzb-dialogs-dialog.vzb-active:not(.pinned)";this.element.selectAll(n).each(function(t){e.closeDialog(t.id)})}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=(r(a),n(11)),u=r(s),c=n(59),l=r(c),h=n(37),f=r(h),d=u.default.extend("find",{init:function(t,e){this.name="find";var n=this;this.components=[{component:l.default,placeholder:".vzb-dialog-bubbleopacity",model:["state.marker","locale"],arg:"opacitySelectDim"}],this.enablePicker=((t.ui.dialogs.dialog||{}).find||{}).enablePicker,this.enablePicker&&this.components.push({component:f.default,placeholder:".vzb-find-filter-selector",model:["state.time","state.entities","locale"]}),this.model_binds={"change:state.marker.select":function(t){n.items.order(),n.selectDataPoints(),n.showHideDeselect()},"change:state.time.playing":function(t){n.model.state.time.playing||(n.time=n.model.state.time.value,n.model.state.marker.getFrame(n.time,function(t,e){!t||n.time-e||n.redrawDataPoints(t)}))},"change:state.time.value":function(t){(n.placeholderEl.classed("vzb-active")||n.placeholderEl.classed("vzb-sidebar"))&&(n.time=n.model.state.time.value,n.model.state.marker.getFrame(n.time,function(t){t&&n.redrawDataPoints(t)}))},"translate:locale":function(){n.input_search.attr("placeholder",n.translator("placeholder/search")+"...")}},this._super(t,e)},readyOnce:function(){this._super(),this.list=this.element.select(".vzb-find-list"),this.input_search=this.element.select(".vzb-find-search"),this.deselect_all=this.element.select(".vzb-find-deselect"),this.opacity_nonselected=this.element.select(".vzb-dialog-bubbleopacity"),this.element.select(".vzb-find-filter-selector").classed("vzb-hidden",!this.enablePicker),this.element.select(".vzb-dialog-title").classed("vzb-title-two-rows",this.enablePicker),this.KEY=this.model.state.entities.getDimension();var t=this;this.input_search.on("keyup",function(){13==d3.event.keyCode&&"select all"==t.input_search.node().value&&(t.input_search.node().value="",o.isTouchDevice()||t.model.state.marker.clearHighlighted(),t.model.state.marker.selectAll())}),this.input_search.on("input",function(){t.showHideSearch()}),this.deselect_all.on("click",function(){t.deselectMarkers()}),this.translator=this.model.locale.getTFunction(),this.input_search.attr("placeholder",this.translator("placeholder/search")+"..."),this.root.on("ready",function(){t.ready()})},open:function(){var t=this;this._super(),this.input_search.node().value="",this.showHideSearch(),this.time=this.model.state.time.value,this.model.state.marker.getFrame(this.time,function(e){e&&t.redrawDataPoints(e)})},ready:function(){this._super();var t=this,e=this.KEY=this.model.state.entities.getDimension(),n=this.KEYS=o.unique(this.model.state.marker._getAllDimensions({exceptType:"time"}));this.multiDim=n.length>1,this.importantHooks=t.model.state.marker.getImportantHooks();var r=t.model.state.marker.getLabelHookNames();this.time=this.model.state.time.value,this.model.state.marker.getFrame(this.time,function(i){if(i){var a=t.multiDim?t.model.state.marker.getKeysMD().map(function(t){return t.brokenData=!1,t.name=n.map(function(e,n){return i[r[n]][t[e]]}).join(", "),t}):t.model.state.marker.getKeys().map(function(t){var n={};return n[e]=t[e],n.brokenData=!1,n.name=i.label[t[e]],n});a.sort(function(t,e){return t.name<e.name?-1:1}),t.list.html(""),t.items=t.list.selectAll(".vzb-find-item").data(a).enter().append("div").attr("class","vzb-find-item vzb-dialog-checkbox"),t.items.append("input").attr("type","checkbox").attr("class","vzb-find-item").attr("id",function(e,n){return"-find-"+n+"-"+t._id}).on("change",function(e){o.isTouchDevice()||t.model.state.marker.clearHighlighted(),t.model.state.marker.selectMarker(e),o.isTouchDevice()||e.brokenData||t.model.state.marker.highlightMarker(e)}),t.items.append("label").attr("for",function(e,n){return"-find-"+n+"-"+t._id}).text(function(t){return t.name}).attr("title",function(t){return this.offsetWidth<this.scrollWidth?t.name:null}).on("mouseover",function(e){o.isTouchDevice()||e.brokenData||t.model.state.marker.highlightMarker(e)}).on("mouseout",function(e){o.isTouchDevice()||t.model.state.marker.clearHighlighted()}),o.preventAncestorScrolling(t.element.select(".vzb-dialog-scrollable")),t.redrawDataPoints(i),t.selectDataPoints(),t.showHideSearch(),t.showHideDeselect()}})},redrawDataPoints:function(t){var e=this,n=this.KEY,r=this.KEYS;this.multiDim?e.items.each(function(n){var i=d3.select(this).select("label");n.brokenData=!1,o.forEach(e.importantHooks,function(e){var i=t[e];if(i){var a=o.getValueMD(n,i,r)||!1;return a||0===a?void 0:(n.brokenData=!0,!1)}});var a=this.offsetWidth<this.scrollWidth?n.name:"";i.classed("vzb-find-item-brokendata",n.brokenData).attr("title",a+(n.brokenData?(a?" | ":"")+e.model.state.time.formatDate(e.time)+": "+e.translator("hints/nodata"):""))}):e.items.each(function(r){var i=d3.select(this).select("label");r.brokenData=!1,o.forEach(t,function(t,i){"color"===i||"size_label"===i||"constant"===e.model.state.marker[i].use||t[r[n]]||0===t[r[n]]||(r.brokenData=!0)});var a=this.offsetWidth<this.scrollWidth?r.name:"";i.classed("vzb-find-item-brokendata",r.brokenData).attr("title",a+(r.brokenData?(a?" | ":"")+e.model.state.time.formatDate(e.time)+": "+e.translator("hints/nodata"):""))})},selectDataPoints:function(){var t=(this.KEY,this.model.state.marker);this.items.selectAll("input").property("checked",function(e){var n=t.isSelected(e);return d3.select(this.parentNode).classed("vzb-checked",n),n});var e=this.list.selectAll(".vzb-checked").classed("vzb-separator",!1).lower().nodes()[0];d3.select(e).classed("vzb-separator",!0),this.contentEl.node().scrollTop=0},showHideSearch:function(){var t=this.input_search.node().value||"";t=t.toLowerCase(),this.list.selectAll(".vzb-find-item").classed("vzb-hidden",function(e){return-1===(e.name||"").toString().toLowerCase().indexOf(t)})},showHideDeselect:function(){var t=!!this.model.state.marker.select.length;this.deselect_all.classed("vzb-hidden",!t),this.opacity_nonselected.classed("vzb-hidden",!t),t&&this.components[0].trigger("resize")},deselectMarkers:function(){this.model.state.marker.clearSelected()},transitionEnd:function(t){this._super(t),o.isTouchDevice()||this.input_search.node().focus()}});e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(59),c=r(u),l=s.default.extend("grouping",{init:function(t,e){this.name="grouping",this.groupStops=[1,5,10,15],this.components=[{component:c.default,placeholder:".vzb-dialog-placeholder",model:["state.entities_age","locale"],arg:"grouping",properties:{snapValue:!0,suppressInput:!0,domain:this.groupStops}}],this._super(t,e)},readyOnce:function(){this._super(),this.element.select(".vzb-dialog-groups").selectAll(".vzb-dialog-groups-title").data(this.groupStops).enter().append("span").attr("class",".vzb-dialog-groups-title").text(function(t){return t})}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(159),c=r(u),l=n(37),h=r(l),f=n(60),d=r(f),p=s.default.extend("label",{init:function(t,e){this.name="label",this.components=[{component:c.default,placeholder:".vzb-dialog-sizeslider",model:["state.marker.size_label","locale"],propertyname:"LabelTextSize",ui:{constantUnit:"unit/pixels"}},{component:h.default,placeholder:".vzb-saxis-selector",model:["state.time","state.marker.size_label","locale"],showHoverValues:!0},{component:d.default,placeholder:".vzb-removelabelbox-switch",model:["ui.chart","locale"],checkbox:"removeLabelBox",submodel:"labels"}],this._super(t,e)}});e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=(r(a),n(11)),u=r(s),c=n(161),l=r(c),h=u.default.extend("moreoptions",{init:function(t,e){this.name="moreoptions",this.components=[{component:l.default,placeholder:".vzb-dialog-options-buttonlist",model:["state","ui","locale"]}],this._super(t,e)},readyOnce:function(){this._super();var t=this;this.accordionEl=this.contentEl.select(".vzb-accordion"),this.on("dragend",function(){t._setMaxHeight()});var e=(this.model.ui.dialogs||{}).popup||[],n=(this.model.ui.dialogs||{}).moreoptions||[];if(!0===n&&(n=e,(this.model.ui.dialogs||{}).moreoptions=n),this._addDialogs(n),this.accordionEl){this.accordionEl.selectAll(".vzb-accordion-section").select(".vzb-dialog-title>span:first-child").on("click",function(e){var n=(t.components[e.component].element,t.components[e.component].placeholderEl),r=t.accordionEl.select(".vzb-accordion-active");r&&r.classed("vzb-accordion-active",!1),n.node()!==r.node()&&(n.classed("vzb-accordion-active",!0),t.transitionEvents.forEach(function(r){n.on(r,function(){t.transitionEvents.forEach(function(t){n.on(t,null)}),t.components[e.component].trigger("resize")})}))})}},_addDialogs:function(t){this._components_config=[];var e=[];if(t.length){for(var n=0;n<t.length;n++)if("moreoptions"!==t[n]){var r=t[n],i=o.deepClone(this.parent._available_dialogs[r]);if(i&&i.dialog){var a=this._components_config;a.push({component:i.dialog,placeholder:'.vzb-dialogs-dialog[data-dlg="'+r+'"]',model:["state","ui","locale"]}),i.component=a.length-1,i.id=r,e.push(i)}}this.accordionEl.selectAll("div").data(e).enter().append("div").attr("class",function(t){return"vzb-dialogs-dialog vzb-moreoptions vzb-accordion-section"}).attr("data-dlg",function(t){return t.id}),this.loadSubComponents();var s=this;o.forEach(this.components,function(t){t.render(),s.on("resize",function(){t.trigger("resize")})})}}});e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(59),c=r(u),l=s.default.extend("opacity",{init:function(t,e){this.name="opacity",this.components=[{component:c.default,placeholder:".vzb-dialog-bubbleopacity-regular",model:["state.marker","locale"],arg:"opacityRegular"},{component:c.default,placeholder:".vzb-dialog-bubbleopacity-selectdim",model:["state.marker","locale"],arg:"opacitySelectDim"}],this._super(t,e)}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(60),c=r(u),l=s.default.extend("presentation",{init:function(t,e){this.name="presentation",this.components=[{component:c.default,placeholder:".vzb-presentationmode-switch",model:["ui","locale"],checkbox:"presentation"}],this._super(t,e)}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=(r(a),n(11)),u=r(s),c=n(37),l=r(c),h=u.default.extend("show",{init:function(t,e){this.name="show";var n=this;this.model_binds={"change:state.entities.show":function(t){n.redraw()}},this.enablePicker=((t.ui.dialogs.dialog||{}).show||{}).enablePicker,this.enablePicker&&(this.components=[{component:l.default,placeholder:".vzb-show-filter-selector",model:["state.time","state.entities","locale"]}]),this._super(t,e)},readyOnce:function(){this._super(),this.resetFilter=o.deepExtend({},this.model.state.entities.show),this.element.select(".vzb-show-filter-selector").classed("vzb-hidden",!this.enablePicker),this.element.select(".vzb-dialog-title").classed("vzb-title-two-rows",this.enablePicker),this.list=this.element.select(".vzb-show-list"),this.input_search=this.element.select(".vzb-show-search"),this.deselect_all=this.element.select(".vzb-show-deselect"),this.KEY=this.model.state.entities.getDimension(),this.TIMEDIM=this.model.state.time.getDimension();var t=this;this.input_search.on("input",function(){t.showHideSearch()}),this.deselect_all.on("click",function(){t.deselectEntities()}),this.root.on("ready",function(){t.KEY=t.model.state.entities.getDimension(),t.redraw()})},open:function(){this._super(),this.input_search.node().value="",this.showHideSearch()},ready:function(){this._super(),this.KEY=this.model.state.entities.getDimension(),this.redraw(),o.preventAncestorScrolling(this.element.select(".vzb-dialog-scrollable"))},redraw:function(){var t=this;if(this.translator=this.model.locale.getTFunction(),!this.KEY)return void t.list.html("");this.model.state.marker_allpossible.getFrame(this.model.state.time.value,function(e){if(e){var n=o.keys(e.label).map(function(n){var r={};return r[t.KEY]=n,r.label=e.label[n],r});n.sort(function(t,e){return t.label<e.label?-1:1}),t.list.html("");var r=t.list.selectAll(".vzb-show-item").data(n).enter().append("div").attr("class","vzb-show-item vzb-dialog-checkbox");r.append("input").attr("type","checkbox").attr("class","vzb-show-item").attr("id",function(e){return"-show-"+e[t.KEY]+"-"+t._id}).property("checked",function(e){var n=t.model.state.entities.isShown(e);return d3.select(this.parentNode).classed("vzb-checked",n),n}).on("change",function(e){t.model.state.marker.clearSelected(),t.model.state.entities.showEntity(e),t.showHideDeselect()}),r.append("label").attr("for",function(e){return"-show-"+e[t.KEY]+"-"+t._id}).text(function(t){return t.label}).attr("title",function(t){return this.offsetWidth<this.scrollWidth?t.label:null});var i=t.list.selectAll(".vzb-checked").classed("vzb-separator",!1).lower().nodes()[0];d3.select(i).classed("vzb-separator",!0),t.contentEl.node().scrollTop=0,t.input_search.attr("placeholder",t.translator("placeholder/search")+"..."),t.showHideSearch(),t.showHideDeselect()}})},showHideSearch:function(){var t=this.input_search.node().value||"";t=t.toLowerCase(),this.list.selectAll(".vzb-show-item").classed("vzb-hidden",function(e){return-1===(e.label||"").toString().toLowerCase().indexOf(t)})},showHideDeselect:function(){var t=this.model.state.entities.show[this.KEY];this.deselect_all.classed("vzb-hidden",!t||0==t.length)},deselectEntities:function(){var t=this.KEY;if(this.resetFilter[t]){var e=Object.assign({},this.model.state.entities.show);e[t]=this.resetFilter[t],this.model.state.entities.show=e}else this.model.state.entities.clearShow();this.showHideDeselect()},transitionEnd:function(t){this._super(t),o.isTouchDevice()||this.input_search.node().focus()}});e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=(r(a),n(11)),u=r(s),c=n(37),l=r(c),h=n(60),f=(r(h),u.default.extend("side",{init:function(t,e){this.name="side";var n=this;this.model_binds={"change:state.marker.side.which":function(t){if(n.model.state.entities_allpossibleside){var e="constant"==n.model.state.marker.side.use?null:n.model.state.marker.side.which;n.model.state.entities_allpossibleside.set("dim",e)}},"change:state.entities_side.show":function(t){n._readyOnce&&(n.updateState(),n.redraw())},"change:ui.chart.flipSides":function(t){n._readyOnce&&(n.updateState(),n.redraw())}},this.components=[{component:l.default,placeholder:".vzb-side-selector",model:["state.time","state.marker.side","locale"],showHoverValues:!1}],this._super(t,e)},readyOnce:function(){this._super(),this.listLeft=this.element.select(".vzb-side-list-left"),this.listRight=this.element.select(".vzb-side-list-right"),this.switchSides=this.element.select(".vzb-side-switch-sides"),this.TIMEDIM=this.model.state.time.getDimension(),this.state={};var t=this;this.switchSides.on("click",function(){t.model.ui.chart.flipSides=!t.model.ui.chart.flipSides}),this.root.on("ready",function(){t.redraw()})},ready:function(){if(this._super(),this.KEY=this.model.state.entities_side.getDimension(),"constant"!==this.model.state.marker.side.use&&!(this.model.state.entities_side.show[this.KEY]||{}).$in){var t=this.model.state.entities_allpossibleside.dim,e=this.model.state.marker_allpossibleside.getKeys().map(function(e){return e[t]}),n=e.sort(d3.ascending).slice(0,2);if(n.length>0){var r=Object.assign({},this.model.state.entities_side.show);r[this.KEY]={$in:n},this.model.state.entities_side.set("show",r)}}this.updateState(),this.redraw(),o.preventAncestorScrolling(this.element.select(".vzb-dialog-scrollable"))},updateState:function(){var t=this,e=this.model.state.marker.side.getEntity().getDimension(),n=this.model.state.marker.side;if(this.state.right={},this.state.left={},n.state.left[e]&&n.state.right[e])this.state.left[e]=n.state.left[e],this.state.right[e]=n.state.right[e];else{var r=this.model.state.marker.getKeys(e),i=[],o=!!this.model.state.marker.side.getEntity().show[e];if(i=r.filter(function(e){return!o||t.model.state.marker.side.getEntity().isShown(e)}).map(function(t){return t[e]}),i.length>2&&(i.length=2),i.length>1){var a=this.ui.chart.flipSides?d3.ascending:d3.descending;i.sort(a)}this.state.right={},this.state.right[e]=i[0],this.state.left={},this.state.left[e]=i[1]?i[1]:i[0]}var s="constant"==this.model.state.marker.side.use;this.listLeft.classed("vzb-hidden",s),this.listRight.classed("vzb-hidden",s),this.switchSides.classed("vzb-hidden",s||this.state.left[e]==this.state.right[e])},redraw:function(){var t=this;this.translator=this.model.locale.getTFunction(),t.model.state.entities_allpossibleside.dim&&this.model.state.marker_allpossibleside.getFrame(this.model.state.time.value,function(e){if(e){var n=o.keys(e.label).map(function(n){var r={};return r[t.KEY]=n,r.label=e.label[n],r});n.sort(function(t,e){return t.label<e.label?-1:1}),t.listLeft.html(""),t.listRight.html(""),t.createList(t.listLeft,"left",n),t.createList(t.listRight,"right",n)}})},createList:function(t,e,n){var r=this,i=this.model.state.marker.side.getEntity().getDimension(),o=t.selectAll(".vzb-side-item").data(n).enter().append("div").attr("class","vzb-side-item vzb-dialog-radio");o.append("input").attr("type","radio").attr("name",e+"-"+r._id).attr("class","vzb-side-item").attr("id",function(t){return"-side-"+e+"-"+t[i]+"-"+r._id}).property("checked",function(t){return r.state[e][i]===t[i]}).on("change",function(t,n){var i=r.model.state.entities_side,o=i.getDimension(),a="left"==e?"right":"left",s=r.model.state.marker.side;s.state[e][o]=t[o],s.state[a][o]=r.state[a][o];var u=[];if(i.isShown(t)||u.push(t),t[o]===r.state[a][o]||i.isShown(r.state[a])||u.push(r.state[a]),r.state[e][o]!==r.state[a][o]&&i.isShown(r.state[e])&&u.push(r.state[e]),t[o]!==r.state[a][o]){var c=[t[o],r.state[a][o]],l=r.ui.chart.flipSides?d3.ascending:d3.descending;c.sort(l),c["left"==e?0:1]==t[o]&&(r.model.state.marker.side.switchSideState(),r.ui.chart.flipSides=!r.ui.chart.flipSides)}u.length&&i.showEntity(u)}),o.append("label").attr("for",function(t){return"-side-"+e+"-"+t[r.KEY]+"-"+r._id}).text(function(t){return t.label})}}));e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(158),c=r(u),l=n(37),h=r(l),f=s.default.extend("size",{init:function(t,e){this.name="size",this.components=[{component:h.default,placeholder:".vzb-saxis-selector",model:["state.time","state.marker.size","locale"],showHoverValues:!0}],t.ui.chart&&0===t.ui.chart.sizeSelectorActive||this.components.push({component:c.default,placeholder:".vzb-dialog-bubblesize",model:["state.marker.size","locale"],ui:{show_button:!1}}),this._super(t,e)}});e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(59),c=r(u),l=s.default.extend("speed",{init:function(t,e){this.name="speed",this.components=[{component:c.default,placeholder:".vzb-dialog-placeholder",model:["state.time","locale"],arg:"delay",properties:{domain:[1200,900,450,200,150,100],roundDigits:0}}],this._super(t,e)}});e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(180),c=r(u),l=s.default.extend("stack",{init:function(t,e){this.name="stack";var n=this;this.components=[{component:c.default,placeholder:".vzb-dialog-draggablelist",model:["state.marker.group","state.marker.color","locale","ui.chart"],groupID:"manualSorting",isEnabled:"manualSortingEnabled",dataArrFn:n.manualSorting.bind(n),lang:""}],this.model_binds={"change:state.marker.group":function(t){n._ready&&n.updateView()}},this._super(t,e)},readyOnce:function(){this._super();var t=this;this.group=this.model.state.marker.group,this.stack=this.model.state.marker.stack,this.howToStackEl=this.element.select(".vzb-howtostack").selectAll("input").on("change",function(){t.setModel("stack",d3.select(this).node().value)}),this.howToMergeEl=this.element.select(".vzb-howtomerge").selectAll("input").on("change",function(){t.setModel("merge",d3.select(this).node().value)}),this.updateView()},ready:function(){if(this._super(),!this.model.state.marker.color.isDiscrete()){if("property"==this.stack.use)return void this.setModel("stack","none");if(this.group.merge)return void this.setModel("merge","none")}this.updateView()},updateView:function(){var t=this;this.howToStackEl.property("checked",function(){return"none"===d3.select(this).node().value?"none"===t.stack.which:"bycolor"===d3.select(this).node().value?t.stack.which===t.model.state.marker.color.which:"all"===d3.select(this).node().value?"all"===t.stack.which:void 0}).attr("disabled",function(){return"none"===d3.select(this).node().value?null:"all"===d3.select(this).node().value?null:"bycolor"===d3.select(this).node().value?"property"!==t.model.state.marker.color.use||null:void 0}),t.model.ui.chart.manualSortingEnabled="all"==t.stack.which,this.howToMergeEl.property("checked",function(){return"none"===d3.select(this).node().value?!t.group.merge&&!t.stack.merge:"grouped"===d3.select(this).node().value?t.group.merge:"stacked"===d3.select(this).node().value?t.stack.merge:void 0}).attr("disabled",function(){return"none"===d3.select(this).node().value?null:"grouped"===d3.select(this).node().value?"none"===t.stack.which||"property"!==t.model.state.marker.color.use||null:"stacked"===d3.select(this).node().value?"all"!==t.stack.which||null:void 0})},manualSorting:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===arguments.length)return this.model.state.marker.group.manualSorting;this.model.state.marker.group.set({manualSorting:t},!1,e)},setModel:function(t,e){var n={stack:{},group:{}};if("merge"===t)switch(e){case"none":n.group.merge=!1,n.stack.merge=!1;break;case"grouped":n.group.merge=!0,n.stack.merge=!1;break;case"stacked":n.group.merge=!1,n.stack.merge=!0}if("stack"===t){switch(e){case"all":n.stack.use="constant",n.stack.which="all";break;case"none":n.stack.use="constant",n.stack.which="none";break;case"bycolor":n.stack.use="property",n.stack.which=this.model.state.marker.color.which}"none"===e&&this.group.merge&&(n.group.merge=!1),"all"!==e&&this.stack.merge&&(n.stack.merge=!1)}this.model.state.marker.set(n)}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),o=n(5),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.extend({init:function(t,e){this.template='<span class="vzb-dl-holder"><ul class="vzb-draggable list vzb-dialog-scrollable"></ul></span>';var n=this;this.name="draggableList",this.dataArrFn=t.dataArrFn,this.lang=t.lang,this.model_expects=[{name:"group",type:"model"},{name:"color",type:"color"},{name:"locale",type:"locale"},{name:"chart",type:"model"}],this.groupID=t.groupID,this.isEnabled=t.isEnabled,this.draggable=!0,t.groupID||i.warn("draggablelist.js complains on 'groupID' property: "+t.groupID),this.model_binds={"translate:locale":function(t){n.updateView()},"change:group.which":function(t){n.updateView()}},this.model_binds["change:group."+this.groupID]=function(t){n.updateView()},this.model_binds["change:chart."+this.isEnabled]=function(t){n.draggable=n.model.chart[n.isEnabled],n.updateView()},this._super(t,e),this.updateData=i.debounce(this.updateData,1e3),this.itemDragger=d3.drag().on("start",function(t,e){!n.dataUpdateFlag&&n.draggable&&(d3.event.sourceEvent.stopPropagation(),n.parentBoundRect=n.element.node().getBoundingClientRect(),n.element.selectAll("div").each(function(e,r){var i=this.getBoundingClientRect();e._y=i.top,e._top=0,t.data===e.data&&(e._height=i.height,n.selectedNode=this)}),d3.select(n.selectedNode).classed("dragged",!0))}).on("drag",function(t,e){if(!n.dataUpdateFlag&&n.draggable){t._top+=d3.event.dy;var r=t._y+t._top;r>n.parentBoundRect.top&&r+t._height<n.parentBoundRect.top+n.parentBoundRect.height&&n.itemsEl.style("top",function(n,i){var o=0;return i<e&&n._y+.5*t._height>r?o=t._height:i>e&&n._y-.5*t._height<r&&(o=-t._height),i!=e&&(n._top=o),n._top+"px"})}}).on("end",function(t,e){!n.dataUpdateFlag&&n.draggable&&n.getData()})},ready:function(){var t=this;this.updateView(),this.itemsEl=this.element.selectAll("div"),this.itemsEl.call(t.itemDragger);this.itemsEl.select("li").on("mouseover",function(){d3.select(this).classed("hover",!0)}).on("mouseout",function(){d3.select(this).classed("hover",!1)}).on("touchstart",function(){d3.event.preventDefault()})},updateView:function(){var t=this,e=t.model.color.getColorlegendMarker().label.getItems(),n=i.keys(e),r=n.slice().sort(),o=(this.dataArrFn()||[]).slice().sort();!1===i.arrayEquals(r,o)&&this.dataArrFn(n),this.items=this.element.selectAll("div").data(function(){return(t.dataArrFn()||[]).map(function(t){return{data:t}})}),this.items.exit().remove(),this.items=this.items.enter().append("div").append("li").each(function(){var t=d3.select(this);t.append("span").classed("label-circle",!0),t.append("span").classed("label-text",!0)}).merge(this.items);var a=this.model.color.getScale();this.items.select("li").each(function(t){var n=t.data,r=d3.select(this);r.classed("hover",!1).attr("data",n),r.select(".label-circle").style("background",a(n)),r.select(".label-text").text(e[n])});var s=!!t.draggable||null;this.element.selectAll("div").style("top","").attr("draggable",s).classed("dragged",!1),this.dataUpdateFlag=!1},getData:function(){var t=[];t=this.element.selectAll("div").data().sort(function(t,e){return t._y+t._top-(e._y+e._top)}).map(function(t){return t.data}),i.arrayEquals(this.dataArrFn(),t)?this.updateView():(this.dataUpdateFlag=!0,this.updateData(t,!0))},updateData:function(t,e){this.dataArrFn(t,e)},readyOnce:function(){this.element=d3.select(this.element).select(".list")}});e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=r(i),a=n(182),s=r(a),u=o.default.extend("timedisplay",{init:function(t,e){var n=this;this.name="timedisplay",this.model_binds={"change:state.time.value":function(){n.updateTime()}},this._super(t,e)},ready:function(){this.updateTime()},readyOnce:function(){this._super(),this.timeLabel=new s.default(this.element.select(".vzb-timedisplay")),this.timeLabel.setConditions({widthRatio:1,heightRatio:1}),this.resize()},resize:function(){this.timeLabel&&this.timeLabel.resize(this.contentEl.style("width"),this.contentEl.style("height"))},updateTime:function(){var t=this.model.state.time;this.time_1=null==this.time?t.value:this.time,this.time=t.value;var e=t.playing&&this.time-this.time_1>0?t.delayAnimations:0;this.timeLabel.setText(t.formatDate(this.time,"ui"),e)}});e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default.extend({init:function(t,e){this.context=t,this.context.classed("vzb-dynamic-background",!0),this.width=0,this.height=0,this.topOffset=0,this.leftOffset=0,this.bottomOffset=0,this.rightOffset=0,this.textWidth=0,this.textHeight=0,this.widthRatio=.9,this.heightRatio=.9,this.xAlign="center",this.yAlign="center",this.element=this.context.append("text").style("font-size","20px"),this._sample=this.context.append("text").style("font-size","20px").style("opacity",0),e&&this.setConditions(e)},setConditions:function(t){return!isNaN(parseFloat(t.rightOffset))&&isFinite(t.rightOffset)&&(this.rightOffset=t.rightOffset),!isNaN(parseFloat(t.leftOffset))&&isFinite(t.leftOffset)&&(this.leftOffset=t.leftOffset),!isNaN(parseFloat(t.topOffset))&&isFinite(t.topOffset)&&(this.topOffset=t.topOffset),!isNaN(parseFloat(t.bottomOffset))&&isFinite(t.bottomOffset)&&(this.bottomOffset=t.bottomOffset),t.xAlign&&(this.xAlign=t.xAlign),t.yAlign&&(this.yAlign=t.yAlign),!isNaN(parseFloat(t.widthRatio))&&t.widthRatio>0&&t.widthRatio<=1&&(this.widthRatio=t.widthRatio),!isNaN(parseFloat(t.heightRatio))&&t.heightRatio>0&&t.heightRatio<=1&&(this.heightRatio=t.heightRatio),this},resize:function(t,e,n,r){this.width=parseInt(t,10)||0,this.height=parseInt(e,10)||0,n&&(this.topOffset=n),r&&(this.leftOffset=r),this._resizeText()},setText:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(){e._sample.text(t),e._resizeText(),e.element.text(t)},i=function(){clearTimeout(e._text.timeout),delete e._text};return n?(this._text&&(this._text.callback(),i()),this._text={callback:r,timeout:setTimeout(function(){r(),i()},n)}):(this._text&&i(),r()),this},_resizeText:function(){var t=this._sample.node().getBBox();if(!(t.width&&t.height&&this.width&&this.height))return this;var e=this.width*this.widthRatio/t.width,n=this.height*this.heightRatio/t.height;switch(this.scalar=Math.min(e,n),this.element.attr("transform","scale("+this.scalar+")"),this.textHeight=t.height*this.scalar,this.textWidth=t.width*this.scalar,this.yAlign){case"bottom":case"center":this.context.select("text").attr("dy",".325em");break;case"top":this.context.select("text").attr("dy","0")}return this.context.attr("transform","translate("+this._getLeftOffset()+","+this._getTopOffset()+")"),this},_getLeftOffset:function(){switch(this.xAlign){case"right":return this.width-this.textWidth/2-this.rightOffset;case"left":return this.textWidth/2+this.leftOffset;default:return this.width/2}},_getTopOffset:function(){switch(this.yAlign){case"top":return this.textHeight/2+this.topOffset;case"bottom":return this.height-this.textHeight/2-this.bottomOffset;default:return this.height/2}}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(i),n(5)),a=(r(o),n(11)),s=r(a),u=n(184),c=r(u),l=n(60),h=r(l),f=s.default.extend("zoom",{init:function(t,e){this.name="zoom",this.components=[{component:c.default,placeholder:".vzb-dialog-zoom-buttonlist",model:["state","ui","locale"]},{component:h.default,placeholder:".vzb-panwitharrow-switch",model:["ui","locale"],checkbox:"panWithArrow"},{component:h.default,placeholder:".vzb-zoomonscrolling-switch",model:["ui","locale"],checkbox:"zoomOnScrolling"},{component:h.default,placeholder:".vzb-adaptminmaxzoom-switch",model:["ui","locale"],checkbox:"adaptMinMaxZoom"}],this._super(t,e)}});e.default=f},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),a=n(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(21),c=r(u),l=s.default.extend({init:function(t,e){var n=this;this.name="gapminder-zoombuttonlist",this.model_expects=[{name:"state",type:"model"},{name:"ui",type:"ui"},{name:"locale",type:"locale"}],this._available_buttons={arrow:{title:"buttons/cursorarrow",icon:"cursorArrow",func:this.toggleCursorMode.bind(this),required:!0,statebind:"ui.cursorMode",statebindfunc:this.setCursorMode.bind(this)},plus:{title:"buttons/cursorplus",icon:"cursorPlus",func:this.toggleCursorMode.bind(this),required:!0,statebind:"ui.cursorMode",statebindfunc:this.setCursorMode.bind(this)},minus:{title:"buttons/cursorminus",icon:"cursorMinus",func:this.toggleCursorMode.bind(this),required:!0,statebind:"ui.cursorMode",statebindfunc:this.setCursorMode.bind(this)},hand:{title:"buttons/cursorhand",icon:"cursorHand",func:this.toggleCursorMode.bind(this),required:!0,statebind:"ui.cursorMode",statebindfunc:this.setCursorMode.bind(this)},hundredpercent:{title:"buttons/hundredpercent",icon:"hundredPercent",func:this.toggleHundredPercent.bind(this),required:!0}},this.model_binds={},Object.keys(this._available_buttons).forEach(function(t){var e=n._available_buttons[t];e&&e.statebind&&(n.model_binds["change:"+e.statebind]=function(n){e.statebindfunc(t,n.source.value)})}),this._super(t,e)},readyOnce:function(){this.element=d3.select(this.placeholder),this.element.selectAll("div").remove(),this._addButtons(Object.keys(this._available_buttons),[]),this.setCursorMode("arrow")},_addButtons:function(t,e){var n=this;this._components_config=[];var r=[];if(t.length){for(var i=0;i<t.length;i++){var a=t[i],s=this._available_buttons[a],u=s?a:"_default",l=o.clone(this._available_buttons[u]);l.id=a,l.icon=c[l.icon],r.push(l)}var h=this.getTranslationFunction(!0);this.element.selectAll("button").data(r).enter().append("button").attr("class",function(t){var n="vzb-buttonlist-btn";return e.length>0&&e.indexOf(t.id)>-1&&(n+=" vzb-dialog-side-btn"),n}).attr("data-btn",function(t){return t.id}).html(function(t){return"<span class='vzb-buttonlist-btn-icon fa'>"+t.icon+"</span><span class='vzb-buttonlist-btn-title'>"+h(t.title)+"</span>"});this.element.selectAll(".vzb-buttonlist-btn").on("click",function(){d3.event.preventDefault(),d3.event.stopPropagation();var t=d3.select(this).attr("data-btn");n.proceedClick(t)})}},proceedClick:function(t){var e=this,n=e.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']"),r=n.attr("class"),i=e._available_buttons[t];if(i&&i.func)i.func(t);else{var o=-1===r.indexOf("vzb-active");n.classed("vzb-active",o);var a={};a.id=t,a.active=o,e.trigger("click",a)}},setButtonActive:function(t,e){this.element.selectAll(".vzb-buttonlist-btn[data-btn='"+t+"']").classed("vzb-active",e)},toggleCursorMode:function(t){var e=t;this.model.ui.set("cursorMode",e,!1,!1)},setCursorMode:function(t){var e=this.model.ui.cursorMode?this.model.ui.cursorMode:"arrow";this.element.selectAll(".vzb-buttonlist-btn").classed("vzb-active",function(t){return t.id==e})},toggleHundredPercent:function(t){this.root.trigger("resetZoom")}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(186);var r=n(388),i=function(t){return t&&t.__esModule?t:{default:t}}(r);n(433),e.default=i.default,t.exports=i.default},function(t,e,n){"use strict";(function(t){function e(t,e,n){t[e]||Object[r](t,e,{writable:!0,configurable:!0,value:n})}if(n(187),n(384),n(385),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var r="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,n(77))},function(t,e,n){n(188),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(268),n(269),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(99),n(292),n(293),n(127),n(294),n(295),n(296),n(297),n(298),n(130),n(132),n(133),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),t.exports=n(25)},function(t,e,n){"use strict";var r=n(3),i=n(14),o=n(8),a=n(0),s=n(16),u=n(34).KEY,c=n(4),l=n(61),h=n(51),f=n(39),d=n(7),p=n(110),v=n(79),g=n(189),m=n(64),y=n(2),b=n(18),_=n(26),x=n(38),w=n(43),M=n(113),S=n(19),k=n(9),E=n(41),O=S.f,T=k.f,C=M.f,z=r.Symbol,P=r.JSON,A=P&&P.stringify,D=d("_hidden"),I=d("toPrimitive"),j={}.propertyIsEnumerable,R=l("symbol-registry"),L=l("symbols"),N=l("op-symbols"),F=Object.prototype,B="function"==typeof z,H=r.QObject,q=!H||!H.prototype||!H.prototype.findChild,V=o&&c(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=O(F,e);r&&delete F[e],T(t,e,n),r&&t!==F&&T(F,e,r)}:T,U=function(t){var e=L[t]=w(z.prototype);return e._k=t,e},W=B&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof z},Y=function(t,e,n){return t===F&&Y(N,e,n),y(t),e=_(e,!0),y(n),i(L,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=w(n,{enumerable:x(0,!1)})):(i(t,D)||T(t,D,x(1,{})),t[D][e]=!0),V(t,e,n)):T(t,e,n)},X=function(t,e){y(t);for(var n,r=g(e=b(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?w(t):X(w(t),e)},G=function(t){var e=j.call(this,t=_(t,!0));return!(this===F&&i(L,t)&&!i(N,t))&&(!(e||!i(this,t)||!i(L,t)||i(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=b(t),e=_(e,!0),t!==F||!i(L,e)||i(N,e)){var n=O(t,e);return!n||!i(L,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=C(b(t)),r=[],o=0;n.length>o;)i(L,e=n[o++])||e==D||e==u||r.push(e);return r},J=function(t){for(var e,n=t===F,r=C(n?N:b(t)),o=[],a=0;r.length>a;)!i(L,e=r[a++])||n&&!i(F,e)||o.push(L[e]);return o};B||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(N,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),V(this,t,x(1,n))};return o&&q&&V(F,t,{configurable:!0,set:e}),U(t)},s(z.prototype,"toString",function(){return this._k}),S.f=Z,k.f=Y,n(44).f=M.f=Q,n(57).f=G,n(63).f=J,o&&!n(40)&&s(F,"propertyIsEnumerable",G,!0),p.f=function(t){return U(d(t))}),a(a.G+a.W+a.F*!B,{Symbol:z});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)d($[tt++]);for(var et=E(d.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return i(R,t+="")?R[t]:R[t]=z(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!B,"Object",{create:K,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:J}),P&&a(a.S+a.F*(!B||c(function(){var t=z();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,A.apply(P,r)}}}),z.prototype[I]||n(15)(z.prototype,I,z.prototype.valueOf),h(z,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(41),i=n(63),o=n(57);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(43)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(9).f})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(112)})},function(t,e,n){var r=n(18),i=n(19).f;n(29)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(12),i=n(20);n(29)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(12),i=n(41);n(29)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(29)("getOwnPropertyNames",function(){return n(113).f})},function(t,e,n){var r=n(6),i=n(34).onFreeze;n(29)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(6),i=n(34).onFreeze;n(29)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(6),i=n(34).onFreeze;n(29)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(6);n(29)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(6);n(29)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(6);n(29)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(114)})},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(205)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(83).set})},function(t,e,n){"use strict";var r=n(58),i={};i[n(7)("toStringTag")]="z",i+""!="[object z]"&&n(16)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(115)})},function(t,e,n){var r=n(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(6),i=n(20),o=n(7)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(0),i=n(117);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(0),i=n(118);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(3),i=n(14),o=n(23),a=n(85),s=n(26),u=n(4),c=n(44).f,l=n(19).f,h=n(9).f,f=n(52).trim,d=r.Number,p=d,v=d.prototype,g="Number"==o(n(43)(v)),m="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():f(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?u(function(){v.valueOf.call(n)}):"Number"!=o(n))?a(new p(y(e)),n,d):y(e)};for(var b,_=n(8)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;_.length>x;x++)i(p,b=_[x])&&!i(d,b)&&h(d,b,l(p,b));d.prototype=v,v.constructor=d,n(16)(r,"Number",d)}},function(t,e,n){"use strict";var r=n(0),i=n(28),o=n(119),a=n(86),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),g="",m="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(e=v(u*p(2,69,1))-69,n=e<0?u*p(2,-e,1):u/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(p(10,r,1),0),r=e-1;r>=23;)f(1<<23),r-=23;f(1<<r),h(1,1),f(2),m=d()}else h(0,n),h(1<<-e,0),m=d()+a.call("0",c);return c>0?(s=m.length,m=g+(s<=c?"0."+a.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c))):m=g+m,m}})},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(119),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(0),i=n(3).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(120)})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(120),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(118);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(0),i=n(117);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(0),i=n(121),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n(0),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,e,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(87);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(0),i=n(88);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(122)})},function(t,e,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(121)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(87)})},function(t,e,n){var r=n(0),i=n(88),o=Math.exp;r(r.S+r.F*n(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0),i=n(88),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),i=n(42),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0),i=n(18),o=n(10);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(52)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(89)(!0);n(90)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(0),i=n(89)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(92),a="".endsWith;r(r.P+r.F*n(93)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(0),i=n(92);r(r.P+r.F*n(93)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(86)})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(92),a="".startsWith;r(r.P+r.F*n(93)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(17)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(17)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(17)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(17)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(17)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(17)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(17)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(17)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(17)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(17)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(17)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(17)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(17)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(26);r(r.P+r.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0),i=n(267);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(16)(r,"toString",function(){var t=o.call(this);return t===t?i.call(this):"Invalid Date"})},function(t,e,n){var r=n(7)("toPrimitive"),i=Date.prototype;r in i||n(15)(i,r,n(270))},function(t,e,n){"use strict";var r=n(2),i=n(26);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(64)})},function(t,e,n){"use strict";var r=n(22),i=n(0),o=n(12),a=n(123),s=n(94),u=n(10),c=n(95),l=n(96);i(i.S+i.F*!n(66)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,y=l(f);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(f.length),n=new d(e);e>m;m++)c(n,m,g?v(f[m],m):f[m]);else for(h=y.call(f),n=new d;!(i=h.next()).done;m++)c(n,m,g?a(h,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(0),i=n(95);r(r.S+r.F*n(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(18),o=[].join;r(r.P+r.F*(n(56)!=Object||!n(24)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),i=n(82),o=n(23),a=n(42),s=n(10),u=[].slice;r(r.P+r.F*n(4)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),h=Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},function(t,e,n){"use strict";var r=n(0),i=n(13),o=n(12),a=n(4),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(24)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(30)(0),o=n(24)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(6),i=n(64),o=n(7)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),i=n(30)(1);r(r.P+r.F*!n(24)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(30)(2);r(r.P+r.F*!n(24)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(30)(3);r(r.P+r.F*!n(24)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(30)(4);r(r.P+r.F*!n(24)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(124);r(r.P+r.F*!n(24)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),i=n(124);r(r.P+r.F*!n(24)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(62)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(24)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(18),o=n(28),a=n(10),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(24)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(125)}),n(35)("copyWithin")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(98)}),n(35)("fill")},function(t,e,n){"use strict";var r=n(0),i=n(30)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(35)("find")},function(t,e,n){"use strict";var r=n(0),i=n(30)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(35)(o)},function(t,e,n){n(45)("Array")},function(t,e,n){var r=n(3),i=n(85),o=n(9).f,a=n(44).f,s=n(65),u=n(67),c=r.RegExp,l=c,h=c.prototype,f=/a/g,d=/a/g,p=new c(f)!==f;if(n(8)&&(!p||n(4)(function(){return d[n(7)("match")]=!1,c(f)!=f||c(d)==d||"/a/i"!=c(f,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var v=a(l),g=0;v.length>g;)!function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}(v[g++]);h.constructor=c,c.prototype=h,n(16)(r,"RegExp",c)}n(45)("RegExp")},function(t,e,n){"use strict";n(127);var r=n(2),i=n(67),o=n(8),a=/./.toString,s=function(t){n(16)(RegExp.prototype,"toString",t,!0)};n(4)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(t,e,n){n(68)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(68)("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,n){n(68)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(68)("split",2,function(t,e,r){"use strict";var i=n(65),o=r,a=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,c,l,h,f,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,p+"g");for(u||(r=new RegExp("^"+m.source+"$(?!\\s)",p));(c=m.exec(n))&&!((l=c.index+c[0][s])>v&&(d.push(n.slice(v,c.index)),!u&&c[s]>1&&c[0].replace(r,function(){for(f=1;f<arguments[s]-2;f++)void 0===arguments[f]&&(c[f]=void 0)}),c[s]>1&&c.index<n[s]&&a.apply(d,c.slice(1)),h=c[0][s],v=l,d[s]>=g));)m.lastIndex===c.index&&m.lastIndex++;return v===n[s]?!h&&m.test("")||d.push(""):d.push(n.slice(v)),d[s]>g?d.slice(0,g):d}}else"0".split(void 0,0)[s]&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,n){"use strict";var r,i,o,a,s=n(40),u=n(3),c=n(22),l=n(58),h=n(0),f=n(6),d=n(13),p=n(46),v=n(47),g=n(69),m=n(100).set,y=n(101)(),b=n(102),_=n(128),x=n(129),w=u.TypeError,M=u.process,S=u.Promise,k="process"==l(M),E=function(){},O=i=b.f,T=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(7)("species")]=function(t){t(E,E)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(t){}}(),C=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},z=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&D(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(w("Promise-chain cycle")):(o=C(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)})}},P=function(t){m.call(u,function(){var e,n,r,i=t._v,o=A(t);if(o&&(e=_(function(){k?M.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=k||A(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},A=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!A(e.promise))return!1;return!0},D=function(t){m.call(u,function(){var e;k?M.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),z(e,!0))},j=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(j,r,1),c(I,r,1))}catch(t){I.call(r,t)}}):(n._v=t,n._s=1,z(n,!1))}catch(t){I.call({_w:n,_d:!1},t)}}};T||(S=function(t){p(this,S,"Promise","_h"),d(t),r.call(this);try{t(c(j,this,1),c(I,this,1))}catch(t){I.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(48)(S.prototype,{then:function(t,e){var n=O(g(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&z(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(j,t,1),this.reject=c(I,t,1)},b.f=O=function(t){return t===S||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!T,{Promise:S}),n(51)(S,"Promise"),n(45)("Promise"),a=n(25).Promise,h(h.S+h.F*!T,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!T),"Promise",{resolve:function(t){return x(s&&this===a?S:this,t)}}),h(h.S+h.F*!(T&&n(66)(function(t){S.all(t).catch(E)})),"Promise",{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(134),i=n(54);n(70)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(0),i=n(71),o=n(103),a=n(2),s=n(42),u=n(10),c=n(6),l=n(3).ArrayBuffer,h=n(69),f=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,v=f.prototype.slice,g=i.VIEW;r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||c(t)&&g in t}}),r(r.P+r.U+r.F*n(4)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(h(this,f))(u(i-r)),c=new d(this),l=new d(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(45)("ArrayBuffer")},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(71).ABV,{DataView:n(103).DataView})},function(t,e,n){n(32)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(32)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(32)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(0),i=n(13),o=n(2),a=(n(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(4)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(0),i=n(43),o=n(13),a=n(2),s=n(6),u=n(4),c=n(115),l=(n(3).Reflect||{}).construct,h=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),f=!u(function(){l(function(){})});r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,n){var r=n(9),i=n(0),o=n(2),a=n(26);i(i.S+i.F*n(4)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(19).f,o=n(2);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(91)(o,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function r(t,e){var n,s,l=arguments.length<3?t:arguments[2];return c(t)===l?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(t))?r(s,e,l):void 0}var i=n(19),o=n(20),a=n(14),s=n(0),u=n(6),c=n(2);s(s.S,"Reflect",{get:r})},function(t,e,n){var r=n(19),i=n(0),o=n(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(20),o=n(2);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(136)})},function(t,e,n){var r=n(0),i=n(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function r(t,e,n){var u,f,d=arguments.length<4?t:arguments[3],p=o.f(l(t),e);if(!p){if(h(f=a(t)))return r(f,e,n,d);p=c(0)}return s(p,"value")?!(!1===p.writable||!h(d))&&(u=o.f(d,e)||c(0),u.value=n,i.f(d,e,u),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var i=n(9),o=n(19),a=n(20),s=n(14),u=n(0),c=n(38),l=n(2),h=n(6);u(u.S,"Reflect",{set:r})},function(t,e,n){var r=n(0),i=n(83);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(0),i=n(62)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(35)("includes")},function(t,e,n){"use strict";var r=n(0),i=n(137),o=n(12),a=n(10),s=n(13),u=n(97);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(35)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(137),o=n(12),a=n(10),s=n(28),u=n(97);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(35)("flatten")},function(t,e,n){"use strict";var r=n(0),i=n(89)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(138);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(138);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(52)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(52)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(0),i=n(27),o=n(10),a=n(65),s=n(67),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(91)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(79)("asyncIterator")},function(t,e,n){n(79)("observable")},function(t,e,n){var r=n(0),i=n(136),o=n(18),a=n(19),s=n(95);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&s(l,e,n);return l}})},function(t,e,n){var r=n(0),i=n(139)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(139)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(13),a=n(9);n(8)&&r(r.P+n(72),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(13),a=n(9);n(8)&&r(r.P+n(72),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(26),a=n(20),s=n(19).f;n(8)&&r(r.P+n(72),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(26),a=n(20),s=n(19).f;n(8)&&r(r.P+n(72),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(140)("Map")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(140)("Set")})},function(t,e,n){n(73)("Map")},function(t,e,n){n(73)("Set")},function(t,e,n){n(73)("WeakMap")},function(t,e,n){n(73)("WeakSet")},function(t,e,n){n(74)("Map")},function(t,e,n){n(74)("Set")},function(t,e,n){n(74)("WeakMap")},function(t,e,n){n(74)("WeakSet")},function(t,e,n){var r=n(0);r(r.G,{global:n(3)})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(3)})},function(t,e,n){var r=n(0),i=n(23);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(0),i=n(142),o=n(122);r(r.S,"Math",{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(142)})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(0),i=n(25),o=n(3),a=n(69),s=n(129);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(0),i=n(102),o=n(128);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(33),i=n(2),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(33),i=n(2),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var r=n(33),i=n(2),o=n(20),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(132),i=n(141),o=n(33),a=n(2),s=n(20),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(33),i=n(2),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(33),i=n(2),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(33),i=n(2),o=n(20),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(33),i=n(2),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(33),i=n(2),o=n(13),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(0),i=n(101)(),o=n(3).process,a="process"==n(23)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(25),a=n(101)(),s=n(7)("observable"),u=n(13),c=n(2),l=n(46),h=n(48),f=n(15),d=n(47),p=d.RETURN,v=function(t){return null==t?void 0:u(t)},g=function(t){var e=t._c;e&&(t._c=void 0,e())},m=function(t){return void 0===t._o},y=function(t){m(t)||(t._o=void 0,g(t))},b=function(t,e){c(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}m(this)&&g(this)};b.prototype=h({},{unsubscribe:function(){y(this)}});var _=function(t){this._s=t};_.prototype=h({},{next:function(t){var e=this._s;if(!m(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(m(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{g(e)}finally{throw t}}return g(e),t},complete:function(t){var e=this._s;if(!m(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{g(e)}finally{throw t}}return g(e),t}}});var x=function(t){l(this,x,"Observable","_f")._f=u(t)};h(x.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),h(x,{from:function(t){var e="function"==typeof this?this:x,n=v(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(d(t,!1,function(t){if(e.next(t),n)return p})===p)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),f(x.prototype,s,function(){return this}),r(r.G,{Observable:x}),n(45)("Observable")},function(t,e,n){var r=n(3),i=n(0),o=r.navigator,a=[].slice,s=!!o&&/MSIE .\./.test(o.userAgent),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(0),i=n(100);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(99),i=n(41),o=n(16),a=n(3),s=n(15),u=n(53),c=n(7),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var g,m=p[v],y=d[m],b=a[m],_=b&&b.prototype;if(_&&(_[l]||s(_,l,f),_[h]||s(_,h,m),u[m]=f,y))for(g in r)_[g]||o(_,g,r[g],!0)}},function(t,e,n){(function(e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new d(r||[]);return a._invoke=c(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function n(e,i,o,a){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function i(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var o;this._invoke=i}function c(t,e,n){var i=k;return function(o,a){if(i===O)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===k)throw i=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=O;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?T:E,c.arg===C)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=T,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,l(t,e),"throw"===e.method))return C;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,C;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,C):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,C)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function p(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype,y=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",x=b.asyncIterator||"@@asyncIterator",w=b.toStringTag||"@@toStringTag",M="object"==typeof t,S=e.regeneratorRuntime;if(S)return void(M&&(t.exports=S));S=e.regeneratorRuntime=M?t.exports:{},S.wrap=n;var k="suspendedStart",E="suspendedYield",O="executing",T="completed",C={},z={};z[_]=function(){return this};var P=Object.getPrototypeOf,A=P&&P(P(p([])));A&&A!==m&&y.call(A,_)&&(z=A);var D=a.prototype=i.prototype=Object.create(z);o.prototype=D.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(D),t},S.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},S.AsyncIterator=u,S.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(D),D[w]="Generator",D[_]=function(){return this},D.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=p,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,C):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),C},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),C}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),C}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n(77))},function(t,e,n){n(386),t.exports=n(25).RegExp.escape},function(t,e,n){var r=n(0),i=n(387)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(104),s=i(a),u=n(1),c=r(u),l=n(143),h=i(l),f=n(31),d=i(f),p=n(5),v=i(p),g=n(49),m=i(g),y=n(75),b=i(y),_=n(50),x=i(_),w=n(107),M=i(w),S=n(21),k=r(S),E=n(155),O=i(E),T=n(156),C=function t(e,n,r){var i=h.default.get(e);if(i){var o=new i(n,r);return t._instances[o._id]=o,o}c.error('Tool "'+e+'" was not found.')};C._instances={},C._globals=M.default,C.clearInstances=function(t){if(t)C._instances[t]=void 0;else{for(var e in C._instances)C._instances[e].clear();C._instances={}}};var z=(0,s.default)(n(393));c.forEach(z,function(t,e){b.default.register(e,t)});var P=(0,s.default)(n(397),1);c.forEach(P,function(t,e){v.default.register(e,t)}),(0,s.default)(n(424)),C.helpers=(0,s.default)(n(425)),C.iconset=k,d3.rebind=function(t,e){for(var n=1,r=void 0,i=arguments.length;++n<i;)t[r=arguments[n]]=o(t,e,e[r]);return t},d3.time={},d3.time.scale=d3.scaleTime,d3.time.scale.utc=d3.scaleUtc,d3.time.format=function(t){var e=d3.timeFormat(t);return e.parse=d3.timeParse(t),e},d3.time.format.utc=function(t){var e=d3.utcFormat(t);return e.parse=d3.utcParse(t),e},d3.time.format.iso=function(t){var e=d3.isoFormat(t);return e.parse=d3.isoParse(t),e},d3.scaleGenericlog=O.default,d3.selection.prototype.onTap=T.onTap,d3.selection.prototype.onLongTap=T.onLongTap,C.Class=d.default,C.Tool=h.default,C.Component=v.default,C.Model=m.default,C.Reader=b.default,C.Events=x.default,C.utils=c,e.default=C},function(t,e){t.exports={linear:function(t,e,n,r,i){return+n+(i-t)/(e-t)*(r-n)},exp:function(t,e,n,r,i){return Math.exp((Math.log(n)*(e-i)-Math.log(r)*(t-i))/(e-t))},stepBefore:function(t,e,n,r,i){return r},stepAfter:function(t,e,n,r,i){return n},stepMiddle:function(t,e,n,r,i){return i<(t+e)/2?n:r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i.default.extend({init:function(){this.intervals={}},setInterval:function(t){function e(e,n,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e,n){this.clearInterval(t),this.intervals[t]=setInterval(e,n)}),clearInterval:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){t?this.intervals[t]&&(clearInterval(this.intervals[t]),delete this.intervals[t]):this.clearAllIntervals()}),clearAllIntervals:function(){for(var t in this.intervals)this.clearInterval(t)}});e.default=o},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./axis":105,"./axis.js":105,"./color":144,"./color.js":144,"./data":106,"./data.js":106,"./dataconnected":55,"./dataconnected.js":55,"./entities":145,"./entities.js":145,"./group":146,"./group.js":146,"./hook":36,"./hook.js":36,"./label":147,"./label.js":147,"./locale":148,"./locale.js":148,"./marker":149,"./marker.js":149,"./side":150,"./side.js":150,"./size":151,"./size.js":151,"./stack":152,"./stack.js":152,"./time":153,"./time.js":153,"./ui":154,"./ui.js":154};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=391},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return u.hashCode([t.select.key,t.where,t.join,t.dataset,t.version,t.language,e,n])}Object.defineProperty(e,"__esModule",{value:!0}),e.DataStorage=e.Storage=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),c=n(31),l=(function(t){t&&t.__esModule}(c),e.Storage=function(){function t(){r(this,t),this.queryIds={},this.queries={},this._collection={},this._collectionPromises={}}return a(t,[{key:"loadFromReader",value:function(t,e,n){var r=i(t,n._basepath,n._lastModified);return this.queries[r]||(this.queries[r]=this.queryQueue(n,r)),this.queries[r].getPromise(t,e)}},{key:"getDataId",value:function(t,e){var n=i(t,e._basepath,e._lastModified);return!!this.queries[n]&&this.queries[n].getDataId(t)}},{key:"queryQueue",value:function(t,e){var n=this;return new function(){this.readerObject=t,this.queries=[],this.query=null,this.parsers=null,this.defer={},this.getPromise=function(t,e){var n=this,r=!0,i=!1,a=void 0;try{for(var s,c=this.queries[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=function(){var e=s.value;if(0==t.select.value.filter(function(t){return-1==e.query.select.value.indexOf(t)}).length)return{v:e.defer.promise}}();if("object"===(void 0===l?"undefined":o(l)))return l.v}}catch(t){i=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return this.query?(this.query.select.value=u.unique(this.query.select.value.concat(t.select.value)),u.extend(this.parsers,e)):(this.query=t,this.parsers=e),u.debounce(function(){n.runQuery()},10)(),this.defer.promise&&this.defer.promise instanceof Promise||(this.defer.promise=new Promise(function(t,e){n.defer.resolve=t,n.defer.reject=e})),this.defer.promise},this.runQuery=function(){this.query&&(this.queries.push(this.reader(this.query,this.parsers,this.defer)),this.query=null,this.parsers=null,this.defer={})},this.getDataId=function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.queries[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=function(){var e=i.value;if(0==t.select.value.filter(function(t){return-1==e.query.select.value.indexOf(t)}).length&&e.dataId)return{v:e.dataId}}();if("object"===(void 0===s?"undefined":o(s)))return s.v}}catch(t){n=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw r}}return!1},this.reader=function(t,e,r){var i=this;return new function(){var o=this;this.defer=r,this.query=t,this.parsers=e,this.dataId=null,i.readerObject.read(this.query,this.parsers).then(function(e){o.checkQueryResponse(t,e),o.dataId=u.hashCode([t,i.readerObject._basepath]),n._collection[o.dataId]={},n._collectionPromises[o.dataId]={};var r=n._collection[o.dataId];r.data=e,r.valid={},r.nested={},r.unique={},r.limits={},r.frames={},r.haveNoDataPointsPerKey={},r.query=t,o.defer.resolve(o.dataId)}).catch(function(t){o.defer.reject(t)}),this.checkQueryResponse=function(t,e){if(0==e.length&&u.warn("Reader for data source '"+this._name+"' returned empty array for query:",JSON.stringify(t,null,2)),e.length>0){for(var n=(t.select.key||[]).concat(t.select.value||[]),r=e.length-1;r>=0;r--){for(var i=n.length-1;i>=0;i--)(e[r][n[i]]||0===e[r][n[i]])&&n.splice(i,1);if(!n.length)break}n.forEach(function(n){-1==t.select.key.indexOf(n)?u.warn('Reader result: Column "'+n+'" is missing from "'+t.from+'" data, but it might be ok'):(u.error('Reader result: Key column "'+n+'" is missing from "'+t.from+'" data for query:',JSON.stringify(t)),console.log(e))})}}}}}}},{key:"setGrouping",value:function(t,e){this._collection[t].grouping=e}},{key:"getData",value:function(t,e,n,r){if(!e||"data"==e)return this._collection[t].data;if("query"==e)return this._collection[t].query;if(!n)return this._collection[t][e];var i="string"==typeof n?n:JSON.stringify(n);if(this._collection[t][e][i])return this._collection[t][e][i];switch(e){case"unique":this._collection[t][e][i]=this._getUnique(t,n);break;case"valid":this._collection[t][e][i]=this._getValid(t,n);break;case"limits":this._collection[t][e][i]=this._getLimits(t,n);break;case"nested":this._collection[t][e][i]=this._getNested(t,n)}return this._collection[t][e][i]}},{key:"_getValid",value:function(t,e){return this._collection[t].data.filter(function(t){return t[e]||0===t[e]})}},{key:"_getLimits",value:function(t,e){for(var n=this._collection[t].data,r=n.reduce(function(t,n){var r=u.isDate(n[e])?n[e]:parseFloat(n[e]);return isNaN(r)||t.push(r),t},[]),i=void 0,o=void 0,a={},s=0;s<r.length;s+=1){var c=r[s];(void 0===i||c<i)&&(i=c),(void 0===o||c>o)&&(o=c)}return a.min=i||0,a.max=o||100,a}},{key:"_getUnique",value:function(t,e){var n=void 0,r=this._collection[t].data;if(u.isArray(e)){var i=r.map(function(t){return u.clone(t,e)});n=u.unique(i,function(t){return JSON.stringify(t)})}else{var o=r.map(function(t){return t[e]});n=u.unique(o)}return n}},{key:"_getNested",value:function(t,e){for(var n=d3.nest(),r=0;r<e.length;r++)n=n.key(function(t){return function(e){return e[t]}}(e[r]));return u.nestArrayToObj(n.entries(this._collection[t].data))}},{key:"getFrames",value:function(t,e,n,r){var i=this,o=this._getCacheKey(t,e,n);return this._collectionPromises[t][o]||(this._collectionPromises[t][o]={queue:this.framesQueue(e,o),promise:null}),this._collectionPromises[t][o]&&this._collectionPromises[t][o].promise instanceof Promise?this._collectionPromises[t][o].promise:(this._collectionPromises[t][o].promise=new Promise(function(a,s){t||s(u.warn("Data.js 'get' method doesn't like the dataId you gave it: "+t)),i._getFrames(t,o,e,n,r).then(function(e){i._collection[t].frames[o]=e,a(i._collection[t].frames[o])})}),this._collectionPromises[t][o].promise)}},{key:"getFrame",value:function(t,e,n,r){var i=this,o=this._getCacheKey(t,e,r);return new Promise(function(e,r){i._collection[t].frames[o]&&i._collection[t].frames[o][n]?e(i._collection[t].frames[o]):i._collectionPromises[t][o].queue.forceFrame(n,function(){e(i._collection[t].frames[o])})})}},{key:"listenFrame",value:function(t,e,n,r){var i=this._getCacheKey(t,e,n);this._collectionPromises[t][i].queue.defaultCallbacks.push(function(e){r(t,e)}),this._collection[t].frames[i]&&u.forEach(this._collection[t].frames[i],function(e,n){r(t,new Date(n))})}},{key:"_muteAllQueues",value:function(t){u.forEach(this._collectionPromises,function(e,n){u.forEach(e,function(e,n){1==e.queue.isActive&&e.queue.whatId!=t&&e.queue.mute()})})}},{key:"_checkForcedQueuesExists",value:function(){u.forEach(this._collectionPromises,function(t,e){u.forEach(t,function(t,e){t.queue.forcedQueue.length>0&&t.queue.unMute()})})}},{key:"_unmuteQueue",value:function(){u.forEach(this._collectionPromises,function(t,e){u.forEach(t,function(t,e){0==t.queue.isActive&&t.queue.unMute()})})}},{key:"framesQueue",value:function(t,e){var n=this;return new function(){this.defaultCallbacks=[],this.callbacks={},this.forcedQueue=[],this.isActive=!0,this.delayedAction=null,this.whatId=e,this.queue=t.slice(0);var r=this;this.queue.splice(0,0,this.queue.splice(this.queue.length-1,1)[0]),this.key=0,this.mute=function(){this.isActive=!1,this.delayedAction=Promise.resolve.bind(Promise)},this.unMute=function(){this.isActive=!0,"function"==typeof this.delayedAction&&this.delayedAction(),this.delayedAction=null,0==this.forcedQueue.length&&0==this.queue.length&&n._unmuteQueue()},this.frameComplete=function(t){var e=void 0;if(r.defaultCallbacks.length>0)for(e=0;e<r.defaultCallbacks.length;e++)r.defaultCallbacks[e](t);if(r.callbacks[t]&&r.callbacks[t].length>0)for(e=0;e<r.callbacks[t].length;e++)r.callbacks[t][e]()},this._waitingForActivation=function(){var t=this;return new Promise(function(e,n){if(t.isActive)return e();t.delayedAction=e})},this._getNextFrameName=function(){var t=null;return this.forcedQueue.length>0||this.queue.length>0?this.forcedQueue.length>0?t=this.forcedQueue.shift():(0==this.forcedQueue.length&&this.key>=this.queue.length-1&&(this.key=0),t=this.queue.splice(this.key,1).pop()):n._unmuteQueue(),t},this.checkForcedFrames=function(){this.forcedQueue.length>0||n._checkForcedQueuesExists()},this.getNext=function(){var t=this;return new Promise(function(e,n){t.checkForcedFrames(),t.isActive?e(t._getNextFrameName()):t._waitingForActivation().then(function(){e(t._getNextFrameName())})})},this.forceFrame=function(t,e){if(this.callbacks[t])this.callbacks[t].push(e);else{var r=function(t,e){for(var n=e.toString(),r=-1,i=0,o=t.length;i<o;i++)if(t[i].toString()==n){r=i;break}return r}(this.queue,t);-1!==r?(this.forcedQueue.unshift(this.queue.splice(r,1).pop()),n._muteAllQueues(this.whatId),this.unMute(),"function"==typeof e&&("object"!==o(this.callbacks[t])&&(this.callbacks[t]=[]),this.callbacks[t].push(e)),this.key=r):"object"===o(this.callbacks[t])?this.callbacks[t].push(e):this.callbacks[t]=[e]}}}}},{key:"_getFrames",value:function(t,e,n,r,i){var o=this;return o._collection[t].frames[e]||(o._collection[t].frames[e]={}),new Promise(function(a,s){function c(t,e){for(var n=_[h[e]],r=0,i=n.length;r<i;r++)if(t[n[r]]={},e==O)for(E=0;E<k;E++)t[n[r]][S[E]]=null;else{var o=e+1;c(t[n[r]],o)}}i||u.warn("_getFrames in data.js is missing indicatorsDB, it's needed for gap filling"),n||u.warn("_getFrames in data.js is missing framesArray, it's needed so much");var l=o._collection[t].query.animatable,h=o._collection[t].query.select.key.slice(0);l&&-1!=h.indexOf(l)&&h.splice(h.indexOf(l),1);var f={},d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,b=void 0,_={};if(h.length>1)for(d=1;d<h.length;d++){var x=o.getData(t,"nested",[h[d]].concat([l]));_[h[d]]=Object.keys(x)}var w=o.getData(t,"nested",h.concat([l]));r=r||Object.keys(w),_[h[0]]=r;var M=o._collection[t].query,S=M.select.value.filter(function(t){return"_default"!==t}),k=S.length,E=void 0,O=h.length-1;for(c(f,0),E=0;E<k;E++)o._collection[t].haveNoDataPointsPerKey[S[E]]={};var T=o._collection[t].grouping||{},C=T.key,z=T.grouping,P=function t(n,r,s,c,h){var d={};if("datapoints"!==M.from){var _=o._collection[c].data;for(E=0;E<k;E++)d[S[E]]={};for(var x=0;x<_.length;x++){var T=_[x];for(E=0;E<k;E++)d[S[E]][T[s[0]]]=T[S[E]],null==T[S[E]]&&(o._collection[c].haveNoDataPointsPerKey[S[E]][T[s[0]]]=_.length)}}else{var P=function(t,e,r){if(m=i[t]?i[t].interpolation:null,y=i[t]?i[t].use:"indicator",e&&e[n]&&(e[n][0][t]||0===e[n][0][t]))return e[n][0][t];if("none"===m)return null;if(null===(p=r[t])){var a=Object.keys(e);p=new Array(a.length),v=0;for(var s=0,h=a.length;s<h;s++)g=e[a[s]],(g[0][t]||0===g[0][t])&&(p[v++]=g[0]);p.length=v,r[t]=0===v?[]:p,0==p.length&&(o._collection[c].haveNoDataPointsPerKey[t][void 0]=p.length)}return p&&p.length>0?(b=null,u.interpolatePoint(p,y,t,b,l,n,m)):void 0},A={};for(E=0;E<k;E++)A[E]=d[S[E]]={};C?function t(e,n,i,o){for(var a,u,c={},l=r[s[o]],h=s[o]===C,f=0,d=l.length;f<d;f++)if(a=l[f],u=h?~~(+a/z)*z:a,o==O){var p=void 0;for(E=0;E<k;E++)p=P(S[E],n[a],i[a]),null!==p?e[E][u]=(e[E][u]||0)+p:void 0===e[E][u]&&(e[E][u]=p)}else{for(E=0;E<k;E++)c[E]=e[E][u]=e[E][u]||{};t(c,n[a],i[a],o+1)}}(A,w,f,0):function t(e,n,i,o){for(var a,u={},c=r[s[o]],l=0,h=c.length;l<h;l++)if(a=c[l],n[a])if(o==O)for(E=0;E<k;E++)e[E][a]=P(S[E],n[a],i[a]);else{for(E=0;E<k;E++)u[E]=e[E][a]={};t(u,n[a],i[a],o+1)}}(A,w,f,0)}o._collection[c].frames[e][n]=d,"function"==typeof h&&h(n),o._collectionPromises[c][e].queue.getNext().then(function(n){n?u.defer(function(){t(n,r,s,c,o._collectionPromises[c][e].queue.frameComplete)}):a(o._collection[c].frames[e])})};o._collectionPromises[t][e].queue.getNext().then(function(n){n&&P(n,_,h,t,o._collectionPromises[t][e].queue.frameComplete)})})}},{key:"_getCacheKey",value:function(t,e,n){var r=e[0]+" - "+e[e.length-1],i=this._collection[t].grouping;return i&&(r=r+"_grouping("+i.key+":"+i.grouping+")"),n&&(r=r+"_"+n.join()),r}}]),t}());e.DataStorage=new l},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./csv-time_in_columns/csv-time_in_columns.js":394,"./csv/csv.js":157,"./inline/inline.js":396};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=393},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(157),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=(n(1),a.default.extend({_name:"csv-time_in_columns",init:function(t){this._super(t),this.timeKey="time"},load:function(){var t=this;return this._super().then(function(e){var n=e.rows,o=e.columns,a=o[t.keySize],s=n.reduce(function(t,e){var n=e[a];return!t.includes(n)&&n&&t.push(n),t},o.slice(0,t.keySize));s.splice(1,0,t.timeKey);var u=s.slice(2),c=i(s,1),l=c[0];return{columns:s,rows:n.reduce(function(e,n){var i=e.filter(function(t){return t[l]===n[l]});return i.length?i.forEach(function(e){e[n[a]]=n[e[t.timeKey]]}):Object.keys(n).forEach(function(i){if(![l,a].includes(i)){var o,s=(o={},r(o,l,n[l]),r(o,t.timeKey,i),o),c=u.reduce(function(t,e){return t[e]=n[a]===e?n[i]:null,t},{});e.push(Object.assign(s,c))}}),e},[])}})},versionInfo:{version:"0.26.4",build:1507740149342}}));e.default=s},function(t,e){(function(){var e,n,r;r=[],e={},t.exports=n=function(t,n,i){var o,a,s,u,c,l,h,f;if(null==i&&(i=!0),"string"==typeof n){if(2!==n.length)throw{name:"ArgumentException",message:"The format for string options is '<thousands><decimal>' (exactly two characters)"};f=n[0],o=n[1]}else if(Array.isArray(n)){if(2!==n.length)throw{name:"ArgumentException",message:"The format for array options is ['<thousands>','[<decimal>'] (exactly two elements)"};f=n[0],o=n[1]}else f=(null!=n?n.thousands:void 0)||(null!=n?n.group:void 0)||e.thousands,o=(null!=n?n.decimal:void 0)||e.decimal;return l=""+f+o+i,c=r[l],null==c&&(s=i?3:1,c=r[l]=new RegExp("^\\s*([+-]?(?:(?:\\d{1,3}(?:\\"+f+"\\d{"+s+",3})+)|\\d*))(?:\\"+o+"(\\d*))?\\s*$")),null==(h=t.match(c))||3!==h.length?NaN:(u=h[1].replace(new RegExp("\\"+f,"g"),""),a=h[2],parseFloat(u+"."+a))},t.exports.setOptions=function(t){var n,r;for(n in t)r=t[n],e[n]=r},t.exports.factoryReset=function(){e={thousands:",",decimal:"."}},t.exports.withOptions=function(t,e){return null==e&&(e=!0),function(r){return n(r,t,e)}},t.exports.factoryReset()}).call(this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(75),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i.default.extend({_name:"inline",init:function(t){this._data=t.data||[{}]},load:function(){return Promise.resolve({columns:Object.keys(this._data[0]),data:this._data})},versionInfo:{version:"0.26.4",build:1507740149342}});e.default=o},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./brushslider/brushslider.js":76,"./brushslider/bubblesize/bubblesize.js":158,"./brushslider/singlehandleslider/singlehandleslider.js":59,"./brushslider/sizeslider/sizeslider.js":159,"./buttonlist/buttonlist.js":160,"./buttonlist/optionsbuttonlist/optionsbuttonlist.js":161,"./colorlegend/colorlegend.js":162,"./datanotes/datanotes.js":399,"./datawarning/datawarning.js":400,"./dialogs/_dialog.js":11,"./dialogs/about/about.js":164,"./dialogs/axes/axes.js":165,"./dialogs/colors/colors.js":167,"./dialogs/dialogs.js":168,"./dialogs/find/find.js":169,"./dialogs/grouping/grouping.js":170,"./dialogs/label/label.js":171,"./dialogs/moreoptions/moreoptions.js":172,"./dialogs/opacity/opacity.js":173,"./dialogs/presentation/presentation.js":174,"./dialogs/show/show.js":175,"./dialogs/side/side.js":176,"./dialogs/size/size.js":177,"./dialogs/speed/speed.js":178,"./dialogs/stack/stack.js":179,"./dialogs/timedisplay/timedisplay.js":181,"./dialogs/zoom/zoom.js":183,"./draggablelist/draggablelist.js":180,"./indicatorpicker/indicatorpicker.js":37,"./minmaxinputs/minmaxinputs.js":166,"./simplecheckbox/simplecheckbox.js":60,"./steppedspeedslider/steppedspeedslider.js":419,"./timeslider/timeslider.js":421,"./treemenu/treemenu.js":423,"./zoombuttonlist/zoombuttonlist.js":184};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=397},function(t,e){t.exports='<div class="vzb-slider-holder">\n\t<svg class="vzb-slider-svg">\n\t\t<g class="vzb-slider-wrap">\n\t\t\t<g class="vzb-slider">\n\t\t\t</g>\n\t\t</g>\n\t</svg>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(r),n(5)),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(21),s=o.default.extend({init:function(t,e){var n=this;this.name="gapminder-datanotes",this.model_expects=[{name:"marker",type:"marker"},{name:"locale",type:"locale"}],this.context=e,this.model_binds={"translate:locale":function(t){n._ready&&n._readyOnce&&n.ready()}},this._super(t,e),this.close=this.close.bind(this),this.hidden=!0,this.showNotes=!1,this.pinned=!1,this.left=0,this.top=0,this.hookName=null,this.newHookName=null},ready:function(){this.setValues()},readyOnce:function(){var t=this;this.translator=this.model.locale.getTFunction(),this.element=d3.select(this.placeholder),this.element.selectAll("div").remove();var e=this.element;e.append("div").html(a.close).on("click",function(){d3.event.stopPropagation(),t.close()}).select("svg").attr("width","0px").attr("height","0px").attr("class","vzb-data-notes-close").classed("vzb-hidden",!0),e.append("div").attr("class","vzb-data-notes-body vzb-dialog-scrollable"),e.append("div").attr("class","vzb-data-notes-link")},resize:function(){this.close()},close:function(){this.hidden||this.pin(!1).hide()},setHook:function(t){return this._readyOnce?this.pinned?(this.newHookName=t,this):(this.hookName&&this.model.marker[this.hookName].off("change:which",this.close),this.hookName=this.newHookName=t,this.model.marker[this.hookName].on("change:which",this.close),this.setValues(),this):this},setValues:function(){if(this.hookName){var t=this.model.marker[this.hookName],e=t.getConceptprops();if(this.element.select(".vzb-data-notes-body").classed("vzb-hidden",!e.description).text(e.description||""),this.element.select(".vzb-data-notes-link").classed("vzb-hidden",!e.sourceLink),e.sourceLink){var n=this.translator("hints/source"),r=e.sourceName||"";this.element.select(".vzb-data-notes-link").html("<span>"+(r?n+":":"")+'<a href="'+e.sourceLink+'" target="_blank">'+(r||n)+"</a></span>")}this.showNotes=e.sourceLink||e.description}},setPos:function(t,e,n){if(this.left=t,this.top=e,this.pinned&&!n)return this;var r=this.parent.element.offsetHeight,i=this.element.node().offsetWidth,o=this.element.node().offsetHeight,a=void 0,s=void 0,u=this.left-i,c=this.top;return u<10&&(u=10,a=!0),c+o+10>r&&(c=r-o-10,s=!0),a&&s&&(c=this.top-o-30),this.element.style("top",c+"px"),this.element.style("left",u+"px"),this},pin:function(t){return this.hidden?this:(this.pinned=!this.pinned,null!=t&&(this.pinned=t),this.element.select(".vzb-data-notes-close").classed("vzb-hidden",!this.pinned),this.element.classed("vzb-data-notes-pinned",this.pinned),this.hookName!=this.newHookName&&this.setHook(this.newHookName),this.element.select(".vzb-data-notes-body").node().scrollTop=0,this.showNotes?this.setPos(this.left,this.top,!0):this.hide())},toggle:function(t){return this.pinned||!this.hookName?this:(null==t&&(t=!this.hidden),this.hidden=t,this.element.classed("vzb-hidden",this.hidden||!this.showNotes),this)},show:function(){return this.toggle(!1)},hide:function(){return this.toggle(!0)}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(r),n(5)),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=n(21),s=!0,u=o.default.extend({init:function(t,e){var n=this;this.name="gapminder-datawarning",this.model_expects=[{name:"locale",type:"locale"}],this.context=e,this.model_binds={"translate:locale":function(t){n._ready&&n.redraw()}},this._super(t,e)},ready:function(){this.redraw()},readyOnce:function(){var t=this;this.element=d3.select(this.placeholder),this.element.selectAll("div").remove(),this.element.append("div").attr("class","vzb-data-warning-background").on("click",function(){t.toggle(!0)}),this.container=this.element.append("div").attr("class","vzb-data-warning-box"),this.container.append("div").html(a.close).on("click",function(){t.toggle()}).select("svg").attr("width","0px").attr("height","0px").attr("class","vzb-data-warning-close"),this.container.append("div").attr("class","vzb-data-warning-link").html(a.warn).append("div"),this.container.append("div").attr("class","vzb-data-warning-title"),this.container.append("div").attr("class","vzb-data-warning-body vzb-dialog-scrollable")},redraw:function(){this.translator=this.model.locale.getTFunction(),this.container.select(".vzb-data-warning-link div").text(this.translator("hints/dataWarning"));var t=this.translator("datawarning/title/"+this.parent.name);this.container.select(".vzb-data-warning-title").html(t).classed("vzb-hidden",!t||t=="datawarning/title/"+this.parent.name),this.container.select(".vzb-data-warning-body").html(this.translator("datawarning/body/"+this.parent.name))},toggle:function(t){null==t&&(t=!s),s=t,this.element.classed("vzb-hidden",s);var e=this;this.parent.components.forEach(function(t){t.element.classed("vzb-blur",t!=e&&!s)})}});e.default=u},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./about/about.html":402,"./axes/axes.html":403,"./colors/colors.html":404,"./find/find.html":405,"./grouping/grouping.html":406,"./label/label.html":407,"./moreoptions/moreoptions.html":408,"./opacity/opacity.html":409,"./presentation/presentation.html":410,"./show/show.html":411,"./side/side.html":412,"./size/size.html":413,"./speed/speed.html":414,"./stack/stack.html":415,"./timedisplay/timedisplay.html":416,"./zoom/zoom.html":417};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=401},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/about") %>\n  </div>\n      \n  <div class="vzb-dialog-content">\n      <p class="vzb-about-text0"></p>\n      <p class="vzb-about-text1"></p>\n      <br/>\n      <p class="vzb-about-version"></p>\n      <p class="vzb-about-updated"></p>\n      <br/>\n      <p class="vzb-about-report"></p>\n      <br/>\n      <p class="vzb-about-credits"></p>\n      <br/>\n      <p class="vzb-about-tool"></p>\n      <br/>\n      <p class="vzb-about-datasets"><span>Datasets:</span></p>\n      <br/>\n      <p class="vzb-about-readers"><span>Readers:</span></p>\n  </div>\n      \n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n      \n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n    <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="axes" data-click="pinDialog"></span>\n    <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="axes" data-click="dragDialog"></span>\n    <div class="vzb-dialog-title"><%=t ("buttons/axes") %></div>\n    <div class="vzb-dialog-content">\n      <p class="vzb-dialog-sublabel"> <%=t ("buttons/axis_x") %> <span class="vzb-xaxis-selector"></span> </p>\n      <div class="vzb-xaxis-minmax vzb-dialog-paragraph"></div>\n      <p class="vzb-dialog-sublabel"> <%=t ("buttons/axis_y") %> <span class="vzb-yaxis-selector"></span> </p>\n      <div class="vzb-yaxis-minmax vzb-dialog-paragraph"></div>\n    </div>\n    <div class="vzb-dialog-buttons">\n      <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"><%=t ( "buttons/ok") %></div>\n    </div>\n</div>'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="colors" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="colors" data-click="dragDialog"></span>\n  \n  <div class="vzb-dialog-title">\n      <%=t ("buttons/colors") %>\n      <span class="vzb-caxis-selector"></span>\n  </div>\n  \n  \n  \n  <div class="vzb-dialog-content vzb-dialog-scrollable">\n    <div class="vzb-clegend-container"></div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="find" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="find" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title">\n    <%=t ("dialogs/find") %>\n    <span class="vzb-find-filter-selector"></span>\n    <span class="vzb-dialog-content vzb-find-filter">\n      <input class="vzb-find-search" type="search"/>\n    </span>\n  </div>\n  \n  <div class="vzb-dialog-content vzb-dialog-content-fixed vzb-dialog-scrollable">\n    <div class="vzb-find-list">\n      \x3c!-- list will be placed here --\x3e\n    </div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div class="vzb-dialog-bubbleopacity vzb-dialog-control"></div>\n    <div class="vzb-dialog-button vzb-find-deselect">\n      <%=t ("buttons/deselect") %>\n    </div>\n\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/grouping") %>\n  </div>\n      \n  <div class="vzb-dialog-content">\n    <div class="vzb-dialog-groups"></div>\n    <div class="vzb-dialog-placeholder"></div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="label" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="label" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/label") %>\n  </div>\n      \n      \n  <div class="vzb-dialog-content">\n    <span class="vzb-saxis-selector"></span>\n    <div class="vzb-dialog-sizeslider"></div>\n    <div class="vzb-removelabelbox-switch"></div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="moreoptions" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="moreoptions" data-click="dragDialog"></span>\n\n\n  <div class="vzb-dialog-title">\n    <%=t ("buttons/more_options") %>\n  </div>\n\n  <div class="vzb-dialog-content vzb-dialog-scrollable">\n    <div class=\'vzb-dialog-options-buttonlist\'>\n    </div>\n    <div class="vzb-accordion">\n    </div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/opacity") %>\n  </div>\n      \n  <div class="vzb-dialog-content">\n      <p class="vzb-dialog-sublabel">\n        <%=t ("buttons/opacityRegular") %>\n      </p>\n      <div class="vzb-dialog-bubbleopacity-regular"></div>\n\n      <p class="vzb-dialog-sublabel">\n        <%=t ("buttons/opacityNonselect") %>\n      </p>\n      <div class="vzb-dialog-bubbleopacity-selectdim"></div>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <div class="vzb-dialog-title"> \n      <%=t ("dialogs/presentation") %>\n  </div>\n      \n  <div class="vzb-dialog-content">\n      <div class="vzb-presentationmode-switch"></div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="show" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="show" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title">\n    <%=t ("buttons/show") %>\n    <span class="vzb-show-filter-selector"></span>\n    <span class="vzb-dialog-content vzb-show-filter">\n      <input class="vzb-show-search" type="search"/>\n    </span>\n  </div>\n  \n  <div class="vzb-dialog-content vzb-dialog-content-fixed vzb-dialog-scrollable">\n    <p class="vzb-dialog-sublabel"> <%=t ("hints/mount/onlyshowthefollowing") %> </p>\n    <div class="vzb-show-list">\n      \x3c!-- list will be placed here --\x3e\n    </div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div class="vzb-dialog-button vzb-show-deselect">\n      <%=t ("buttons/reset") %>\n    </div>\n\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="side" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="side" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title">\n    <%=t ("buttons/side") %>\n    <span class="vzb-side-selector"></span>\n  </div>\n  \n  <div class="vzb-dialog-content vzb-dialog-scrollable">\n    <div class="vzb-side-list vzb-side-list-left">\n      \x3c!-- list will be placed here --\x3e\n    </div>\n    <div class="vzb-side-list vzb-side-list-right">\n      \x3c!-- list will be placed here --\x3e\n    </div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div class="vzb-dialog-button vzb-label-primary vzb-side-switch-sides">\n      <%=t ("buttons/leftright") %>\n    </div>\n\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="size" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="size" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/size") %>\n      <span class="vzb-saxis-selector"></span>\n  </div>\n      \n      \n  <div class="vzb-dialog-content">\n    <div class="vzb-dialog-bubblesize"></div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <div class="vzb-dialog-title"> \n      <%=t ("buttons/speed") %>\n  </div>\n      \n  <div class="vzb-dialog-content">\n    <div class="vzb-dialog-placeholder"></div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n    <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="stack" data-click="pinDialog"></span>\n    <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="stack" data-click="dragDialog"></span>\n    <div class="vzb-dialog-title"><%=t ("buttons/stack") %></div>\n        \n    <div class="vzb-dialog-content vzb-dialog-scrollable">\n        \n        \x3c!--p class="vzb-dialog-sublabel"> <%=t ( "hints/mount/howtostack") %></p--\x3e\n        <form class="vzb-howtostack vzb-dialog-paragraph">\n            <label> <input type="radio" name="stack" value="none"> <%=t ("mount/stacking/none") %> </label>\n            <label> <input type="radio" name="stack" value="bycolor"> <%=t ("mount/stacking/color") %> </label>\n            <label> <input type="radio" name="stack" value="all"> <%=t ("mount/stacking/world") %> </label>\n        </form>\n        \n        <form class="vzb-howtomerge vzb-dialog-paragraph">\n            <p class="vzb-dialog-sublabel"> <%=t ("hints/mount/howtomerge") %> </p>\n            <label> <input type="radio" name="merge" value="none"> <%=t ("mount/merging/none") %> </label>\n            <label> <input type="radio" name="merge" value="grouped"> <%=t ("mount/merging/color") %> </label>\n            <label> <input type="radio" name="merge" value="stacked"> <%=t ("mount/merging/world") %> </label>\n        </form>\n        \n        <form class="vzb-manual-sorting">\n            <p class="vzb-dialog-sublabel"> <%=t ("mount/manualSorting") %> </p>\n            <div class="vzb-dialog-draggablelist vzb-dialog-control"></div>\n        </form>\n                \n    </div>\n\n    <div class="vzb-dialog-buttons">\n        <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary"><%=t ("buttons/ok") %></div>\n    </div>\n\n</div>'},function(t,e){t.exports='<div class="vzb-dialog-modal">\n  <div class="vzb-dialog-content vzb-dialog-content-fixed">\n    <svg>\n      <g class="vzb-timedisplay"></g>\n    </svg>\n  </div>\n  <div class="vzb-dialog-buttons"></div>\n</div>\n'},function(t,e){t.exports='<div class=\'vzb-dialog-modal\'>\n  <span class="thumb-tack-class thumb-tack-class-ico-pin fa" data-dialogtype="label" data-click="pinDialog"></span>\n  <span class="thumb-tack-class thumb-tack-class-ico-drag fa" data-dialogtype="label" data-click="dragDialog"></span>\n  <div class="vzb-dialog-title"> \n    <%=t ("buttons/zoom") %>\n    <div class="vzb-dialog-zoom-buttonlist"></div>\n  </div>\n      \n      \n  <div class="vzb-dialog-content">\n    <div class="vzb-panwitharrow-switch"></div>\n    <div class="vzb-zoomonscrolling-switch"></div>\n    <div class="vzb-adaptminmaxzoom-switch"></div>\n  </div>\n\n  <div class="vzb-dialog-buttons">\n    <div data-click="closeDialog" class="vzb-dialog-button vzb-label-primary">\n      <%=t ("buttons/ok") %>\n    </div>\n  </div>\n\n</div>\n'},function(t,e){t.exports='<div class="vzb-mmi-holder">\n\n    <span class="vzb-mmi-domainmin-label"></span>\n    <input type="text" class="vzb-mmi-domainmin" name="min">\n    <span class="vzb-mmi-domainmax-label"></span>\n    <input type="text" class="vzb-mmi-domainmax" name="max">\n\n    <br class="vzb-mmi-break"/>\n\n    <span class="vzb-mmi-zoomedmin-label"></span>\n    <input type="text" class="vzb-mmi-zoomedmin" name="min">\n    <span class="vzb-mmi-zoomedmax-label"></span>\n    <input type="text" class="vzb-mmi-zoomedmax" name="max">\n    \n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(1),a=i.default.extend({init:function(t,e){var r=this;this.name="steppedSpeedSlider",this.template=n(420),this.config=Object.assign({triangleWidth:10,triangleHeight:10,height:31,lineWidth:10,domain:[1,2,3,4,5,6],range:[1200,900,450,200,150,100]},t),this.config.height-=this.config.triangleHeight/2,this.model_expects=[{name:"time",type:"time"},{name:"locale",type:"locale"}],this.model_binds={"change:time.delay":function(){r.redraw()}},this.setDelay=(0,o.throttle)(this.setDelay,50),this._super(t,e)},readyOnce:function(){var t=this.config,e=t.domain,n=t.range,r=t.height;this.element=d3.select(this.element),this.svg=this.element.select("svg"),this.axisScale=d3.scaleLog().domain(d3.extent(e)).range([r,0]),this.delayScale=d3.scaleLinear().domain(e).range(n),this.initTriangle(),this.initAxis(),this.redraw()},initAxis:function(){var t=this,e=this.config,n=e.lineWidth,r=e.triangleWidth,i=e.triangleHeight,a=e.height,s=d3.axisLeft().scale(this.axisScale).tickFormat(function(){return""}).tickSizeInner(n).tickSizeOuter(0),u=r+n/2,c=i/2;this.svg.on("mousedown",function(){var e=d3.event.offsetY,n=Math.max(0,Math.min(e-c,a));t.setDelay(Math.round(t.delayScale(t.axisScale.invert(n))),!0,!0)}).select(".vzb-stepped-speed-slider-axis").attr("transform","translate("+u+", "+c+")").call(s),this.drag=d3.drag().on("drag",function(){var e=d3.event.dy,n=(0,o.transform)(t.slide.node()),r=n.translateY,i=Math.max(0,Math.min(e+r,a));t.setDelay(Math.round(t.delayScale(t.axisScale.invert(i)))),t.redraw(i)}).on("end",function(){t.setDelay(t.model.time.delay,!0,!0)}),this.svg.call(this.drag)},initTriangle:function(){var t=this.config;t.triangleWidth,t.triangleHeight,t.lineWidth;this.slide=this.svg.select(".vzb-stepped-speed-slider-triangle"),this.slide.append("g").append("path").attr("d",this.getTrianglePath())},getTrianglePath:function(){var t=this.config,e=t.triangleHeight;return"M "+t.triangleWidth+","+e/2+" 0,"+e+" 0,0 z"},setDelay:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.model.time.set("delay",t,e,n)},redraw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.axisScale(this.delayScale.invert(this.model.time.delay));this.slide.attr("transform","translate(0, "+t+")")}});e.default=a},function(t,e){t.exports='<div class="vzb-stepped-speed-slider">\n  <svg>\n    <g class="vzb-stepped-speed-slider-triangle"></g>\n    <g class="vzb-stepped-speed-slider-axis"></g>\n  </svg>\n</div>\n'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=r(a),u=n(108),c=r(u),l={small:{margin:{top:7,right:15,bottom:10,left:60},radius:8,label_spacing:5},medium:{margin:{top:10,right:15,bottom:10,left:50},radius:9,label_spacing:5},large:{margin:{top:5,right:15,bottom:10,left:75},radius:11,label_spacing:8}},h={medium:{margin:{top:9}},large:{margin:{}}},f=s.default.extend({init:function(t,e){this.name="gapminder-timeslider",this.template=this.template||n(422),this.prevPosition=null,this.model_expects=[{name:"time",type:"time"},{name:"entities",type:"entities"},{name:"marker",type:"marker"},{name:"ui",type:"ui"}];var r=this;this.model_binds={"change:time":function(t,e){if(r.slide){if(-1!==["time.start","time.end"].indexOf(e)){if(!r.xScale)return;r.changeLimits()}r._optionClasses(),r.model.time.dragging||r._setHandle(r.model.time.playing)}},"change:time.start":function(t,e){r.slide&&(r.model.time.dragging||r._setHandle(r.model.time.playing))},"change:time.end":function(t,e){r.slide&&(r.model.time.dragging||r._setHandle(r.model.time.playing))},"change:time.offset":function(t,e){r.slide&&(r._updateProgressBar(),r.model.marker.listenFramesQueue(null,function(t){r._updateProgressBar(t)}))},"change:time.startSelected":function(t,e){r.slide&&r.updateSelectedStartLimiter()},"change:time.endSelected":function(t,e){r.slide&&r.updateSelectedEndLimiter()},"change:marker.select":function(t,e){r.setSelectedLimits()}},this._super(t,e),(this.model.ui.chart||{}).margin&&this.model.on("change:ui.chart.margin",function(t,e){var n=r.getLayoutProfile();if("small"!==n){l[n].margin.left=r.model.ui.chart.margin.left}r.slide&&r.updateSize()}),this.ui=o.extend({show_ticks:!1,show_value:!1,show_value_when_drag_play:!0,show_button:!0,axis_aligned:!1},t.ui.getPlainObject(),this.ui),this.width=0,this.height=0,this.availableTimeFrames=[],this.completedTimeFrames=[],this.getValueWidth=o.memoize(this.getValueWidth),this._setTime=o.throttle(this._setTime,50)},readyOnce:function(){var t=this;this.element=o.isArray(this.element)?this.element:d3.select(this.element),this.slider_outer=this.element.select(".vzb-ts-slider"),this.slider=this.slider_outer.select("g"),this.axis=this.element.select(".vzb-ts-slider-axis"),this.select=this.element.select(".vzb-ts-slider-select"),this.progressBar=this.element.select(".vzb-ts-slider-progress"),this.slide=this.element.select(".vzb-ts-slider-slide"),this.handle=this.element.select(".vzb-ts-slider-handle"),this.valueText=this.element.select(".vzb-ts-slider-value"),this.playButtons=this.element.select(".vzb-ts-btns"),this.xScale=d3.scaleUtc().clamp(!0),this.xAxis=(0,c.default)("bottom"),this.valueText.classed("stroke",!0),this.slider.style("paint-order").length||(this.slider.insert("text",".vzb-ts-slider-value").attr("class","vzb-ts-slider-value stroke"),this.valueText.classed("stroke",!1)),this.valueText=this.element.selectAll(".vzb-ts-slider-value"),this.valueText.attr("text-anchor","middle").attr("dy","-0.7em");var e=t._getBrushed(),n=t._getBrushedEnd();this.brush=d3.drag().on("start drag",function(){e.call(this)}).on("end",function(){n.call(this)}),this.slide.call(this.brush),this.slider_outer.on("mousewheel",function(){if(t.model.time.dragging)return d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.returnValue=!1,!1}),this._setSelectedLimitsId=0,this.model.time.startSelected>this.model.time.start&&t.updateSelectedStartLimiter(),this.model.time.endSelected<this.model.time.end&&t.updateSelectedEndLimiter(),this.parent.on("myEvent",function(e,n){var r=t.getLayoutProfile(),i=l[r];n.profile&&n.profile.margin&&(i.margin=n.profile.margin),t.element.select(".vzb-ts-slider-wrapper").style("right",n.mRight-i.margin.right+"px"),t.updateSize([0,n.rangeMax])}),this.on("resize",function(){t.updateSize()})},ready:function(){if(!this.model.time.splash){this.element.classed("vzb-ts-loading",!1);var t=this.element.select(".vzb-ts-btn-play"),e=this.element.select(".vzb-ts-btn-pause"),n=this;this.model.time;t.on("click",function(){n.model.time.play()}),e.on("click",function(){n.model.time.pause("soft")}),this.changeLimits(),this.changeTime(),this.updateSize(),n._updateProgressBar(),n.model.marker.listenFramesQueue(null,function(t){n._updateProgressBar(t)}),n.setSelectedLimits(!0)}},changeLimits:function(){var t=this.model.time.start,e=this.model.time.end;this.xScale.domain([t,e]),this.xAxis.tickValues([t,e]).tickFormat(this.model.time.getFormatter())},changeTime:function(){this.model.time.value;this._optionClasses()},updateSize:function(t){if(!this.model.time.splash){this.model.time.pause(),this.profile=this.getActiveProfile(l,h);var e=parseInt(this.slider_outer.style("width"),10)||0,n=parseInt(this.slider_outer.style("height"),10)||0;if(!n||!e)return o.warn("time slider resize() aborted because element is too small or has display:none");this.width=e-this.profile.margin.left-this.profile.margin.right,this.height=n-this.profile.margin.bottom-this.profile.margin.top;var r=this;this.slider.attr("transform","translate("+this.profile.margin.left+","+this.profile.margin.top+")"),this.xScale.range(t||[0,this.width]),this.slide.attr("transform","translate(0,"+this.height/2+")").attr("x1",this.xScale.range()[0]).attr("x2",this.xScale.range()[1]).style("stroke-width",2*this.profile.radius+"px"),this.xAxis=this.xAxis.scale(this.xScale).tickSizeInner(0).tickSizeOuter(0).tickPadding(this.profile.label_spacing).tickSizeMinor(0,0),this.axis.attr("transform","translate(0,"+this.height/2+")").call(this.xAxis),this.select.attr("transform","translate(0,"+this.height/2+")"),this.progressBar.attr("transform","translate(0,"+this.height/2+")"),this.slide.select(".background").attr("height",this.height),this.handle.attr("transform","translate(0,"+this.height/2+")").attr("r",this.profile.radius),this.sliderWidth=r.slider.node().getBoundingClientRect().width,this.resizeSelectedLimiters(),this._resizeProgressBar(),this._setHandle(),this.playButtons.style("width",this.profile.margin.left+"px")}},setSelectedLimits:function(t){var e=this;this._setSelectedLimitsId++;var n=this._setSelectedLimitsId,r=e.model.marker.select;if(0==r.length)return void e.model.time.set({startSelected:new Date(e.model.time.start),endSelected:new Date(e.model.time.end)},null,!1);var i=e.model.entities.getDimension(),a=[];o.forEach(r,function(t){a.push(e.model.marker.getEntityLimits(t[i]))}),Promise.all(a).then(function(r){if(n==e._setSelectedLimitsId){var i=r.shift(),a=i.min,s=i.max;o.forEach(r,function(t){a-t.min>0&&(a=t.min),s-t.max<0&&(s=t.max)}),e.model.time.set({startSelected:d3.max([a,new Date(e.model.time.start)]),endSelected:d3.min([s,new Date(e.model.time.end)])},t,!1)}})},updateSelectedStartLimiter:function(){var t=this;this.select.select("#clip-start-"+t._id).remove(),this.select.select(".selected-start").remove(),this.model.time.startSelected&&this.model.time.startSelected>this.model.time.start&&(this.select.append("clipPath").attr("id","clip-start-"+t._id).append("rect"),this.select.append("path").attr("clip-path","url("+location.pathname+"#clip-start-"+t._id+")").classed("selected-start",!0),this.resizeSelectedLimiters())},updateSelectedEndLimiter:function(){var t=this;this.select.select("#clip-end-"+t._id).remove(),this.select.select(".selected-end").remove(),this.model.time.endSelected&&this.model.time.endSelected<this.model.time.end&&(this.select.append("clipPath").attr("id","clip-end-"+t._id).append("rect"),this.select.append("path").attr("clip-path","url("+location.pathname+"#clip-end-"+t._id+")").classed("selected-end",!0),this.resizeSelectedLimiters())},resizeSelectedLimiters:function(){var t=this;this.select.select(".selected-start").attr("d","M0,0H"+this.xScale(this.model.time.startSelected)),this.select.select("#clip-start-"+t._id).select("rect").attr("x",-this.height/2).attr("y",-this.height/2).attr("height",this.height).attr("width",this.xScale(this.model.time.startSelected)+this.height/2),this.select.select(".selected-end").attr("d","M"+this.xScale(this.model.time.endSelected)+",0H"+this.xScale(this.model.time.end)),this.select.select("#clip-end-"+t._id).select("rect").attr("x",this.xScale(this.model.time.endSelected)).attr("y",-this.height/2).attr("height",this.height).attr("width",this.xScale(this.model.time.end)-this.xScale(this.model.time.endSelected)+this.height/2)},_resizeProgressBar:function(){var t=this;this.progressBar.selectAll("path").each(function(e){d3.select(this).attr("d","M"+t.xScale(e[0])+",0H"+t.xScale(e[1]))})},_updateProgressBar:function(t){var e=this;if(t){if(-1!=e.completedTimeFrames.indexOf(t))return;e.completedTimeFrames.push(t);var n=e.model.time.incrementTime(t),r=e.model.time.decrementTime(t);if(n>e.model.time.end){if(t-e.model.time.end!=0)return;n=t,t=r}if(0==e.availableTimeFrames.length||e.availableTimeFrames[e.availableTimeFrames.length-1][1]<t)e.availableTimeFrames.push([t,n]);else if(n<e.availableTimeFrames[0][0])e.availableTimeFrames.unshift([t,n]);else for(var i=0;i<e.availableTimeFrames.length;i++){if(t-e.availableTimeFrames[i][1]==0){i+1<e.availableTimeFrames.length&&n-e.availableTimeFrames[i+1][0]==0?(e.availableTimeFrames[i][1]=e.availableTimeFrames[i+1][1],e.availableTimeFrames.splice(i+1,1)):e.availableTimeFrames[i][1]=n;break}if(n-e.availableTimeFrames[i][0]==0){e.availableTimeFrames[i][0]=t;break}if(t-e.availableTimeFrames[i][1]>0&&n-e.availableTimeFrames[i+1][0]<0){e.availableTimeFrames.splice(i+1,0,[t,n]);break}}}else e.availableTimeFrames=[],e.completedTimeFrames=[];var o=this.progressBar.selectAll("path").data(e.availableTimeFrames);o.exit().remove(),o.enter().append("path").attr("class","domain").merge(o).each(function(t){d3.select(this).attr("d","M"+e.xScale(t[0])+",0H"+e.xScale(t[1])).classed("rounded",1==e.availableTimeFrames.length)})},getValueWidth:function(t,e){return this.valueText.node().getBoundingClientRect().width},_getBrushed:function(){var t=this;return function(){t.model.time.playing&&t.model.time.set("playing",!1,null,!1),t._optionClasses(),t.element.classed("vzb-ts-dragging",!0);var e=void 0;if(d3.event.sourceEvent){d3.event.sourceEvent.preventDefault(),t.model.time.dragStart();var n=o.roundStep(Math.round(d3.mouse(this)[0]),1);e=t.xScale.invert(n);var r=t.width;n>r?n=r:n<0&&(n=0),t.handle.attr("cx",n),t.valueText.attr("transform","translate("+n+","+t.height/2+")"),t.valueText.text(t.model.time.formatDate(e,"ui"))}e-t.model.time.value!=0&&t._setTime(e)}},_getBrushedEnd:function(){var t=this;return function(){t._setTime.recallLast(),t.element.classed("vzb-ts-dragging",!1),t.model.time.dragStop(),t.model.time.snap()}},_setHandle:function(t){var e=this,n=this.model.time.value,r=this.xScale(n);this.element.classed("vzb-ts-disabled",this.model.time.end<=this.model.time.start),null==e.prevPosition&&(e.prevPosition=r);var i=r>e.prevPosition?this.model.time.delayAnimations:0;t?(this.handle.attr("cx",e.prevPosition).transition().duration(i).ease(d3.easeLinear).attr("cx",r),this.valueText.attr("transform","translate("+e.prevPosition+","+this.height/2+")").transition("text").delay(i).text(this.model.time.formatDate(n,"ui")),this.valueText.transition().duration(i).ease(d3.easeLinear).attr("transform","translate("+r+","+this.height/2+")")):(this.handle.interrupt().attr("cx",r),this.valueText.interrupt().interrupt("text").transition("text"),this.valueText.attr("transform","translate("+r+","+this.height/2+")").text(this.model.time.formatDate(n,"ui"))),e.prevPosition=r},_setTime:function(t){var e=this,n=!this.model.time.dragging&&!this.model.time.playing;e.model.time.getModelObject("value").set(t,!1,n)},_optionClasses:function(){var t=this.ui.show_ticks,e=this.ui.show_value,n=this.ui.show_value_when_drag_play,r=this.ui.axis_aligned,i=this.ui.show_button&&this.model.time.playable;this.xAxis.labelerOptions({scaleType:"time",removeAllLabels:!t,limitMaxTickNumber:3,showOuter:!1,toolMargin:{left:10,right:10,top:0,bottom:30},fitIntoScale:"optimistic"}),this.element.classed("vzb-ts-hide-play-button",!i),this.element.classed("vzb-playing",this.model.time.playing),this.element.classed("vzb-ts-show-value",e),this.element.classed("vzb-ts-show-value-when-drag-play",n),this.element.classed("vzb-ts-axis-aligned",r)}});e.default=f},function(t,e){t.exports='<div class="vzb-timeslider vzb-ts-loading">\n  <div class="vzb-ts-slider-wrapper">\n    <svg class="vzb-ts-slider">\n      <g>\n        <g class="vzb-ts-slider-axis"></g>\n        <g class="vzb-ts-slider-progress"></g>\n        <g class="vzb-ts-slider-select"></g>\n        <circle class="vzb-ts-slider-handle"></circle>\n        <text class="vzb-ts-slider-value"></text>\n        <line class="vzb-ts-slider-slide"></line>\n      </g>\n      </svg>\n  </div>\n\n  \x3c!-- SVG VIZABI ICONS\n       source: https://github.com/encharm/Font-Awesome-SVG-PNG/ --\x3e\n  <div class="vzb-ts-btns">\n    <button class="vzb-ts-btn-loading vzb-ts-btn">\n      <div class=\'vzb-loader\'></div>\n    </button>\n    <button class="vzb-ts-btn-play vzb-ts-btn">\n      <svg class="vzb-icon vzb-icon-play" viewBox="3 3 42 42"\n           xmlns="http://www.w3.org/2000/svg">\n        <path xmlns="http://www.w3.org/2000/svg" d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-4 29V15l12 9-12 9z"/>\n      </svg>\n    </button>\n    <button class="vzb-ts-btn-pause vzb-ts-btn">\n      <svg class="vzb-icon vzb-icon-pause" viewBox="3 3 42 42"\n           xmlns="http://www.w3.org/2000/svg">\n        <path xmlns="http://www.w3.org/2000/svg" d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-2 28h-4V16h4v16zm8 0h-4V16h4v16z"/>\n      </svg>\n    </button>\n  </div>\n</div>\n'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(5),s=r(a),u=n(31),c=r(u),l=n(21),h={wrapper:"vzb-treemenu-wrap",wrapper_outer:"vzb-treemenu-wrap-outer",background:"vzb-treemenu-background",close:"vzb-treemenu-close",search:"vzb-treemenu-search",list:"vzb-treemenu-list",list_outer:"vzb-treemenu-list-outer",list_item:"vzb-treemenu-list-item",list_item_leaf:"vzb-treemenu-list-item-leaf",leaf:"vzb-treemenu-leaf",leaf_content:"vzb-treemenu-leaf-content",leaf_content_item:"vzb-treemenu-leaf-content-item",leaf_content_item_title:"vzb-treemenu-leaf-content-item-title",leaf_content_item_descr:"vzb-treemenu-leaf-content-item-descr",hasChild:"vzb-treemenu-list-item-children",list_item_label:"vzb-treemenu-list-item-label",list_top_level:"vzb-treemenu-list-top",search_wrap:"vzb-treemenu-search-wrap",isSpecial:"vzb-treemenu-list-item-special",hidden:"vzb-hidden",title:"vzb-treemenu-title",scaletypes:"vzb-treemenu-scaletypes",scaletypesDisabled:"vzb-treemenu-scaletypes-disabled",scaletypesActive:"vzb-treemenu-scaletypes-active",alignYt:"vzb-align-y-top",alignYb:"vzb-align-y-bottom",alignXl:"vzb-align-x-left",alignXr:"vzb-align-x-right",alignXc:"vzb-align-x-center",menuHorizontal:"vzb-treemenu-horizontal",menuVertical:"vzb-treemenu-vertical",absPosVert:"vzb-treemenu-abs-pos-vert",absPosHoriz:"vzb-treemenu-abs-pos-horiz",menuOpenLeftSide:"vzb-treemenu-open-left-side",noTransition:"notransition"},f={MOUSE_LOCS:[],MOUSE_LOCS_TRACKED:3,DELAY:200,TOLERANCE:150,LAST_DELAY_LOC:null,TIMEOUT:null,SEARCH_PROPERTY:"id",SUBMENUS:"children",SEARCH_MIN_STR:1,RESIZE_TIMEOUT:null,MOBILE_BREAKPOINT:400,CURRENT_PATH:[],MIN_COL_WIDTH:60,MENU_DIRECTION:1,MAX_MENU_WIDTH:320,MENU_OPEN_LEFTSIDE:!1},d=c.default.extend({init:function(t,e,n){var r=this;this.parent=t,this.entity=e,this.OPTIONS=n,this.width=this.OPTIONS.MIN_COL_WIDTH,this.direction=this.OPTIONS.MENU_DIRECTION,this._setDirectionClass(),this.menuItems=[];var i=void 0;return this.entity.empty()?this:(this.entity.each(function(){i=d3.selectAll(this.childNodes).filter(function(){return d3.select(this).classed(h.list)})}),i.empty()&&(i=this.entity),e.selectAll("."+h.list_item).filter(function(){return this.parentNode==i.node()}).each(function(){r.addSubmenu(d3.select(this))}),this)},setWidth:function(t,e,n){if(this.width!=t&&this.entity.node()){if(this.width=t,(this.entity.classed(h.list_top_level)||this.entity.classed("active"))&&1==this.direction&&(n?this.entity.style("width",this.width+"px"):this.entity.transition().delay(0).duration(100).style("width",this.width+"px")),this.entity.classed(h.list_top_level)&&this.entity.selectAll("."+h.leaf).style("width",this.width-1+"px"),e)for(var r=0;r<this.menuItems.length;r++)this.menuItems[r].setWidth(this.width,e,n);return this}},setDirection:function(t,e){if(this.direction=t,this.entity.style("width","").style("height",""),e)for(var n=0;n<this.menuItems.length;n++)this.menuItems[n].setDirection(this.direction,e);return this._setDirectionClass(),this},_setDirectionClass:function(){1==this.direction?(this.entity.classed(h.menuVertical,!1),this.entity.classed(h.menuHorizontal,!0)):(this.entity.classed(h.menuHorizontal,!1),this.entity.classed(h.menuVertical,!0))},addSubmenu:function(t){this.menuItems.push(new p(this,t,this.OPTIONS))},open:function(){var t=this;return this.isActive()||(t.parent.parentMenu.openSubmenuNow=!0,this.closeNeighbors(function(){1==t.direction?(t._openHorizontal(),t.calculateMissingWidth(0)):t._openVertical()}),t.parent.parentMenu.openSubmenuNow=!1),this},calculateMissingWidth:function(t,e){var n=this;this.entity.classed(h.list_top_level)?t>this.OPTIONS.MAX_MENU_WIDTH&&"function"==typeof e&&e(t-this.OPTIONS.MAX_MENU_WIDTH):this.parent.parentMenu.calculateMissingWidth(t+this.width,function(t){t>0?n.reduceWidth(t,function(t){"function"==typeof e&&e(t)}):"function"==typeof e&&e(t)})},restoreWidth:function(t,e,n){var r=this;if(e)this.parent.parentMenu.restoreWidth(t,!1,n);else if(t<=0)"function"==typeof n&&n();else if(this.entity.classed(h.list_top_level))"function"==typeof n&&n();else{var i=this.entity.node().offsetWidth,o=Math.min(t,r.width);if(i<o){var a=i/o*250;this.entity.transition().delay(0).duration(a).style("width",o+"px").on("end",function(){}),r.parent.parentMenu.restoreWidth(t-o,!1,n)}else this.parent.parentMenu.restoreWidth(t,!1,n)}},reduceWidth:function(t,e){var n=this,r=this.entity.node().offsetWidth;if(r<=this.OPTIONS.MIN_COL_WIDTH)e(t-n.width+r);else{var i=Math.max(this.OPTIONS.MIN_COL_WIDTH,n.width-t),o=250/(n.width/i);this.entity.transition().delay(0).duration(o).style("width",i+"px").on("end",function(){e(t-n.width+i)})}},_openHorizontal:function(){var t=this;t.entity.classed("active",!0).transition().delay(0).duration(250).style("width",t.width+"px").on("end",function(){t.marqueeToggle(!0)})},_openVertical:function(){var t=this;t.entity.style("height","0px"),t.entity.transition().delay(0).duration(250).style("height",36*t.menuItems.length+"px").on("end",function(){t.entity.style("height","auto"),t.marqueeToggle(!0),t.scrollToFitView()}),t.entity.classed("active",!0)},closeAllChildren:function(t){for(var e=0,n=0;n<this.menuItems.length;n++)this.menuItems[n].isActive()&&(++e,this.menuItems[n].submenu.close(function(){0==--e&&"function"==typeof t&&t()}));0==e&&"function"==typeof t&&t()},closeNeighbors:function(t){this.parent?this.parent.closeNeighbors(t):t()},close:function(t){var e=this;this.closeAllChildren(function(){1==e.direction?e._closeHorizontal(t):e._closeVertical(t)})},_closeHorizontal:function(t){var e=(this.entity.node().offsetWidth,this),n=e.parent.parentMenu.openSubmenuNow;e.entity.transition().delay(0).duration(20).style("width","0px").on("end",function(){e.marqueeToggle(!1),e.entity.classed("active",!1),n?"function"==typeof t&&t():e.restoreWidth(e.OPTIONS.MAX_MENU_WIDTH,!0,function(){"function"==typeof t&&t()})})},_closeVertical:function(t){var e=this;e.entity.transition().delay(0).duration(100).style("height","0px").on("end",function(){e.marqueeToggle(!1),e.entity.classed("active",!1),"function"==typeof t&&t()})},isActive:function(){return this.entity.classed("active")},hasActiveParentNeighbour:function(){return this.menuItems.filter(function(t){return t.isActive()}).some(function(t){return!!d3.select(t.entity).node().classed(h.hasChild)})},marqueeToggle:function(t){for(var e=0;e<this.menuItems.length;e++)this.menuItems[e].marqueeToggle(t)},marqueeToggleAll:function(t){for(var e=0;e<this.menuItems.length;e++)this.menuItems[e].marqueeToggleAll(t)},findItemById:function(t){for(var e=0;e<this.menuItems.length;e++){if(this.menuItems[e].entity.data().id==t)return this.menuItems[e];if(this.menuItems[e].submenu){var n=this.menuItems[e].submenu.findItemById(t);if(n)return n}}return null},getTopMenu:function(){return this.parent?this.parent.parentMenu.getTopMenu():this},scrollToFitView:function(){var t=this.getTopMenu().entity.node().parentNode,e=this.entity.node().parentNode,n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-n.top;if(i+r.height>n.height){var o=r.height>n.height?n.height-10:r.height+10,a=t.scrollTop+o-n.height+i;d3.select(t).transition().duration(100).tween("scrolltoptween",function(e){return function(){var n=d3.interpolateNumber(this.scrollTop,e);return function(e){t.scrollTop=n(e)}}}(a))}}}),p=c.default.extend({init:function(t,e,n){var r=this;this.parentMenu=t,this.entity=e;var i=e.select("."+h.list_outer);return i.node()&&(this.submenu=new d(this,i,n)),this.entity.select("."+h.list_item_label).on("mouseenter",function(){o.isTouchDevice()||(1!=r.parentMenu.direction||d3.select(this).attr("children")?r.parentMenu.hasActiveParentNeighbour()||r.closeNeighbors():(r.openSubmenu(),r.marqueeToggle(!0)))}).on("click.item",function(){if(!o.isTouchDevice())if(d3.event.stopPropagation(),1==r.parentMenu.direction)r.openSubmenu();else{var t=d3.select(this);if(!t.attr("children"))return;r.toggleSubmenu()}}).onTap(function(t){if(d3.event.stopPropagation(),2==r.parentMenu.direction){if(!r.entity.select("."+h.list_item_label).attr("children"))return}r.toggleSubmenu()}),this},setWidth:function(t,e,n){return this.submenu&&e&&this.submenu.setWidth(t,e,n),this},setDirection:function(t,e){return this.submenu&&e&&this.submenu.setDirection(t,e),this},toggleSubmenu:function(){this.submenu&&(this.submenu.isActive()?this.submenu.close():this.submenu.open())},openSubmenu:function(){this.submenu?this.submenu.open():this.closeNeighbors()},closeNeighbors:function(t){this.parentMenu.closeAllChildren(t)},isActive:function(){return this.submenu&&this.submenu.isActive()},marqueeToggleAll:function(t){this.entity.selectAll("."+h.list_item_label).each(function(){var e=d3.select(this).select("span"),n=d3.select(this.parentNode);if(n.classed("marquee",!1),e.style("left",""),e.style("right",""),e.style("width",""),t&&e.node().scrollWidth>e.node().offsetWidth){e.attr("data-content",e.text());var r=30+e.node().scrollWidth;e.style("left",-r+"px"),e.style("right",-r+"px"),e.style("width",r+"px"),n.classed("marquee",!0)}})},marqueeToggle:function(t){var e=this.entity.select("."+h.list_item_label).select("span");if(this.entity.classed("marquee",!1),e.style("left",""),e.style("right",""),e.style("width",""),t&&e.node().scrollWidth>e.node().offsetWidth){e.attr("data-content",e.text());var n=30+e.node().scrollWidth;e.style("left",-n+"px"),e.style("right",-n+"px"),e.style("width",n+"px"),this.entity.classed("marquee",!0)}}}),v=s.default.extend({tree:function(t){return arguments.length?(this._tree=t,this):this._tree},callback:function(t){return arguments.length?(this._callback=t,this):this._callback},markerID:function(t){return arguments.length?(this._markerID=t,this.targetModel(this.model.marker[this._markerID]),this):this._markerID},targetModel:function(t){return arguments.length?(this._targetModel&&this._targetModel.off("change",this.change),this._targetModel=t,this._targetModel.on("change",this.change),this._targetModel.isHook()&&(this._targetProp="which"),this._targetModel.isEntities()&&(this._targetProp="dim"),this):this._targetModel},targetProp:function(t){return arguments.length?(this._targetProp=t,this):this._targetProp},alignX:function(t){return arguments.length?(this._alignX=t,this):this._alignX},alignY:function(t){return arguments.length?(this._alignY=t,this):this._alignY},top:function(t){return arguments.length?(this._top=t,this):this._top},left:function(t){return arguments.length?(this._left=t,this):this._left},init:function(t,e){this.name="gapminder-treemenu",this.model_expects=[{name:"marker",type:"marker"},{name:"marker_tags",type:"marker"},{name:"time",type:"time"},{name:"locale",type:"locale"}],this.context=e,this.menuEntity=null,this._super(t,e),this._callback=function(t){console.log("Indicator selector: stub callback fired. New indicator is ",t)},this._alignX="center",this._alignY="center",this.OPTIONS=o.deepClone(f),this.change=this.change.bind(this)},change:function(t,e){(-1!=e.indexOf("."+this._targetProp)||this._targetModel.isHook()&&-1!=e.indexOf(".scaleType"))&&this.updateView()},ready:function(){this.updateView();var t=void 0;this.model.marker_tags&&(t=this.model.marker_tags.label.getData()),this._buildIndicatorsTree(t)},readyOnce:function(){this.element=d3.select(this.placeholder);var t=this;this.element.selectAll("div").remove(),this.element.append("div").attr("class",h.background).on("click",function(){d3.event.stopPropagation(),t.toggle()}),this.wrapperOuter=this.element.append("div").classed(h.wrapper_outer,!0).classed(h.noTransition,!0),this.wrapper=this.wrapperOuter.append("div").classed(h.wrapper,!0).classed(h.noTransition,!0).classed("vzb-dialog-scrollable",!0),this.wrapper.on("click",function(){d3.event.stopPropagation()}),this.wrapper.append("div").attr("class",h.close).html(l.close).on("click",function(){d3.event.stopPropagation(),t.toggle()}).select("svg").attr("width","0px").attr("height","0px").attr("class",h.close+"-icon"),this.wrapper.append("div").classed(h.scaletypes,!0).append("span"),this.wrapper.append("div").classed(h.title,!0).append("span"),this.wrapper.append("div").classed(h.search_wrap,!0).append("input").classed(h.search,!0).attr("type","search").attr("id",h.search),d3.select("body").on("mousemove",t._mousemoveDocument),this.wrapper.on("mouseleave",function(){}),this.translator=this.model.locale.getTFunction(),t._enableSearch(),t.resize()},_buildIndicatorsTree:function(t){!0!==t&&t||(t=[]);var e=this,n={};n._root={id:"_root",children:[]},n._unclassified={id:"_unclassified",type:"folder",name:this.translator("buttons/unclassified"),children:[]},t.forEach(function(t){n[t.tag]={id:t.tag,name:t.name,type:"folder",children:[]}});var r=n._root;r.children.push(n._unclassified),t.forEach(function(t){t.parent&&n[t.parent]?n[t.parent].children.push(n[t.tag]):r.children.push(n[t.tag])}),o.forEach(this.model.marker._root._data,function(t){if("data"===t._type){var r=t.getConceptprops(),i=t.getDatasetName();n[i]={id:i,type:"dataset",children:[]},n._root.children.push(n[i]),o.forEach(r,function(r,a){if("_none"!=r.tags){r.tags||(r.tags=i||"_unclassified");var s={id:a,name:r.name,name_catalog:r.name_catalog,description:r.description,dataSource:t._name};r.tags.split(",").forEach(function(t){t=t.trim(),n[t]?n[t].children.push(s):(e.consoleGroupOpen||(console.groupCollapsed("Some tags were are not found, so indicators went under 'Unclassified' menu"),e.consoleGroupOpen=!0),o.warn("tag '"+t+"' for indicator '"+a+"'"),n._unclassified.children.push(s))})}})}}),e.consoleGroupOpen&&(console.groupEnd(),delete e.consoleGroupOpen),this._sortChildren(r),this.indicatorsTree=r},_sortChildren:function(t,e){var n=this;t.children&&(t.children.sort(o.firstBy()(function(t,e){return t="dataset"===t.type?1:0,(e="dataset"===e.type?1:0)-t}).thenBy(function(t,e){return t=t.children?1:0,e=e.children?1:0,t-e}).thenBy(function(t,n){if(!e){if("time"==t.id)return-1;if("time"==n.id)return 1;if("advanced"==t.id)return 1;if("advanced"==n.id)return-1;if("_default"==t.id)return 1;if("_default"==n.id)return-1}return(t.name_catalog||t.name)>(n.name_catalog||n.name)?1:-1})),t.children.forEach(function(t){n._sortChildren(t,!0)}))},resize:function(){var t=this;this.profiles={small:{col_width:200},medium:{col_width:200},large:{col_width:200}};var e=this._top,n=this._left;if(!this.wrapper)return o.warn("treemenu resize() abort because container is undefined");this.wrapper.classed(h.noTransition,!0),this.wrapper.node().scrollTop=0,this.activeProfile=this.profiles[this.getLayoutProfile()],this.OPTIONS.IS_MOBILE="small"===this.getLayoutProfile(),this.menuEntity&&(this.menuEntity.setWidth(this.activeProfile.col_width,!0,!0),this.OPTIONS.IS_MOBILE?2!=this.menuEntity.direction&&(this.menuEntity.setDirection(2,!0),this.OPTIONS.MENU_DIRECTION=2):1!=this.menuEntity.direction&&(this.menuEntity.setDirection(1,!0),this.OPTIONS.MENU_DIRECTION=1)),this.width=t.element.node().offsetWidth,this.height=t.element.node().offsetHeight;var r=this.wrapperOuter.node().getBoundingClientRect(),i=r.width,a=r.height;if(i)if(this.OPTIONS.IS_MOBILE)this.clearPos();else{(e||n)&&(this.wrapperOuter.node().offsetTop<10&&this.wrapperOuter.style("top","10px"),this.height-t.wrapperOuter.node().offsetTop-a<0&&(a>this.height&&(a=this.height-20),this.wrapperOuter.style("top",this.height-a-10+"px"),this.wrapperOuter.style("bottom","auto")),e&&(e=t.wrapperOuter.node().offsetTop));var s=void 0;s=this.wrapperOuter.classed(h.alignYb)?this.wrapperOuter.node().offsetTop+this.wrapperOuter.node().offsetHeight:this.height-this.wrapperOuter.node().offsetTop,this.wrapper.style("max-height",s-10+"px"),this.wrapperOuter.classed(h.alignXc,"center"===this._alignX),this.wrapperOuter.style("margin-left","center"===this._alignX?"-"+i/2+"px":null),"center"===this._alignX?this.OPTIONS.MAX_MENU_WIDTH=this.width/2-.5*i-10:this.OPTIONS.MAX_MENU_WIDTH=this.width-this.wrapperOuter.node().offsetLeft-i-10;var u=this.activeProfile.col_width+2*this.OPTIONS.MIN_COL_WIDTH,c=this.wrapperOuter.node().offsetLeft;this.OPTIONS.MENU_OPEN_LEFTSIDE=this.OPTIONS.MAX_MENU_WIDTH<u&&c>this.OPTIONS.MAX_MENU_WIDTH+10,this.OPTIONS.MENU_OPEN_LEFTSIDE?(c<u+10&&(c=u+10),this.OPTIONS.MAX_MENU_WIDTH=c-10):this.OPTIONS.MAX_MENU_WIDTH<u&&(c-=u-this.OPTIONS.MAX_MENU_WIDTH,this.OPTIONS.MAX_MENU_WIDTH=u),n?n=c:c!=this.wrapperOuter.node().offsetLeft&&(this.wrapperOuter.style("left","auto"),this.wrapperOuter.style("right",this.width-c-r.width+"px")),this._top=e,this._left=n,(n||e)&&this.setPos(),this.wrapperOuter.classed("vzb-treemenu-open-left-side",!this.OPTIONS.IS_MOBILE&&this.OPTIONS.MENU_OPEN_LEFTSIDE)}return this.wrapper.node().offsetHeight,this.wrapper.classed(h.noTransition,!1),this.setHorizontalMenuHeight(),this},toggle:function(){var t=this,e=!this.element.classed(h.hidden);this.element.classed(h.hidden,e),e?(this.clearPos(),this.menuEntity.marqueeToggle(!1)):(this.setPos(),!o.isTouchDevice()&&this.focusSearch(),this.resize(),this.scrollToSelected()),this.wrapper.classed(h.noTransition,e),this.parent.components.forEach(function(n){"gapminder-dialogs"==n.name?d3.select(n.placeholder.parentNode).classed("vzb-blur",!e):n.element.classed?n.element.classed("vzb-blur",n!=t&&!e):d3.select(n.element).classed("vzb-blur",n!=t&&!e)}),this.width=t.element.node().offsetWidth},scrollToSelected:function(){if(this.selectedNode){var t=this,e=function(t,e){t.scrollTop=0;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.bottom-n.top-t.offsetHeight+10;t.scrollTop=i};if(2==this.menuEntity.direction)e(this.wrapper.node(),this.selectedNode),t.menuEntity.marqueeToggleAll(!0);else{this.menuEntity.findItemById(d3.select(this.selectedNode).data().id).submenu.calculateMissingWidth(0,function(){t.menuEntity.marqueeToggleAll(!0)});for(var n=this.selectedNode,r=void 0;!o.hasClass(n,h.list_top_level);)"LI"==n.tagName&&(r=o.hasClass(n.parentNode,h.list_top_level)?n.parentNode.parentNode:n.parentNode,e(r,n)),n=n.parentNode}}},setPos:function(){var t=this._top,e=this._left,n=this.wrapperOuter.node().getBoundingClientRect();if(t&&(this.wrapperOuter.style("top",t+"px"),this.wrapperOuter.style("bottom","auto"),this.wrapperOuter.classed(h.absPosVert,t)),e){var r=this.element.node().offsetWidth-e-n.width;r=r<10?10:r,this.wrapperOuter.style("right",r+"px"),this.wrapperOuter.style("left","auto"),this.wrapperOuter.classed(h.absPosHoriz,r)}},clearPos:function(){this._top="",this._left="",this.wrapperOuter.attr("style",""),this.wrapperOuter.classed(h.absPosVert,""),this.wrapperOuter.classed(h.absPosHoriz,""),this.wrapperOuter.classed(h.menuOpenLeftSide,""),this.wrapper.style("max-height","")},setHorizontalMenuHeight:function(){var t=null;if(this.menuEntity&&1==this.OPTIONS.MENU_DIRECTION&&this.menuEntity.menuItems.length){var e=parseInt(this.menuEntity.menuItems[0].entity.style("height"),10)||0,n=e*this._maxChildCount,r=Math.max(this.menuEntity.menuItems.length,3)*e+this.menuEntity.entity.node().offsetTop+parseInt(this.wrapper.style("padding-bottom"),10);t=Math.max(n,r)+"px"}this.wrapper.classed(h.noTransition,!0),this.wrapper.node().offsetHeight,this.wrapper.style("height",t),this.wrapper.node().offsetHeight,this.wrapper.classed(h.noTransition,!1)},_enableSearch:function(){var t=this,e=this.wrapper.select("."+h.search),n=function(e){var n={_id:"root",children:[]},r=function(e,n,r){var i=n[r].name;if(!i&&t.translator){i=t.translator("indicator/"+n[r][t.OPTIONS.SEARCH_PROPERTY]+"/"+t._targetModel._type)||t.translator("indicator/"+n[r][t.OPTIONS.SEARCH_PROPERTY])}return i&&i.toLowerCase().indexOf(e.toLowerCase())>=0};return function i(o){for(var a=t.OPTIONS.SUBMENUS,s=0;s<o.length;s++){var u=!1;u=r(e,o,s),u&&n.children.push(o[s]),!u&&o[s][a]&&i(o[s][a])}}(t.dataFiltered.children),n.children=o.unique(n.children,function(t){return t.id}),n},r=!1,i=o.debounce(function(){var i=e.node().value;(r||""!=i)&&(r=""!=i,i.length>=t.OPTIONS.SEARCH_MIN_STR?t.redraw(n(i),!0):t.redraw())},250);e.on("input",i)},_selectIndicator:function(t){this._callback(this._targetProp,t),this.toggle()},redraw:function(t,e){function n(t,e,i){if(e.children){r._maxChildCount=Math.max(r._maxChildCount,e.children.length);var a=i?t:t.append("div").classed(h.list_outer,!0),s=a.append("ul").classed(h.list,!i).classed(h.list_top_level,i).classed("vzb-dialog-scrollable",!0).selectAll("li").data(e.children,function(t){return t.id}).enter().append("li");s.append("span").classed(h.list_item_label,!0).attr("children",function(t){return t.children?"true":null}).attr("type",function(t){return t.type?t.type:null}).on("click",function(t){d3.select(this).attr("children")||(d3.event.stopPropagation(),r._selectIndicator({concept:t.id,dataSource:t.dataSource}))}).append("span").text(function(t){var e="_default"===t.id?r.translator("indicator/_default/"+c):t.name_catalog||t.name||t.id;return e||""===e||o.warn("translation missing: NAME of "+t.id),e||""}),s.classed(h.list_item,!0).classed(h.hasChild,function(t){return t.children}).classed(h.isSpecial,function(t){return t.special}).each(function(t){var e=d3.select(this);if(!t.children){var a=e.append("div").attr("class",h.menuHorizontal+" "+h.list_outer+" "+h.list_item_leaf);a.on("click",function(t){r._selectIndicator({concept:t.id,dataSource:t.dataSource})});var s=a.append("div").classed(h.leaf+" "+h.leaf_content+" vzb-dialog-scrollable",!0);s.append("span").classed(h.leaf_content_item+" "+h.leaf_content_item_title,!0).text(function(t){return("_default"===t.id?r.translator("indicator/_default/"+c):t.name)||""});var u=void 0;s.append("span").classed(h.leaf_content_item,!0).text(function(t){var e="_default"===t.id?r.translator("unit/_default/"+c):t.unit;return u=!e,r.translator("hints/units")+": "+e||""}).classed("vzb-hidden",u);var l=void 0;s.append("span").classed(h.leaf_content_item+" "+h.leaf_content_item_descr,!0).text(function(t){var e="_default"===t.id?r.translator("description/_default/"+c):t.description;return l=!e,u&&l?r.translator("hints/nodescr"):e||""}).classed("vzb-hidden",l&&!u)}if(t.id==r._targetModel[r._targetProp]){var f=void 0;if(r.selectedNode&&i)for(f=r.selectedNode.parentNode,d3.select(r.selectedNode).select("."+h.list_item_leaf).classed("active",!1);!o.hasClass(f,h.list_top_level);)"UL"==f.tagName&&d3.select(f.parentNode).classed("active",!1),f=f.parentNode;if(!r.selectedNode||i){for(f=this.parentNode,d3.select(this).classed("item-active",!0).select("."+h.list_item_leaf).classed("active",!0);!o.hasClass(f,h.list_top_level);)"UL"==f.tagName&&d3.select(f.parentNode).classed("active",!0),"LI"==f.tagName&&d3.select(f).classed("item-active",!0),f=f.parentNode;r.selectedNode=this}}n(e,t)})}}var r=this,i=r._targetModel.isHook(),a=void 0,s=void 0,u={};o.forEach(this.model.marker._root._data,function(t){"data"===t._type&&o.deepExtend(u,t.getConceptprops())});var c=r._targetModel._type;if(e)a=t;else{if(null==t&&(t=this._tree),i)s=o.keys(u).filter(function(t){if(r._targetModel.allow&&r._targetModel.allow.names){if(-1!=r._targetModel.allow.names.indexOf("!"+t))return!1;if(-1!=r._targetModel.allow.names.indexOf(t))return!0;if(r._targetModel.allow.namesOnlyThese)return!1}if(!r._targetModel.allow||!r._targetModel.allow.scales)return!0;if("*"==r._targetModel.allow.scales[0])return!0;if(!u[t].scales)return!0;for(var e=u[t].scales.length-1;e>=0;e--)if(r._targetModel.allow.scales.indexOf(u[t].scales[e])>-1)return!0;return!1});else if(r._targetModel.isEntities()){var l=["entity_domain","entity_set"];s=o.keys(u).filter(function(t){return l.indexOf(u[t].concept_type)>-1})}else s=o.keys(u);a=o.pruneTree(t,function(t){return s.indexOf(t.id)>-1}),this.dataFiltered=a}if(this.wrapper.select("ul").remove(),this.element.select("."+h.title).select("span").text(this.translator(r._targetModel.isEntities()?r._targetModel._root._name+"/"+r._targetModel._name:"buttons/"+(i?r._targetModel._name:c+"/"+r._targetProp))),this.element.select("."+h.search).attr("placeholder",this.translator("placeholder/search")+"..."),this._maxChildCount=0,this.OPTIONS.IS_MOBILE?this.OPTIONS.MENU_DIRECTION=2:this.OPTIONS.MENU_DIRECTION=1,this.selectedNode=null,n(this.wrapper,a,!0),this.menuEntity=new d(null,this.wrapper.selectAll("."+h.list_top_level),this.OPTIONS),this.menuEntity&&this.menuEntity.setDirection(this.OPTIONS.MENU_DIRECTION),this.menuEntity&&this.menuEntity.setWidth(this.activeProfile.col_width,!0,!0),this.setHorizontalMenuHeight(),!e){var f="_default";if(s.indexOf(this._targetModel[r._targetProp])>-1&&(f=this._targetModel[r._targetProp]),u[f]||o.error("Concept properties of "+f+" are missing from the set, or the set is empty. Put a breakpoint here and check what you have in indicatorsDB"),!u[f].scales)return this.element.select("."+h.scaletypes).classed(h.hidden,!0),!0;var p=i?u[f].scales.filter(function(t){return!r._targetModel.allow||!r._targetModel.allow.scales||("*"==r._targetModel.allow.scales[0]||r._targetModel.allow.scales.indexOf(t)>-1)}):[];if(0==p.length)this.element.select("."+h.scaletypes).classed(h.hidden,!0);else{var v=this.element.select("."+h.scaletypes).classed(h.hidden,!1).selectAll("span").data(p,function(t){return t});v.exit().remove(),v=v.enter().append("span").on("click",function(t){d3.event.stopPropagation(),r._setModel("scaleType",t)}).merge(v);var g=r._targetModel.scaleType;v.classed(h.scaletypesDisabled,p.length<2).classed(h.scaletypesActive,function(t){return(t==g||"log"===t&&"genericLog"===g)&&p.length>1}).text(function(t){return r.translator("scaletype/"+t)})}}return this},updateView:function(){if(this._targetModel){this.wrapperOuter.classed(h.absPosVert,this._top),this.wrapperOuter.classed(h.alignYt,"top"===this._alignY),this.wrapperOuter.classed(h.alignYb,"bottom"===this._alignY),this.wrapperOuter.classed(h.absPosHoriz,this._left),this.wrapperOuter.classed(h.alignXl,"left"===this._alignX),this.wrapperOuter.classed(h.alignXr,"right"===this._alignX);var t=this._setModel.bind(this);return this.callback(t).tree(this.indicatorsTree).redraw(),this.wrapper.select("."+h.search).node().value="",this}},focusSearch:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.wrapper.select("."+h.search).node();t?e.focus():e.blur()},_setModel:function(t,e){var n=this._targetModel;"which"==t&&n.setWhich(e),"scaleType"==t&&n.setScaleType(e),"dim"==t&&n.setDimension(e)}});e.default=v},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./_dialog.js":11,"./about/about.js":164,"./axes/axes.js":165,"./colors/colors.js":167,"./dialogs.js":168,"./find/find.js":169,"./grouping/grouping.js":170,"./label/label.js":171,"./moreoptions/moreoptions.js":172,"./opacity/opacity.js":173,"./presentation/presentation.js":174,"./show/show.js":175,"./side/side.js":176,"./size/size.js":177,"./speed/speed.js":178,"./stack/stack.js":179,"./timedisplay/timedisplay.js":181,"./zoom/zoom.js":183};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=424},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./d3.axisWithLabelPicker.js":108,"./d3.collisionResolver.js":426,"./d3.colorPicker.js":163,"./d3.dynamicBackground.js":182,"./d3.genericLogScale.js":155,"./d3.geoProjection.js":427,"./d3.touchEvents.js":156,"./labels.js":428,"./requireAll.js":104,"./svgexport.js":430,"./textEllipsis.js":431,"./topojson.js":432};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=425},function(t,e,n){"use strict";function r(){return function(){function t(t){if(null==r)return void console.warn("D3 collision resolver stopped: missing a CSS slector");if(null==i)return void console.warn("D3 collision resolver stopped: missing height of the canvas");if(null==a)return void console.warn("D3 collision resolver stopped: missing pointer within data objects. Example: value = 'valueY' ");if(null==h)return void console.warn("D3 collision resolver stopped: missing a key for data. Example: key = 'geo' ");n=.8*t.node().getBBox().height;for(var o=t.filter(function(t){return u(t,s)}).sort(function(t,e){return d3.ascending(t.valueY,e.valueY)}).data(),c={},l=0;l<o.length-1;l++){var f=o[l],d=o[l+1];if(f.shiftY||(f.shiftY=0),d.shiftY=0,!(d.valueY-f.valueY-f.shiftY>=n)){var p=0;f.valueY>n&&(0==l?p=Math.min(n,f.valueY):f.valueY-o[l-1].valueY+o[l-1].shiftY>n&&(p=Math.min(n,f.valueY-o[l-1].valueY+o[l-1].shiftY))),f.upperAvailable=p;var v=0;d.valueY<i&&(l==o.length-2?v=Math.min(n,i-d.valueY):o[l+2].valueY-d.valueY>n&&(v=Math.min(n,o[l+2].valueY-d.valueY))),d.underAvailable=v;var g=n-(d.valueY-f.valueY-f.shiftY);c[f[h]]={},c[d[h]]={},p>=g/2&&v>=g/2?(f.shiftY=-g/2,d.shiftY=g/2):p>=g/2?(d.shiftY=v,f.shiftY=-Math.min(p,g-v)):v>=g/2?(f.shiftY-=p,d.shiftY=Math.min(v,g-p)):(f.shiftY=-p,d.shiftY=v),c[f[h]].valueY=f.valueY+f.shiftY,c[d[h]].valueY=d.valueY+d.shiftY}}t.each(function(t,n){c[t[h]]&&c[t[h]].valueY&&d3.select(this).selectAll(r).transition().duration(e).attr("transform","translate(0,"+c[t[h]].valueY+")")})}var e=300,n=0,r=null;t.selector=function(e){return arguments.length?(r=e,t):r};var i=null;t.height=function(e){return arguments.length?(i=e,t):i};var o=d3.scaleLinear().domain([0,1]).range([0,1]);t.scale=function(e){return arguments.length?(o=e,t):o};var a=null;t.value=function(e){return arguments.length?(a=e,t):a};var s=null;t.time=function(e){return arguments.length?(s=e,t):s};var u=function(){return!0};t.filter=function(e){return arguments.length?(u=e,t):u};var c=null;t.fixed=function(e){return arguments.length?(c=e,t):c};var l=null;t.handleResult=function(e){return arguments.length?(l=e,t):l};var h=null;return t.KEY=function(e){return arguments.length?(h=e,t):h},t}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t,n){return{type:"Feature",id:t.id,properties:t.properties,geometry:e(t.geometry,n)}}function e(t,n){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(t){return e(t,n)})};if(!de.hasOwnProperty(t.type))return null;var r=de[t.type];return d3.geoUstream(t,n(r)),r.result()}function n(){}function r(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}function i(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],h=t[s],f=h[0],d=h[1];l>r^d>r&&n<(f-c)*(r-l)/(d-l)+c&&(i=!i)}return i}function o(t){return t?t/Math.sin(t):1}function a(t){return t>0?1:t<0?-1:0}function s(t){return t>1?me:t<-1?-me:Math.asin(t)}function u(t){return t>1?0:t<-1?ge:Math.acos(t)}function c(t){return t>0?Math.sqrt(t):0}function l(t){function e(t,e){var n=Math.cos(t),i=Math.cos(e),o=Math.sin(e),a=i*n,s=-((1-a?Math.log(.5*(1+a))/(1-a):-.5)+r/(1+a));return[s*i*Math.sin(t),s*o]}var n=Math.tan(.5*t),r=2*Math.log(Math.cos(.5*t))/(n*n);return e.invert=function(e,n){var i,o=Math.sqrt(e*e+n*n),a=-.5*t,u=50;if(!o)return[0,0];do{var c=.5*a,l=Math.cos(c),h=Math.sin(c),f=Math.tan(c),d=Math.log(1/l);a-=i=(2/f*d-r*f-o)/(-d/(h*h)+1-r/(2*l*l))}while(Math.abs(i)>pe&&--u>0);var p=Math.sin(a);return[Math.atan2(e*p,o*Math.cos(a)),s(n*p/o)]},e}function h(){var t=me,e=we(l),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*ge/180):t/ge*180},n}function f(t,e){var n=Math.cos(e),r=o(u(n*Math.cos(t/=2)));return[2*n*Math.sin(t)*r,Math.sin(e)*r]}function d(t){function e(t,e){var s=Math.cos(e),u=Math.cos(t/=2);return[(1+s)*Math.sin(t),(i*e>-Math.atan2(u,o)-.001?0:10*-i)+a+Math.sin(e)*r-(1+s)*n*u]}var n=Math.sin(t),r=Math.cos(t),i=t>0?1:-1,o=Math.tan(i*t),a=(1+n-r)/2;return e.invert=function(t,e){var s=0,u=0,c=50;do{var l=Math.cos(s),h=Math.sin(s),f=Math.cos(u),d=Math.sin(u),p=1+f,v=p*h-t,g=a+d*r-p*n*l-e,m=.5*p*l,y=-h*d,b=.5*n*p*h,_=r*f+n*l*d,x=y*b-_*m,w=.5*(g*y-v*_)/x,M=(v*b-g*m)/x;s-=w,u-=M}while((Math.abs(w)>pe||Math.abs(M)>pe)&&--c>0);return i*u>-Math.atan2(Math.cos(s),o)-.001?[2*s,u]:null},e}function p(){var t=ge/9,e=t>0?1:-1,n=Math.tan(e*t),r=we(d),i=r(t),o=i.stream;return i.parallel=function(i){return arguments.length?(n=Math.tan((e=(t=i*ge/180)>0?1:-1)*t),r(t)):t/ge*180},i.stream=function(r){var a=i.rotate(),s=o(r),u=(i.rotate([0,0]),o(r));return i.rotate(a),s.sphere=function(){u.polygonStart(),u.lineStart();for(var r=-180*e;e*r<180;r+=90*e)u.point(r,90*e);for(;e*(r-=t)>=-180;)u.point(r,e*-Math.atan2(Math.cos(r*be/2),n)*_e);u.lineEnd(),u.polygonEnd()},s},i}function v(t){return((t=Math.exp(2*t))-1)/(t+1)}function g(t){return.5*(Math.exp(t)-Math.exp(-t))}function m(t){return.5*(Math.exp(t)+Math.exp(-t))}function y(t){return Math.log(t+c(t*t+1))}function b(t){return Math.log(t+c(t*t-1))}function _(t,e){var n=Math.tan(e/2),r=c(1-n*n),i=1+r*Math.cos(t/=2),o=Math.sin(t)*r/i,a=n/i,s=o*o,u=a*a;return[4/3*o*(3+s-3*u),4/3*a*(3+3*s-u)]}function x(t,e){var n=Math.abs(e);return n<ge/4?[t,Math.log(Math.tan(ge/4+e/2))]:[t*Math.cos(n)*(2*Math.SQRT2-1/Math.sin(n)),a(e)*(2*Math.SQRT2*(n-ge/4)-Math.log(Math.tan(n/2)))]}function w(t){function e(t,e){var r=Se(t,e);if(Math.abs(t)>me){var i=Math.atan2(r[1],r[0]),o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=n*Math.round((i-me)/n)+me,u=Math.atan2(Math.sin(i-=a),2-Math.cos(i));i=a+s(ge/o*Math.sin(u))-u,r[0]=o*Math.cos(i),r[1]=o*Math.sin(i)}return r}var n=2*ge/t;return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e);if(r>me){var i=Math.atan2(e,t),o=n*Math.round((i-me)/n)+me,a=i>o?-1:1,s=r*Math.cos(o-i),u=1/Math.tan(a*Math.acos((s-ge)/Math.sqrt(ge*(ge-2*s)+r*r)));i=o+2*Math.atan((u+a*Math.sqrt(u*u-3))/3),t=r*Math.cos(i),e=r*Math.sin(i)}return Se.invert(t,e)},e}function M(){var t=5,e=we(w),n=e(t),r=n.stream,i=.01,o=-Math.cos(i*be),a=Math.sin(i*be);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var u=n.rotate(),c=r(e),l=(n.rotate([0,0]),r(e));return n.rotate(u),c.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*ge/t,u=90-180/t,c=me;e<t;++e,u-=n,c-=r)l.point(Math.atan2(a*Math.cos(c),o)*_e,s(a*Math.sin(c))*_e),u<-90?(l.point(-90,-180-u-i),l.point(-90,-180-u+i)):(l.point(90,u+i),l.point(90,u-i));l.lineEnd(),l.polygonEnd()},c},n}function S(t){return function(e){var n,r=t*Math.sin(e),i=30;do{e-=n=(e+Math.sin(e)-r)/(1+Math.cos(e))}while(Math.abs(n)>pe&&--i>0);return e/2}}function k(t,e,n){function r(n,r){return[t*n*Math.cos(r=i(r)),e*Math.sin(r)]}var i=S(n);return r.invert=function(r,i){var o=s(i/e);return[r/(t*Math.cos(o)),s((2*o+Math.sin(2*o))/n)]},r}function E(t,e){var n=2.00276,r=ke(e);return[n*t/(1/Math.cos(e)+1.11072/Math.cos(r)),(e+Math.SQRT2*Math.sin(r))/n]}function O(t){var e=0,n=we(t),r=n(e);return r.parallel=function(t){return arguments.length?n(e=t*ge/180):e/ge*180},r}function T(t,e){return[t*Math.cos(e),e]}function C(t){function e(e,r){var i=n+t-r,o=i?e*Math.cos(r)/i:i;return[i*Math.sin(o),n-i*Math.cos(o)]}if(!t)return T;var n=1/Math.tan(t);return e.invert=function(e,r){var i=Math.sqrt(e*e+(r=n-r)*r),o=n+t-i;return[i/Math.cos(o)*Math.atan2(e,r),o]},e}function z(t){function e(e,n){for(var r=Math.sin(n),i=Math.cos(n),o=new Array(3),c=0;c<3;++c){var l=t[c];if(o[c]=A(n-l[1],l[3],l[2],i,r,e-l[0]),!o[c][0])return l.point;o[c][1]=I(o[c][1]-l.v[1])}for(var h=u.slice(),c=0;c<3;++c){var f=2==c?0:c+1,d=D(t[c].v[0],o[c][0],o[f][0]);o[c][1]<0&&(d=-d),c?1==c?(d=a-d,h[0]-=o[c][0]*Math.cos(d),h[1]-=o[c][0]*Math.sin(d)):(d=s-d,h[0]+=o[c][0]*Math.cos(d),h[1]+=o[c][0]*Math.sin(d)):(h[0]+=o[c][0]*Math.cos(d),h[1]-=o[c][0]*Math.sin(d))}return h[0]/=3,h[1]/=3,h}t=t.map(function(t){return[t[0],t[1],Math.sin(t[1]),Math.cos(t[1])]});for(var n,r=t[2],i=0;i<3;++i,r=n)n=t[i],r.v=A(n[1]-r[1],r[3],r[2],n[3],n[2],n[0]-r[0]),r.point=[0,0];var o=D(t[0].v[0],t[2].v[0],t[1].v[0]),a=D(t[0].v[0],t[1].v[0],t[2].v[0]),s=ge-o;t[2].point[1]=0,t[0].point[0]=-(t[1].point[0]=.5*t[0].v[0]);var u=[t[2].point[0]=t[0].point[0]+t[2].v[0]*Math.cos(o),2*(t[0].point[1]=t[1].point[1]=t[2].v[0]*Math.sin(o))];return e}function P(){var t=[[0,0],[0,0],[0,0]],e=we(z),n=e(t),r=n.rotate;return delete n.rotate,n.points=function(i){if(!arguments.length)return t;t=i;var o=d3.geoCentroid({type:"MultiPoint",coordinates:t}),a=[-o[0],-o[1]];return r.call(n,a),e(t.map(d3.geoRotation(a)).map(j))},n.points([[-150,55],[-35,55],[-92.5,10]])}function A(t,e,n,r,i,o){var a,c=Math.cos(o);if(Math.abs(t)>1||Math.abs(o)>1)a=u(n*i+e*r*c);else{var l=Math.sin(.5*t),h=Math.sin(.5*o);a=2*s(Math.sqrt(l*l+e*r*h*h))}return Math.abs(a)>pe?[a,Math.atan2(r*Math.sin(o),e*i-n*r*c)]:[0,0]}function D(t,e,n){return u(.5*(t*t+e*e-n*n)/(t*e))}function I(t){return t-2*ge*Math.floor((t+ge)/(2*ge))}function j(t){return[t[0]*be,t[1]*be]}function R(t,e){var n=c(1-Math.sin(e));return[2/ye*t*n,ye*(1-n)]}function L(t){function e(t,e){return[t,(t?t/Math.sin(t):1)*(Math.sin(e)*Math.cos(t)-n*Math.cos(e))]}var n=Math.tan(t);return e.invert=n?function(t,e){t&&(e*=Math.sin(t)/t);var r=Math.cos(t);return[t,2*Math.atan2(Math.sqrt(r*r+n*n-e*e)-r,n-e)]}:function(t,e){return[t,s(t?e*Math.tan(t)/t:e)]},e}function N(t,e){var n=Math.sqrt(3);return[n*t*(2*Math.cos(2*e/3)-1)/ye,n*ye*Math.sin(e/3)]}function F(t){function e(t,e){return[t*n,Math.sin(e)/n]}var n=Math.cos(t);return e.invert=function(t,e){return[t/n,s(e*n)]},e}function B(t){function e(t,e){return[t*n,(1+n)*Math.tan(.5*e)]}var n=Math.cos(t);return e.invert=function(t,e){return[t/n,2*Math.atan(e/(1+n))]},e}function H(t,e){var n=Math.sqrt(8/(3*ge));return[n*t*(1-Math.abs(e)/ge),n*e]}function q(t,e){var n=Math.sqrt(4-3*Math.sin(Math.abs(e)));return[2/Math.sqrt(6*ge)*t*n,a(e)*Math.sqrt(2*ge/3)*(2-n)]}function V(t,e){var n=Math.sqrt(ge*(4+ge));return[2/n*t*(1+Math.sqrt(1-4*e*e/(ge*ge))),4/n*e]}function U(t,e){var n=(2+me)*Math.sin(e);e/=2;for(var r=0,i=1/0;r<10&&Math.abs(i)>pe;r++){var o=Math.cos(e);e-=i=(e+Math.sin(e)*(o+2)-n)/(2*o*(1+o))}return[2/Math.sqrt(ge*(4+ge))*t*(1+Math.cos(e)),2*Math.sqrt(ge/(4+ge))*Math.sin(e)]}function W(t,e){return[t*(1+Math.cos(e))/Math.sqrt(2+ge),2*e/Math.sqrt(2+ge)]}function Y(t,e){for(var n=(1+me)*Math.sin(e),r=0,i=1/0;r<10&&Math.abs(i)>pe;r++)e-=i=(e+Math.sin(e)-n)/(1+Math.cos(e));return n=Math.sqrt(2+ge),[t*(1+Math.cos(e))/n,2*e/n]}function X(t,e){var n=Math.sin(t/=2),r=Math.cos(t),i=Math.sqrt(Math.cos(e)),o=Math.cos(e/=2),a=Math.sin(e)/(o+Math.SQRT2*r*i),s=Math.sqrt(2/(1+a*a)),u=Math.sqrt((Math.SQRT2*o+(r+n)*i)/(Math.SQRT2*o+(r-n)*i));return[Te*(s*(u-1/u)-2*Math.log(u)),Te*(s*a*(u+1/u)-2*Math.atan(a))]}function K(t,e){var n=Math.tan(e/2);return[t*Ce*c(1-n*n),(1+Ce)*n]}function G(t,e){var n=e/2,r=Math.cos(n);return[2*t/ye*Math.cos(e)*r*r,ye*Math.tan(n)]}function Z(t,e){function n(e,n){var o=ze(e,n),a=o[0],s=o[1],u=a*a+s*s;if(u>i){var c=Math.sqrt(u),l=Math.atan2(s,a),h=r*Math.round(l/r),f=l-h,d=t*Math.cos(f),p=(t*Math.sin(f)-f*Math.sin(d))/(me-d),v=Q(f,p),g=(ge-t)/$(v,d,ge);a=c;var m,y=50;do{a-=m=(t+$(v,d,a)*g-c)/(v(a)*g)}while(Math.abs(m)>pe&&--y>0);s=f*Math.sin(a),a<me&&(s-=p*(a-me));var b=Math.sin(h),_=Math.cos(h);o[0]=a*_-s*b,o[1]=a*b+s*_}return o}var r=2*ge/e,i=t*t;return n.invert=function(e,n){var o=e*e+n*n;if(o>i){var a=Math.sqrt(o),s=Math.atan2(n,e),u=r*Math.round(s/r),c=s-u,e=a*Math.cos(c);n=a*Math.sin(c);for(var l=e-me,h=Math.sin(e),f=n/h,d=e<me?1/0:0,p=10;;){var v=t*Math.sin(f),g=t*Math.cos(f),m=Math.sin(g),y=me-g,b=(v-f*m)/y,_=Q(f,b);if(Math.abs(d)<ve||!--p)break;f-=d=(f*h-b*l-n)/(h-2*l*(y*(g+f*v*Math.cos(g)-m)-v*(v-f*m))/(y*y))}a=t+$(_,g,e)*(ge-t)/$(_,g,ge),s=u+f,e=a*Math.cos(s),n=a*Math.sin(s)}return ze.invert(e,n)},n}function Q(t,e){return function(n){var r=t*Math.cos(n);return n<me&&(r-=e),Math.sqrt(1+r*r)}}function J(){var t=6,e=30*be,n=Math.cos(e),r=Math.sin(e),i=we(Z),o=i(e,t),a=o.stream,s=-Math.cos(.01*be),u=Math.sin(.01*be);return o.radius=function(o){return arguments.length?(n=Math.cos(e=o*be),r=Math.sin(e),i(e,t)):e*_e},o.lobes=function(n){return arguments.length?i(e,t=+n):t},o.stream=function(e){var i=o.rotate(),c=a(e),l=(o.rotate([0,0]),a(e));return o.rotate(i),c.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,i=2*ge/t,o=0;e<t;++e,o-=i)l.point(Math.atan2(u*Math.cos(o),s)*_e,Math.asin(u*Math.sin(o))*_e),l.point(Math.atan2(r*Math.cos(o-i/2),n)*_e,Math.asin(r*Math.sin(o-i/2))*_e);l.lineEnd(),l.polygonEnd()},c},o}function $(t,e,n){for(var r=(n-e)/50,i=t(e)+t(n),o=1,a=e;o<50;++o)i+=2*t(a+=r);return.5*i*r}function tt(t,e,n,r,i,o,a,s){function u(u,c){if(!c)return[t*u/ge,0];var l=c*c,h=t+l*(e+l*(n+l*r)),f=c*(i-1+l*(o-s+l*a)),d=(h*h+f*f)/(2*f),p=u*Math.asin(h/d)/ge;return[d*Math.sin(p),c*(1+l*s)+d*(1-Math.cos(p))]}return arguments.length<8&&(s=0),u.invert=function(u,l){var h,f,d=ge*u/t,p=l,v=50;do{var g=p*p,m=t+g*(e+g*(n+g*r)),y=p*(i-1+g*(o-s+g*a)),b=m*m+y*y,_=2*y,x=b/_,w=x*x,M=Math.asin(m/x)/ge,S=d*M;if(xB2=m*m,dxBd\u03c6=(2*e+g*(4*n+6*g*r))*p,dyBd\u03c6=i+g*(3*o+5*g*a),dpd\u03c6=2*(m*dxBd\u03c6+y*(dyBd\u03c6-1)),dqd\u03c6=2*(dyBd\u03c6-1),dmd\u03c6=(dpd\u03c6*_-b*dqd\u03c6)/(_*_),cos\u03b1=Math.cos(S),sin\u03b1=Math.sin(S),mcos\u03b1=x*cos\u03b1,msin\u03b1=x*sin\u03b1,d\u03b1d\u03c6=d/ge*(1/c(1-xB2/w))*(dxBd\u03c6*x-m*dmd\u03c6)/w,fx=msin\u03b1-u,fy=p*(1+g*s)+x-mcos\u03b1-l,\u03b4x\u03b4\u03c6=dmd\u03c6*sin\u03b1+mcos\u03b1*d\u03b1d\u03c6,\u03b4x\u03b4\u03bb=mcos\u03b1*M,\u03b4y\u03b4\u03c6=1+dmd\u03c6-(dmd\u03c6*cos\u03b1-msin\u03b1*d\u03b1d\u03c6),\u03b4y\u03b4\u03bb=msin\u03b1*M,denominator=\u03b4x\u03b4\u03c6*\u03b4y\u03b4\u03bb-\u03b4y\u03b4\u03c6*\u03b4x\u03b4\u03bb,!denominator)break;d-=h=(fy*\u03b4x\u03b4\u03c6-fx*\u03b4y\u03b4\u03c6)/denominator,p-=f=(fx*\u03b4y\u03b4\u03bb-fy*\u03b4x\u03b4\u03bb)/denominator}while((Math.abs(h)>pe||Math.abs(f)>pe)&&--v>0);return[d,p]},u}function et(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}function nt(t){function e(){var t=!1,e=we(n),r=e(t);return r.quincuncial=function(n){return arguments.length?e(t=!!n):t},r}function n(e){var n=e?function(e,n){var i=Math.abs(e)<me,o=t(i?e:e>0?e-ge:e+ge,n),s=(o[0]-o[1])*Math.SQRT1_2,u=(o[0]+o[1])*Math.SQRT1_2;if(i)return[s,u];var c=r*Math.SQRT1_2,l=s>0^u>0?-1:1;return[l*s-a(u)*c,l*u-a(s)*c]}:function(e,n){var i=e>0?-.5:.5,o=t(e+i*ge,n);return o[0]-=i*r,o};return t.invert&&(n.invert=e?function(e,n){var i=(e+n)*Math.SQRT1_2,o=(n-e)*Math.SQRT1_2,a=Math.abs(i)<.5*r&&Math.abs(o)<.5*r;if(!a){var s=r*Math.SQRT1_2,u=i>0^o>0?-1:1,c=-u*(e+(o>0?1:-1)*s),l=-u*(n+(i>0?1:-1)*s);i=(-c-l)*Math.SQRT1_2,o=(c-l)*Math.SQRT1_2}var h=t.invert(i,o);return a||(h[0]+=i>0?ge:-ge),h}:function(e,n){var i=e>0?-.5:.5,o=t.invert(e+i*r,n),a=o[0]-i*ge;return a<-ge?a+=2*ge:a>ge&&(a-=2*ge),o[0]=a,o}),n}var r=t(me,0)[0]-t(-me,0)[0];return e.raw=n,e}function rt(t,e){var n=a(t),r=a(e),i=Math.cos(e),o=Math.cos(t)*i,u=Math.sin(t)*i,c=Math.sin(r*e);t=Math.abs(Math.atan2(u,c)),e=s(o),Math.abs(t-me)>pe&&(t%=me);var l=it(t>ge/4?me-t:t,e);return t>ge/4&&(c=l[0],l[0]=-l[1],l[1]=-c),l[0]*=n,l[1]*=-r,l}function it(t,e){if(e===me)return[0,0];var n=Math.sin(e),r=n*n,i=r*r,o=1+i,a=1+3*i,u=1-i,l=s(1/Math.sqrt(o)),h=u+r*o*l,f=(1-n)/h,d=Math.sqrt(f),p=f*o,v=Math.sqrt(p),g=d*u;if(0===t)return[0,-(g+r*v)];var m=Math.cos(e),y=1/m,b=2*n*m,_=(-3*r+l*a)*b,x=(-h*m-(1-n)*_)/(h*h),w=.5*x/d,M=u*w-2*r*d*b,S=r*o*x+f*a*b,k=-y*b,E=-y*S,O=-2*y*M,T=4*t/ge;if(t>.222*ge||e<ge/4&&t>.175*ge){var C=(g+r*c(p*(1+i)-g*g))/(1+i);if(t>ge/4)return[C,C];var z=C,P=.5*C,A=50;C=.5*(P+z);do{var D=Math.sqrt(p-C*C),I=C*(O+k*D)+E*s(C/v)-T;if(!I)break;I<0?P=C:z=C,C=.5*(P+z)}while(Math.abs(z-P)>pe&&--A>0)}else{var j,C=pe,A=25;do{var R=C*C,D=c(p-R),L=O+k*D,I=C*L+E*s(C/v)-T,N=L+(E-k*R)/D;C-=j=D?I/N:0}while(Math.abs(j)>pe&&--A>0)}return[C,-g-r*c(p-C*C)]}function ot(t,e){for(var n=0,r=1,i=.5,o=50;;){var a=i*i,s=Math.sqrt(i),u=Math.asin(1/Math.sqrt(1+a)),c=1-a+i*(1+a)*u,l=(1-s)/c,h=Math.sqrt(l),f=l*(1+a),d=h*(1-a),p=f-t*t,v=Math.sqrt(p),g=e+d+i*v;if(Math.abs(r-n)<ve||0==--o||0===g)break;g>0?n=i:r=i,i=.5*(n+r)}if(!o)return null;var m=Math.asin(s),y=Math.cos(m),b=1/y,_=2*s*y,x=(-3*i+u*(1+3*a))*_,w=(-c*y-(1-s)*x)/(c*c);return[ge/4*(t*(-2*b*(.5*w/h*(1-a)-2*i*h*_)+-b*_*v)+-b*(i*(1+a)*w+l*(1+3*a)*_)*Math.asin(t/Math.sqrt(f))),m]}function at(t,e,n){if(!t){var r=st(e,1-n);return[[0,r[0]/r[1]],[1/r[1],0],[r[2]/r[1],0]]}var i=st(t,n);if(!e)return[[i[0],0],[i[1],0],[i[2],0]];var r=st(e,1-n),o=r[1]*r[1]+n*i[0]*i[0]*r[0]*r[0];return[[i[0]*r[2]/o,i[1]*i[2]*r[0]*r[1]/o],[i[1]*r[1]/o,-i[0]*i[2]*r[0]*r[2]/o],[i[2]*r[1]*r[2]/o,-n*i[0]*i[1]*r[0]/o]]}function st(t,e){var n,r,i,o,a;if(e<pe)return o=Math.sin(t),r=Math.cos(t),n=.25*e*(t-o*r),[o-n*r,r+n*o,1-.5*e*o*o,t-n];if(e>=1-pe)return n=.25*(1-e),r=m(t),o=v(t),i=1/r,a=r*g(t),[o+n*(a-t)/(r*r),i-n*o*i*(a-t),i+n*o*i*(a+t),2*Math.atan(Math.exp(t))-me+n*(a-t)/r];var u=[1,0,0,0,0,0,0,0,0],l=[Math.sqrt(e),0,0,0,0,0,0,0,0],h=0;for(r=Math.sqrt(1-e),a=1;Math.abs(l[h]/u[h])>pe&&h<8;)n=u[h++],l[h]=.5*(n-r),u[h]=.5*(n+r),r=c(n*r),a*=2;i=a*u[h]*t;do{o=l[h]*Math.sin(r=i)/u[h],i=.5*(s(o)+i)}while(--h);return[Math.sin(i),o=Math.cos(i),o/Math.cos(i-r),i]}function ut(t,e,n){var r=Math.abs(t),i=Math.abs(e),o=g(i);if(r){var s=1/Math.sin(r),u=1/(Math.tan(r)*Math.tan(r)),l=-(u+n*o*o*s*s-1+n),h=(n-1)*u,f=.5*(-l+Math.sqrt(l*l-4*h));return[ct(Math.atan(1/Math.sqrt(f)),n)*a(t),ct(Math.atan(c((f/u-1)/n)),1-n)*a(e)]}return[0,ct(Math.atan(o),1-n)*a(e)]}function ct(t,e){if(!e)return t;if(1===e)return Math.log(Math.tan(t/2+ge/4));for(var n=1,r=Math.sqrt(1-e),i=Math.sqrt(e),o=0;Math.abs(i)>pe;o++){if(t%ge){var a=Math.atan(r*Math.tan(t)/n);a<0&&(a+=ge),t+=a+~~(t/ge)*ge}else t+=t;i=(n+r)/2,r=Math.sqrt(n*r),i=((n=i)-r)/2}return t/(Math.pow(2,o)*n)}function lt(t,e){var n=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-n*n),i=ct(me,r*r),o=Math.log(Math.tan(ge/4+Math.abs(e)/2)),a=Math.exp(-1*o)/Math.sqrt(n),s=ht(a*Math.cos(-1*t),a*Math.sin(-1*t)),u=ut(s[0],s[1],r*r);return[-u[1],(e>=0?1:-1)*(.5*i-u[0])]}function ht(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?me:-me)-Math.atan2(i,2*t)),-.25*Math.log(i*i+4*n)+.5*Math.log(r*r+n)]}function ft(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function dt(t){function e(t,e){var o=i(t,e);t=o[0],e=o[1];var a=Math.sin(e),s=Math.cos(e),c=Math.cos(t),l=u(n*a+r*s*c),h=Math.sin(l),f=Math.abs(h)>pe?l/h:1;return[f*r*Math.sin(t),(Math.abs(t)>me?f:-f)*(n*s-r*a*c)]}var n=Math.sin(t),r=Math.cos(t),i=pt(t);return i.invert=pt(-t),e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),o=-Math.sin(r),a=Math.cos(r),s=r*a,u=-e*o,l=r*n,h=c(s*s+u*u-l*l),f=Math.atan2(s*l+u*h,u*l-s*h),d=(r>me?-1:1)*Math.atan2(t*o,r*Math.cos(f)*a+e*Math.sin(f)*o);return i.invert(d,f)},e}function pt(t){var e=Math.sin(t),n=Math.cos(t);return function(t,r){var i=Math.cos(r),o=Math.cos(t)*i,a=Math.sin(t)*i,u=Math.sin(r);return[Math.atan2(a,o*n-u*e),s(u*n+o*e)]}}function vt(){var t=0,e=we(dt),n=e(t),r=n.rotate,i=n.stream,o=d3.geoCircle();return n.parallel=function(r){if(!arguments.length)return t/ge*180;var i=n.rotate();return e(t=r*ge/180).rotate(i)},n.rotate=function(e){return arguments.length?(r.call(n,[e[0],e[1]-t/ge*180]),o.center([-e[0],-e[1]]),n):(e=r.call(n),e[1]+=t/ge*180,e)},n.stream=function(t){return t=i(t),t.sphere=function(){t.polygonStart();var e,n=o.radius(89.99)().coordinates[0],r=n.length-1,i=-1;for(t.lineStart();++i<r;)t.point((e=n[i])[0],e[1]);for(t.lineEnd(),n=o.radius(90.01)().coordinates[0],r=n.length-1,t.lineStart();--i>=0;)t.point((e=n[i])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n}function gt(t,e){function n(n,r){var i=je(n/e,r);return i[0]*=t,i}return arguments.length<2&&(e=t),1===e?je:e===1/0?yt:(n.invert=function(n,r){var i=je.invert(n/t,r);return i[0]*=e,i},n)}function mt(){var t=2,e=we(gt),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n}function yt(t,e){return[t*Math.cos(e)/Math.cos(e/=2),2*Math.sin(e)]}function bt(t,e){for(var n,r=Math.sin(e)*(e<0?2.43763:2.67595),i=0;i<20&&(e-=n=(e+Math.sin(e)-r)/(1+Math.cos(e)),!(Math.abs(n)<pe));i++);return[.85*t*Math.cos(e*=.5),Math.sin(e)*(e<0?1.93052:1.75859)]}function _t(t){function e(e,l){var h,f=Math.abs(l);if(f>r){var d=Math.min(t-1,Math.max(0,Math.floor((e+ge)/c)));e+=ge*(t-1)/t-d*c,h=d3.geoCollignon.raw(e,f),h[0]=h[0]*i/o-i*(t-1)/(2*t)+d*i/t,h[1]=a+4*(h[1]-s)*u/i,l<0&&(h[1]=-h[1])}else h=n(e,l);return h[0]/=2,h}var n=d3.geoCylindricalEqualArea.raw(0),r=Re*ge/180,i=2*ge,o=d3.geoCollignon.raw(ge,r)[0]-d3.geoCollignon.raw(-ge,r)[0],a=n(0,r)[1],s=d3.geoCollignon.raw(0,r)[1],u=d3.geoCollignon.raw(0,me)[1]-s,c=2*ge/t;return e.invert=function(e,r){e*=2;var l=Math.abs(r);if(l>a){var h=Math.min(t-1,Math.max(0,Math.floor((e+ge)/c)));e=(e+ge*(t-1)/t-h*c)*o/i;var f=d3.geoCollignon.raw.invert(e,.25*(l-a)*i/u+s);return f[0]-=ge*(t-1)/t-h*c,r<0&&(f[1]=-f[1]),f}return n.invert(e,r)},e}function xt(){function t(){var t=180/e;return{type:"Polygon",coordinates:[d3.range(-180,180+t/2,t).map(function(t,e){return[t,1&e?90-1e-6:Re]}).concat(d3.range(180,-180-t/2,-t).map(function(t,e){return[t,1&e?1e-6-90:-Re]}))]}}var e=2,n=we(_t),r=n(e),i=r.stream;return r.lobes=function(t){return arguments.length?n(e=+t):e},r.stream=function(e){var n=r.rotate(),o=i(e),a=(r.rotate([0,0]),i(e));return r.rotate(n),o.sphere=function(){d3.geoStream(t(),a)},o},r}function wt(t){function e(e,i){var s,u,f=1-Math.sin(i);if(f&&f<2){var d,p=me-i,v=25;do{var g=Math.sin(p),m=Math.cos(p),y=o+Math.atan2(g,r-m),b=1+h-2*r*m;p-=d=(p-l*o-r*g+b*y-.5*f*n)/(2*r*g*y)}while(Math.abs(d)>ve&&--v>0);s=a*Math.sqrt(b),u=e*y/ge}else s=a*(t+f),u=e*o/ge;return[s*Math.sin(u),c-s*Math.cos(u)]}var n,r=1+t,i=Math.sin(1/r),o=s(i),a=2*Math.sqrt(ge/(n=ge+4*o*r)),c=.5*a*(r+Math.sqrt(t*(2+t))),l=t*t,h=r*r;return e.invert=function(t,e){var i=t*t+(e-=c)*e,f=(1+h-i/(a*a))/(2*r),d=u(f),p=Math.sin(d),v=o+Math.atan2(p,r-f);return[s(t/Math.sqrt(i))*ge/v,s(1-2*(d-l*o-r*p+(1+h-2*r*f)*v)/n)]},e}function Mt(){var t=1,e=we(wt),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n}function St(t,e){return e>-Le?(t=Ee(t,e),t[1]+=Ne,t):T(t,e)}function kt(t,e){return Math.abs(e)>Le?(t=Ee(t,e),t[1]-=e>0?Ne:-Ne,t):T(t,e)}function Et(t,e){return[3*t/(2*ge)*Math.sqrt(ge*ge/3-e*e),e]}function Ot(t){function e(e,n){if(Math.abs(Math.abs(n)-me)<pe)return[0,n<0?-2:2];var r=Math.sin(n),i=Math.pow((1+r)/(1-r),t/2),o=.5*(i+1/i)+Math.cos(e*=t);return[2*Math.sin(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=Math.abs(n);if(Math.abs(r-2)<pe)return e?null:[0,a(n)*me];if(r>2)return null;e/=2,n/=2;var i=e*e,o=n*n,u=2*n/(1+i+o);return u=Math.pow((1+u)/(1-u),1/t),[Math.atan2(2*e,1-i-o)/t,s((u-1)/(u+1))]},e}function Tt(){var t=.5,e=we(Ot),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n}function Ct(t,e){return[t*(1+Math.sqrt(Math.cos(e)))/2,e/(Math.cos(e/2)*Math.cos(t/6))]}function zt(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}function Pt(t,e){return[Math.sin(t)/Math.cos(e),Math.tan(e)*Math.cos(t)]}function At(t){function e(e,i){var o=i-t,a=Math.abs(o)<pe?e*n:Math.abs(a=ge/4+i/2)<pe||Math.abs(Math.abs(a)-me)<pe?0:e*o/Math.log(Math.tan(a)/r);return[a,o]}var n=Math.cos(t),r=Math.tan(ge/4+t/2);return e.invert=function(e,i){var o,a=i+t;return[Math.abs(i)<pe?e/n:Math.abs(o=ge/4+a/2)<pe||Math.abs(Math.abs(o)-me)<pe?0:e*Math.log(Math.tan(o)/r)/i,a]},e}function Dt(t,e){return[t,1.25*Math.log(Math.tan(ge/4+.4*e))]}function It(t){function e(e,r){for(var i,o=Math.cos(r),a=2/(1+o*Math.cos(e)),s=a*o*Math.sin(e),u=a*Math.sin(r),c=n,l=t[c],h=l[0],f=l[1];--c>=0;)l=t[c],h=l[0]+s*(i=h)-u*f,f=l[1]+s*f+u*i;return h=s*(i=h)-u*f,f=s*f+u*i,[h,f]}var n=t.length-1;return e.invert=function(e,r){var i=20,o=e,a=r;do{for(var u,c=n,l=t[c],h=l[0],f=l[1],d=0,p=0;--c>=0;)l=t[c],d=h+o*(u=d)-a*p,p=f+o*p+a*u,h=l[0]+o*(u=h)-a*f,f=l[1]+o*f+a*u;d=h+o*(u=d)-a*p,p=f+o*p+a*u,h=o*(u=h)-a*f-e,f=o*f+a*u-r;var v,g,m=d*d+p*p;o-=v=(h*d+f*p)/m,a-=g=(f*d-h*p)/m}while(Math.abs(v)+Math.abs(g)>pe*pe&&--i>0);if(i){var y=Math.sqrt(o*o+a*a),b=2*Math.atan(.5*y),_=Math.sin(b);return[Math.atan2(o*_,y*Math.cos(b)),y?s(a*_/y):0]}},e}function jt(){var t=Fe.miller,e=we(It),n=e(t);return n.coefficients=function(n){return arguments.length?e(t="string"==typeof n?Fe[n]:n):t},n}function Rt(t,e){var n=Math.sqrt(6),r=Math.sqrt(7),i=Math.asin(7*Math.sin(e)/(3*n));return[n*t*(2*Math.cos(2*i/3)-1)/r,9*Math.sin(i/3)/r]}function Lt(t,e){for(var n,r=(1+Math.SQRT1_2)*Math.sin(e),i=e,o=0;o<25&&(i-=n=(Math.sin(i/2)+Math.sin(i)-r)/(.5*Math.cos(i/2)+Math.cos(i)),!(Math.abs(n)<pe));o++);return[t*(1+2*Math.cos(i)/Math.cos(i/2))/(3*Math.SQRT2),2*Math.sqrt(3)*Math.sin(i/2)/Math.sqrt(2+Math.SQRT2)]}function Nt(t,e){for(var n,r=Math.sqrt(6/(4+ge)),i=(1+ge/4)*Math.sin(e),o=e/2,a=0;a<25&&(o-=n=(o/2+Math.sin(o)-i)/(.5+Math.cos(o)),!(Math.abs(n)<pe));a++);return[r*(.5+Math.cos(o))*t/1.5,r*o]}function Ft(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Bt(t,e){return[t*(1+Math.cos(e))/2,2*(e-Math.tan(e/2))]}function Ht(t,e){var n=e*e;return[t,e*(Be+n*n*(He+n*(qe+Ve*n)))]}function qt(t,e){if(Math.abs(e)<pe)return[t,0];var n=Math.tan(e),r=t*Math.sin(e);return[Math.sin(r)/n,e+(1-Math.cos(r))/n]}function Vt(t){function e(e,r){var i=n?Math.tan(e*n/2)/n:e/2;if(!r)return[2*i,-t];var o=2*Math.atan(i*Math.sin(r)),a=1/Math.tan(r);return[Math.sin(o)*a,r+(1-Math.cos(o))*a-t]}var n=Math.sin(t);return e.invert=function(e,r){if(Math.abs(r+=t)<pe)return[n?2*Math.atan(n*e/2)/n:e,0];var i,o=e*e+r*r,a=0,c=10;do{var l=Math.tan(a),h=1/Math.cos(a),f=o-2*r*a+a*a;a-=i=(l*f+2*(a-r))/(2+f*h*h+2*(a-r)*l)}while(Math.abs(i)>pe&&--c>0);var d=e*(l=Math.tan(a)),p=Math.tan(Math.abs(r)<Math.abs(a+1/l)?.5*s(d):.5*u(d)+ge/4)/Math.sin(a);return[n?2*Math.atan(n*p)/n:2*p,a]},e}function Ut(t,e){var n,r=Math.min(18,36*Math.abs(e)/ge),i=Math.floor(r),o=r-i,a=(n=Ge[i])[0],s=n[1],u=(n=Ge[++i])[0],c=n[1],l=(n=Ge[Math.min(19,++i)])[0],h=n[1];return[t*(u+o*(l-a)/2+o*o*(l-2*u+a)/2),(e>0?me:-me)*(c+o*(h-s)/2+o*o*(h-2*c+s)/2)]}function Wt(t){function e(e,n){var r=Math.cos(n),i=(t-1)/(t-r*Math.cos(e));return[i*r*Math.sin(e),i*Math.sin(n)]}return e.invert=function(e,n){var r=e*e+n*n,i=Math.sqrt(r),o=(t-Math.sqrt(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[Math.atan2(e*o,i*Math.sqrt(1-o*o)),i?s(n*o/i):0]},e}function Yt(t,e){function n(e,n){var a=r(e,n),s=a[1],u=s*o/(t-1)+i;return[a[0]*i/u,s/u]}var r=Wt(t);if(!e)return r;var i=Math.cos(e),o=Math.sin(e);return n.invert=function(e,n){var a=(t-1)/(t-1-n*o);return r.invert(a*e,a*n*i)},n}function Xt(){var t=1.4,e=0,n=we(Yt),r=n(t,e);return r.distance=function(r){return arguments.length?n(t=+r,e):t},r.tilt=function(r){return arguments.length?n(t,e=r*ge/180):180*e/ge},r}function Kt(t,e){var n=Math.tan(e/2),r=Math.sin(ge/4*n);return[t*(.74482-.34588*r*r),1.70711*n]}function Gt(t){function e(e,o){var a=u(Math.cos(o)*Math.cos(e-n)),s=u(Math.cos(o)*Math.cos(e-r)),l=o<0?-1:1;return a*=a,s*=s,[(a-s)/(2*t),l*c(4*i*s-(i-a+s)*(i-a+s))/(2*t)]}if(!t)return d3.geoAzimuthalEquidistant.raw;var n=-t/2,r=-n,i=t*t,o=Math.tan(r),a=.5/Math.sin(r);return e.invert=function(t,e){var i,s,c=e*e,l=Math.cos(Math.sqrt(c+(i=t+n)*i)),h=Math.cos(Math.sqrt(c+(i=t+r)*i));return[Math.atan2(s=l-h,i=(l+h)*o),(e<0?-1:1)*u(Math.sqrt(i*i+s*s)*a)]},e}function Zt(){var t=[[0,0],[0,0]],e=we(Gt),n=e(0),r=n.rotate;return delete n.rotate,n.points=function(n){if(!arguments.length)return t;t=n;var i=d3.geoInterpolate(n[0],n[1]),o=i(.5),a=d3.geoRotation([-o[0],-o[1]])(n[0]),u=.5*i.distance,c=-s(Math.sin(a[1]*be)/Math.sin(u));return a[0]>0&&(c=ge-c),r.call(a,[-o[0],-o[1],-c*_e]),e(2*u)},n}function Qt(t){function e(t,e){var r=d3.geoGnomonic.raw(t,e);return r[0]*=n,r}var n=Math.cos(t);return e.invert=function(t,e){return d3.geoGnomonic.raw.invert(t/n,e)},e}function Jt(){var t=[[0,0],[0,0]],e=we(Qt),n=e(0),r=n.rotate;return delete n.rotate,n.points=function(n){if(!arguments.length)return t;t=n;var i=d3.geoInterpolate(n[0],n[1]),o=i(.5),a=d3.geoRotation([-o[0],-o[1]])(n[0]),u=.5*i.distance,c=-s(Math.sin(a[1]*be)/Math.sin(u));return a[0]>0&&(c=ge-c),r.call(a,[-o[0],-o[1],-c*_e]),e(u)},n}function $t(t,e){if(Math.abs(e)<pe)return[t,0];var n=Math.abs(e/me),r=s(n);if(Math.abs(t)<pe||Math.abs(Math.abs(e)-me)<pe)return[0,a(e)*ge*Math.tan(r/2)];var i=Math.cos(r),o=Math.abs(ge/t-t/ge)/2,u=o*o,c=i/(n+i-1),l=c*(2/n-1),h=l*l,f=h+u,d=c-h,p=u+c;return[a(t)*ge*(o*d+Math.sqrt(u*d*d-f*(c*c-h)))/f,a(e)*ge*(l*p-o*Math.sqrt((u+1)*f-p*p))/f]}function te(t,e){if(Math.abs(e)<pe)return[t,0];var n=Math.abs(e/me),r=s(n);if(Math.abs(t)<pe||Math.abs(Math.abs(e)-me)<pe)return[0,a(e)*ge*Math.tan(r/2)];var i=Math.cos(r),o=Math.abs(ge/t-t/ge)/2,u=o*o,l=i*(Math.sqrt(1+u)-o*i)/(1+u*n*n);return[a(t)*ge*l,a(e)*ge*c(1-l*(2*o+l))]}function ee(t,e){if(Math.abs(e)<pe)return[t,0];var n=e/me,r=s(n);if(Math.abs(t)<pe||Math.abs(Math.abs(e)-me)<pe)return[0,ge*Math.tan(r/2)];var i=(ge/t-t/ge)/2,o=n/(1+Math.cos(r));return[ge*(a(t)*c(i*i+1-o*o)-i),ge*o]}function ne(t,e){if(!e)return[t,0];var n=Math.abs(e);if(!t||n===me)return[0,e];var r=n/me,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),s=o*o,u=r*o,l=i+s+2*u,h=r+3*o,f=t/me,d=f+1/f,p=a(Math.abs(t)-me)*Math.sqrt(d*d-4),v=p*p,g=l*(i+s*v-1)+(1-i)*(i*(h*h+4*s)+12*u*s+4*s*s),m=(p*(l+s-1)+2*c(g))/(4*l+v);return[a(t)*me*m,a(e)*me*c(1+p*Math.abs(m)-m*m)]}function re(t,e){return[t*Math.sqrt(1-3*e*e/(ge*ge)),e]}function ie(t,e){var n=.90631*Math.sin(e),r=Math.sqrt(1-n*n),i=Math.sqrt(2/(1+r*Math.cos(t/=3)));return[2.66723*r*i*Math.sin(t),1.24104*n*i]}function oe(t,e){var n=Math.cos(e),r=Math.cos(t)*n,i=1-r,o=Math.cos(t=Math.atan2(Math.sin(t)*n,-Math.sin(e))),a=Math.sin(t);return n=c(1-r*r),[a*n-o*i,-o*n-a*i]}function ae(t,e){var n=f(t,e);return[(n[0]+t/me)/2,(n[1]+e)/2]}d3.geoProject=function(t,n){var r=n.stream;if(!r)throw new Error("not yet supported");return(t&&se.hasOwnProperty(t.type)?se[t.type]:e)(t,r)};var se={Feature:t,FeatureCollection:function(e,n){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,n)})}}},ue=[],ce=[],le={point:function(t,e){ue.push([t,e])},result:function(){var t=ue.length?ue.length<2?{type:"Point",coordinates:ue[0]}:{type:"MultiPoint",coordinates:ue}:null;return ue=[],t}},he={lineStart:n,point:function(t,e){ue.push([t,e])},lineEnd:function(){ue.length&&(ce.push(ue),ue=[])},result:function(){var t=ce.length?ce.length<2?{type:"LineString",coordinates:ce[0]}:{type:"MultiLineString",coordinates:ce}:null;return ce=[],t}},fe={polygonStart:n,lineStart:n,point:function(t,e){ue.push([t,e])},lineEnd:function(){var t=ue.length;if(t){do{ue.push(ue[0].slice())}while(++t<4);ce.push(ue),ue=[]}},polygonEnd:n,result:function(){if(!ce.length)return null;var t=[],e=[];return ce.forEach(function(n){r(n)?t.push([n]):e.push(n)}),e.forEach(function(e){var n=e[0];t.some(function(t){return!!i(t[0],n)&&(t.push(e),!0)})||t.push([e])}),ce=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},de={Point:le,MultiPoint:le,LineString:he,MultiLineString:he,Polygon:fe,MultiPolygon:fe,Sphere:fe},pe=1e-6,ve=pe*pe,ge=Math.PI,me=ge/2,ye=Math.sqrt(ge),be=ge/180,_e=180/ge,xe=d3.geoProjection,we=d3.geoProjectionMutator;d3.geoInterrupt=function(t){function e(e,n){for(var r=n<0?-1:1,i=s[+(n<0)],o=0,a=i.length-1;o<a&&e>i[o][2][0];++o);var u=t(e-i[o][1][0],n);return u[0]+=t(i[o][1][0],r*n>r*i[o][0][1]?i[o][0][1]:n)[0],u}function n(){a=s.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]})})}function r(){for(var t=1e-6,e=[],n=0,r=s[0].length;n<r;++n){var o=s[0][n],a=180*o[0][0]/ge,u=180*o[0][1]/ge,c=180*o[1][1]/ge,l=180*o[2][0]/ge,h=180*o[2][1]/ge;e.push(i([[a+t,u+t],[a+t,c-t],[l-t,c-t],[l-t,h+t]],30))}for(var n=s[1].length-1;n>=0;--n){var o=s[1][n],a=180*o[0][0]/ge,u=180*o[0][1]/ge,c=180*o[1][1]/ge,l=180*o[2][0]/ge,h=180*o[2][1]/ge;e.push(i([[l-t,h-t],[l-t,c+t],[a+t,c+t],[a+t,u-t]],30))}return{type:"Polygon",coordinates:[d3.merge(e)]}}function i(t,e){for(var n,r,i,o=-1,a=t.length,s=t[0],u=[];++o<a;){n=t[o],r=(n[0]-s[0])/e,i=(n[1]-s[1])/e;for(var c=0;c<e;++c)u.push([s[0]+c*r,s[1]+c*i]);s=n}return u.push(n),u}function o(t,e){return Math.abs(t[0]-e[0])<pe&&Math.abs(t[1]-e[1])<pe}var a,s=[[[[-ge,0],[0,me],[ge,0]]],[[[-ge,0],[0,-me],[ge,0]]]];t.invert&&(e.invert=function(n,r){for(var i=a[+(r<0)],u=s[+(r<0)],c=0,l=i.length;c<l;++c){var h=i[c];if(h[0][0]<=n&&n<h[1][0]&&h[0][1]<=r&&r<h[1][1]){var f=t.invert(n-t(u[c][1][0],0)[0],r);return f[0]+=u[c][1][0],o(e(f[0],f[1]),[n,r])?f:null}}});var u=d3.geoProjection(e),c=u.stream;return u.stream=function(t){var e=u.rotate(),n=c(t),i=(u.rotate([0,0]),c(t));return u.rotate(e),n.sphere=function(){d3.geoStream(r(),i)},n},u.lobes=function(t){return arguments.length?(s=t.map(function(t){return t.map(function(t){return[[t[0][0]*ge/180,t[0][1]*ge/180],[t[1][0]*ge/180,t[1][1]*ge/180],[t[2][0]*ge/180,t[2][1]*ge/180]]})}),n(),u):s.map(function(t){return t.map(function(t){return[[180*t[0][0]/ge,180*t[0][1]/ge],[180*t[1][0]/ge,180*t[1][1]/ge],[180*t[2][0]/ge,180*t[2][1]/ge]]})})},u},(d3.geoAiry=h).raw=l,f.invert=function(t,e){if(!(t*t+4*e*e>ge*ge+pe)){var n=t,r=e,i=25;do{var o,a=Math.sin(n),s=Math.sin(n/2),c=Math.cos(n/2),l=Math.sin(r),h=Math.cos(r),f=Math.sin(2*r),d=l*l,p=h*h,v=s*s,g=1-p*c*c,m=g?u(h*c)*Math.sqrt(o=1/g):o=0,y=2*m*h*s-t,b=m*l-e,_=o*(p*v+m*h*c*d),x=o*(.5*a*f-2*m*l*s),w=.25*o*(f*s-m*l*p*a),M=o*(d*c+m*v*h),S=x*w-M*_;if(!S)break;var k=(b*x-y*M)/S,E=(y*w-b*_)/S;n-=k,r-=E}while((Math.abs(k)>pe||Math.abs(E)>pe)&&--i>0);return[n,r]}},(d3.geoAitoff=function(){return xe(f)}).raw=f,(d3.geoArmadillo=p).raw=d,_.invert=function(t,e){if(t*=3/8,e*=3/8,!t&&Math.abs(e)>1)return null;var n=t*t,r=e*e,i=1+n+r,o=Math.sqrt(.5*(i-Math.sqrt(i*i-4*e*e))),u=s(o)/3,c=o?b(Math.abs(e/o))/3:y(Math.abs(t))/3,l=Math.cos(u),h=m(c),f=h*h-l*l;return[2*a(t)*Math.atan2(g(c)*l,.25-f),2*a(e)*Math.atan2(h*Math.sin(u),.25+f)]},(d3.geoAugust=function(){return xe(_)}).raw=_;var Me=Math.log(1+Math.SQRT2);x.invert=function(t,e){if((r=Math.abs(e))<Me)return[t,2*Math.atan(Math.exp(e))-me];var n,r,i=Math.sqrt(8),o=ge/4,s=25;do{var u=Math.cos(o/2),c=Math.tan(o/2);o-=n=(i*(o-ge/4)-Math.log(c)-r)/(i-.5*u*u/c)}while(Math.abs(n)>ve&&--s>0);return[t/(Math.cos(o)*(i-1/Math.sin(o))),a(e)*o]},(d3.geoBaker=function(){return xe(x)}).raw=x;var Se=d3.geoAzimuthalEquidistant.raw;(d3.geoBerghaus=M).raw=w;var ke=S(ge),Ee=k(Math.SQRT2/me,Math.SQRT2,ge);(d3.geoMollweide=function(){return xe(Ee)}).raw=Ee,E.invert=function(t,e){var n,r,i=2.00276,o=i*e,a=e<0?-ge/4:ge/4,s=25;do{r=o-Math.SQRT2*Math.sin(a),a-=n=(Math.sin(2*a)+2*a-ge*Math.sin(r))/(2*Math.cos(2*a)+2+ge*Math.cos(r)*Math.SQRT2*Math.cos(a))}while(Math.abs(n)>pe&&--s>0);return r=o-Math.SQRT2*Math.sin(a),[t*(1/Math.cos(r)+1.11072/Math.cos(a))/i,r]},(d3.geoBoggs=function(){return xe(E)}).raw=E,T.invert=function(t,e){return[t/Math.cos(e),e]},(d3.geoSinusoidal=function(){return xe(T)}).raw=T,(d3.geoBonne=function(){return O(C).parallel(45)}).raw=C;var Oe=k(1,4/ge,ge);(d3.geoBromley=function(){return xe(Oe)}).raw=Oe,(d3.geoChamberlin=P).raw=z,R.invert=function(t,e){var n=(n=e/ye-1)*n;return[n>0?t*Math.sqrt(ge/n)/2:0,s(1-n)]},(d3.geoCollignon=function(){return xe(R)}).raw=R,(d3.geoCraig=function(){return O(L)}).raw=L,N.invert=function(t,e){var n=Math.sqrt(3),r=3*s(e/(n*ye));return[ye*t/(n*(2*Math.cos(2*r/3)-1)),r]},(d3.geoCraster=function(){return xe(N)}).raw=N,(d3.geoCylindricalEqualArea=function(){return O(F)}).raw=F,(d3.geoCylindricalStereographic=function(){return O(B)}).raw=B,H.invert=function(t,e){var n=Math.sqrt(8/(3*ge)),r=e/n;return[t/(n*(1-Math.abs(r)/ge)),r]},(d3.geoEckert1=function(){return xe(H)}).raw=H,q.invert=function(t,e){var n=2-Math.abs(e)/Math.sqrt(2*ge/3);return[t*Math.sqrt(6*ge)/(2*n),a(e)*s((4-n*n)/3)]},(d3.geoEckert2=function(){return xe(q)}).raw=q,V.invert=function(t,e){var n=Math.sqrt(ge*(4+ge))/2;return[t*n/(1+c(1-e*e*(4+ge)/(4*ge))),e*n/2]},(d3.geoEckert3=function(){return xe(V)}).raw=V,U.invert=function(t,e){var n=.5*e*Math.sqrt((4+ge)/ge),r=s(n),i=Math.cos(r);return[t/(2/Math.sqrt(ge*(4+ge))*(1+i)),s((r+n*(i+2))/(2+me))]},(d3.geoEckert4=function(){return xe(U)}).raw=U,W.invert=function(t,e){var n=Math.sqrt(2+ge),r=e*n/2;return[n*t/(1+Math.cos(r)),r]},(d3.geoEckert5=function(){return xe(W)}).raw=W,Y.invert=function(t,e){var n=1+me,r=Math.sqrt(n/2);return[2*t*r/(1+Math.cos(e*=r)),s((e+Math.sin(e))/n)]},(d3.geoEckert6=function(){return xe(Y)}).raw=Y,X.invert=function(t,e){var n=d3.geoAugust.raw.invert(t/1.2,1.065*e);if(!n)return null;var r=n[0],i=n[1],o=20;t/=Te,e/=Te;do{var a=r/2,s=i/2,u=Math.sin(a),c=Math.cos(a),l=Math.sin(s),h=Math.cos(s),f=Math.cos(i),d=Math.sqrt(f),p=l/(h+Math.SQRT2*c*d),v=p*p,g=Math.sqrt(2/(1+v)),m=Math.SQRT2*h+(c+u)*d,y=Math.SQRT2*h+(c-u)*d,b=m/y,_=Math.sqrt(b),x=_-1/_,w=_+1/_,M=g*x-2*Math.log(_)-t,S=g*p*w-2*Math.atan(p)-e,k=l&&Math.SQRT1_2*d*u*v/l,E=(Math.SQRT2*c*h+d)/(2*(h+Math.SQRT2*c*d)*(h+Math.SQRT2*c*d)*d),O=-.5*p*g*g*g,T=O*k,C=O*E,z=(z=2*h+Math.SQRT2*d*(c-u))*z*_,P=(Math.SQRT2*c*h*d+f)/z,A=-Math.SQRT2*u*l/(d*z),D=x*T-2*P/_+g*(P+P/b),I=x*C-2*A/_+g*(A+A/b),j=p*w*T-2*k/(1+v)+g*w*k+g*p*(P-P/b),R=p*w*C-2*E/(1+v)+g*w*E+g*p*(A-A/b),L=I*j-R*D;if(!L)break;var N=(S*I-M*R)/L,F=(M*j-S*D)/L;r-=N,i=Math.max(-me,Math.min(me,i-F))}while((Math.abs(N)>pe||Math.abs(F)>pe)&&--o>0);return Math.abs(Math.abs(i)-me)<pe?[0,i]:o&&[r,i]};var Te=3+2*Math.SQRT2;(d3.geoEisenlohr=function(){return xe(X)}).raw=X,K.invert=function(t,e){var n=e/(1+Ce);return[t?t/(Ce*c(1-n*n)):0,2*Math.atan(n)]};var Ce=Math.cos(35*be);(d3.geoFahey=function(){return xe(K)}).raw=K,G.invert=function(t,e){var n=Math.atan(e/ye),r=Math.cos(n),i=2*n;return[t*ye*.5/(Math.cos(i)*r*r),i]},(d3.geoFoucaut=function(){return xe(G)}).raw=G,d3.geoGilbert=function(t){function e(e){return t([.5*e[0],s(Math.tan(.5*e[1]*be))*_e])}var n=d3.geoEquirectangular().scale(_e).translate([0,0]);return t.invert&&(e.invert=function(e){return e=t.invert(e),e[0]*=2,e[1]=2*Math.atan(Math.sin(e[1]*be))*_e,e}),e.stream=function(e){e=t.stream(e);var r=n.stream({point:function(t,n){e.point(.5*t,s(Math.tan(.5*-n*be))*_e)},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}});return r.sphere=function(){e.sphere()},r.valid=!1,r},e};var ze=d3.geoAzimuthalEquidistant.raw;(d3.geoGingery=J).raw=Z;var Pe=tt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);(d3.geoGinzburg4=function(){return xe(Pe)}).raw=Pe;var Ae=tt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);(d3.geoGinzburg5=function(){return xe(Ae)}).raw=Ae;var De=tt(5/6*ge,-.62636,-.0344,0,1.3493,-.05524,0,.045);(d3.geoGinzburg6=function(){return xe(De)}).raw=De,et.invert=function(t,e){var n,r=t,i=e,o=50;do{var a=i*i;i-=n=(i*(1+a/12)-e)/(1+a/4)}while(Math.abs(n)>pe&&--o>0);o=50,t/=1-.162388*a;do{var s=(s=r*r)*s;r-=n=(r*(.87-952426e-9*s)-t)/(.87-.00476213*s)}while(Math.abs(n)>pe&&--o>0);return[r,i]},(d3.geoGinzburg8=function(){return xe(et)}).raw=et;var Ie=tt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);(d3.geoGinzburg9=function(){return xe(Ie)}).raw=Ie,rt.invert=function(t,e){var n=a(t),r=a(e),i=-n*t,o=-r*e,u=o/i<1,c=ot(u?o:i,u?i:o),l=c[0],h=c[1];u&&(l=-me-l);var f=Math.cos(h),t=Math.cos(l)*f,e=Math.sin(l)*f,d=Math.sin(h);return[n*(Math.atan2(e,-d)+ge),r*s(t)]},d3.geoGringorten=nt(rt),lt.invert=function(t,e){var n=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-n*n),i=ct(me,r*r),o=at(.5*i-e,-t,r*r),a=ft(o[0],o[1]);return[Math.atan2(a[1],a[0])/-1,2*Math.atan(Math.exp(-.5*Math.log(n*a[0]*a[0]+n*a[1]*a[1])))-me]},d3.geoGuyou=nt(lt),(d3.geoHammerRetroazimuthal=vt).raw=dt;var je=d3.geoAzimuthalEqualArea.raw;yt.invert=function(t,e){var n=2*s(e/2);return[t*Math.cos(n/2)/Math.cos(n),n]},(d3.geoHammer=mt).raw=gt,bt.invert=function(t,e){var n=Math.abs(n=e*(e<0?.5179951515653813:.5686373742600607))>1-pe?n>0?me:-me:s(n);return[1.1764705882352942*t/Math.cos(n),Math.abs(n=((n+=n)+Math.sin(n))*(e<0?.4102345310814193:.3736990601468637))>1-pe?n>0?me:-me:s(n)]},(d3.geoHatano=function(){return xe(bt)}).raw=bt;var Re=41+48/36+37/3600;(d3.geoHealpix=xt).raw=_t,(d3.geoHill=Mt).raw=wt;var Le=.7109889596207567,Ne=.0528035274542;St.invert=function(t,e){return e>-Le?Ee.invert(t,e-Ne):T.invert(t,e)},(d3.geoSinuMollweide=function(){return xe(St).rotate([-20,-55])}).raw=St,kt.invert=function(t,e){return Math.abs(e)>Le?Ee.invert(t,e+(e>0?Ne:-Ne)):T.invert(t,e)},(d3.geoHomolosine=function(){return xe(kt)}).raw=kt,Et.invert=function(t,e){return[2/3*ge*t/Math.sqrt(ge*ge/3-e*e),e]},(d3.geoKavrayskiy7=function(){return xe(Et)}).raw=Et,(d3.geoLagrange=Tt).raw=Ot,Ct.invert=function(t,e){var n=Math.abs(t),r=Math.abs(e),i=ge/Math.SQRT2,o=pe,a=me;r<i?a*=r/i:o+=6*u(i/r);for(var s=0;s<25;s++){var l=Math.sin(a),h=c(Math.cos(a)),f=Math.sin(a/2),d=Math.cos(a/2),p=Math.sin(o/6),v=Math.cos(o/6),g=.5*o*(1+h)-n,m=a/(d*v)-r,y=h?-.25*o*l/h:0,b=.5*(1+h),_=(1+.5*a*f/d)/(d*v),x=a/d*(p/6)/(v*v),w=y*x-_*b,M=(g*x-m*b)/w,S=(m*y-g*_)/w;if(a-=M,o-=S,Math.abs(M)<pe&&Math.abs(S)<pe)break}return[t<0?-o:o,e<0?-a:a]},(d3.geoLarrivee=function(){return xe(Ct)}).raw=Ct,zt.invert=function(t,e){var n=a(t)*ge,r=e/2,i=50;do{var o=n*n,s=r*r,u=n*r,c=n*(.975534+s*(-.0143059*o-.119161+-.0547009*s))-t,l=r*(1.00384+o*(.0802894+-.02855*s+199025e-9*o)+s*(.0998909+-.0491032*s))-e,h=.975534-s*(.119161+3*o*.0143059+.0547009*s),f=-u*(.238322+.2188036*s+.0286118*o),d=u*(.1605788+7961e-7*o+-.0571*s),p=1.00384+o*(.0802894+199025e-9*o)+s*(3*(.0998909-.02855*o)-.245516*s),v=f*d-p*h,g=(l*f-c*p)/v,m=(c*d-l*h)/v;n-=g,r-=m}while((Math.abs(g)>pe||Math.abs(m)>pe)&&--i>0);return i&&[n,r]},(d3.geoLaskowski=function(){return xe(zt)}).raw=zt,Pt.invert=function(t,e){var n=t*t,r=e*e,i=r+1,o=t?Math.SQRT1_2*Math.sqrt((i-Math.sqrt(n*n+2*n*(r-1)+i*i))/n+1):1/Math.sqrt(i);return[s(t*o),a(e)*u(o)]},(d3.geoLittrow=function(){return xe(Pt)}).raw=Pt,(d3.geoLoximuthal=function(){return O(At).parallel(40)}).raw=At,Dt.invert=function(t,e){return[t,2.5*Math.atan(Math.exp(.8*e))-.625*ge]},(d3.geoMiller=function(){return xe(Dt)}).raw=Dt;var Fe={alaska:[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48:[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50:[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller:[[.9245,0],[0,0],[.01943,0]],lee:[[.721316,0],[0,0],[-.00881625,-.00617325]]};(d3.geoModifiedStereographic=jt).raw=It,Rt.invert=function(t,e){var n=Math.sqrt(6),r=Math.sqrt(7),i=3*s(e*r/9);return[t*r/(n*(2*Math.cos(2*i/3)-1)),s(3*Math.sin(i)*n/7)]},(d3.geoMtFlatPolarParabolic=function(){return xe(Rt)}).raw=Rt,Lt.invert=function(t,e){var n=e*Math.sqrt(2+Math.SQRT2)/(2*Math.sqrt(3)),r=2*s(n);return[3*Math.SQRT2*t/(1+2*Math.cos(r)/Math.cos(r/2)),s((n+Math.sin(r))/(1+Math.SQRT1_2))]},(d3.geoMtFlatPolarQuartic=function(){return xe(Lt)}).raw=Lt,Nt.invert=function(t,e){var n=Math.sqrt(6/(4+ge)),r=e/n;return Math.abs(Math.abs(r)-me)<pe&&(r=r<0?-me:me),[1.5*t/(n*(.5+Math.cos(r))),s((r/2+Math.sin(r))/(1+ge/4))]},(d3.geoMtFlatPolarSinusoidal=function(){return xe(Nt)}).raw=Nt,Ft.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Math.abs(n)>pe&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},(d3.geoNaturalEarth=function(){return xe(Ft)}).raw=Ft,Bt.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&Math.abs(i)>pe;r++){var o=Math.cos(e/2);e-=i=(e-Math.tan(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+Math.cos(e)),e]},(d3.geoNellHammer=function(){return xe(Bt)}).raw=Bt;var Be=1.0148,He=.23185,qe=-.14499,Ve=.02406,Ue=Be,We=5*He,Ye=7*qe,Xe=9*Ve;Ht.invert=function(t,e){e>1.790857183?e=1.790857183:e<-1.790857183&&(e=-1.790857183);var n,r=e;do{var i=r*r;r-=n=(r*(Be+i*i*(He+i*(qe+Ve*i)))-e)/(Ue+i*i*(We+i*(Ye+Xe*i)))}while(Math.abs(n)>pe);return[t,r]},(d3.geoPatterson=function(){return xe(Ht)}).raw=Ht;var Ke=nt(lt);(d3.geoPeirceQuincuncial=function(){return Ke().quincuncial(!0).rotate([-90,-90,45]).clipAngle(180-1e-6)}).raw=Ke.raw,qt.invert=function(t,e){if(Math.abs(e)<pe)return[t,0];var n,r=t*t+e*e,i=.5*e,o=10;do{var c=Math.tan(i),l=1/Math.cos(i),h=r-2*e*i+i*i;i-=n=(c*h+2*(i-e))/(2+h*l*l+2*(i-e)*c)}while(Math.abs(n)>pe&&--o>0);return c=Math.tan(i),[(Math.abs(e)<Math.abs(i+1/c)?s(t*c):a(t)*(u(Math.abs(t*c))+me))/Math.sin(i),i]},(d3.geoPolyconic=function(){return xe(qt)}).raw=qt,(d3.geoRectangularPolyconic=function(){return O(Vt)}).raw=Vt;var Ge=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Ge.forEach(function(t){t[1]*=1.0144}),Ut.invert=function(t,e){var n=e/me,r=90*n,i=Math.min(18,Math.abs(r/5)),o=Math.max(0,Math.floor(i));do{var a=Ge[o][1],s=Ge[o+1][1],u=Ge[Math.min(19,o+2)][1],c=u-a,l=u-2*s+a,h=2*(Math.abs(n)-s)/c,f=l/c,d=h*(1-f*h*(1-2*f*h));if(d>=0||1===o){r=(e>=0?5:-5)*(d+i);var p,v=50;do{i=Math.min(18,Math.abs(r)/5),o=Math.floor(i),d=i-o,a=Ge[o][1],s=Ge[o+1][1],u=Ge[Math.min(19,o+2)][1],r-=(p=(e>=0?me:-me)*(s+d*(u-a)/2+d*d*(u-2*s+a)/2)-e)*_e}while(Math.abs(p)>ve&&--v>0);break}}while(--o>=0);var g=Ge[o][0],m=Ge[o+1][0],y=Ge[Math.min(19,o+2)][0];return[t/(m+d*(y-g)/2+d*d*(y-2*m+g)/2),r*be]},(d3.geoRobinson=function(){return xe(Ut)}).raw=Ut,(d3.geoSatellite=Xt).raw=Yt,Kt.invert=function(t,e){var n=e/1.70711,r=Math.sin(ge/4*n);return[t/(.74482-.34588*r*r),2*Math.atan(n)]},(d3.geoTimes=function(){return xe(Kt)}).raw=Kt,(d3.geoTwoPointEquidistant=Zt).raw=Gt,(d3.geoTwoPointAzimuthal=Jt).raw=Qt,$t.invert=function(t,e){if(Math.abs(e)<pe)return[t,0];if(Math.abs(t)<pe)return[0,me*Math.sin(2*Math.atan(e/ge))];var n=(t/=ge)*t,r=(e/=ge)*e,i=n+r,o=i*i,s=-Math.abs(e)*(1+i),c=s-2*r+n,l=-2*s+1+2*r+o,h=r/l+(2*c*c*c/(l*l*l)-9*s*c/(l*l))/27,f=(s-c*c/(3*l))/l,d=2*Math.sqrt(-f/3),p=u(3*h/(f*d))/3;return[ge*(i-1+Math.sqrt(1+2*(n-r)+o))/(2*t),a(e)*ge*(-d*Math.cos(p+ge/3)-c/(3*l))]},(d3.geoVanDerGrinten=function(){return xe($t)}).raw=$t,te.invert=function(t,e){if(!t)return[0,me*Math.sin(2*Math.atan(e/ge))];var n=Math.abs(t/ge),r=(1-n*n-(e/=ge)*e)/(2*n),i=r*r,o=Math.sqrt(i+1);return[a(t)*ge*(o-r),a(e)*me*Math.sin(2*Math.atan2(Math.sqrt((1-2*r*n)*(r+o)-n),Math.sqrt(o+r+n)))]},(d3.geoVanDerGrinten2=function(){return xe(te)}).raw=te,ee.invert=function(t,e){if(!e)return[t,0];var n=e/ge,r=(ge*ge*(1-n*n)-t*t)/(2*ge*t);return[t?ge*(a(t)*Math.sqrt(r*r+1)-r):0,me*Math.sin(2*Math.atan(n))]},(d3.geoVanDerGrinten3=function(){return xe(ee)}).raw=ee,ne.invert=function(t,e){if(!t||!e)return[t,e];e/=ge;var n=a(t)*t/me,r=(n*n-1+4*e*e)/Math.abs(n),i=r*r,o=2*e,s=50;do{var u=o*o,c=(8*o-u*(u+2)-5)/(2*u*(o-1)),l=(3*o-u*o-10)/(2*u*o),h=c*c,f=o*c,d=o+c,p=d*d,v=o+3*c,g=p*(u+h*i-1)+(1-u)*(u*(v*v+4*h)+h*(12*f+4*h)),m=-2*d*(4*f*h+(1-4*u+3*u*u)*(1+l)+h*(14*u-6-i+(8*u-8-2*i)*l)+f*(12*u-8+(10*u-10-i)*l)),y=Math.sqrt(g),b=r*(p+h-1)+2*y-n*(4*p+i),_=r*(2*c*l+2*d*(1+l))+m/y-8*d*(r*(-1+h+p)+2*y)*(1+l)/(i+4*p);o-=\u03b4=b/_}while(\u03b4>pe&&--s>0);return[a(t)*(Math.sqrt(r*r+4)+r)*ge/4,me*o]},(d3.geoVanDerGrinten4=function(){return xe(ne)}).raw=ne;var Ze=function(){var t=4*ge+3*Math.sqrt(3),e=2*Math.sqrt(2*ge*Math.sqrt(3)/t);return k(e*Math.sqrt(3)/ge,e,t/6)}();(d3.geoWagner4=function(){return xe(Ze)}).raw=Ze,re.invert=function(t,e){return[t/Math.sqrt(1-3*e*e/(ge*ge)),e]},(d3.geoWagner6=function(){return xe(re)}).raw=re,ie.invert=function(t,e){var n=t/2.66723,r=e/1.24104,i=Math.sqrt(n*n+r*r),o=2*s(i/2);return[3*Math.atan2(t*Math.tan(o),2.66723*i),i&&s(e*Math.sin(o)/(1.24104*.90631*i))]},(d3.geoWagner7=function(){return xe(ie)}).raw=ie,oe.invert=function(t,e){var n=-.5*(t*t+e*e),r=Math.sqrt(-n*(2+n)),i=e*n+t*r,o=t*n-e*r,a=Math.sqrt(o*o+i*i);return[Math.atan2(r*i,a*(1+n)),a?-s(r*o/a):0]},(d3.geoWiechel=function(){return xe(oe)}).raw=oe,ae.invert=function(t,e){var n=t,r=e,i=25;do{var o,a=Math.cos(r),s=Math.sin(r),c=Math.sin(2*r),l=s*s,h=a*a,f=Math.sin(n),d=Math.cos(n/2),p=Math.sin(n/2),v=p*p,g=1-h*d*d,m=g?u(a*d)*Math.sqrt(o=1/g):o=0,y=.5*(2*m*a*p+n/me)-t,b=.5*(m*s+r)-e,_=.5*o*(h*v+m*a*d*l)+.5/me,x=o*(f*c/4-m*s*p),w=.125*o*(c*p-m*s*h*f),M=.5*o*(l*d+m*v*a)+.5,S=x*w-M*_,k=(b*x-y*M)/S,E=(y*w-b*_)/S;n-=k,r-=E}while((Math.abs(k)>pe||Math.abs(E)>pe)&&--i>0);return[n,r]},(d3.geoWinkel3=function(){return xe(ae)}).raw=ae}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=n(31),s=r(a),u=n(429),c=r(u),l=n(21),h=function(t){return function(){function e(t,n){return t.each(function(t,e){var r=d3.select(this);r.append("rect").attr("class","vzb-label-glow").attr("filter","url("+location.pathname+"#vzb-glow-filter)"),r.append("rect").attr("class","vzb-label-fill vzb-tooltip-border");var s=r.append("text").attr("class",a+"-label-content stroke");if(r.style("paint-order").length||(r.insert("text","."+a+"-label-content").attr("class",a+"-label-content "+a+"-label-shadow vzb-noexport"),s.classed("stroke",!1)),!n){var u=r.append("g").attr("class",a+"-label-x vzb-transparent");o.setIcon(u,l.close),u.insert("circle","svg"),u.select("svg").attr("class",a+"-label-x-icon").attr("width","0px").attr("height","0px"),u.on("click",function(){d3.event.defaultPrevented||(d3.event.stopPropagation(),i.model.marker.clearHighlighted(),i.model.marker.selectMarker(t))})}}),n||t.call(s).on("mouseover",function(t){if(!o.isTouchDevice()){i.model.marker.highlightMarker(t);var e=i.KEY||i.model.entities.getDimension();i.entityLabels.sort(function(n,r){return n[e]!=t[e]?-1:1}),d3.select(this).selectAll("."+a+"-label-x").classed("vzb-transparent",!1)}}).on("mouseout",function(t){o.isTouchDevice()||(i.model.marker.clearHighlighted(),d3.select(this).selectAll("."+a+"-label-x").classed("vzb-transparent",!0))}).on("click",function(t){if(o.isTouchDevice()){var e=d3.select(this).selectAll("."+a+"-label-x"),n=i.KEY||i.model.entities.getDimension(),r=e.classed("vzb-transparent");r&&(i.entityLabels.sort(function(e,r){return e[n]!=t[n]?-1:1}),i.showCloseCross(null,!1)),e.classed("vzb-transparent",!r),i.options.SUPPRESS_HIGHLIGHT_DURING_PLAY&&i.model.time.playing||(r?i.model.marker.setHighlight(t):i.model.marker.clearHighlighted())}}),e}function n(t,e,n,o,a,s,u,c,l,h,f){var d=n||i.cached[t[i.KEY]],p=d3.select(o),v=!a&&0!==a||!s&&0!==s||!u&&0!==u||!c&&0!==c;if(v)return p.classed("vzb-invisible",v),void f.classed("vzb-invisible",v);var g=i.context.width,m=i.context.height,y=d.rectBBox,b=y.height,_=d.rectOffsetX,x=d.rectOffsetY;a+y.x<=0?(a=-y.x,d.labelX_=(a-i.xScale(d.labelX0))/g):a+_>g&&(a=g-_,d.labelX_=(a-i.xScale(d.labelX0))/g),s+y.y<=0?(s=-y.y,d.labelY_=(s-i.yScale(d.labelY0))/m):s+x>m&&(s=m-x,d.labelY_=(s-i.yScale(d.labelY0))/m),null==l&&(l=i.context.duration),d._new&&(l=0,delete d._new),l?h&&!t.hidden?(p.classed("vzb-invisible",t.hidden),p.attr("transform","translate("+a+","+s+")").style("opacity",0).transition().duration(l).ease(d3.easeExp).style("opacity",1).on("interrupt",function(){p.style("opacity",1)}),f.classed("vzb-invisible",t.hidden),f.attr("transform","translate("+a+","+s+")").style("opacity",0).transition().duration(l).ease(d3.easeExp).style("opacity",1).on("interrupt",function(){f.style("opacity",1)})):h&&t.hidden?(p.style("opacity",1).transition().duration(l).ease(d3.easeExp).style("opacity",0).on("end",function(){p.style("opacity",1).classed("vzb-invisible",t.hidden)}),f.style("opacity",1).transition().duration(l).ease(d3.easeExp).style("opacity",0).on("end",function(){f.style("opacity",1).classed("vzb-invisible",t.hidden)})):(p.transition().duration(l).ease(d3.easeLinear).attr("transform","translate("+a+","+s+")"),f.transition().duration(l).ease(d3.easeLinear).attr("transform","translate("+a+","+s+")")):(p.interrupt().attr("transform","translate("+a+","+s+")").transition(),f.interrupt().attr("transform","translate("+a+","+s+")").transition(),h&&p.classed("vzb-invisible",t.hidden),h&&f.classed("vzb-invisible",t.hidden));var w=u-a,M=c-s,S=p.select("text").node().getBBox(),k=.5*-S.width,E=.2*-b,O=i.model.ui.chart.labels,T=O.removeLabelBox?S:y,C=i.activeProfile.labelLeashCoeff||0,z=r({x:w,y:M,r:d.scaledS0},{x:k,y:E,width:2*T.height*C+T.width,height:T.height*(2*C+1)});if(f.select("line").classed("vzb-invisible",z),!z){if(O.removeLabelBox){var P=180*Math.atan2(w-k,M-E)/Math.PI,A=P>=0&&P<=180?.5*T.width:.5*-T.width,D=Math.abs(P)<=90?.55*T.height:.45*-T.height;k+=Math.abs(w-k)>.5*S.width?A:0,E+=Math.abs(M-E)>.5*S.height?D:.05*S.height}var I=Math.abs(w)>Math.abs(M)?Math.abs(w):Math.abs(M);f.select("line").style("stroke-dasharray","0 "+d.scaledS0+" "+2*~~I),f.selectAll("line").attr("x1",w).attr("y1",M).attr("x2",k).attr("y2",E)}}function r(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),i=.5*e.width,o=.5*e.height;return!(n>i+t.r)&&(!(r>o+t.r)&&(n<=i||(r<=o||Math.pow(n-i,2)+Math.pow(r-o,2)<=Math.pow(t.r,2))))}var i=t,a=void 0;e.setCssPrefix=function(t){return a=t,e};var s=d3.drag().on("start",function(t,e){d3.event.sourceEvent.stopPropagation();i.KEY}).on("drag",function(t,n){var r=i.KEY;if(i.model.ui.chart.labels.dragging){this.druging||(i.druging=t[r]);var o=i.cached[t[r]];o.labelFixed=!0;var a=i.context.width,s=i.context.height;o.labelX_+=d3.event.dx/a,o.labelY_+=d3.event.dy/s;var u=i.xScale(o.labelX0)+o.labelX_*a,c=i.yScale(o.labelY0)+o.labelY_*s,l=i.xScale(o.labelX0),h=i.yScale(o.labelY0),f=i.entityLines.filter(function(e){return e[r]==t[r]});e._repositionLabels(t,n,null,this,u,c,l,h,0,null,f)}}).on("end",function(t,e){var n=i.KEY;if(i.druging){var r=i.cached[t[n]];i.druging=null,r.labelOffset[0]=r.labelX_,r.labelOffset[1]=r.labelY_,i.model.marker.setLabelOffset(t,[r.labelX_,r.labelY_])}});return e.line=function(t){t.append("line").attr("class",a+"-label-line")},e._repositionLabels=n,e}()},f={LABELS_CONTAINER_CLASS:"",LINES_CONTAINER_CLASS:"",LINES_CONTAINER_SELECTOR:"",CSS_PREFIX:"",SUPPRESS_HIGHLIGHT_DURING_PLAY:!0},d=s.default.extend({init:function(t,e){this.context=t,this.options=o.extend({},f),this.label=h(this),this._xScale=null,this._yScale=null,this._closeCrossHeight=0,this.labelSizeTextScale=null},ready:function(){this.KEY=this.context.model.entities.getDimension(),this.updateIndicators(),this.updateLabelSizeLimits()},readyOnce:function(){var t=this;this.model=this.context.model,this.model.on("change:marker.select",function(){t.context._readyOnce&&t.selectDataPoints()}),this.model.marker.size_label&&this.model.on("change:marker.size_label.extent",function(e,n){t.context._readyOnce&&(t.updateLabelSizeLimits(),t.model.time.splash||t.updateLabelsOnlyTextSize())}),this.model.ui.chart.labels.hasOwnProperty("removeLabelBox")&&this.model.on("change:ui.chart.labels.removeLabelBox",function(e,n){t.context._readyOnce&&t.updateLabelsOnlyTextSize()}),this.KEY=this.context.model.entities.getDimension(),this.cached={},this.label.setCssPrefix(this.options.CSS_PREFIX),this.rootEl=this.context.root.element instanceof Array?this.context.root.element:d3.select(this.context.root.element),this.labelsContainer=this.rootEl.select("."+this.options.LABELS_CONTAINER_CLASS),this.linesContainer=this.rootEl.select("."+this.options.LINES_CONTAINER_CLASS),this.updateIndicators(),this.updateSize(),this.selectDataPoints(),this._initLabelTooltip()},config:function(t){o.extend(this.options,t)},updateLabelSizeLimits:function(){var t=this;if(this.model.marker.size_label){var e=this.model.marker.size_label.extent||[0,1],n=this.activeProfile.minLabelTextSize,r=this.activeProfile.maxLabelTextSize,i=r-n;this.minLabelTextSize=Math.max(n+i*e[0],n),this.maxLabelTextSize=Math.max(n+i*e[1],n),"constant"==this.model.marker.size_label.use&&(this.minLabelTextSize=this.maxLabelTextSize),"ordinal"!==this.model.marker.size_label.scaleType||"constant"==this.model.marker.size_label.use?this.labelSizeTextScale.range([t.minLabelTextSize,t.maxLabelTextSize]):this.labelSizeTextScale.rangePoints([t.minLabelTextSize,t.maxLabelTextSize],0).range()}},updateIndicators:function(){this.model.marker.size_label&&(this.labelSizeTextScale=this.model.marker.size_label.getScale())},setScales:function(t,e){this._xScale=t,this._yScale=e},setCloseCrossHeight:function(t){this._closeCrossHeight!=t&&(this._closeCrossHeight=t,this.updateLabelCloseGroupSize(this.entityLabels.selectAll("."+this.options.CSS_PREFIX+"-label-x"),this._closeCrossHeight))},xScale:function(t){return this._xScale?this._xScale(t):t*this.context.width},yScale:function(t){return this._yScale?this._yScale(t):t*this.context.height},selectDataPoints:function(){var t=this,e=this.KEY,n=this.options.CSS_PREFIX;this.entityLabels=this.labelsContainer.selectAll("."+n+"-entity").data(t.model.marker.select,function(t){return t[e]}),this.entityLines=this.linesContainer.selectAll("g.entity-line."+n+"-entity").data(t.model.marker.select,function(t){return t[e]}),this.entityLabels.exit().each(function(n){null!=t.cached[n[e]]&&(t.cached[n[e]]=void 0)}).remove(),this.entityLines.exit().remove(),this.entityLines=this.entityLines.enter().insert("g",function(n){return this.querySelector("."+t.options.LINES_CONTAINER_SELECTOR_PREFIX+(0,c.default)(n[e]))}).attr("class",function(t,r){return n+"-entity entity-line line-"+t[e]}).each(function(e,n){t.label.line(d3.select(this))}).merge(this.entityLines),this.entityLabels=this.entityLabels.enter().append("g").attr("class",function(t,r){return n+"-entity label-"+t[e]}).each(function(n,r){t.cached[n[e]]={_new:!0},t.label(d3.select(this))}).merge(this.entityLabels)},showCloseCross:function(t,e){var n=this.KEY;this.entityLabels.filter(function(e){return!t||e[n]==t[n]}).select("."+this.options.CSS_PREFIX+"-label-x").classed("vzb-transparent",!e)},highlight:function(t,e){var n=this.KEY,r=this.entityLabels;t&&(r=r.filter(function(e){return!t||e[n]==t[n]})),r.classed("vzb-highlighted",e)},updateLabel:function(t,e,n,r,i,a,s,u,c,l,h){var f=this,d=this.KEY;if(t[d]!=f.druging){var p=this.options.CSS_PREFIX;if(f.model.marker.isSelected(t)&&null!=f.entityLabels){null==f.cached[t[d]]&&this.selectDataPoints();var v=f.cached[t[d]];if(n&&o.extend(v,n),null!=v.scaledS0&&null!=v.labelX0&&null!=v.labelY0||this._initNewCache(v,r,i,a,s,c),null==v.labelX_||null==v.labelY_){var g=o.find(f.model.marker.select,function(e){return e[d]==t[d]});v.labelOffset=g.labelOffset||[0,0]}var m=!v.labelX0&&0!==v.labelX0||!v.labelY0&&0!==v.labelY0||!v.scaledS0&&0!==v.scaledS0,y=f.entityLines.filter(function(e){return e[d]==t[d]});f.entityLabels.filter(function(e){return e[d]==t[d]}).each(function(n){var r=d3.select(this);if(m)return r.classed("vzb-invisible",m),void y.classed("vzb-invisible",m);var i=r.selectAll("."+p+"-label-content").text(u);f._updateLabelSize(t,e,null,r,c,i),f.positionLabel(t,e,null,this,l,h,y)})}}},_initNewCache:function(t,e,n,r,i,a){(r||0===r)&&(t.scaledS0=o.areaToRadius(this.context.sScale(r))),t.labelX0=e,t.labelY0=n,t.valueLST=a,t.scaledC0=null!=i?this.context.cScale(i):this.context.COLOR_WHITEISH},_initLabelTooltip:function(){this.tooltipEl=this.labelsContainer.append("g").attr("class",this.options.CSS_PREFIX+"-tooltip")},setTooltip:function(t,e,n,r){if(e){var i=0,o=this.options.CSS_PREFIX;if(this.tooltipEl.raise().text(null),this.label(this.tooltipEl,!0),t){var a={};this._initNewCache(a,r.valueX,r.valueY,r.valueS,r.valueC,r.valueLST),this.tooltipEl.classed(this.options.CSS_PREFIX+"-tooltip",!1).classed(this.options.CSS_PREFIX+"-entity",!0).selectAll("."+o+"-label-content").text(r.labelText),this._updateLabelSize(t,null,a,this.tooltipEl,r.valueLST),i=this.positionLabel(t,null,a,this.tooltipEl.node(),0,null,this.tooltipEl.select(".lineemptygroup"))}this.tooltipEl.classed(this.options.CSS_PREFIX+"-entity",!1).classed(this.options.CSS_PREFIX+"-tooltip",!0).selectAll("."+o+"-label-content").text(e),this._updateLabelSize(t,null,n,this.tooltipEl,null),this.positionLabel(t,null,n,this.tooltipEl.node(),0,null,this.tooltipEl.select(".lineemptygroup"),i)}else this.tooltipEl.text(null)},setTooltipFontSize:function(t){this.tooltipEl.style("font-size",t)},_updateLabelSize:function(t,e,n,r,i,o){var a=this,s=this.KEY,u=n||a.cached[t[s]],c=this.options.CSS_PREFIX,l=a.model.ui.chart.labels||{};r.classed("vzb-label-boxremoved",l.removeLabelBox);var h=o||r.selectAll("."+c+"-label-content");if(a.labelSizeTextScale)if(null!=i){var f=a.labelSizeTextScale.range(),d=f[0]+Math.sqrt((a.labelSizeTextScale(i)-f[0])*(f[1]-f[0]));h.attr("font-size",d+"px")}else h.attr("font-size","");var p=h.node().getBBox(),v=r.selectAll("rect");if(!u.textWidth||u.textWidth!=p.width){u.textWidth=p.width;var g=a._closeCrossHeight||p.height,m=a.model.locale.isRTL(),y=r.select("."+c+"-label-x").attr("transform","translate("+(m?-p.width-4:4)+","+.85*-p.height+")");this.updateLabelCloseGroupSize(y,g),v.attr("width",p.width+8).attr("height",1.2*p.height).attr("x",-p.width-4).attr("y",.85*-p.height).attr("rx",.2*p.height).attr("ry",.2*p.height),u.rectBBox=v.node().getBBox(),u.rectOffsetX=u.rectBBox.width+u.rectBBox.x,u.rectOffsetY=u.rectBBox.height+u.rectBBox.y}var b=r.select(".vzb-label-glow");b.attr("stroke")!==u.scaledC0&&b.attr("stroke",u.scaledC0)},updateLabelCloseGroupSize:function(t,e){t.select("circle").attr("cx",0).attr("cy",0).attr("r",.5*e),t.select("svg").attr("x",.5*-e).attr("y",-.5*e).attr("width",e).attr("height",e)},updateLabelsOnlyTextSize:function(){var t=this,e=this.KEY;this.entityLabels.each(function(n,r){t.cached[n[e]];t._updateLabelSize(n,r,null,d3.select(this),t.context.frame.size_label[n[e]]);var i=t.entityLines.filter(function(t){return t[e]==n[e]});t.positionLabel(n,r,null,this,0,null,i)})},updateLabelOnlyPosition:function(t,e,n){var r=this,i=this.KEY,a=this.cached[t[i]];n&&o.extend(a,n);var s=r.entityLines.filter(function(e){return e[i]==t[i]});this.entityLabels.filter(function(e){return e[i]==t[i]}).each(function(n){r.positionLabel(t,e,null,this,0,null,s)})},updateLabelOnlyColor:function(t,e,n){var r=this,i=this.KEY,a=this.cached[t[i]];n&&o.extend(a,n);var s=r.entityLabels.filter(function(e){return e[i]==t[i]});r._updateLabelSize(t,e,null,s,null)},positionLabel:function(t,e,n,r,i,a,s,u){var c=this.KEY,l=n||this.cached[t[c]],h=u||0===u,f=1&(u||0),d=(2&(u||0))>>1,p=0,v=0,g=this.context.width,m=this.context.height,y=this.xScale(l.labelX0),b=this.yScale(l.labelY0),_=l.rectOffsetX,x=l.rectOffsetY;l.labelOffset||(l.labelOffset=[0,0]),l.labelX_=l.labelOffset[0]||(.75*-l.scaledS0-_)/g,l.labelY_=l.labelOffset[1]||(.75*-l.scaledS0-x)/m;var w=y+l.labelX_*g,M=b+l.labelY_*m;if(l.labelOffset[0]+l.labelOffset[1]==0&&((!h&&M-l.rectBBox.height+x<=0||d)&&(v=1,l.labelY_=(.75*l.scaledS0+l.rectBBox.height-x)/m,M=b+l.labelY_*m),(!h&&w-l.rectBBox.width+_<=0||f)&&(p=1,l.labelX_=(.75*l.scaledS0+l.rectBBox.width-_)/g,(w=y+l.labelX_*g)>g&&(p=0,v=0==v&&b-.5*x-l.scaledS0<l.rectBBox.height?1:v,l.labelY_=v?.5*-x+l.rectBBox.height+l.scaledS0:1.5*-x-l.scaledS0,l.labelY_/=m,M=b+l.labelY_*m,l.labelX_=(l.rectBBox.width-_-y)/g,w=y+l.labelX_*g))),h){var S=!1;if(w-l.rectBBox.width+_<=0){var k=y-l.rectBBox.width,E=k>0?o.cathetus(l.scaledS0,k):l.scaledS0;M=v?b+l.rectBBox.height-.5*x+E:b-1.5*x-E,M-l.rectBBox.height<0&&(S=!0)}if(M-l.rectBBox.height+x<=0){var O=b-l.rectBBox.height,T=O>0?o.cathetus(l.scaledS0,O):l.scaledS0;w=p?y+l.rectBBox.width+T:y-2*_-T,(w-l.rectBBox.width<0||w>g)&&(S=!0)}if(S){v++;var C=y-l.rectBBox.width;M=b+l.rectBBox.height-.5*x+(C>0?o.cathetus(l.scaledS0,C):l.scaledS0)}}return this.label._repositionLabels(t,e,n,r,w,M,y,b,i,a,s),2*v+p},updateSize:function(){var t={small:{minLabelTextSize:7,maxLabelTextSize:21,defaultLabelTextSize:12,labelLeashCoeff:.4},medium:{minLabelTextSize:7,maxLabelTextSize:30,defaultLabelTextSize:15,labelLeashCoeff:.3},large:{minLabelTextSize:6,maxLabelTextSize:48,defaultLabelTextSize:20,labelLeashCoeff:.2}},e={medium:{minLabelTextSize:15,maxLabelTextSize:35,defaultLabelTextSize:15,labelLeashCoeff:.3},large:{minLabelTextSize:20,maxLabelTextSize:55,defaultLabelTextSize:20,labelLeashCoeff:.2}};this.activeProfile=this.context.getActiveProfile(t,e),this.updateLabelSizeLimits()}});e.default=d},function(t,e,n){(function(e){!function(e,n){t.exports=n(e)}(void 0!==e?e:this,function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var e=function(t){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var e,n=String(t),r=n.length,i=-1,o="",a=n.charCodeAt(0);++i<r;)e=n.charCodeAt(i),o+=0!=e?e>=1&&e<=31||127==e||0==i&&e>=48&&e<=57||1==i&&e>=48&&e<=57&&45==a?"\\"+e.toString(16)+" ":(0!=i||1!=r||45!=e)&&(e>=128||45==e||95==e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122)?n.charAt(i):"\\"+n.charAt(i):"\ufffd";return o};return t.CSS||(t.CSS={}),t.CSS.escape=e,e})}).call(e,n(77))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o="",a=[];e.default=i.default.extend({init:function(t){this.context=t,this.shapes=[],this.groups=[],this.counter=0,this.name="",this.label=""},reset:function(){this.container.remove(),this.context.element.selectAll(".vzb-export-redball").remove(),this.context.element.selectAll(".vzb-export-counter").remove(),this.counter=0},prefix:function(t){return arguments.length?(o=t,this):o},deleteClasses:function(t){return arguments.length?(a=t,this):a},open:function(t,e){var n=this;this.svg&&this.reset(),t||(t=this.context.element),e||(e=this.context.name),this.name=e;var r=parseInt(t.style("width"),10)||0,i=parseInt(t.style("height"),10)||0;this.container=t.append("div").attr("class","vzb-svg-export"),this.svg=this.container.node().appendChild(t.select("svg").node().cloneNode(!0)),this.svg=d3.select(this.svg),this.svg.attr("viewBox","0 0 "+r+" "+i).attr("version","1.1").attr("param1","http://www.w3.org/2000/svg").attr("param2","http://www.w3.org/1999/xlink").attr("x","0px").attr("y","0px").attr("style","enable-background:new 0 0 "+r+" "+i).attr("xml:space","preserve"),this.redBall=t.append("div").attr("class","vzb-export-redball").style("position","absolute").style("top","20px").style("right","20px").style("width","20px").style("height","20px").style("background","red").style("color","white").style("text-align","center").style("border-radius","10px").style("font-size","14px").style("line-height","20px").style("opacity",.8).style("cursor","pointer").on("mouseover",function(){d3.select(this).style("opacity",1).text("\u25bc"),n.counterEl.text("Download")}).on("mouseout",function(){d3.select(this).style("opacity",.8).text(""),n.counterEl.text(n.label)}).on("click",function(){n.close()}),this.counterEl=t.append("div").attr("class","vzb-export-counter").style("position","absolute").style("top","20px").style("right","45px").style("color","red").style("opacity",.8).style("line-height","20px").style("font-size","14px").style("text-align","center"),this.root=this.svg.select("."+o+"graph"),this.root.selectAll("g, text, svg, line, rect").filter(function(){var t=d3.select(this),e=!1;return a.forEach(function(n){e=e||t.classed(n)}),e}).remove(),this.svg.selectAll(".tick line").attr("fill","none").attr("stroke","#999"),this.svg.selectAll("."+o+"axis-x path").attr("fill","none").attr("stroke","#999"),this.svg.selectAll("."+o+"axis-y path").attr("fill","none").attr("stroke","#999")},write:function(t){if(this.root||this.open(),!(this.shapes.indexOf(t.id+"_"+t.time)>-1)){this.shapes.push(t.id+"_"+t.time),-1==this.groups.indexOf(t.time)&&(this.root.append("g").attr("id","g_"+t.time),this.groups.push(t.time)),null==t.opacity&&(t.opacity=.5),null==t.fill&&(t.fill="#ff80dd");var e=this.root.select("#g_"+t.time).append(t.type).attr("id",t.id+"_"+t.time).style("fill",t.fill).style("opacity",t.opacity);switch(t.type){case"path":e.attr("d",t.d);break;case"circle":e.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r)}this.counter++,this.redBall.style("opacity",this.counter%10/12+.2),this.label=t.type+" shapes: "+this.counter,this.counterEl.text(this.label)}},close:function(){var t='<?xml version="1.0" encoding="utf-8"?> '+this.container.node().innerHTML.replace("param1","xmlns").replace("param2","xmlns:xlink").replace(/\d+(\.\d+)/g,function(t){return Math.round(100*+t)/100+""});if(t.length/1024/1024>2)alert("The file size is "+Math.round(t.length/1024)+"kB, which is too large to download. Will try to print it in the console instead..."),console.log(t);else{var e=document.createElement("a");e.download=this.name+" "+this.counter+" shapes.svg",e.href="data:,"+t,e.click()}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i.default.extend({init:function(t){this.context=t,this.interact=this._createInteract()},setTooltip:function(t){this.tooltip=t},_createInteract:function(){var t=this;return{mouseOver:function(){var e=d3.event,n=d3.mouse(t.context.element.node());t._setTooltip(d3.select(e.target).attr("data-text"),n[0],n[1])},mouseOut:function(){t._setTooltip()},tap:function(){}}},_setTooltip:function(t,e,n){if(t){this.tooltip.classed("vzb-hidden",!1).selectAll("text").text(t);var r=this.tooltip.select("text").node().getBBox();e-r.width<0?e+=r.width+5:e-=5,n-r.height<0?n+=r.height:n-=11,this.tooltip.attr("transform","translate("+e+","+n+")"),this.tooltip.selectAll("rect").attr("width",r.width+8).attr("height",1.2*r.height).attr("x",-r.width-4).attr("y",.85*-r.height).attr("rx",.2*r.height).attr("ry",.2*r.height)}else this.tooltip.classed("vzb-hidden",!0)},clear:function(t){t.attr("data-text",null)},wrap:function(t,e){var n=d3.select(t),r=Math.abs,i=n.attr("data-text");i||(i=n.text(),n.attr("data-text",i)),n.text(i);for(var o=i,a=o.length,s=n.node().getComputedTextLength();e-s<=0&&""!==o;)o=s>=e?o.slice(0,-r(.5*a)):i.slice(0,r(.5*a)),n.text(o+"\u2026"),s=n.node().getComputedTextLength(),a=o.length;o!==i?(""===o&&n.text(i[0]),n.on("mouseover.tooltip",this.interact.mouseOver).on("mouseout.tooltip",this.interact.mouseOut).style("pointer-events","all")):n.on("mouseover.tooltip",null).on("mouseout.tooltip",null).style("pointer-events",null)}});e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),s.push(r)}}var i={},o={},a={},s=[],u=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++u],e[u]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),s=i[0],u=i[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=u,r=o[u]){delete o[r.start];var c=r===e?e:e.concat(r);o[c.start=e.start]=a[c.end=r.end]=c}else o[e.start]=a[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=s,r=a[s]){delete a[r.end];var l=r===e?e:r.concat(e);o[l.start=r.start]=a[l.end=e.end]=l}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=u]=e}),r(a,o),r(o,a),e.forEach(function(t){i[t<0?~t:t]||s.push([t])}),s}function e(e,n,r){function i(t){var e=t<0?~t:t;(l[e]||(l[e]=[])).push({i:t,g:c})}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in h&&(c=t,h[t.type](t.arcs))}var u=[];if(arguments.length>1){var c,l=[],h={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};s(n),l.forEach(arguments.length<3?function(t){u.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var f=0,d=e.arcs.length;f<d;++f)u.push(f);return{type:"MultiLineString",arcs:t(e,u)}}function r(e,r){function i(t){t.forEach(function(e){e.forEach(function(e){(s[e=e<0?~e:e]||(s[e]=[])).push(t)})}),u.push(t)}function o(t){return h(a(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var s={},u=[],c=[];return r.forEach(function(t){"Polygon"===t.type?i(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(i)}),u.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,c.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){s[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),u.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:c.map(function(r){var i=[];if(r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){s[t<0?~t:t].length<2&&i.push(t)})})}),i=t(e,i),(n=i.length)>1)for(var a,u=o(r[0][0]),c=0;c<n;++c)if(u===o(i[c])){a=i[0],i[0]=i[c],i[c]=a;break}return i})}}function i(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return o(t,e)})}:o(t,e)}function o(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:a(t,e)};return null==e.id&&delete n.id,n}function a(t,e){function n(t,e){e.length&&e.pop();for(var n,r=l[t<0?~t:t],i=0,o=r.length;i<o;++i)e.push(n=r[i].slice()),c(n,i);t<0&&s(e,o)}function r(t){return t=t.slice(),c(t,0),t}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function a(t){return t.map(o)}function u(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(u)}:e in h?{type:e,coordinates:h[e](t)}:null}var c=v(t.transform),l=t.arcs,h={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return a(t.arcs)},MultiPolygon:function(t){return t.arcs.map(a)}};return u(e)}function s(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function u(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function c(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function r(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),a={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(r);for(var s in i)for(var c=i[s],l=c.length,h=0;h<l;++h)for(var f=h+1;f<l;++f){var d,p=c[h],v=c[f];(d=o[p])[s=u(d,v)]!==v&&d.splice(s,0,v),(d=o[v])[s=u(d,p)]!==p&&d.splice(s,0,p)}return o}function l(t,e){function n(t){o.remove(t),t[1][2]=e(t),o.push(t)}var r=v(t.transform),i=g(t.transform),o=p();return e||(e=f),t.arcs.forEach(function(t){for(var a,s,u=[],c=0,l=0,h=t.length;l<h;++l)s=t[l],r(t[l]=[s[0],s[1],1/0],l);for(var l=1,h=t.length-1;l<h;++l)a=t.slice(l-1,l+2),a[1][2]=e(a),u.push(a),o.push(a);for(var l=0,h=u.length;l<h;++l)a=u[l],a.previous=u[l-1],a.next=u[l+1];for(;a=o.pop();){var f=a.previous,d=a.next;a[1][2]<c?a[1][2]=c:c=a[1][2],f&&(f.next=d,f[2]=a[2],n(f)),d&&(d.previous=f,d[0]=a[0],n(d))}t.forEach(i)}),t}function h(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return.5*o}function f(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function d(t,e){return t[1][2]-e[1][2]}function p(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,i=r[n];if(d(t,i)>=0)break;r[i._=e]=i,r[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,a=e,s=r[a];if(o<i&&d(r[o],s)<0&&(s=r[a=o]),n<i&&d(r[n],s)<0&&(s=r[a=n]),a===e)break;r[s._=e]=s,r[t._=e=a]=t}}var n={},r=[],i=0;return n.push=function(e){return t(r[e._=i]=e,i++),i},n.pop=function(){if(!(i<=0)){var t,n=r[0];return--i>0&&(t=r[i],e(r[t._=0]=t,0)),n}},n.remove=function(n){var o,a=n._;if(r[a]===n)return a!==--i&&(o=r[i],(d(o,n)<0?t:e)(r[o._=a]=o,a)),a},n}function v(t){if(!t)return m;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0),t[0]=(e+=t[0])*r+o,t[1]=(n+=t[1])*i+a}}function g(t){if(!t)return m;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=(t[0]-o)/r|0,c=(t[1]-a)/i|0;t[0]=u-e,t[1]=c-n,e=u,n=c}}function m(){}return{version:"1.6.19",mesh:function(t){return a(t,e.apply(this,arguments))},meshArcs:e,merge:function(t){return a(t,r.apply(this,arguments))},mergeArcs:r,feature:i,neighbors:c,presimplify:l}}()},function(t,e){}])})},Y5fy:function(t,e,n){var r=n("JXkd");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},Y7Ka:function(t,e,n){"use strict";function r(t){if(t)throw new Error("Angulartics2Module.forRoot() called twice. Lazy loaded modules should use Angulartics2Module.forChild() instead.");return"guarded"}var i=n("/oeL"),o=n("hS3t"),a=n("fc+i"),u=function(){function t(t,e,n){this.elRef=t,this.angulartics2=e,this.eventManager=n,this.el=this.elRef.nativeElement}return t.prototype.ngAfterContentInit=function(){var t=this;this.isBrowser()&&this.eventManager.addEventListener(this.el,this.angulartics2On||"click",function(e){return t.eventTrack(e)})},t.prototype.isBrowser=function(){return"undefined"!=typeof window},t.prototype.eventTrack=function(t){var e=this.angularticsEvent,n={eventType:t.type};this.angularticsCategory&&(n.category=this.angularticsCategory),this.angularticsProperties&&Object.assign(n,this.angularticsProperties),this.angulartics2.eventTrack.next({action:e,properties:n})},t.decorators=[{type:i.u},{type:i.m,args:[{selector:"[angulartics2On]"}]}],t.ctorParameters=function(){return[{type:i.n},{type:o.a},{type:a.d}]},t.propDecorators={angulartics2On:[{type:i.x,args:["angulartics2On"]}],angularticsEvent:[{type:i.x}],angularticsCategory:[{type:i.x}],angularticsProperties:[{type:i.x}]},t}(),c=function(){function t(t){var e=this;this.angulartics2=t,"undefined"==typeof hmt?hmt=[]:hmt.push(["_ setAutoPageview",!1]),this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)})}return t.prototype.pageTrack=function(t){"undefined"!=typeof hmt&&hmt&&hmt.push(["_trackPageview",t])},t.prototype.eventTrack=function(t,e){e&&e.category||(e=e||{},e.category="Event",e.opt_label="default",e.opt_value="default"),"undefined"!=typeof hmt&&hmt&&hmt.push(["_trackEvent",e.category,t,e.opt_label,e.opt_value])},t.prototype.setUsername=function(t){hmt.push(["_setCustomVar",1,"identity",t])},t.prototype.setUserProperties=function(t){hmt.push(["_setCustomVar",2,"user",JSON.stringify(t)])},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),l=n("5/nv"),h=function(){function t(t){var e=this;this.angulartics2=t,"undefined"!=typeof dataLayer&&dataLayer&&(dataLayer=window.dataLayer=window.dataLayer||[]),this.angulartics2.settings.pageTracking.trackRelativePath=!0,this.angulartics2.settings.gtm={userId:null},this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.exceptionTrack.subscribe(function(t){return e.exceptionTrack(t)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)})}return t.prototype.pageTrack=function(t){"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push({event:"Page View","content-name":t,userId:this.angulartics2.settings.gtm.userId})},t.prototype.eventTrack=function(t,e){e=e||{},"undefined"!=typeof dataLayer&&dataLayer&&dataLayer.push({event:e.event||"interaction",target:e.category||"Event",action:t,label:e.label,value:e.value,interactionType:e.noninteraction,userId:this.angulartics2.settings.gtm.userId})},t.prototype.exceptionTrack=function(t){if(!(t&&t.appId&&t.appName&&t.appVersion))return void console.error("Must be setted appId, appName and appVersion.");void 0===t.fatal&&(console.log('No "fatal" provided, sending with fatal=true'),t.exFatal=!0),t.exDescription=t.event?t.event.stack:t.description,this.eventTrack("Exception thrown for "+t.appName+" <"+t.appId+"@"+t.appVersion+">",{category:"Exception",label:t.exDescription})},t.prototype.setUsername=function(t){this.angulartics2.settings.gtm.userId=t},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),f=function(){function t(t){var e=this;this.angulartics2=t,"undefined"==typeof _kmq&&(_kmq=[]),this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path,t.location)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)})}return t.prototype.pageTrack=function(t,e){_kmq.push(["record","Pageview",{Page:t}])},t.prototype.eventTrack=function(t,e){_kmq.push(["record",t,e])},t.prototype.setUsername=function(t){_kmq.push(["identify",t])},t.prototype.setUserProperties=function(t){_kmq.push(["set",t])},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),d=function(){function t(t){var e=this;this.angulartics2=t,this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path,t.location)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)}),this.angulartics2.setUserPropertiesOnce.subscribe(function(t){return e.setUserPropertiesOnce(t)}),this.angulartics2.setSuperProperties.subscribe(function(t){return e.setSuperProperties(t)}),this.angulartics2.setSuperPropertiesOnce.subscribe(function(t){return e.setSuperPropertiesOnce(t)}),this.angulartics2.setAlias.subscribe(function(t){return e.setAlias(t)})}return t.prototype.pageTrack=function(t,e){try{mixpanel.track("Page Viewed",{page:t})}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.eventTrack=function(t,e){try{mixpanel.track(t,e)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUsername=function(t){try{mixpanel.identify(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUserProperties=function(t){try{mixpanel.people.set(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUserPropertiesOnce=function(t){try{mixpanel.people.set_once(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setSuperProperties=function(t){try{mixpanel.register(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setSuperPropertiesOnce=function(t){try{mixpanel.register_once(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setAlias=function(t){try{mixpanel.alias(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),p=function(){function t(t){var e=this;this.angulartics2=t,"undefined"==typeof _paq&&console.warn("Piwik not found"),this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path,t.location)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUsername.subscribe(function(t){return e.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)})}return t.prototype.pageTrack=function(t,e){try{_paq.push(["setDocumentTitle",window.document.title]),_paq.push(["setCustomUrl",t]),_paq.push(["trackPageView"])}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.eventTrack=function(t,e){try{if(e.value){var n=parseInt(e.value,10);e.value=isNaN(n)?0:n}_paq.push(["trackEvent",e.category,t,e.label,e.value])}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUsername=function(t){try{_paq.push(["setUserId",t])}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUserProperties=function(t){try{_paq.push(["setCustomVariable",t])}catch(t){if(!(t instanceof ReferenceError))throw t}},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),v=function(){function t(t){var e=this;this.angulartics2=t,this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path,t.location)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)}),this.angulartics2.setUserPropertiesOnce.subscribe(function(t){return e.setUserProperties(t)}),this.angulartics2.setAlias.subscribe(function(t){return e.setAlias(t)})}return t.prototype.pageTrack=function(t,e){try{analytics.page(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.eventTrack=function(t,e){try{analytics.track(t,e)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setUserProperties=function(t){try{t.userId?analytics.identify(t.userId,t):analytics.identify(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.prototype.setAlias=function(t){try{analytics.alias(t)}catch(t){if(!(t instanceof ReferenceError))throw t}},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),g=function(){function t(t){var e=this;this.angulartics2=t,this.angulartics2.settings.pageTracking.trackRelativePath=!0,this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)})}return t.prototype.eventTrack=function(t,e){e=e||{};var n=["ViewContent","Search","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","Lead","CompleteRegistration"];"undefined"!=typeof fbq&&fbq&&(-1===n.indexOf(t)?fbq("trackCustom",t,e):fbq("track",t,e))},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),m=n("BkNc"),y=function(){function t(t,e,n){var r=this;this.angulartics2=t,this.title=e,this.router=n,this.loadStartTime=null,this.loadTime=null,this.metrics=null,this.dimensions=null,this.measurements=null,"undefined"==typeof appInsights&&console.warn("appInsights not found"),this.angulartics2.settings.appInsights={userId:null},this.angulartics2.pageTrack.subscribe(function(t){return r.pageTrack(t.path)}),this.angulartics2.eventTrack.subscribe(function(t){return r.eventTrack(t.action,t.properties)}),this.angulartics2.exceptionTrack.subscribe(function(t){return r.exceptionTrack(t)}),this.angulartics2.setUsername.subscribe(function(t){return r.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return r.setUserProperties(t)}),this.router.events.filter(function(t){return t instanceof m.f}).subscribe(function(t){return r.startTimer()}),this.router.events.filter(function(t){return t instanceof m.e||t instanceof m.d}).subscribe(function(t){return r.stopTimer()})}return t.prototype.startTimer=function(){this.loadStartTime=Date.now(),this.loadTime=null},t.prototype.stopTimer=function(){this.loadTime=Date.now()-this.loadStartTime,this.loadStartTime=null},t.prototype.pageTrack=function(t){appInsights.trackPageView(this.title.getTitle(),t,this.dimensions,this.metrics,this.loadTime)},t.prototype.eventTrack=function(t,e){appInsights.trackEvent(t,e,this.measurements)},t.prototype.exceptionTrack=function(t){var e=t.event||t.description||t;appInsights.trackException(e)},t.prototype.setUsername=function(t){this.angulartics2.settings.appInsights.userId=t,appInsights.setAuthenticatedUserContext(t)},t.prototype.setUserProperties=function(t){t.userId&&(this.angulartics2.settings.appInsights.userId=t.userId),t.accountId&&appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId,t.accountId)},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a},{type:a.i},{type:m.n}]},t}(),b=function(){function t(t){var e=this;this.angulartics2=t,"undefined"==typeof _hsq&&(_hsq=[]),this.angulartics2.pageTrack.subscribe(function(t){return e.pageTrack(t.path,t.location)}),this.angulartics2.eventTrack.subscribe(function(t){return e.eventTrack(t.action,t.properties)}),this.angulartics2.setUserProperties.subscribe(function(t){return e.setUserProperties(t)})}return t.prototype.pageTrack=function(t,e){"undefined"!=typeof _hsq&&(_hsq.push(["setPath",t]),_hsq.push(["trackPageView"]))},t.prototype.eventTrack=function(t,e){"undefined"!=typeof _hsq&&_hsq.push(["trackEvent",e])},t.prototype.setUserProperties=function(t){"undefined"!=typeof _hsq&&_hsq.push(["identify",t])},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a}]},t}(),_=n("qbdv"),x=function(){function t(t,e){var n=this;this.angulartics2=t,this.location=e,this.angulartics2.settings.pageTracking.trackRelativePath=!0,this.angulartics2.pageTrack.subscribe(function(t){return n.pageTrack(t.path)}),this.angulartics2.eventTrack.subscribe(function(t){return n.eventTrack(t.action,t.properties)}),this.angulartics2.setUserProperties.subscribe(function(t){return n.setUserProperties(t)})}return t.prototype.pageTrack=function(t){"undefined"!=typeof s&&s&&(s.clearVars(),s.t({pageName:t}))},t.prototype.eventTrack=function(t,e){if(e||(e=e||{}),"undefined"!=typeof s&&s&&("object"==typeof e&&this.setUserProperties(e),t)){var n=e.linkName?e.linkName:t,r=!!e.disableDelay||this;e.action&&(t=e.action),this.setPageName(),"DOWNLOAD"===t.toUpperCase()?s.tl(r,"d",n):"EXIT"===t.toUpperCase()?s.tl(r,"e",n):s.tl(r,"o",n)}},t.prototype.setPageName=function(){var t=this.location.path(!0),e=t.indexOf("#");e>0&&e<t.length?s.pageName=t.substring(e+1):s.pageName=t},t.prototype.setUserProperties=function(t){if("object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e])},t.decorators=[{type:i.u}],t.ctorParameters=function(){return[{type:o.a},{type:_.g}]},t}();n.d(e,"a",function(){return w}),e.e=r,n.d(e,"d",function(){return M}),n.d(e,"b",function(){return o.a}),n.d(e,!1,function(){return u}),n.d(e,"c",function(){return l.a}),n.d(e,!1,function(){return c}),n.d(e,!1,function(){return h}),n.d(e,!1,function(){return f}),n.d(e,!1,function(){return d}),n.d(e,!1,function(){return p}),n.d(e,!1,function(){return v}),n.d(e,!1,function(){return g}),n.d(e,!1,function(){return y}),n.d(e,!1,function(){return b}),n.d(e,!1,function(){return x});var w=new i.H("ANGULARTICS2_FORROOT_GUARD"),M=function(){function t(t){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:w,useFactory:r,deps:[[o.a,new i.I,new i.T]]},o.a].concat(e)}},t.forChild=function(){return{ngModule:t,providers:[]}},t.decorators=[{type:i.B,args:[{declarations:[u],exports:[u]}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.I},{type:i.t,args:[w]}]}]},t}()},YD56:function(t,e,n){"use strict";var r=n("gxdV"),i=n("lfBE"),o=n("umMR"),a=n("Wy9r"),s=n("3r0D");t.exports=function(t,e,n){var u=s(t),c=n(a,u,""[t]),l=c[0],h=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},YvuM:function(t,e,n){var r=n("JXkd"),i=n("xI8H").onFreeze;n("QN+J")("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},YymB:function(t,e,n){var r=n("3r0D")("unscopables"),i=Array.prototype;void 0==i[r]&&n("gxdV")(i,r,{}),t.exports=function(t){i[r][t]=!0}},Z5ED:function(t,e,n){"use strict";function r(){}e.noop=r},ZI9W:function(t,e,n){"use strict";var r=n("3LDD"),i=n("Y5fy");t.exports=n("cpZ/")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},ZQVD:function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("Z5ED");e.ignoreElements=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype._next=function(t){a.noop()},e}(o.Subscriber)},Zbsr:function(t,e,n){(function(e){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=39)}([function(t,e,n){"use strict";function r(t){var e=void 0===t?"undefined":i(t);return!!t&&("object"==e||"function"==e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";var r=Array.isArray;t.exports=r},function(t,n,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(62),a=o("object"==(void 0===e?"undefined":i(e))&&e),s=o("object"==("undefined"==typeof self?"undefined":i(self))&&self),u=o("object"==i(void 0)&&void 0),c=a||s||u||Function("return this")();t.exports=c},function(t,e,n){"use strict";function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n(59),o=n(63);t.exports=r},function(t,e,n){"use strict";function r(t){return null!=t&&a(i(t))&&!o(t)}var i=n(88),o=n(18),a=n(12);t.exports=r},function(t,e,n){"use strict";function r(t){return!!t&&"object"==(void 0===t?"undefined":i(t))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t){return null==t?"":i(t)}var i=n(7);t.exports=r},function(t,e,n){"use strict";function r(t){if("string"==typeof t)return t;if(o(t))return u?u.call(t):"";var e=t+"";return"0"==e&&1/t==-a?"-0":e}var i=n(30),o=n(13),a=1/0,s=i?i.prototype:void 0,u=s?s.toString:void 0;t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(46),o=n(47),a=n(48),s=n(49),u=n(50);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n(16);t.exports=r},function(t,e,n){"use strict";var r=n(3),i=r(Object,"create");t.exports=i},function(t,e,n){"use strict";function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n(69);t.exports=r},function(t,e,n){"use strict";function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;t.exports=r},function(t,e,n){"use strict";function r(t){return"symbol"==(void 0===t?"undefined":i(t))||o(t)&&u.call(t)==a}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(5),a="[object Symbol]",s=Object.prototype,u=s.toString;t.exports=r},function(t,e,n){"use strict";function r(t,e){if(o(t))return!1;var n=void 0===t?"undefined":i(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!a(t))||u.test(t)||!s.test(t)||null!=e&&t in Object(e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),a=n(13),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;t.exports=r},function(t,e,n){"use strict";function r(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=n(13),o=1/0;t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(56),o=n(68),a=n(70),s=n(71),u=n(72);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){"use strict";function r(t){var e=i(t)?u.call(t):"";return e==o||e==a}var i=n(0),o="[object Function]",a="[object GeneratorFunction]",s=Object.prototype,u=s.toString;t.exports=r},function(t,e,n){"use strict";function r(t){var e=c(t);if(!e&&!s(t))return o(t);var n=a(t),r=!!n,l=n||[],h=l.length;for(var f in t)!i(t,f)||r&&("length"==f||u(f,h))||e&&"constructor"==f||l.push(f);return l}var i=n(31),o=n(84),a=n(85),s=n(4),u=n(21),c=n(89);t.exports=r},function(t,e,n){"use strict";function r(t){return"string"==typeof t||!i(t)&&o(t)&&u.call(t)==a}var i=n(1),o=n(5),a="[object String]",s=Object.prototype,u=s.toString;t.exports=r},function(t,e,n){"use strict";function r(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}var i=n(122);t.exports=r},function(t,e,n){"use strict";function r(t){return t.match(f)}var i="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",o="\\ud83c[\\udffb-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",c="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*",l="[\\ufe0e\\ufe0f]?"+u+c,h="(?:"+["[^\\ud800-\\udfff]"+i+"?",i,a,s,"[\\ud800-\\udfff]"].join("|")+")",f=RegExp(o+"(?="+o+")|"+h+l,"g");t.exports=r},function(t,e,n){"use strict";function r(t){this.__data__=new i(t)}var i=n(8),o=n(51),a=n(52),s=n(53),u=n(54),c=n(55);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){"use strict";function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}t.exports=r},function(t,e,n){"use strict";function r(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var i=Function.prototype.toString;t.exports=r},function(t,e,n){"use strict";var r=n(3),i=n(2),o=r(i,"Map");t.exports=o},function(t,e,n){"use strict";function r(t,e,n,s,u){return t===e||(null==t||null==e||!o(t)&&!a(e)?t!==t&&e!==e:i(t,e,r,n,s,u))}var i=n(73),o=n(0),a=n(5);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,u,c){var l=u&s,h=t.length,f=e.length;if(h!=f&&!(l&&f>h))return!1;var d=c.get(t);if(d)return d==e;var p=-1,v=!0,g=u&a?new i:void 0;for(c.set(t,e);++p<h;){var m=t[p],y=e[p];if(r)var b=l?r(y,m,p,e,t,c):r(m,y,p,t,e,c);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!o(e,function(t,e){if(!g.has(e)&&(m===t||n(m,t,r,u,c)))return g.add(e)})){v=!1;break}}else if(m!==y&&!n(m,y,r,u,c)){v=!1;break}}return c.delete(t),v}var i=n(74),o=n(77),a=1,s=2;t.exports=r},function(t,e,n){"use strict";var r=n(2),i=r.Symbol;t.exports=i},function(t,e,n){"use strict";function r(t,e){return null!=t&&(s.call(t,e)||"object"==(void 0===t?"undefined":i(t))&&e in t&&null===o(t))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(83),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&s.call(t,"callee")&&(!c.call(t,"callee")||u.call(t)==o)}var i=n(87),o="[object Arguments]",a=Object.prototype,s=a.hasOwnProperty,u=a.toString,c=a.propertyIsEnumerable;t.exports=r},function(t,e,n){"use strict";function r(t){return function(e){return null==e?void 0:e[t]}}t.exports=r},function(t,e,n){"use strict";function r(t){return t===t&&!i(t)}var i=n(0);t.exports=r},function(t,e,n){"use strict";function r(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}t.exports=r},function(t,e,n){"use strict";function r(t,e){e=o(e,t)?[e]:i(e);for(var n=0,r=e.length;null!=t&&n<r;)t=t[a(e[n++])];return n&&n==r?t:void 0}var i=n(37),o=n(14),a=n(15);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)?t:o(t)}var i=n(1),o=n(99);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(e!==e)return i(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}var i=n(124);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WsReader=void 0;var r=n(40),i=n(117);e.WsReader={getReader:function(){return Object.assign({},i.BaseWsReader,r.WsJsonReader)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WsJsonReader=void 0;var i=n(41),o=r(i),a=n(113),s=r(a),u=n(0),c=r(u),l=n(116),h=r(l);e.WsJsonReader={_toPojo:function(t){var e=t.rows,n=t.headers;return(0,o.default)(e,function(t){return(0,s.default)(n,(0,o.default)(t,function(t){return(0,c.default)(t)?JSON.stringify(t):(0,h.default)(t)?null:t.toString()}))})}}},function(t,e,n){"use strict";function r(t,e){return(s(t)?i:a)(t,o(e,3))}var i=n(42),o=n(43),a=n(107),s=n(1);t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}t.exports=r},function(t,e,n){"use strict";function r(t){return"function"==typeof t?t:null==t?s:"object"==(void 0===t?"undefined":i(t))?u(t)?a(t[0],t[1]):o(t):c(t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(44),a=n(97),s=n(104),u=n(1),c=n(105);t.exports=r},function(t,e,n){"use strict";function r(t){var e=o(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}var i=n(45),o=n(96),a=n(35);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){var u=n.length,c=u,l=!r;if(null==t)return!c;for(t=Object(t);u--;){var h=n[u];if(l&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++u<c;){h=n[u];var f=h[0],d=t[f],p=h[1];if(l&&h[2]){if(void 0===d&&!(f in t))return!1}else{var v=new i;if(r)var g=r(d,p,f,t,e,v);if(!(void 0===g?o(p,d,r,a|s,v):g))return!1}}return!0}var i=n(24),o=n(28),a=1,s=2;t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=[]}t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():a.call(e,n,1),0))}var i=n(9),o=Array.prototype,a=o.splice;t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n(9);t.exports=r},function(t,e,n){"use strict";function r(t){return i(this.__data__,t)>-1}var i=n(9);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=this.__data__,r=i(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}var i=n(9);t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=new i}var i=n(8);t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.delete(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.get(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=this.__data__;return n instanceof i&&n.__data__.length==a&&(n=this.__data__=new o(n.__data__)),n.set(t,e),this}var i=n(8),o=n(17),a=200;t.exports=r},function(t,e,n){"use strict";function r(){this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(57),o=n(8),a=n(27);t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(58),o=n(64),a=n(65),s=n(66),u=n(67);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=i?i(null):{}}var i=n(10);t.exports=r},function(t,e,n){"use strict";function r(t){return!(!s(t)||a(t))&&(i(t)||o(t)?p:l).test(u(t))}var i=n(18),o=n(25),a=n(60),s=n(0),u=n(26),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,d=h.hasOwnProperty,p=RegExp("^"+f.call(d).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){"use strict";function r(t){return!!o&&o in t}var i=n(61),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){"use strict";var r=n(2),i=r["__core-js_shared__"];t.exports=i},function(t,e,n){"use strict";function r(t){return t&&t.Object===Object?t:null}t.exports=r},function(t,e,n){"use strict";function r(t,e){return null==t?void 0:t[e]}t.exports=r},function(t,e,n){"use strict";function r(t){return this.has(t)&&delete this.__data__[t]}t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=n(10),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=n(10),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e){return this.__data__[t]=i&&void 0===e?o:e,this}var i=n(10),o="__lodash_hash_undefined__";t.exports=r},function(t,e,n){"use strict";function r(t){return i(this,t).delete(t)}var i=n(11);t.exports=r},function(t,e,n){"use strict";function r(t){var e=void 0===t?"undefined":i(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t){return i(this,t).get(t)}var i=n(11);t.exports=r},function(t,e,n){"use strict";function r(t){return i(this,t).has(t)}var i=n(11);t.exports=r},function(t,e,n){"use strict";function r(t,e){return i(this,t).set(t,e),this}var i=n(11);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,g,y){var b=c(t),_=c(e),x=p,w=p;b||(x=u(t),x=x==d?v:x),_||(w=u(e),w=w==d?v:w);var M=x==v&&!l(t),S=w==v&&!l(e),k=x==w;if(k&&!M)return y||(y=new i),b||h(t)?o(t,e,n,r,g,y):a(t,e,x,n,r,g,y);if(!(g&f)){var E=M&&m.call(t,"__wrapped__"),O=S&&m.call(e,"__wrapped__");if(E||O){var T=E?t.value():t,C=O?e.value():e;return y||(y=new i),n(T,C,r,g,y)}}return!!k&&(y||(y=new i),s(t,e,n,r,g,y))}var i=n(24),o=n(29),a=n(78),s=n(82),u=n(90),c=n(1),l=n(25),h=n(95),f=2,d="[object Arguments]",p="[object Array]",v="[object Object]",g=Object.prototype,m=g.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=t?t.length:0;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n(17),o=n(75),a=n(76);r.prototype.add=r.prototype.push=o,r.prototype.has=a,t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.set(t,i),this}var i="__lodash_hash_undefined__";t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,i,w,S){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!r(new o(t),new o(e)));case h:case f:return+t==+e;case d:return t.name==e.name&&t.message==e.message;case v:return t!=+t?e!=+e:t==+e;case g:case y:return t==e+"";case p:var k=s;case m:var E=w&l;if(k||(k=u),t.size!=e.size&&!E)return!1;var O=S.get(t);return O?O==e:(w|=c,S.set(t,e),a(k(t),k(e),r,i,w,S));case b:if(M)return M.call(t)==M.call(e)}return!1}var i=n(30),o=n(79),a=n(29),s=n(80),u=n(81),c=1,l=2,h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Map]",v="[object Number]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=i?i.prototype:void 0,M=w?w.valueOf:void 0;t.exports=r},function(t,e,n){"use strict";var r=n(2),i=r.Uint8Array;t.exports=i},function(t,e,n){"use strict";function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,s,u){var c=s&a,l=o(t),h=l.length;if(h!=o(e).length&&!c)return!1;for(var f=h;f--;){var d=l[f];if(!(c?d in e:i(e,d)))return!1}var p=u.get(t);if(p)return p==e;var v=!0;u.set(t,e);for(var g=c;++f<h;){d=l[f];var m=t[d],y=e[d];if(r)var b=c?r(y,m,d,e,t,u):r(m,y,d,t,e,u);if(!(void 0===b?m===y||n(m,y,r,s,u):b)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(v=!1)}return u.delete(t),v}var i=n(31),o=n(19),a=2;t.exports=r},function(t,e,n){"use strict";function r(t){return i(Object(t))}var i=Object.getPrototypeOf;t.exports=r},function(t,e,n){"use strict";function r(t){return i(Object(t))}var i=Object.keys;t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.length:void 0;return s(e)&&(a(t)||u(t)||o(t))?i(e,String):null}var i=n(86),o=n(32),a=n(1),s=n(12),u=n(20);t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=r},function(t,e,n){"use strict";function r(t){return o(t)&&i(t)}var i=n(4),o=n(5);t.exports=r},function(t,e,n){"use strict";var r=n(33),i=r("length");t.exports=i},function(t,e,n){"use strict";function r(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}var i=Object.prototype;t.exports=r},function(t,e,n){"use strict";function r(t){return h.call(t)}var i=n(91),o=n(27),a=n(92),s=n(93),u=n(94),c=n(26),l=Object.prototype,h=l.toString,f=c(i),d=c(o),p=c(a),v=c(s),g=c(u);(i&&"[object DataView]"!=r(new i(new ArrayBuffer(1)))||o&&"[object Map]"!=r(new o)||a&&"[object Promise]"!=r(a.resolve())||s&&"[object Set]"!=r(new s)||u&&"[object WeakMap]"!=r(new u))&&(r=function(t){var e=h.call(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):void 0;if(r)switch(r){case f:return"[object DataView]";case d:return"[object Map]";case p:return"[object Promise]";case v:return"[object Set]";case g:return"[object WeakMap]"}return e}),t.exports=r},function(t,e,n){"use strict";var r=n(3),i=n(2),o=r(i,"DataView");t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(2),o=r(i,"Promise");t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(2),o=r(i,"Set");t.exports=o},function(t,e,n){"use strict";var r=n(3),i=n(2),o=r(i,"WeakMap");t.exports=o},function(t,e,n){"use strict";function r(t){return o(t)&&i(t.length)&&!!a[u.call(t)]}var i=n(12),o=n(5),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=Object.prototype,u=s.toString;t.exports=r},function(t,e,n){"use strict";function r(t){for(var e=o(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,i(a)]}return e}var i=n(34),o=n(19);t.exports=r},function(t,e,n){"use strict";function r(t,e){return s(t)&&u(e)?c(l(t),e):function(n){var r=o(n,t);return void 0===r&&r===e?a(n,t):i(e,r,void 0,h|f)}}var i=n(28),o=n(98),a=n(101),s=n(14),u=n(34),c=n(35),l=n(15),h=1,f=2;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}var i=n(36);t.exports=r},function(t,e,n){"use strict";var r=n(100),i=n(6),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,a=/\\(\\)?/g,s=r(function(t){var e=[];return i(t).replace(o,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e});t.exports=s},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(o);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(r.Cache||i),n}var i=n(17),o="Expected a function";r.Cache=i,t.exports=r},function(t,e,n){"use strict";function r(t,e){return null!=t&&o(t,e,i)}var i=n(102),o=n(103);t.exports=r},function(t,e,n){"use strict";function r(t,e){return null!=t&&e in Object(t)}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){e=u(e,t)?[e]:i(e);for(var r,f=-1,d=e.length;++f<d;){var p=h(e[f]);if(!(r=null!=t&&n(t,p)))break;t=t[p]}if(r)return r;var d=t?t.length:0;return!!d&&c(d)&&s(p,d)&&(a(t)||l(t)||o(t))}var i=n(37),o=n(32),a=n(1),s=n(21),u=n(14),c=n(12),l=n(20),h=n(15);t.exports=r},function(t,e,n){"use strict";function r(t){return t}t.exports=r},function(t,e,n){"use strict";function r(t){return a(t)?i(s(t)):o(t)}var i=n(33),o=n(106),a=n(14),s=n(15);t.exports=r},function(t,e,n){"use strict";function r(t){return function(e){return i(e,t)}}var i=n(36);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=n(108),o=n(4);t.exports=r},function(t,e,n){"use strict";var r=n(109),i=n(112),o=i(r);t.exports=o},function(t,e,n){"use strict";function r(t,e){return t&&i(t,e,o)}var i=n(110),o=n(19);t.exports=r},function(t,e,n){"use strict";var r=n(111),i=r();t.exports=i},function(t,e,n){"use strict";function r(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==r(s[a],a,s););return n}}var i=n(4);t.exports=r},function(t,e,n){"use strict";function r(t,e){return o(t||[],e||[],i)}var i=n(114),o=n(115);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||(t[e]=n)}var i=n(16),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}t.exports=r},function(t,e,n){"use strict";function r(t){return null==t}t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseWsReader=void 0;var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(118),s=i(a),u=n(120),c=i(u),l=n(20),h=r(l),f=n(0),d=r(f),p=n(121),v=r(p),g=n(125),m=r(g),y=n(127),b=r(y),_=n(132),x=r(_),w={NETWORK:"Server is not reachable",RESPONSE:"Bad Response",PARAM_PATH:"There is no base path for waffle reader, please, consider to provide one"};e.BaseWsReader={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._name="waffle",this._dataset=t.dataset,this._assetsPath=(0,m.default)(t.assetsPath||"/api/ddf/assets","/"),this._basepath=t.path,this.versionInfo={version:"2.0.3",build:1507280325896},this._basepath||console.error(w.PARAM_PATH)},getAsset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._toDatasetPath(e.dataset||this._dataset),r=(0,v.default)(t,"/"),i=(0,b.default)(r,".json"),o=e.dataset_access_token?"dataset_access_token="+e.dataset_access_token:"",a=this._assetsPath+"/"+n+"/"+r;return s.ajax({url:o?a+"?"+o:a,json:i})},_toDatasetPath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if("default"===t)return t;var e=(0,x.default)(t,"#"),n=o(e,2),r=n[0],i=n[1],a=void 0===i?"master":i;return r?r+"/"+a:"default"},read:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,h.default)(t.dataset)?Object.assign({},t,{dataset:encodeURIComponent(t.dataset)}):t;return s.ajax({url:this._basepath+"?"+c.stringify(r),json:!0}).then(function(t){var r={response:t,parsers:n,endpoint:e._basepath};return e._onReadSuccess(r)}).catch(function(t){var n={error:t,ddfql:r,endpoint:e._basepath};return e._onReadError(n)})},_onReadError:function(t){var e=t.endpoint,n=t.ddfql,r=t.error;return Promise.reject({error:r,data:{endpoint:e,ddfql:n}})},_onReadSuccess:function(t){var e=t.parsers,n=t.response;if(!(0,d.default)(n)){var r={message:w.RESPONSE+": "+n,data:n};return Promise.reject(r)}return this._parse(n,e)},_parse:function(t,e){return s.mapRows(this._toPojo(t),e)},_toPojo:function(t){return t}}},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.map(function(t){return Object.keys(t).forEach(function(n){t[n]=i(t[n],e[n])}),t})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return(0,u.default)(t)?t.map(function(t){return i(t,e)}):e(t)}function o(t){if(""===t||null===t)return null;if(!t.trim)return t;if(null==t.trim().match(/^[0-9.,]+$/))return t;var e=parseFloat(t);return isNaN(e)||!isFinite(e)?t:e}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.url,n=void 0===e?"":e,r=t.json,i=void 0!==r&&r,o={};return i&&(o["Content-Type"]="text/plain; charset=UTF-8"),fetch(n,{method:"GET",headers:o}).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return i?t.json():t.text()})}Object.defineProperty(e,"__esModule",{value:!0}),e.ajax=e.mapRows=void 0;var s=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s);n(119),e.mapRows=r,e.ajax=a},function(t,e,n){"use strict";!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&b(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];g.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=g,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new g(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0)},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i={stringify:function(t){function e(t){return encodeURI(t.replace(/([=:&@_;\/])/g,"/$1"))}function n(t){if("number"==typeof t||!0===t||!1===t||null===t)return":"+t;if(t instanceof Array){for(var i=[],o=0;o<t.length;++o)i.push(n(t[o]));return"@"+i.join("&")+";"}if("object"===(void 0===t?"undefined":r(t))){var i=[];for(var a in t)i.push(e(a)+n(t[a]));return"_"+i.join("&")+";"}return"="+e((null!==t?void 0!==t?t:"undefined":"null").toString())}return n(t).replace(/;+$/g,"")},parse:function(t){function e(){for(var e="";r!==t.length;++r){if("/"===t.charAt(r)){if((r+=1)===t.length){e+=";";break}}else if(t.charAt(r).match(/[=:&@_;]/))break;e+=t.charAt(r)}return e}function n(){var i=t.charAt(r++);if("="===i)return e();if(":"===i){var o=e();return"true"===o||"false"!==o&&(o=parseFloat(o),isNaN(o)?null:o)}if("@"===i){var a=[];t:if(!(r>=t.length||";"===t.charAt(r)))for(;;){if(a.push(n()),r>=t.length||";"===t.charAt(r))break t;r+=1}return r+=1,a}if("_"===i){var a={};t:if(!(r>=t.length||";"===t.charAt(r)))for(;;){var s=e();if(a[s]=n(),r>=t.length||";"===t.charAt(r))break t;r+=1}return r+=1,a}throw"Unexpected char "+i}var r=0;return t=decodeURI(t),n()}};e.stringify=i.stringify,e.parse=i.parse},function(t,e,n){"use strict";function r(t,e,n){if((t=u(t))&&(n||void 0===e))return t.replace(c,"");if(!t||!(e=i(e)))return t;var r=s(t),l=a(r,s(e));return o(r,l).join("")}var i=n(7),o=n(22),a=n(123),s=n(23),u=n(6),c=/^\s+/;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=t.length;++n<r&&i(e,t[n],0)>-1;);return n}var i=n(38);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){for(var r=t.length,i=e+(n?1:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if((t=u(t))&&(n||void 0===e))return t.replace(c,"");if(!t||!(e=i(e)))return t;var r=s(t),l=a(r,s(e))+1;return o(r,0,l).join("")}var i=n(7),o=n(22),a=n(126),s=n(23),u=n(6),c=/\s+$/;t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=t.length;n--&&i(e,t[n],0)>-1;);return n}var i=n(38);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){t=s(t),e=o(e);var r=t.length;return n=void 0===n?r:i(a(n),0,r),(n-=e.length)>=0&&t.indexOf(e,n)==n}var i=n(128),o=n(7),a=n(129),s=n(6);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}t.exports=r},function(t,e,n){"use strict";function r(t){var e=i(t),n=e%1;return e===e?n?e-n:e:0}var i=n(130);t.exports=r},function(t,e,n){"use strict";function r(t){return t?(t=i(t))===o||t===-o?(t<0?-1:1)*a:t===t?t:0:0===t?t:0}var i=n(131),o=1/0,a=1.7976931348623157e308;t.exports=r},function(t,e,n){"use strict";function r(t){if("number"==typeof t)return t;if(a(t))return s;if(o(t)){var e=i(t.valueOf)?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var n=l.test(t);return n||h.test(t)?f(t.slice(2),n?2:8):c.test(t)?s:+t}var i=n(18),o=n(0),a=n(13),s=NaN,u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,f=parseInt;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return n&&"number"!=typeof n&&a(t,e,n)&&(e=n=void 0),(n=void 0===n?h:n>>>0)?(t=l(t),t&&("string"==typeof e||null!=e&&!s(e))&&""==(e=i(e))&&u.test(t)?o(c(t),0,n):d.call(t,e,n)):[]}var i=n(7),o=n(22),a=n(133),s=n(134),u=n(135),c=n(23),l=n(6),h=4294967295,f=String.prototype,d=f.split;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!u(n))return!1;var r=void 0===e?"undefined":i(e);return!!("number"==r?a(n)&&s(e,n.length):"string"==r&&e in n)&&o(n[e],t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(16),a=n(4),s=n(21),u=n(0);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&s.call(t)==o}var i=n(0),o="[object RegExp]",a=Object.prototype,s=a.toString;t.exports=r},function(t,e,n){"use strict";var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]");t.exports=r}])}).call(e,n("fRUx"))},Zy8t:function(t,e,n){n("YD56")("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},"a/Sk":function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"a/bl":function(t,e,n){"use strict";n("NhIS")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},a7b8:function(t,e,n){var r=n("JXkd"),i=n("rKhO"),o=n("3r0D")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},aCMF:function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("yW9Z"),a=n("ktfo");e.switchMap=r;var s=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e}(o.OuterSubscriber)},aOKN:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,r=t.subscriber;if(e)return void r.complete();r.next(n),r.closed||(t.done=!0,this.schedule(t))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(i.Observable);e.ScalarObservable=o},aWXQ:function(t,e,n){var r=n("CDXM");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},ajBu:function(t,e,n){n("QcIQ"),n("jMsF"),n("s+3V"),n("aWXQ"),n("H3aY"),n("uMIg"),n("B++z"),n("NI2B"),n("b94N"),n("/Mgt"),n("BMSF"),n("emBC"),t.exports=n("b4gG").Number},atYZ:function(t,e,n){"use strict";var r=n("RT4T"),i=n("KM3d"),o=n("rppw");t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},azLz:function(t,e,n){"use strict";var r=n("bKpL"),i=n("CH/r");r.Observable.prototype.debounceTime=i.debounceTime},b4gG:function(t,e){var n=t.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},b8HQ:function(t,e,n){"use strict";var r=n("dXJ/"),i={};i[n("3r0D")("toStringTag")]="z",i+""!="[object z]"&&n("lfBE")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},b94N:function(t,e,n){var r=n("CDXM");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},bKpL:function(t,e,n){"use strict";var r=n("zijX"),i=n("rf3q"),o=n("DP67"),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=i.toSubscriber(t,e,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=a},bPmT:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(1);r(r.P+r.F*!n("bhtb")([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},bhtb:function(t,e,n){"use strict";var r=n("umMR");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},bqLj:function(t,e,n){"use strict";var r=n("CDXM"),i=n("Ed9o"),o=n("VceJ"),a=n("KM3d"),s=n("rppw"),u=[].slice;r(r.P+r.F*n("umMR")(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),h=Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},by2N:function(t,e,n){var r=n("CDXM"),i=n("8Gg3");r(r.G+r.F*(parseInt!=i),{parseInt:i})},c09d:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cOEa:function(t,e,n){"use strict";var r=n("CDXM"),i=n("GVIH");r(r.S+r.F*n("umMR")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},cPhF:function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),this.lift(new s(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("ktfo"),a=n("yW9Z");e.mergeMap=r;var s=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=s;var u=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(a.OuterSubscriber);e.MergeMapSubscriber=u},ckYf:function(t,e,n){"use strict";function r(t){return function(e,n){return el(t(e),n)}}function i(t,e){return[t,e]}function o(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=_l?10:o>=xl?5:o>=wl?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=_l?10:o>=xl?5:o>=wl?2:1)}function a(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=_l?i*=10:o>=xl?i*=5:o>=wl&&(i*=2),e<t?-i:i}function s(t){return t.length}function u(t){return"translate("+(t+.5)+",0)"}function c(t){return"translate(0,"+(t+.5)+")"}function l(t){return function(e){return+t(e)}}function h(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function f(){return!this.__axis}function d(t,e){function n(n){var u=null==i?e.ticks?e.ticks.apply(e,r):e.domain():i,c=null==o?e.tickFormat?e.tickFormat.apply(e,r):Hl:o,m=Math.max(a,0)+d,y=e.range(),b=+y[0]+.5,_=+y[y.length-1]+.5,x=(e.bandwidth?h:l)(e.copy()),w=n.selection?n.selection():n,M=w.selectAll(".domain").data([null]),S=w.selectAll(".tick").data(u,e).order(),k=S.exit(),E=S.enter().append("g").attr("class","tick"),O=S.select("line"),T=S.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),S=S.merge(E),O=O.merge(E.append("line").attr("stroke","#000").attr(v+"2",p*a)),T=T.merge(E.append("text").attr("fill","#000").attr(v,p*m).attr("dy",t===ql?"0em":t===Ul?"0.71em":"0.32em")),n!==w&&(M=M.transition(n),S=S.transition(n),O=O.transition(n),T=T.transition(n),k=k.transition(n).attr("opacity",Yl).attr("transform",function(t){return isFinite(t=x(t))?g(t):this.getAttribute("transform")}),E.attr("opacity",Yl).attr("transform",function(t){var e=this.parentNode.__axis;return g(e&&isFinite(e=e(t))?e:x(t))})),k.remove(),M.attr("d",t===Wl||t==Vl?"M"+p*s+","+b+"H0.5V"+_+"H"+p*s:"M"+b+","+p*s+"V0.5H"+_+"V"+p*s),S.attr("opacity",1).attr("transform",function(t){return g(x(t))}),O.attr(v+"2",p*a),T.attr(v,p*m).text(c),w.filter(f).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Vl?"start":t===Wl?"end":"middle"),w.each(function(){this.__axis=x})}var r=[],i=null,o=null,a=6,s=6,d=3,p=t===ql||t===Wl?-1:1,v=t===Wl||t===Vl?"x":"y",g=t===ql||t===Ul?u:c;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=Bl.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:Bl.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(i=null==t?null:Bl.call(t),n):i&&i.slice()},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t){return arguments.length?(a=s=+t,n):a},n.tickSizeInner=function(t){return arguments.length?(a=+t,n):a},n.tickSizeOuter=function(t){return arguments.length?(s=+t,n):s},n.tickPadding=function(t){return arguments.length?(d=+t,n):d},n}function p(t){return d(ql,t)}function v(t){return d(Vl,t)}function g(t){return d(Ul,t)}function m(t){return d(Wl,t)}function y(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new b(r)}function b(t){this._=t}function _(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function x(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function w(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Xl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function M(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gl&&e.documentElement.namespaceURI===Gl?e.createElement(t):e.createElementNS(n,t)}}function S(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function k(){return new E}function E(){this._="@"+(++$l).toString(36)}function O(t,e,n){return t=T(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function T(t,e,n){return function(r){var i=oh;oh=r;try{t.call(this,this.__data__,e,n)}finally{oh=i}}}function C(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function z(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function P(t,e,n){var r=ih.hasOwnProperty(t.type)?O:T;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function A(t,e,n,r){var i=oh;t.sourceEvent=oh,oh=t;try{return e.apply(n,r)}finally{oh=i}}function D(){}function I(){return[]}function j(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function R(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new j(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function L(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=yh+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)c=yh+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new j(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function F(t){return function(){this.removeAttribute(t)}}function B(t){return function(){this.removeAttributeNS(t.space,t.local)}}function H(t,e){return function(){this.setAttribute(t,e)}}function q(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function V(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function W(t){return function(){this.style.removeProperty(t)}}function Y(t,e,n){return function(){this.style.setProperty(t,e,n)}}function X(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function K(t,e){return t.style.getPropertyValue(e)||Ph(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function Z(t,e){return function(){this[t]=e}}function Q(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function J(t){return t.trim().split(/^|\s+/)}function $(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=J(t.getAttribute("class")||"")}function et(t,e){for(var n=$(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function nt(t,e){for(var n=$(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rt(t){return function(){et(this,t)}}function it(t){return function(){nt(this,t)}}function ot(t,e){return function(){(e.apply(this,arguments)?et:nt)(this,t)}}function at(){this.textContent=""}function st(t){return function(){this.textContent=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ct(){this.innerHTML=""}function lt(t){return function(){this.innerHTML=t}}function ht(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ft(){this.nextSibling&&this.parentNode.appendChild(this)}function dt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pt(){return null}function vt(){var t=this.parentNode;t&&t.removeChild(this)}function gt(t,e,n){var r=Ph(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function mt(t,e){return function(){return gt(this,t,e)}}function yt(t,e){return function(){return gt(this,t,e.apply(this,arguments))}}function bt(t,e){this._groups=t,this._parents=e}function _t(){return new bt([[document.documentElement]],Uh)}function xt(){oh.stopImmediatePropagation()}function wt(t,e){var n=t.document.documentElement,r=Yh(t).on("dragstart.drag",null);e&&(r.on("click.drag",Zh,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Mt(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function St(){return!oh.button}function kt(){return this.parentNode}function Et(t){return null==t?{x:oh.x,y:oh.y}:t}function Ot(){return"ontouchstart"in this}function Tt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ct(){}function zt(t){var e;return t=(t+"").trim().toLowerCase(),(e=of.exec(t))?(e=parseInt(e[1],16),new jt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=af.exec(t))?Pt(parseInt(e[1],16)):(e=sf.exec(t))?new jt(e[1],e[2],e[3],1):(e=uf.exec(t))?new jt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=cf.exec(t))?At(e[1],e[2],e[3],e[4]):(e=lf.exec(t))?At(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=hf.exec(t))?Rt(e[1],e[2]/100,e[3]/100,1):(e=ff.exec(t))?Rt(e[1],e[2]/100,e[3]/100,e[4]):df.hasOwnProperty(t)?Pt(df[t]):"transparent"===t?new jt(NaN,NaN,NaN,0):null}function Pt(t){return new jt(t>>16&255,t>>8&255,255&t,1)}function At(t,e,n,r){return r<=0&&(t=e=n=NaN),new jt(t,e,n,r)}function Dt(t){return t instanceof Ct||(t=zt(t)),t?(t=t.rgb(),new jt(t.r,t.g,t.b,t.opacity)):new jt}function It(t,e,n,r){return 1===arguments.length?Dt(t):new jt(t,e,n,null==r?1:r)}function jt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Rt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ft(t,e,n,r)}function Lt(t){if(t instanceof Ft)return new Ft(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=zt(t)),!t)return new Ft;if(t instanceof Ft)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ft(a,s,u,t.opacity)}function Nt(t,e,n,r){return 1===arguments.length?Lt(t):new Ft(t,e,n,null==r?1:r)}function Ft(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Bt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ht(t){if(t instanceof Vt)return new Vt(t.l,t.a,t.b,t.opacity);if(t instanceof Zt){var e=t.h*pf;return new Vt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof jt||(t=Dt(t));var n=Xt(t.r),r=Xt(t.g),i=Xt(t.b),o=Ut((.4124564*n+.3575761*r+.1804375*i)/gf),a=Ut((.2126729*n+.7151522*r+.072175*i)/mf);return new Vt(116*a-16,500*(o-a),200*(a-Ut((.0193339*n+.119192*r+.9503041*i)/yf)),t.opacity)}function qt(t,e,n,r){return 1===arguments.length?Ht(t):new Vt(t,e,n,null==r?1:r)}function Vt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Ut(t){return t>wf?Math.pow(t,1/3):t/xf+bf}function Wt(t){return t>_f?t*t*t:xf*(t-bf)}function Yt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Xt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Kt(t){if(t instanceof Zt)return new Zt(t.h,t.c,t.l,t.opacity);t instanceof Vt||(t=Ht(t));var e=Math.atan2(t.b,t.a)*vf;return new Zt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Gt(t,e,n,r){return 1===arguments.length?Kt(t):new Zt(t,e,n,null==r?1:r)}function Zt(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Qt(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);t instanceof jt||(t=Dt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Tf*r+Ef*e-Of*n)/(Tf+Ef-Of),o=r-i,a=(kf*(n-i)-Mf*o)/Sf,s=Math.sqrt(a*a+o*o)/(kf*i*(1-i)),u=s?Math.atan2(a,o)*vf-120:NaN;return new $t(u<0?u+360:u,s,i,t.opacity)}function Jt(t,e,n,r){return 1===arguments.length?Qt(t):new $t(t,e,n,null==r?1:r)}function $t(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function te(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function ee(t,e){return function(n){return t+n*e}}function ne(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function re(t,e){var n=e-t;return n?ee(t,n>180||n<-180?n-360*Math.round(n/360):n):Lf(isNaN(t)?e:t)}function ie(t){return 1==(t=+t)?oe:function(e,n){return n-e?ne(e,n,t):Lf(isNaN(e)?n:e)}}function oe(t,e){var n=e-t;return n?ee(t,n):Lf(isNaN(t)?e:t)}function ae(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=It(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function se(t){return function(){return t}}function ue(t){return function(e){return t(e)+""}}function ce(t){return"none"===t?Qf:(Cf||(Cf=document.createElement("DIV"),zf=document.documentElement,Pf=document.defaultView),Cf.style.transform=t,t=Pf.getComputedStyle(zf.appendChild(Cf),null).getPropertyValue("transform"),zf.removeChild(Cf),t=t.slice(7,-1).split(","),Jf(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function le(t){return null==t?Qf:(Af||(Af=document.createElementNS("http://www.w3.org/2000/svg","g")),Af.setAttribute("transform",t),(t=Af.transform.baseVal.consolidate())?(t=t.matrix,Jf(t.a,t.b,t.c,t.d,t.e,t.f)):Qf)}function he(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Vf(t,i)},{i:u-2,x:Vf(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Vf(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Vf(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Vf(t,n)},{i:s-2,x:Vf(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function fe(t){return((t=Math.exp(t))+1/t)/2}function de(t){return((t=Math.exp(t))-1/t)/2}function pe(t){return((t=Math.exp(2*t))-1)/(t+1)}function ve(t){return function(e,n){var r=t((e=Nt(e)).h,(n=Nt(n)).h),i=oe(e.s,n.s),o=oe(e.l,n.l),a=oe(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function ge(t,e){var n=oe((t=qt(t)).l,(e=qt(e)).l),r=oe(t.a,e.a),i=oe(t.b,e.b),o=oe(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function me(t){return function(e,n){var r=t((e=Gt(e)).h,(n=Gt(n)).h),i=oe(e.c,n.c),o=oe(e.l,n.l),a=oe(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function ye(t){return function e(n){function r(e,r){var i=t((e=Jt(e)).h,(r=Jt(r)).h),o=oe(e.s,r.s),a=oe(e.l,r.l),s=oe(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}function be(){return vd||(yd(_e),vd=md.now()+gd)}function _e(){vd=0}function xe(){this._call=this._time=this._next=null}function we(t,e,n){var r=new xe;return r.restart(t,e,n),r}function Me(){be(),++ld;for(var t,e=Df;e;)(t=vd-e._time)>=0&&e._call.call(null,t),e=e._next;--ld}function Se(){vd=(pd=md.now())+gd,ld=hd=0;try{Me()}finally{ld=0,Ee(),vd=0}}function ke(){var t=md.now(),e=t-pd;e>dd&&(gd-=e,pd=t)}function Ee(){for(var t,e,n=Df,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Df=e);If=t,Oe(r)}function Oe(t){if(!ld){hd&&(hd=clearTimeout(hd));t-vd>24?(t<1/0&&(hd=setTimeout(Se,t-md.now()-gd)),fd&&(fd=clearInterval(fd))):(fd||(pd=md.now(),fd=setInterval(ke,dd)),ld=1,yd(Se))}}function Te(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Md)throw new Error("too late");return n}function Ce(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>kd)throw new Error("too late");return n}function ze(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Pe(t,e,n){function r(t){n.state=Sd,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(r){var c,l,h,f;if(n.state!==Sd)return a();for(c in u)if(f=u[c],f.name===n.name){if(f.state===Ed)return bd(i);f.state===Od?(f.state=Cd,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete u[c]):+c<e&&(f.state=Cd,f.timer.stop(),delete u[c])}if(bd(function(){n.state===Ed&&(n.state=Od,n.timer.restart(o,n.delay,n.time),o(r))}),n.state=kd,n.on.call("start",t,t.__data__,n.index,n.group),n.state===kd){for(n.state=Ed,s=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(s[++l]=f);s.length=l+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=Td,1),i=-1,o=s.length;++i<o;)s[i].call(null,r);n.state===Td&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Cd,n.timer.stop(),delete u[e];for(var r in u)return;delete t.__transition}var s,u=t.__transition;u[e]=n,n.timer=we(r,0,n.time)}function Ae(t,e){var n,r;return function(){var i=Ce(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function De(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Ce(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function Ie(t,e,n){var r=t._id;return t.each(function(){var t=Ce(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ze(t,r).value[e]}}function je(t){return function(){this.removeAttribute(t)}}function Re(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Le(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function Ne(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function Fe(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttribute(t):(a=this.getAttribute(t),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function Be(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function He(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function qe(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function Ve(t,e){return function(){Te(this,t).delay=+e.apply(this,arguments)}}function Ue(t,e){return e=+e,function(){Te(this,t).delay=e}}function We(t,e){return function(){Ce(this,t).duration=+e.apply(this,arguments)}}function Ye(t,e){return e=+e,function(){Ce(this,t).duration=e}}function Xe(t,e){if("function"!=typeof e)throw new Error;return function(){Ce(this,t).ease=e}}function Ke(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function Ge(t,e,n){var r,i,o=Ke(e)?Te:Ce;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Ze(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Qe(t,e){var n,r,i;return function(){var o=K(this,t),a=(this.style.removeProperty(t),K(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Je(t){return function(){this.style.removeProperty(t)}}function $e(t,e,n){var r,i;return function(){var o=K(this,t);return o===n?null:o===r?i:i=e(r=o,n)}}function tn(t,e,n){var r,i,o;return function(){var a=K(this,t),s=n(this);return null==s&&(this.style.removeProperty(t),s=K(this,t)),a===s?null:a===r&&s===i?o:o=e(r=a,i=s)}}function en(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function nn(t){return function(){this.textContent=t}}function rn(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function on(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function an(t){return Wh().transition(t)}function sn(){return++Jd}function un(t){return+t}function cn(t){return t*t}function ln(t){return t*(2-t)}function hn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function fn(t){return t*t*t}function dn(t){return--t*t*t+1}function pn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function vn(t){return 1-Math.cos(t*ip)}function gn(t){return Math.sin(t*ip)}function mn(t){return(1-Math.cos(rp*t))/2}function yn(t){return Math.pow(2,10*t-10)}function bn(t){return 1-Math.pow(2,-10*t)}function _n(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function xn(t){return 1-Math.sqrt(1-t*t)}function wn(t){return Math.sqrt(1- --t*t)}function Mn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Sn(t){return 1-kn(1-t)}function kn(t){return(t=+t)<op?pp*t*t:t<sp?pp*(t-=ap)*t+up:t<lp?pp*(t-=cp)*t+hp:pp*(t-=fp)*t+dp}function En(t){return((t*=2)<=1?1-kn(1-t):kn(t-1)+1)/2}function On(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return wp.time=be(),wp;return n}function Tn(){oh.stopImmediatePropagation()}function Cn(t){return{type:t}}function zn(){return!oh.button}function Pn(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function An(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Dn(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function In(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function jn(){return Ln(Dp)}function Rn(){return Ln(Ip)}function Ln(t){function e(e){var r=e.property("__brush",a).selectAll(".overlay").data([Cn("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Rp.overlay).merge(r).each(function(){var t=An(this).extent;Yh(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([Cn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Rp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Rp[t.type]}),e.each(n).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function n(){var t=Yh(this),e=An(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-h/2:e[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-h/2:e[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(t,e){return t.__brush.emitter||new i(t,e)}function i(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function o(){function e(){var t=ch(M);!j||x||w||(Math.abs(t[0]-L[0])>Math.abs(t[1]-L[1])?w=!0:x=!0),L=t,_=!0,Tp(),i()}function i(){var t;switch(y=L[0]-R[0],b=L[1]-R[1],k){case zp:case Cp:E&&(y=Math.max(P-l,Math.min(D-p,y)),h=l+y,v=p+y),O&&(b=Math.max(A-f,Math.min(I-g,b)),d=f+b,m=g+b);break;case Pp:E<0?(y=Math.max(P-l,Math.min(D-l,y)),h=l+y,v=p):E>0&&(y=Math.max(P-p,Math.min(D-p,y)),h=l,v=p+y),O<0?(b=Math.max(A-f,Math.min(I-f,b)),d=f+b,m=g):O>0&&(b=Math.max(A-g,Math.min(I-g,b)),d=f,m=g+b);break;case Ap:E&&(h=Math.max(P,Math.min(D,l-y*E)),v=Math.max(P,Math.min(D,p+y*E))),O&&(d=Math.max(A,Math.min(I,f-b*O)),m=Math.max(A,Math.min(I,g+b*O)))}v<h&&(E*=-1,t=l,l=p,p=t,t=h,h=v,v=t,S in Lp&&B.attr("cursor",Rp[S=Lp[S]])),m<d&&(O*=-1,t=f,f=g,g=t,t=d,d=m,m=t,S in Np&&B.attr("cursor",Rp[S=Np[S]])),T.selection&&(z=T.selection),x&&(h=z[0][0],v=z[1][0]),w&&(d=z[0][1],m=z[1][1]),z[0][0]===h&&z[0][1]===d&&z[1][0]===v&&z[1][1]===m||(T.selection=[[h,d],[v,m]],n.call(M),N.brush())}function o(){if(Tn(),oh.touches){if(oh.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500),F.on("touchmove.brush touchend.brush touchcancel.brush",null)}else wt(oh.view,_),H.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),B.attr("cursor",Rp.overlay),T.selection&&(z=T.selection),Dn(z)&&(T.selection=null,n.call(M)),N.end()}function a(){switch(oh.keyCode){case 16:j=E&&O;break;case 18:k===Pp&&(E&&(p=v-y*E,l=h+y*E),O&&(g=m-b*O,f=d+b*O),k=Ap,i());break;case 32:k!==Pp&&k!==Ap||(E<0?p=v-y:E>0&&(l=h-y),O<0?g=m-b:O>0&&(f=d-b),k=zp,B.attr("cursor",Rp.selection),i());break;default:return}Tp()}function u(){switch(oh.keyCode){case 16:j&&(x=w=j=!1,i());break;case 18:k===Ap&&(E<0?p=v:E>0&&(l=h),O<0?g=m:O>0&&(f=d),k=Pp,i());break;case 32:k===zp&&(oh.altKey?(E&&(p=v-y*E,l=h+y*E),O&&(g=m-b*O,f=d+b*O),k=Ap):(E<0?p=v:E>0&&(l=h),O<0?g=m:O>0&&(f=d),k=Pp),B.attr("cursor",Rp[S]),i());break;default:return}Tp()}if(oh.touches){if(oh.changedTouches.length<oh.touches.length)return Tp()}else if(s)return;if(c.apply(this,arguments)){var l,h,f,d,p,v,g,m,y,b,_,x,w,M=this,S=oh.target.__data__.type,k="selection"===(oh.metaKey?S="overlay":S)?Cp:oh.altKey?Ap:Pp,E=t===Ip?null:Fp[S],O=t===Dp?null:Bp[S],T=An(M),C=T.extent,z=T.selection,P=C[0][0],A=C[0][1],D=C[1][0],I=C[1][1],j=E&&O&&oh.shiftKey,R=ch(M),L=R,N=r(M,arguments).beforestart();"overlay"===S?T.selection=z=[[l=t===Ip?P:R[0],f=t===Dp?A:R[1]],[p=t===Ip?D:l,g=t===Dp?I:f]]:(l=z[0][0],f=z[0][1],p=z[1][0],g=z[1][1]),h=l,d=f,v=p,m=g;var F=Yh(M).attr("pointer-events","none"),B=F.selectAll(".overlay").attr("cursor",Rp[S]);if(oh.touches)F.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",o,!0);else{var H=Yh(oh.view).on("keydown.brush",a,!0).on("keyup.brush",u,!0).on("mousemove.brush",e,!0).on("mouseup.brush",o,!0);Qh(oh.view)}Tn(),Pd(M),n.call(M),N.start()}}function a(){var e=this.__brush||{selection:null};return e.extent=u.apply(this,arguments),e.dim=t,e}var s,u=Pn,c=zn,l=Kl(e,"start","brush","end"),h=6;return e.move=function(e,i){e.selection?e.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function e(t){a.selection=1===t&&Dn(c)?null:l(t),n.call(o),s.brush()}var o=this,a=o.__brush,s=r(o,arguments),u=a.selection,c=t.input("function"==typeof i?i.apply(this,arguments):i,a.extent),l=Kf(u,c);return u&&c?e:e(1)}):e.each(function(){var e=this,o=arguments,a=e.__brush,s=t.input("function"==typeof i?i.apply(e,o):i,a.extent),u=r(e,o).beforestart();Pd(e),a.selection=null==s||Dn(s)?null:s,n.call(e),u.start().brush().end()})},i.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){A(new Op(e,n,t.output(this.state.selection)),l.apply,l,[n,this.that,this.args])}},e.extent=function(t){return arguments.length?(u="function"==typeof t?t:Ep([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):u},e.filter=function(t){return arguments.length?(c="function"==typeof t?t:Ep(!!t),e):c},e.handleSize=function(t){return arguments.length?(h=+t,e):h},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function Nn(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Fn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bn(){return new Fn}function Hn(t){return t.source}function qn(t){return t.target}function Vn(t){return t.radius}function Un(t){return t.startAngle}function Wn(t){return t.endAngle}function Yn(){}function Xn(t,e){var n=new Yn;if(t instanceof Yn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Kn(){return{}}function Gn(t,e,n){t[e]=n}function Zn(){return nv()}function Qn(t,e,n){t.set(e,n)}function Jn(){}function $n(t,e){var n=new Jn;if(t instanceof Jn)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function tr(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function er(t,e){var n=tr(t);return function(r,i){return e(n(r),i,t)}}function nr(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function rr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a,i=d,!(d=d[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+m)/2))?v=o:m=o,(l=n>=(a=(g+y)/2))?g=a:y=a}while((h=l<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=d,i[h]=p,t}function ir(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));for(l<u&&(u=this._x0,l=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(u,c).cover(l,h),n=0;n<o;++n)rr(this,a[n],s[n],t[n]);return this}function or(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ar(t){return t[0]}function sr(t){return t[1]}function ur(t,e,n){var r=new cr(null==e?ar:e,null==n?sr:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function cr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function lr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function hr(t){return t.x+t.vx}function fr(t){return t.y+t.vy}function dr(t){return t.index}function pr(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function vr(t){return t.x}function gr(t){return t.y}function mr(t){return new yr(t)}function yr(t){if(!(e=ag.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):og[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}function br(t){return sg=fg(t),ug=sg.format,cg=sg.formatPrefix,sg}function _r(){this.reset()}function xr(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function wr(t){return t>1?0:t<-1?Zg:Math.acos(t)}function Mr(t){return t>1?Qg:t<-1?-Qg:Math.asin(t)}function Sr(t){return(t=lm(t/2))*t}function kr(){}function Er(t,e){t&&vm.hasOwnProperty(t.type)&&vm[t.type](t,e)}function Or(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Tr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Or(t[n],e,1);e.polygonEnd()}function Cr(){bm.point=Pr}function zr(){Ar(mg,yg)}function Pr(t,e){bm.point=Ar,mg=t,yg=e,t*=em,e*=em,bg=t,_g=om(e=e/2+Jg),xg=lm(e)}function Ar(t,e){t*=em,e*=em,e=e/2+Jg;var n=t-bg,r=n>=0?1:-1,i=r*n,o=om(e),a=lm(e),s=xg*a,u=_g*o+s*om(i),c=s*r*lm(i);mm.add(im(c,u)),bg=t,_g=o,xg=a}function Dr(t){return[im(t[1],t[0]),Mr(t[2])]}function Ir(t){var e=t[0],n=t[1],r=om(n);return[r*om(e),r*lm(e),lm(n)]}function jr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Lr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Nr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fr(t){var e=fm(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Br(t,e){zg.push(Pg=[wg=t,Sg=t]),e<Mg&&(Mg=e),e>kg&&(kg=e)}function Hr(t,e){var n=Ir([t*em,e*em]);if(Cg){var r=Rr(Cg,n),i=[r[1],-r[0],0],o=Rr(i,r);Fr(o),o=Dr(o);var a,s=t-Eg,u=s>0?1:-1,c=o[0]*tm*u,l=nm(s)>180;l^(u*Eg<c&&c<u*t)?(a=o[1]*tm)>kg&&(kg=a):(c=(c+360)%360-180,l^(u*Eg<c&&c<u*t)?(a=-o[1]*tm)<Mg&&(Mg=a):(e<Mg&&(Mg=e),e>kg&&(kg=e))),l?t<Eg?Xr(wg,t)>Xr(wg,Sg)&&(Sg=t):Xr(t,Sg)>Xr(wg,Sg)&&(wg=t):Sg>=wg?(t<wg&&(wg=t),t>Sg&&(Sg=t)):t>Eg?Xr(wg,t)>Xr(wg,Sg)&&(Sg=t):Xr(t,Sg)>Xr(wg,Sg)&&(wg=t)}else zg.push(Pg=[wg=t,Sg=t]);e<Mg&&(Mg=e),e>kg&&(kg=e),Cg=n,Eg=t}function qr(){wm.point=Hr}function Vr(){Pg[0]=wg,Pg[1]=Sg,wm.point=Br,Cg=null}function Ur(t,e){if(Cg){var n=t-Eg;xm.add(nm(n)>180?n+(n>0?360:-360):n)}else Og=t,Tg=e;bm.point(t,e),Hr(t,e)}function Wr(){bm.lineStart()}function Yr(){Ur(Og,Tg),bm.lineEnd(),nm(xm)>Gg&&(wg=-(Sg=180)),Pg[0]=wg,Pg[1]=Sg,Cg=null}function Xr(t,e){return(e-=t)<0?e+360:e}function Kr(t,e){return t[0]-e[0]}function Gr(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Zr(t,e){t*=em,e*=em;var n=om(e);Qr(n*om(t),n*lm(t),lm(e))}function Qr(t,e,n){++Ag,Ig+=(t-Ig)/Ag,jg+=(e-jg)/Ag,Rg+=(n-Rg)/Ag}function Jr(){Sm.point=$r}function $r(t,e){t*=em,e*=em;var n=om(e);Wg=n*om(t),Yg=n*lm(t),Xg=lm(e),Sm.point=ti,Qr(Wg,Yg,Xg)}function ti(t,e){t*=em,e*=em;var n=om(e),r=n*om(t),i=n*lm(t),o=lm(e),a=im(fm((a=Yg*o-Xg*i)*a+(a=Xg*r-Wg*o)*a+(a=Wg*i-Yg*r)*a),Wg*r+Yg*i+Xg*o);Dg+=a,Lg+=a*(Wg+(Wg=r)),Ng+=a*(Yg+(Yg=i)),Fg+=a*(Xg+(Xg=o)),Qr(Wg,Yg,Xg)}function ei(){Sm.point=Zr}function ni(){Sm.point=ii}function ri(){oi(Vg,Ug),Sm.point=Zr}function ii(t,e){Vg=t,Ug=e,t*=em,e*=em,Sm.point=oi;var n=om(e);Wg=n*om(t),Yg=n*lm(t),Xg=lm(e),Qr(Wg,Yg,Xg)}function oi(t,e){t*=em,e*=em;var n=om(e),r=n*om(t),i=n*lm(t),o=lm(e),a=Yg*o-Xg*i,s=Xg*r-Wg*o,u=Wg*i-Yg*r,c=fm(a*a+s*s+u*u),l=Mr(c),h=c&&-l/c;Bg+=h*a,Hg+=h*s,qg+=h*u,Dg+=l,Lg+=l*(Wg+(Wg=r)),Ng+=l*(Yg+(Yg=i)),Fg+=l*(Xg+(Xg=o)),Qr(Wg,Yg,Xg)}function ai(t,e){return[t>Zg?t-$g:t<-Zg?t+$g:t,e]}function si(t,e,n){return(t%=$g)?e||n?Om(ci(t),li(e,n)):ci(t):e||n?li(e,n):ai}function ui(t){return function(e,n){return e+=t,[e>Zg?e-$g:e<-Zg?e+$g:e,n]}}function ci(t){var e=ui(t);return e.invert=ui(-t),e}function li(t,e){function n(t,e){var n=om(e),s=om(t)*n,u=lm(t)*n,c=lm(e),l=c*r+s*i;return[im(u*o-l*a,s*r-c*i),Mr(l*o+u*a)]}var r=om(t),i=lm(t),o=om(e),a=lm(e);return n.invert=function(t,e){var n=om(e),s=om(t)*n,u=lm(t)*n,c=lm(e),l=c*o-u*a;return[im(u*o+c*a,s*r+l*i),Mr(l*r-s*i)]},n}function hi(t,e,n,r,i,o){if(n){var a=om(e),s=lm(e),u=r*n;null==i?(i=e+r*$g,o=e-u/2):(i=fi(a,i),o=fi(a,o),(r>0?i<o:i>o)&&(i+=r*$g));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Dr([a,-s*om(l),-s*lm(l)]),t.point(c[0],c[1])}}function fi(t,e){e=Ir(e),e[0]-=t,Fr(e);var n=wr(-e[1]);return((-e[2]<0?-n:n)+$g-Gg)%$g}function di(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pi(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function vi(t){return t.length>1}function gi(t,e){return((t=t.x)[0]<0?t[1]-Qg-Gg:Qg-t[1])-((e=e.x)[0]<0?e[1]-Qg-Gg:Qg-e[1])}function mi(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Zg:-Zg,u=nm(o-n);nm(u-Zg)<Gg?(t.point(n,r=(r+a)/2>0?Qg:-Qg),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Zg&&(nm(n-i)<Gg&&(n-=i*Gg),nm(o-s)<Gg&&(o-=s*Gg),r=yi(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function yi(t,e,n,r){var i,o,a=lm(t-n);return nm(a)>Gg?rm((lm(e)*(o=om(r))*lm(n)-lm(r)*(i=om(e))*lm(t))/(i*o*a)):(e+r)/2}function bi(t,e,n,r){var i;if(null==t)i=n*Qg,r.point(-Zg,i),r.point(0,i),r.point(Zg,i),r.point(Zg,0),r.point(Zg,-i),r.point(0,-i),r.point(-Zg,-i),r.point(-Zg,0),r.point(-Zg,i);else if(nm(t[0]-e[0])>Gg){var o=t[0]<e[0]?Zg:-Zg;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function _i(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return nm(r[0]-t)<Gg?i>0?0:3:nm(r[0]-n)<Gg?i>0?2:1:nm(r[1]-e)<Gg?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&E.point(t,e)}function c(){for(var e=0,n=0,i=g.length;n<i;++n)for(var o,a,s=g[n],u=1,c=s.length,l=s[0],h=l[0],f=l[1];u<c;++u)o=h,a=f,l=s[u],h=l[0],f=l[1],a<=r?f>r&&(h-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(h-o)*(r-a)<(f-a)*(t-o)&&--e;return e}function l(){E=O,v=[],g=[],k=!0}function h(){var t=c(),e=k&&t,n=(v=Al(v)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&Vm(v,s,t,o,a),a.polygonEnd()),E=a,v=g=m=null}function f(){T.point=p,g&&g.push(m=[]),S=!0,M=!1,x=w=NaN}function d(){v&&(p(y,b),_&&M&&O.rejoin(),v.push(O.result())),T.point=u,M&&E.lineEnd()}function p(o,a){var s=i(o,a);if(g&&m.push([o,a]),S)y=o,b=a,_=s,S=!1,s&&(E.lineStart(),E.point(o,a));else if(s&&M)E.point(o,a);else{var u=[x=Math.max(Qm,Math.min(Zm,x)),w=Math.max(Qm,Math.min(Zm,w))],c=[o=Math.max(Qm,Math.min(Zm,o)),a=Math.max(Qm,Math.min(Zm,a))];Gm(u,c,t,e,n,r)?(M||(E.lineStart(),E.point(u[0],u[1])),E.point(c[0],c[1]),s||E.lineEnd(),k=!1):s&&(E.lineStart(),E.point(o,a),k=!1)}x=o,w=a,M=s}var v,g,m,y,b,_,x,w,M,S,k,E=a,O=Hm(),T={point:u,lineStart:f,lineEnd:d,polygonStart:l,polygonEnd:h};return T}}function xi(){ty.point=Mi,ty.lineEnd=wi}function wi(){ty.point=ty.lineEnd=kr}function Mi(t,e){t*=em,e*=em,Tm=t,Cm=lm(e),zm=om(e),ty.point=Si}function Si(t,e){t*=em,e*=em;var n=lm(e),r=om(e),i=nm(t-Tm),o=om(i),a=lm(i),s=r*a,u=zm*n-Cm*r*o,c=Cm*n+zm*r*o;$m.add(im(fm(s*s+u*u),c)),Tm=t,Cm=n,zm=r}function ki(t,e){return!(!t||!ay.hasOwnProperty(t.type))&&ay[t.type](t,e)}function Ei(t,e){return 0===iy(t,e)}function Oi(t,e){var n=iy(t[0],t[1]);return iy(t[0],e)+iy(e,t[1])<=n+Gg}function Ti(t,e){return!!Wm(t.map(Ci),zi(e))}function Ci(t){return t=t.map(zi),t.pop(),t}function zi(t){return[t[0]*em,t[1]*em]}function Pi(t,e,n){var r=bl(t,e-Gg,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Ai(t,e,n){var r=bl(t,e-Gg,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Di(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return bl(am(o/g)*g,i,g).map(f).concat(bl(am(c/m)*m,u,m).map(d)).concat(bl(am(r/p)*p,n,p).filter(function(t){return nm(t%g)>Gg}).map(l)).concat(bl(am(s/v)*v,a,v).filter(function(t){return nm(t%m)>Gg}).map(h))}var n,r,i,o,a,s,u,c,l,h,f,d,p=10,v=p,g=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(d(u).slice(1),f(i).reverse().slice(1),d(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),t.precision(y)):[[o,c],[i,u]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.stepMinor=function(e){return arguments.length?(p=+e[0],v=+e[1],t):[p,v]},t.precision=function(e){return arguments.length?(y=+e,l=Pi(s,a,90),h=Ai(r,n,y),f=Pi(c,u,90),d=Ai(o,i,y),t):y},t.extentMajor([[-180,-90+Gg],[180,90-Gg]]).extentMinor([[-180,-80-Gg],[180,80+Gg]])}function Ii(){return Di()()}function ji(){fy.point=Ri}function Ri(t,e){fy.point=Li,Pm=Dm=t,Am=Im=e}function Li(t,e){hy.add(Im*t-Dm*e),Dm=t,Im=e}function Ni(){Li(Pm,Am)}function Fi(t,e){t<py&&(py=t),t>gy&&(gy=t),e<vy&&(vy=e),e>my&&(my=e)}function Bi(t,e){_y+=t,xy+=e,++wy}function Hi(){Cy.point=qi}function qi(t,e){Cy.point=Vi,Bi(Lm=t,Nm=e)}function Vi(t,e){var n=t-Lm,r=e-Nm,i=fm(n*n+r*r);My+=i*(Lm+t)/2,Sy+=i*(Nm+e)/2,ky+=i,Bi(Lm=t,Nm=e)}function Ui(){Cy.point=Bi}function Wi(){Cy.point=Xi}function Yi(){Ki(jm,Rm)}function Xi(t,e){Cy.point=Ki,Bi(jm=Lm=t,Rm=Nm=e)}function Ki(t,e){var n=t-Lm,r=e-Nm,i=fm(n*n+r*r);My+=i*(Lm+t)/2,Sy+=i*(Nm+e)/2,ky+=i,i=Nm*t-Lm*e,Ey+=i*(Lm+t),Oy+=i*(Nm+e),Ty+=3*i,Bi(Lm=t,Nm=e)}function Gi(t){this._context=t}function Zi(t,e){Ly.point=Qi,Ay=Iy=t,Dy=jy=e}function Qi(t,e){Iy-=t,jy-=e,Ry.add(fm(Iy*Iy+jy*jy)),Iy=t,jy=e}function Ji(){this._string=[]}function $i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function to(t){return function(e){var n=new eo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function eo(){}function no(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),gm(n,t.stream(by));var a=by.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function ro(t,e,n){return no(t,[[0,0],e],n)}function io(t){return to({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function oo(t,e){function n(r,i,o,a,s,u,c,l,h,f,d,p,v,g){var m=c-r,y=l-i,b=m*m+y*y;if(b>4*e&&v--){var _=a+f,x=s+d,w=u+p,M=fm(_*_+x*x+w*w),S=Mr(w/=M),k=nm(nm(w)-1)<Gg||nm(o-h)<Gg?(o+h)/2:im(x,_),E=t(k,S),O=E[0],T=E[1],C=O-r,z=T-i,P=y*C-m*z;(P*P/b>e||nm((m*C+y*z)/b-.5)>.3||a*f+s*d+u*p<qy)&&(n(r,i,o,a,s,u,O,T,k,_/=M,x/=M,w,v,g),g.point(O,T),n(O,T,k,_,x,w,c,l,h,f,d,p,v,g))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,w.point=o,e.lineStart()}function o(r,i){var o=Ir([r,i]),a=t(r,i);n(m,y,g,b,_,x,m=a[0],y=a[1],g=r,b=o[0],_=o[1],x=o[2],Hy,e),e.point(m,y)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(l=t,e),h=m,f=y,d=b,p=_,v=x,w.point=o}function c(){n(m,y,g,b,_,x,h,f,l,d,p,v,Hy,e),w.lineEnd=a,a()}var l,h,f,d,p,v,g,m,y,b,_,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function ao(t){return to({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function so(t){return uo(function(){return t})()}function uo(t){function e(t){return t=l(t[0]*em,t[1]*em),[t[0]*g+s,u-t[1]*g]}function n(t){return(t=l.invert((t[0]-s)/g,(u-t[1])/g))&&[t[0]*tm,t[1]*tm]}function r(t,e){return t=a(t,e),[t[0]*g+s,u-t[1]*g]}function i(){l=Om(c=si(x,w,M),a);var t=a(b,_);return s=m-t[0]*g,u=y+t[1]*g,o()}function o(){return p=v=null,e}var a,s,u,c,l,h,f,d,p,v,g=150,m=480,y=250,b=0,_=0,x=0,w=0,M=0,S=null,k=Xm,E=null,O=cy,T=.5,C=Vy(r,T);return e.stream=function(t){return p&&v===t?p:p=Uy(ao(c)(k(C(O(v=t)))))},e.preclip=function(t){return arguments.length?(k=t,S=void 0,o()):k},e.postclip=function(t){return arguments.length?(O=t,E=h=f=d=null,o()):O},e.clipAngle=function(t){return arguments.length?(k=+t?Km(S=t*em):(S=null,Xm),o()):S*tm},e.clipExtent=function(t){return arguments.length?(O=null==t?(E=h=f=d=null,cy):_i(E=+t[0][0],h=+t[0][1],f=+t[1][0],d=+t[1][1]),o()):null==E?null:[[E,h],[f,d]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(b=t[0]%360*em,_=t[1]%360*em,i()):[b*tm,_*tm]},e.rotate=function(t){return arguments.length?(x=t[0]%360*em,w=t[1]%360*em,M=t.length>2?t[2]%360*em:0,i()):[x*tm,w*tm,M*tm]},e.precision=function(t){return arguments.length?(C=Vy(r,T=t*t),o()):fm(T)},e.fitExtent=function(t,n){return no(e,t,n)},e.fitSize=function(t,n){return ro(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function co(t){var e=0,n=Zg/3,r=uo(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*em,n=t[1]*em):[e*tm,n*tm]},i}function lo(t){function e(t,e){return[t*n,lm(e)/n]}var n=om(t);return e.invert=function(t,e){return[t/n,Mr(e*n)]},e}function ho(t,e){function n(t,e){var n=fm(o-2*i*lm(e))/i;return[n*lm(t*=i),a-n*om(t)]}var r=lm(t),i=(r+lm(e))/2;if(nm(i)<Gg)return lo(t);var o=1+r*(2*i-r),a=fm(o)/i;return n.invert=function(t,e){var n=a-e;return[im(t,nm(n))/i*hm(n),Mr((o-(t*t+n*n)*i*i)/(2*i))]},n}function fo(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function po(t){return function(e,n){var r=om(e),i=om(n),o=t(r*i);return[o*i*lm(e),o*lm(n)]}}function vo(t){return function(e,n){var r=fm(e*e+n*n),i=t(r),o=lm(i),a=om(i);return[im(e*o,r*a),Mr(r&&n*o/r)]}}function go(t,e){return[t,um(dm((Qg+e)/2))]}function mo(t){function e(){var e=Zg*s(),a=o(Fm(o.rotate()).invert([0,0]));return c(null==l?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===go?[[Math.max(a[0]-e,l),n],[Math.min(a[0]+e,r),i]]:[[l,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=so(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}function yo(t){return dm((Qg+t)/2)}function bo(t,e){function n(t,e){o>0?e<-Qg+Gg&&(e=-Qg+Gg):e>Qg-Gg&&(e=Qg-Gg);var n=o/cm(yo(e),i);return[n*lm(i*t),o-n*om(i*t)]}var r=om(t),i=t===e?lm(t):um(r/om(e))/um(yo(e)/yo(t)),o=r*cm(yo(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=hm(i)*fm(t*t+n*n);return[im(t,nm(n))/i*hm(n),2*rm(cm(o/r,1/i))-Qg]},n):go}function _o(t,e){return[t,e]}function xo(t,e){function n(t,e){var n=o-e,r=i*t;return[n*lm(r),o-n*om(r)]}var r=om(t),i=t===e?lm(t):(r-om(e))/(e-t),o=r/i+t;return nm(i)<Gg?_o:(n.invert=function(t,e){var n=o-e;return[im(t,nm(n))/i*hm(n),o-hm(i)*fm(t*t+n*n)]},n)}function wo(t,e){var n=om(e),r=om(t)*n;return[n*lm(t)/r,lm(e)/r]}function Mo(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?cy:to({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function So(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ko(t,e){return[om(e)*lm(t),lm(e)]}function Eo(t,e){var n=om(e),r=1+om(t)*n;return[n*lm(t)/r,lm(e)/r]}function Oo(t,e){return[um(dm((Qg+e)/2)),-t]}function To(t,e){return t.parent===e.parent?1:2}function Co(t){return t.reduce(zo,0)/t.length}function zo(t,e){return t+e.x}function Po(t){return 1+t.reduce(Ao,0)}function Ao(t,e){return Math.max(t,e.y)}function Do(t){for(var e;e=t.children;)t=e[0];return t}function Io(t){for(var e;e=t.children;)t=e[e.length-1];return t}function jo(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Ro(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Lo(t,e){var n,r,i,o,a,s=new qo(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=Fo);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new qo(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Ho)}function No(){return Lo(this).eachBefore(Bo)}function Fo(t){return t.children}function Bo(t){t.data=t.data.data}function Ho(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function qo(t){this.data=t,this.depth=this.height=0,this.parent=null}function Vo(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}function Uo(t,e){var n,r;if(Xo(e,t))return[e];for(n=0;n<t.length;++n)if(Wo(e,t[n])&&Xo(Zo(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Wo(Zo(t[n],t[r]),e)&&Wo(Zo(t[n],e),t[r])&&Wo(Zo(t[r],e),t[n])&&Xo(Qo(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Wo(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Yo(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Xo(t,e){for(var n=0;n<e.length;++n)if(!Yo(t,e[n]))return!1;return!0}function Ko(t){switch(t.length){case 1:return Go(t[0]);case 2:return Zo(t[0],t[1]);case 3:return Qo(t[0],t[1],t[2])}}function Go(t){return{x:t.x,y:t.y,r:t.r}}function Zo(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function Qo(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,d=r-c,p=i-s,v=i-l,g=u-o,m=h-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,_=y-c*c-l*l+h*h,x=d*p-f*v,w=(p*_-v*b)/(2*x)-r,M=(v*g-p*m)/x,S=(d*b-f*_)/(2*x)-i,k=(f*m-d*g)/x,E=M*M+k*k-1,O=2*(o+w*M+S*k),T=w*w+S*S-o*o,C=-(E?(O+Math.sqrt(O*O-4*E*T))/(2*E):T/O);return{x:r+w+M*C,y:i+S+k*C,r:C}}function Jo(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((a*=a)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=r+l*s+h*u,n.y=i+l*u-h*s}else n.x=r+a,n.y=i}function $o(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function ta(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function ea(t){this._=t,this.next=null,this.previous=null}function na(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,h;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Jo(n,e,r=t[2]),e=new ea(e),n=new ea(n),r=new ea(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Jo(e._,n._,r=t[s]),r=new ea(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do{if(l<=h){if($o(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if($o(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=ta(e);(r=r.next)!==n;)(a=ta(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=xb(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function ra(t){return null==t?null:ia(t)}function ia(t){if("function"!=typeof t)throw new Error;return t}function oa(){return 0}function aa(t){return Math.sqrt(t.value)}function sa(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function ua(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=na(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function ca(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function la(t){return t.id}function ha(t){return t.parentId}function fa(t,e){return t.parent===e.parent?1:2}function da(t){var e=t.children;return e?e[0]:t.t}function pa(t){var e=t.children;return e?e[e.length-1]:t.t}function va(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ga(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function ma(t,e,n){return t.a.parent===e.parent?t.a:n}function ya(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ba(t){for(var e,n,r,i,o,a=new ya(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new ya(r[i],i)),n.parent=e;return(a.parent=new ya(null,0)).children=[a],a}function _a(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,d,p,v,g,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){u=i-n,c=o-r;do{l=y[_++].value}while(!l&&_<x);for(h=f=l,v=Math.max(c/u,u/c)/(w*t),g=l*l*v,p=Math.max(f/g,g/h);_<x;++_){if(l+=s=y[_].value,s<h&&(h=s),s>f&&(f=s),g=l*l*v,(d=Math.max(f/g,g/h))>p){l-=s;break}p=d}m.push(a={value:l,dice:u<c,children:y.slice(b,_)}),a.dice?Eb(a,n,r,i,w?r+=c*l/w:o):Db(a,n,r,w?n+=u*l/w:i,o),w-=l,b=_}return m}function xa(t,e){return t[0]-e[0]||t[1]-e[1]}function wa(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&qb(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ma(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Sa(t){if(!t._start)try{ka(t)}catch(e){if(t._tasks[t._ended+t._active-1])Oa(t,e);else if(!t._data)throw e}}function ka(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Ea(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Xb)}}function Ea(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Oa(t,n):(t._data[e]=r,t._waiting?Sa(t):Ta(t))))}}function Oa(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,Ta(t)}function Ta(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Ca(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Ma(t)}function za(t){return function(e,n){t(null==e?n:null)}}function Pa(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Aa(t,e){return function(n){return t(n.responseText,e)}}function Da(t){function e(e){var o=e+"",a=n.get(o);if(!a){if(i!==d_)return i;n.set(o,a=r.push(e))}return t[(a-1)%t.length]}var n=nv(),r=[],i=d_;return t=null==t?[]:f_.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=nv();for(var i,o,a=-1,s=t.length;++a<s;)n.has(o=(i=t[a])+"")||n.set(o,r.push(i));return e},e.range=function(n){return arguments.length?(t=f_.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return Da().domain(r).range(t).unknown(i)},e}function Ia(){function t(){var t=i().length,r=a[1]<a[0],h=a[r-0],f=a[1-r];e=(f-h)/Math.max(1,t-u+2*c),s&&(e=Math.floor(e)),h+=(f-h-e*(t-u))*l,n=e*(1-u),s&&(h=Math.round(h),n=Math.round(n));var d=bl(t).map(function(t){return h+e*t});return o(r?d.reverse():d)}var e,n,r=Da().unknown(void 0),i=r.domain,o=r.range,a=[0,1],s=!1,u=0,c=0,l=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a.slice()},r.rangeRound=function(e){return a=[+e[0],+e[1]],s=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,t()):s},r.padding=function(e){return arguments.length?(u=c=Math.max(0,Math.min(1,e)),t()):u},r.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},r.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.copy=function(){return Ia().domain(i()).range(a).round(s).paddingInner(u).paddingOuter(c).align(l)},t()}function ja(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ja(e())},t}function Ra(){return ja(Ia().paddingInner(1))}function La(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:p_(e)}function Na(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function Fa(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function Ba(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function Ha(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=al(t,e,1,i)-1;return a[n](o[n](e))}}function qa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Va(t,e){function n(){return i=Math.min(s.length,u.length)>2?Ha:Ba,o=a=null,r}function r(e){return(o||(o=i(s,u,l?Na(t):t,c)))(+e)}var i,o,a,s=g_,u=g_,c=Kf,l=!1;return r.invert=function(t){return(a||(a=i(u,s,La,l?Fa(e):e)))(+t)},r.domain=function(t){return arguments.length?(s=h_.call(t,v_),n()):s.slice()},r.range=function(t){return arguments.length?(u=f_.call(t),n()):u.slice()},r.rangeRound=function(t){return u=f_.call(t),c=Gf,n()},r.clamp=function(t){return arguments.length?(l=!!t,n()):l},r.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function Ua(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ml(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return m_(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,s=i.length-1,u=i[a],c=i[s];return c<u&&(r=u,u=c,c=r,r=a,a=s,s=r),r=o(u,c,n),r>0?(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,r=o(u,c,n)):r<0&&(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,r=o(u,c,n)),r>0?(i[a]=Math.floor(u/r)*r,i[s]=Math.ceil(c/r)*r,e(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[s]=Math.floor(c*r)/r,e(i)),t},t}function Wa(){var t=Va(La,Vf);return t.copy=function(){return qa(t,Wa())},Ua(t)}function Ya(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=h_.call(n,v_),t):e.slice()},t.copy=function(){return Ya().domain(e)},Ua(t)}function Xa(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:p_(e)}function Ka(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Ga(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Za(t){return 10===t?Ga:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Qa(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Ja(t){return function(e){return-t(-e)}}function $a(){function t(){return i=Qa(r),o=Za(r),n()[0]<0&&(i=Ja(i),o=Ja(o)),e}var e=Va(Xa,Ka).domain([1,10]),n=e.domain,r=10,i=Qa(10),o=Za(10);return e.base=function(e){return arguments.length?(r=+e,t()):r},e.domain=function(e){return arguments.length?(n(e),t()):n()},e.ticks=function(t){var e,a=n(),s=a[0],u=a[a.length-1];(e=u<s)&&(f=s,s=u,u=f);var c,l,h,f=i(s),d=i(u),p=null==t?10:+t,v=[];if(!(r%1)&&d-f<p){if(f=Math.round(f)-1,d=Math.round(d)+1,s>0){for(;f<d;++f)for(l=1,c=o(f);l<r;++l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}}else for(;f<d;++f)for(l=r-1,c=o(f);l>=1;--l)if(!((h=c*l)<s)){if(h>u)break;v.push(h)}}else v=Ml(f,d,Math.min(d-f,p)).map(o);return e?v.reverse():v},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=ug(n)),t===1/0)return n;null==t&&(t=10);var a=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=a?n(t):""}},e.nice=function(){return n(y_(n(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},e.copy=function(){return qa(e,$a().base(r))},e}function ts(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function es(){function t(t,e){return(e=ts(e,n)-(t=ts(t,n)))?function(r){return(ts(r,n)-t)/e}:p_(e)}function e(t,e){return e=ts(e,n)-(t=ts(t,n)),function(r){return ts(t+e*r,1/n)}}var n=1,r=Va(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return qa(r,es().exponent(n))},Ua(r)}function ns(){return es().exponent(.5)}function rs(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=El(n,t/o);return e}function e(t){if(!isNaN(t=+t))return r[al(i,t)]}var n=[],r=[],i=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=e.length;i<o;++i)null==(r=e[i])||isNaN(r=+r)||n.push(r);return n.sort(el),t()},e.range=function(e){return arguments.length?(r=f_.call(e),t()):r.slice()},e.quantiles=function(){return i.slice()},e.copy=function(){return rs().domain(n).range(r)},e}function is(){function t(t){if(t<=t)return a[al(o,t,0,i)]}function e(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,o=[.5],a=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(a=f_.call(t)).length-1,e()):a.slice()},t.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},t.copy=function(){return is().domain([n,r]).range(a)},Ua(t)}function os(){function t(t){if(t<=t)return n[al(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=f_.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=f_.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return os().domain(e).range(n)},t}function as(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<r);return a},i.filter=function(n){return as(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return b_.setTime(+e),__.setTime(+r),t(b_),t(__),Math.floor(n(b_,__))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}function ss(t){return as(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*S_)/k_})}function us(t){return as(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/k_})}function cs(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ls(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hs(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function fs(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Nx[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function n(t,e){return function(n){var i=hs(1900);if(r(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var o="Z"in i?ls(hs(i.y)).getUTCDay():e(hs(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,ls(i)):e(i)}}function r(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=q[i in Nx?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=z.exec(e.slice(n));return r?(t.p=P[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=I.exec(e.slice(n));return r?(t.w=j[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=A.exec(e.slice(n));return r?(t.w=D[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=N.exec(e.slice(n));return r?(t.m=F[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=R.exec(e.slice(n));return r?(t.m=L[r[0].toLowerCase()],n+r[0].length):-1}function c(t,e,n){return r(t,w,e,n)}function l(t,e,n){return r(t,M,e,n)}function h(t,e,n){return r(t,S,e,n)}function f(t){return O[t.getDay()]}function d(t){return E[t.getDay()]}function p(t){return C[t.getMonth()]}function v(t){return T[t.getMonth()]}function g(t){return k[+(t.getHours()>=12)]}function m(t){return O[t.getUTCDay()]}function y(t){return E[t.getUTCDay()]}function b(t){return C[t.getUTCMonth()]}function _(t){return T[t.getUTCMonth()]}function x(t){return k[+(t.getUTCHours()>=12)]}var w=t.dateTime,M=t.date,S=t.time,k=t.periods,E=t.days,O=t.shortDays,T=t.months,C=t.shortMonths,z=vs(k),P=gs(k),A=vs(E),D=gs(E),I=vs(O),j=gs(O),R=vs(T),L=gs(T),N=vs(C),F=gs(C),B={a:f,A:d,b:p,B:v,c:null,d:Ps,e:Ps,H:As,I:Ds,j:Is,L:js,m:Rs,M:Ls,p:g,S:Ns,U:Fs,w:Bs,W:Hs,x:null,X:null,y:qs,Y:Vs,Z:Us,"%":ou},H={a:m,A:y,b:b,B:_,c:null,d:Ws,e:Ws,H:Ys,I:Xs,j:Ks,L:Gs,m:Zs,M:Qs,p:x,S:Js,U:$s,w:tu,W:eu,x:null,X:null,y:nu,Y:ru,Z:iu,"%":ou},q={a:o,A:a,b:s,B:u,c:c,d:Ss,e:Ss,H:Es,I:Es,j:ks,L:Cs,m:Ms,M:Os,p:i,S:Ts,U:ys,w:ms,W:bs,x:l,X:h,y:xs,Y:_s,Z:ws,"%":zs};return B.x=e(M,B),B.X=e(S,B),B.c=e(w,B),H.x=e(M,H),H.X=e(S,H),H.c=e(w,H),{format:function(t){var n=e(t+="",B);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",cs);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",H);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,ls);return e.toString=function(){return t},e}}}function ds(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function ps(t){return t.replace(Hx,"\\$&")}function vs(t){return new RegExp("^(?:"+t.map(ps).join("|")+")","i")}function gs(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ms(t,e,n){var r=Fx.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ys(t,e,n){var r=Fx.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function bs(t,e,n){var r=Fx.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function _s(t,e,n){var r=Fx.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function xs(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ws(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ms(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ss(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ks(t,e,n){var r=Fx.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Es(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Os(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ts(t,e,n){var r=Fx.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Cs(t,e,n){var r=Fx.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zs(t,e,n){var r=Bx.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ps(t,e){return ds(t.getDate(),e,2)}function As(t,e){return ds(t.getHours(),e,2)}function Ds(t,e){return ds(t.getHours()%12||12,e,2)}function Is(t,e){return ds(1+R_.count(nx(t),t),e,3)}function js(t,e){return ds(t.getMilliseconds(),e,3)}function Rs(t,e){return ds(t.getMonth()+1,e,2)}function Ls(t,e){return ds(t.getMinutes(),e,2)}function Ns(t,e){return ds(t.getSeconds(),e,2)}function Fs(t,e){return ds(N_.count(nx(t),t),e,2)}function Bs(t){return t.getDay()}function Hs(t,e){return ds(F_.count(nx(t),t),e,2)}function qs(t,e){return ds(t.getFullYear()%100,e,2)}function Vs(t,e){return ds(t.getFullYear()%1e4,e,4)}function Us(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ds(e/60|0,"0",2)+ds(e%60,"0",2)}function Ws(t,e){return ds(t.getUTCDate(),e,2)}function Ys(t,e){return ds(t.getUTCHours(),e,2)}function Xs(t,e){return ds(t.getUTCHours()%12||12,e,2)}function Ks(t,e){return ds(1+hx.count(Rx(t),t),e,3)}function Gs(t,e){return ds(t.getUTCMilliseconds(),e,3)}function Zs(t,e){return ds(t.getUTCMonth()+1,e,2)}function Qs(t,e){return ds(t.getUTCMinutes(),e,2)}function Js(t,e){return ds(t.getUTCSeconds(),e,2)}function $s(t,e){return ds(dx.count(Rx(t),t),e,2)}function tu(t){return t.getUTCDay()}function eu(t,e){return ds(px.count(Rx(t),t),e,2)}function nu(t,e){return ds(t.getUTCFullYear()%100,e,2)}function ru(t,e){return ds(t.getUTCFullYear()%1e4,e,4)}function iu(){return"+0000"}function ou(){return"%"}function au(t){return Px=fs(t),Ax=Px.format,Dx=Px.parse,Ix=Px.utcFormat,jx=Px.utcParse,Px}function su(t){return t.toISOString()}function uu(t){var e=new Date(t);return isNaN(e)?null:e}function cu(t){return new Date(t)}function lu(t){return t instanceof Date?+t:+new Date(+t)}function hu(t,e,n,r,i,o,s,u,c){function l(a){return(s(a)<a?v:o(a)<a?g:i(a)<a?m:r(a)<a?y:e(a)<a?n(a)<a?b:_:t(a)<a?x:w)(a)}function h(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,s=nl(function(t){return t[2]}).right(M,o);s===M.length?(i=a(n/Jx,r/Jx,e),e=t):s?(s=M[o/M[s-1][2]<M[s][2]/o?s-1:s],i=s[1],e=s[0]):(i=a(n,r,e),e=u)}return null==i?e:e.every(i)}var f=Va(La,Vf),d=f.invert,p=f.domain,v=c(".%L"),g=c(":%S"),m=c("%I:%M"),y=c("%I %p"),b=c("%a %d"),_=c("%b %d"),x=c("%B"),w=c("%Y"),M=[[s,1,Yx],[s,5,5*Yx],[s,15,15*Yx],[s,30,30*Yx],[o,1,Xx],[o,5,5*Xx],[o,15,15*Xx],[o,30,30*Xx],[i,1,Kx],[i,3,3*Kx],[i,6,6*Kx],[i,12,12*Kx],[r,1,Gx],[r,2,2*Gx],[n,1,Zx],[e,1,Qx],[e,3,3*Qx],[t,1,Jx]];return f.invert=function(t){return new Date(d(t))},f.domain=function(t){return arguments.length?p(h_.call(t,lu)):p().map(cu)},f.ticks=function(t,e){var n,r=p(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=h(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?l:c(e)},f.nice=function(t,e){var n=p();return(t=h(t,n[0],n[n.length-1],e))?p(y_(n,t)):f},f.copy=function(){return qa(f,hu(t,e,n,r,i,o,s,u,c))},f}function fu(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function du(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return du(t).domain([n,r]).clamp(i)},Ua(e)}function pu(t){return t>1?0:t<-1?Sw:Math.acos(t)}function vu(t){return t>=1?kw:t<=-1?-kw:Math.asin(t)}function gu(t){return t.innerRadius}function mu(t){return t.outerRadius}function yu(t){return t.startAngle}function bu(t){return t.endAngle}function _u(t){return t&&t.padAngle}function xu(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=(l*(e-o)-h*(t-i))/(h*u-l*c);return[t+f*u,e+f*c]}function wu(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/ww(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,p=n+l,v=r+h,g=(f+p)/2,m=(d+v)/2,y=p-f,b=v-d,_=y*y+b*b,x=i-o,w=f*v-p*d,M=(b<0?-1:1)*ww(bw(0,x*x*_-w*w)),S=(w*b-y*M)/_,k=(-w*y-b*M)/_,E=(w*b+y*M)/_,O=(-w*y+b*M)/_,T=S-g,C=k-m,z=E-g,P=O-m;return T*T+C*C>z*z+P*P&&(S=E,k=O),{cx:S,cy:k,x01:-l,y01:-h,x11:S*(i/x-1),y11:k*(i/x-1)}}function Mu(t){this._context=t}function Su(t){return t[0]}function ku(t){return t[1]}function Eu(t){this._curve=t}function Ou(t){function e(e){return new Eu(t(e))}return e._curve=t,e}function Tu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Ou(t)):e()._curve},t}function Cu(t){return t.source}function zu(t){return t.target}function Pu(t){function e(){var e,s=Nw.call(arguments),u=n.apply(this,s),c=r.apply(this,s);if(a||(a=e=tv()),t(a,+i.apply(this,(s[0]=u,s)),+o.apply(this,s),+i.apply(this,(s[0]=c,s)),+o.apply(this,s)),e)return a=null,e+""||null}var n=Cu,r=zu,i=Su,o=ku,a=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(r=t,e):r},e.x=function(t){return arguments.length?(i="function"==typeof t?t:vw(+t),e):i},e.y=function(t){return arguments.length?(o="function"==typeof t?t:vw(+t),e):o},e.context=function(t){return arguments.length?(a=null==t?null:t,e):a},e}function Au(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Du(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function Iu(t,e,n,r,i){var o=Lw(e,n),a=Lw(e,n=(n+i)/2),s=Lw(r,n),u=Lw(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function ju(){return Pu(Au)}function Ru(){return Pu(Du)}function Lu(){var t=Pu(Iu);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}function Nu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Fu(t){this._context=t}function Bu(t){this._context=t}function Hu(t){this._context=t}function qu(t,e){this._basis=new Fu(t),this._beta=e}function Vu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Uu(t,e){this._context=t,this._k=(1-e)/6}function Wu(t,e){this._context=t,this._k=(1-e)/6}function Yu(t,e){this._context=t,this._k=(1-e)/6}function Xu(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Mw){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Mw){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Ku(t,e){this._context=t,this._alpha=e}function Gu(t,e){this._context=t,this._alpha=e}function Zu(t,e){this._context=t,this._alpha=e}function Qu(t){this._context=t}function Ju(t){return t<0?-1:1}function $u(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ju(o)+Ju(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function tc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ec(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function nc(t){this._context=t}function rc(t){this._context=new ic(t)}function ic(t){this._context=t}function oc(t){return new nc(t)}function ac(t){return new rc(t)}function sc(t){this._context=t}function uc(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function cc(t,e){this._context=t,this._t=e}function lc(t){return new cc(t,0)}function hc(t){return new cc(t,1)}function fc(t,e){return t[e]}function dc(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function pc(t){return t[0]}function vc(t){return t[1]}function gc(){this._=null}function mc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function yc(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function bc(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function _c(t){for(;t.L;)t=t.L;return t}function xc(t,e,n,r){var i=[null,null],o=DM.push(i)-1;return i.left=t,i.right=e,n&&Mc(i,t,e,n),r&&Mc(i,e,t,r),PM[t.index].halfedges.push(o),PM[e.index].halfedges.push(o),i}function wc(t,e,n){var r=[e,n];return r.left=t,r}function Mc(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Sc(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],h=s[1],f=0,d=1,p=l-u,v=h-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}if(o=n-c,v||!(o>0)){if(o/=v,v<0){if(o<f)return;o<d&&(d=o)}else if(v>0){if(o>d)return;o>f&&(f=o)}if(o=i-c,v||!(o<0)){if(o/=v,v<0){if(o>d)return;o>f&&(f=o)}else if(v>0){if(o<f)return;o<d&&(d=o)}return!(f>0||d<1)||(f>0&&(t[0]=[u+f*p,c+f*v]),d<1&&(t[1]=[u+d*p,c+d*v]),!0)}}}}}function kc(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],v=(h+d)/2,g=(f+p)/2;if(p===f){if(v<e||v>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=(h-d)/(p-f),s=g-a*v,a<-1||a>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Ec(t,e,n,r){for(var i,o=DM.length;o--;)kc(i=DM[o],t,e,n,r)&&Sc(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>LM||Math.abs(i[0][1]-i[1][1])>LM)||delete DM[o]}function Oc(t){return PM[t.index]={site:t,halfedges:[]}}function Tc(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Cc(t,e){return e[+(e.left!==t.site)]}function zc(t,e){return e[+(e.left===t.site)]}function Pc(){for(var t,e,n,r,i=0,o=PM.length;i<o;++i)if((t=PM[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Tc(t,DM[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function Ac(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,v,g=PM.length,m=!0;for(i=0;i<g;++i)if(o=PM[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)DM[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=zc(o,DM[u[s]]),p=d[0],v=d[1],l=Cc(o,DM[u[++s%c]]),h=l[0],f=l[1],(Math.abs(p-h)>LM||Math.abs(v-f)>LM)&&(u.splice(s,0,DM.push(wc(a,d,Math.abs(p-t)<LM&&r-v>LM?[t,Math.abs(h-t)<LM?f:r]:Math.abs(v-r)<LM&&n-p>LM?[Math.abs(f-r)<LM?h:n,r]:Math.abs(p-n)<LM&&v-e>LM?[n,Math.abs(h-n)<LM?f:e]:Math.abs(v-e)<LM&&p-t>LM?[Math.abs(f-e)<LM?h:t,e]:null))-1),++c);c&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<g;++i)(o=PM[i])&&(a=o.site,y=a[0]-t,b=a[1]-e,(_=y*y+b*b)<x&&(x=_,m=o));if(m){var w=[t,e],M=[t,r],S=[n,r],k=[n,e];m.halfedges.push(DM.push(wc(a=m.site,w,M))-1,DM.push(wc(a,M,S))-1,DM.push(wc(a,S,k))-1,DM.push(wc(a,k,w))-1)}}for(i=0;i<g;++i)(o=PM[i])&&(o.halfedges.length||delete PM[i])}function Dc(){mc(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ic(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-NM)){var d=u*u+c*c,p=l*l+h*h,v=(h*d-c*p)/f,g=(u*p-l*d)/f,m=jM.pop()||new Dc;m.arc=t,m.site=i,m.x=v+a,m.y=(m.cy=g+s)+Math.sqrt(v*v+g*g),t.circle=m;for(var y=null,b=AM._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}AM.insert(y,m),y||(CM=m)}}}}function jc(t){var e=t.circle;e&&(e.P||(CM=e.N),AM.remove(e),jM.push(e),mc(e),t.circle=null)}function Rc(){mc(this),this.edge=this.site=this.circle=null}function Lc(t){var e=RM.pop()||new Rc;return e.site=t,e}function Nc(t){jc(t),zM.remove(t),RM.push(t),mc(t)}function Fc(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Nc(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<LM&&Math.abs(r-u.circle.cy)<LM;)o=u.P,s.unshift(u),Nc(u),u=o;s.unshift(u),jc(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<LM&&Math.abs(r-c.circle.cy)<LM;)a=c.N,s.push(c),Nc(c),c=a;s.push(c),jc(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],Mc(c.edge,u.site,c.site,i);u=s[0],c=s[h-1],c.edge=xc(u.site,c.site,null,i),Ic(u),Ic(c)}function Bc(t){for(var e,n,r,i,o=t[0],a=t[1],s=zM._;s;)if((r=Hc(s,a)-o)>LM)s=s.L;else{if(!((i=o-qc(s,a))>LM)){r>-LM?(e=s.P,n=s):i>-LM?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}Oc(t);var u=Lc(t);if(zM.insert(e,u),e||n){if(e===n)return jc(e),n=Lc(e.site),zM.insert(u,n),u.edge=n.edge=xc(e.site,u.site),Ic(e),void Ic(n);if(!n)return void(u.edge=xc(e.site,u.site));jc(e),jc(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,d=t[1]-h,p=n.site,v=p[0]-l,g=p[1]-h,m=2*(f*g-d*v),y=f*f+d*d,b=v*v+g*g,_=[(g*y-d*b)/m+l,(f*b-v*y)/m+h];Mc(n.edge,c,p,_),u.edge=xc(c,t,null,_),n.edge=xc(t,p,null,_),Ic(e),Ic(n)}}function Hc(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function qc(t,e){var n=t.N;if(n)return Hc(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function Vc(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Uc(t,e){return e[1]-t[1]||e[0]-t[0]}function Wc(t,e){var n,r,i,o=t.sort(Uc).pop();for(DM=[],PM=new Array(t.length),zM=new IM,AM=new IM;;)if(i=CM,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Bc(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Fc(i.arc)}if(Pc(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];Ec(a,s,u,c),Ac(a,s,u,c)}this.edges=DM,this.cells=PM,zM=AM=DM=PM=null}function Yc(t,e,n){this.target=t,this.type=e,this.transform=n}function Xc(t,e,n){this.k=t,this.x=e,this.y=n}function Kc(t){return t.__zoom||HM}function Gc(){oh.stopImmediatePropagation()}function Zc(){return!oh.button}function Qc(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Jc(){return this.__zoom||HM}function $c(){return-oh.deltaY*(oh.deltaMode?120:1)/500}function tl(){return"ontouchstart"in this}Object.defineProperty(e,"__esModule",{value:!0});var el=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},nl=function(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},rl=nl(el),il=rl.right,ol=rl.left,al=il,sl=function(t,e){null==e&&(e=i);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return a},ul=function(t,e,n){var r,o,a,s,u=t.length,c=e.length,l=new Array(u*c);for(null==n&&(n=i),r=a=0;r<u;++r)for(s=t[r],o=0;o<c;++o,++a)l[a]=n(s,e[o]);return l},cl=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},ll=function(t){return null===t?NaN:+t},hl=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==e)for(;++a<i;)isNaN(n=ll(t[a]))||(r=n-s,s+=r/++o,u+=r*(n-s));else for(;++a<i;)isNaN(n=ll(e(t[a],a,t)))||(r=n-s,s+=r/++o,u+=r*(n-s));if(o>1)return u/(o-1)},fl=function(t,e){var n=hl(t,e);return n?Math.sqrt(n):n},dl=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},pl=Array.prototype,vl=pl.slice,gl=pl.map,ml=function(t){return function(){return t}},yl=function(t){return t},bl=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},_l=Math.sqrt(50),xl=Math.sqrt(10),wl=Math.sqrt(2),Ml=function(t,e,n){var r,i,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=o(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(t-u)/s;return r&&a.reverse(),a},Sl=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},kl=function(){function t(t){var i,o,s=t.length,u=new Array(s);for(i=0;i<s;++i)u[i]=e(t[i],i,t);var c=n(u),l=c[0],h=c[1],f=r(u,l,h);Array.isArray(f)||(f=a(l,h,f),f=bl(Math.ceil(l/f)*f,Math.floor(h/f)*f,f));for(var d=f.length;f[0]<=l;)f.shift(),--d;for(;f[d-1]>h;)f.pop(),--d;var p,v=new Array(d+1);for(i=0;i<=d;++i)p=v[i]=[],p.x0=i>0?f[i-1]:l,p.x1=i<d?f[i]:h;for(i=0;i<s;++i)o=u[i],l<=o&&o<=h&&v[al(f,o,0,d)].push(t[i]);return v}var e=yl,n=dl,r=Sl;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:ml(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:ml([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:ml(Array.isArray(e)?vl.call(e):e),t):r},t},El=function(t,e,n){if(null==n&&(n=ll),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},Ol=function(t,e,n){return t=gl.call(t,ll).sort(el),Math.ceil((n-e)/(2*(El(t,.75)-El(t,.25))*Math.pow(t.length,-1/3)))},Tl=function(t,e,n){return Math.ceil((n-e)/(3.5*fl(t)*Math.pow(t.length,-1/3)))},Cl=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},zl=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=ll(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=ll(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},Pl=function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=ll(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=ll(e(t[i],i,t)))||o.push(n);return El(o.sort(el),.5)},Al=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},Dl=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},Il=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},jl=function(t,e){if(n=t.length){var n,r,i=0,o=0,a=t[o];for(null==e&&(e=el);++i<n;)(e(r=t[i],a)<0||0!==e(a,a))&&(a=r,o=i);return 0===e(a,a)?o:void 0}},Rl=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},Ll=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},Nl=function(t){if(!(i=t.length))return[];for(var e=-1,n=Dl(t,s),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r},Fl=function(){return Nl(arguments)},Bl=Array.prototype.slice,Hl=function(t){return t},ql=1,Vl=2,Ul=3,Wl=4,Yl=1e-6,Xl={value:function(){}};b.prototype=y.prototype={constructor:b,on:function(t,e){var n,r=this._,i=_(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=w(r[n],t.name,e);else if(null==e)for(n in r)r[n]=w(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=x(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new b(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Kl=y,Gl="http://www.w3.org/1999/xhtml",Zl={svg:"http://www.w3.org/2000/svg",xhtml:Gl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ql=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Zl.hasOwnProperty(e)?{space:Zl[e],local:t}:t},Jl=function(t){var e=Ql(t);return(e.local?S:M)(e)},$l=0;E.prototype=k.prototype={constructor:E,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var th=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var eh=document.documentElement;if(!eh.matches){var nh=eh.webkitMatchesSelector||eh.msMatchesSelector||eh.mozMatchesSelector||eh.oMatchesSelector;th=function(t){return function(){return nh.call(this,t)}}}}var rh=th,ih={},oh=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(ih={mouseenter:"mouseover",mouseleave:"mouseout"})}var ah=function(t,e,n){var r,i,o=C(t+""),a=o.length;{if(!(arguments.length<2)){for(s=e?P:z,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}},sh=function(){for(var t,e=oh;t=e.sourceEvent;)e=t;return e},uh=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ch=function(t){var e=sh();return e.changedTouches&&(e=e.changedTouches[0]),uh(t,e)},lh=function(t){return null==t?D:function(){return this.querySelector(t)}},hh=function(t){"function"!=typeof t&&(t=lh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new bt(r,this._parents)},fh=function(t){return null==t?I:function(){return this.querySelectorAll(t)}},dh=function(t){"function"!=typeof t&&(t=fh(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new bt(r,i)},ph=function(t){"function"!=typeof t&&(t=rh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new bt(r,this._parents)},vh=function(t){return new Array(t.length)},gh=function(){return new bt(this._enter||this._groups.map(vh),this._parents)};j.prototype={constructor:j,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var mh=function(t){return function(){return t}},yh="$",bh=function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?L:R,r=this._parents,i=this._groups;"function"!=typeof t&&(t=mh(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,v=s[c]=new Array(p),g=a[c]=new Array(p);n(l,h,v,g,u[c]=new Array(f),d,e);for(var m,y,b=0,_=0;b<p;++b)if(m=v[b]){for(b>=_&&(_=b+1);!(y=g[_])&&++_<p;);m._next=y||null}}return a=new bt(a,r),a._enter=s,a._exit=u,a},_h=function(){return new bt(this._exit||this._groups.map(vh),this._parents)},xh=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new bt(a,this._parents)},wh=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Mh=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new bt(i,this._parents).order()},Sh=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},kh=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Eh=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},Oh=function(){var t=0;return this.each(function(){++t}),t},Th=function(){return!this.node()},Ch=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},zh=function(t,e){var n=Ql(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?B:F:"function"==typeof e?n.local?U:V:n.local?q:H)(n,e))},Ph=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Ah=function(t,e,n){return arguments.length>1?this.each((null==e?W:"function"==typeof e?X:Y)(t,e,null==n?"":n)):K(this.node(),t)},Dh=function(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?Q:Z)(t,e)):this.node()[t]};tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ih=function(t,e){var n=J(t+"");if(arguments.length<2){for(var r=$(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ot:e?rt:it)(n,e))},jh=function(t){return arguments.length?this.each(null==t?at:("function"==typeof t?ut:st)(t)):this.node().textContent},Rh=function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?ht:lt)(t)):this.node().innerHTML},Lh=function(){return this.each(ft)},Nh=function(){return this.each(dt)},Fh=function(t){var e="function"==typeof t?t:Jl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Bh=function(t,e){var n="function"==typeof t?t:Jl(t),r=null==e?pt:"function"==typeof e?e:lh(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},Hh=function(){return this.each(vt)},qh=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Vh=function(t,e){return this.each(("function"==typeof e?yt:mt)(t,e))},Uh=[null];bt.prototype=_t.prototype={constructor:bt,select:hh,selectAll:dh,filter:ph,data:bh,enter:gh,exit:_h,merge:xh,order:wh,sort:Mh,call:Sh,nodes:kh,node:Eh,size:Oh,empty:Th,each:Ch,attr:zh,style:Ah,property:Dh,classed:Ih,text:jh,html:Rh,raise:Lh,lower:Nh,append:Fh,insert:Bh,remove:Hh,datum:qh,on:ah,dispatch:Vh};var Wh=_t,Yh=function(t){return"string"==typeof t?new bt([[document.querySelector(t)]],[document.documentElement]):new bt([[t]],Uh)},Xh=function(t){return"string"==typeof t?new bt([document.querySelectorAll(t)],[document.documentElement]):new bt([null==t?[]:t],Uh)},Kh=function(t,e,n){arguments.length<3&&(n=e,e=sh().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return uh(t,r);return null},Gh=function(t,e){null==e&&(e=sh().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=uh(t,e[n]);return i},Zh=function(){oh.preventDefault(),oh.stopImmediatePropagation()},Qh=function(t){var e=t.document.documentElement,n=Yh(t).on("dragstart.drag",Zh,!0);"onselectstart"in e?n.on("selectstart.drag",Zh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},Jh=function(t){return function(){return t}};Mt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var $h=function(){function t(t){t.on("mousedown.drag",e).filter(v).on("touchstart.drag",i).on("touchmove.drag",o).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!h&&f.apply(this,arguments)){var t=s("mouse",d.apply(this,arguments),ch,this,arguments);t&&(Yh(oh.view).on("mousemove.drag",n,!0).on("mouseup.drag",r,!0),Qh(oh.view),xt(),l=!1,u=oh.clientX,c=oh.clientY,t("start"))}}function n(){if(Zh(),!l){var t=oh.clientX-u,e=oh.clientY-c;l=t*t+e*e>b}g.mouse("drag")}function r(){Yh(oh.view).on("mousemove.drag mouseup.drag",null),wt(oh.view,l),Zh(),g.mouse("end")}function i(){if(f.apply(this,arguments)){var t,e,n=oh.changedTouches,r=d.apply(this,arguments),i=n.length;for(t=0;t<i;++t)(e=s(n[t].identifier,r,Kh,this,arguments))&&(xt(),e("start"))}}function o(){var t,e,n=oh.changedTouches,r=n.length;for(t=0;t<r;++t)(e=g[n[t].identifier])&&(Zh(),e("drag"))}function a(){var t,e,n=oh.changedTouches,r=n.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),t=0;t<r;++t)(e=g[n[t].identifier])&&(xt(),e("end"))}function s(e,n,r,i,o){var a,s,u,c=r(n,e),l=m.copy();if(A(new Mt(t,"beforestart",a,e,y,c[0],c[1],0,0,l),function(){return null!=(oh.subject=a=p.apply(i,o))&&(s=a.x-c[0]||0,u=a.y-c[1]||0,!0)}))return function h(f){var d,p=c;switch(f){case"start":g[e]=h,d=y++;break;case"end":delete g[e],--y;case"drag":c=r(n,e),d=y}A(new Mt(t,f,a,e,d,c[0]+s,c[1]+u,c[0]-p[0],c[1]-p[1],l),l.apply,l,[f,i,o])}}var u,c,l,h,f=St,d=kt,p=Et,v=Ot,g={},m=Kl("start","drag","end"),y=0,b=0;return t.filter=function(e){return arguments.length?(f="function"==typeof e?e:Jh(!!e),t):f},t.container=function(e){return arguments.length?(d="function"==typeof e?e:Jh(e),t):d},t.subject=function(e){return arguments.length?(p="function"==typeof e?e:Jh(e),t):p},t.touchable=function(e){return arguments.length?(v="function"==typeof e?e:Jh(!!e),t):v},t.on=function(){var e=m.on.apply(m,arguments);return e===m?t:e},t.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,t):Math.sqrt(b)},t},tf=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},ef="\\s*([+-]?\\d+)\\s*",nf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",of=/^#([0-9a-f]{3})$/,af=/^#([0-9a-f]{6})$/,sf=new RegExp("^rgb\\("+[ef,ef,ef]+"\\)$"),uf=new RegExp("^rgb\\("+[rf,rf,rf]+"\\)$"),cf=new RegExp("^rgba\\("+[ef,ef,ef,nf]+"\\)$"),lf=new RegExp("^rgba\\("+[rf,rf,rf,nf]+"\\)$"),hf=new RegExp("^hsl\\("+[nf,rf,rf]+"\\)$"),ff=new RegExp("^hsla\\("+[nf,rf,rf,nf]+"\\)$"),df={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tf(Ct,zt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),tf(jt,It,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new jt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new jt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),tf(Ft,Nt,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ft(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ft(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new jt(Bt(t>=240?t-240:t+120,i,r),Bt(t,i,r),Bt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var pf=Math.PI/180,vf=180/Math.PI,gf=.95047,mf=1,yf=1.08883,bf=4/29,_f=6/29,xf=3*_f*_f,wf=_f*_f*_f;tf(Vt,qt,Tt(Ct,{brighter:function(t){return new Vt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Vt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=mf*Wt(t),e=gf*Wt(e),n=yf*Wt(n),new jt(Yt(3.2404542*e-1.5371385*t-.4985314*n),Yt(-.969266*e+1.8760108*t+.041556*n),Yt(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),tf(Zt,Gt,Tt(Ct,{brighter:function(t){return new Zt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Zt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ht(this).rgb()}}));var Mf=-.29227,Sf=-.90649,kf=1.97294,Ef=kf*Sf,Of=1.78277*kf,Tf=1.78277*Mf- -.14861*Sf;tf($t,Jt,Tt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*pf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new jt(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Mf*r+Sf*i)),255*(e+n*(kf*r)),this.opacity)}}));var Cf,zf,Pf,Af,Df,If,jf=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return te((n-r/e)*e,a,i,o,s)}},Rf=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return te((n-r/e)*e,i,o,a,s)}},Lf=function(t){return function(){return t}},Nf=function t(e){function n(t,e){var n=r((t=It(t)).r,(e=It(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=oe(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}var r=ie(e);return n.gamma=t,n}(1),Ff=ae(jf),Bf=ae(Rf),Hf=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=Kf(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},qf=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},Vf=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},Uf=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=Kf(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yf=new RegExp(Wf.source,"g"),Xf=function(t,e){var n,r,i,o=Wf.lastIndex=Yf.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Wf.exec(t))&&(r=Yf.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Vf(n,r)})),o=Yf.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?ue(u[0].x):se(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Kf=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Lf(e):("number"===r?Vf:"string"===r?(n=zt(e))?(e=n,Nf):Xf:e instanceof zt?Nf:e instanceof Date?qf:Array.isArray(e)?Hf:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Uf:Vf)(t,e)},Gf=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},Zf=180/Math.PI,Qf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Jf=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Zf,skewX:Math.atan(u)*Zf,scaleX:a,scaleY:s}},$f=he(ce,"px, ","px)","deg)"),td=he(le,", ",")",")"),ed=Math.SQRT2,nd=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<1e-12)r=Math.log(c/a)/ed,n=function(t){return[i+t*l,o+t*h,a*Math.exp(ed*t*r)]};else{var d=Math.sqrt(f),p=(c*c-a*a+4*f)/(2*a*2*d),v=(c*c-a*a-4*f)/(2*c*2*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/ed,n=function(t){var e=t*r,n=fe(g),s=a/(2*d)*(n*pe(ed*e+g)-de(g));return[i+s*l,o+s*h,a*n/fe(ed*e+g)]}}return n.duration=1e3*r,n},rd=ve(re),id=ve(oe),od=me(re),ad=me(oe),sd=ye(re),ud=ye(oe),cd=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},ld=0,hd=0,fd=0,dd=1e3,pd=0,vd=0,gd=0,md="object"==typeof performance&&performance.now?performance:Date,yd="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};xe.prototype=we.prototype={constructor:xe,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?be():+n)+(null==e?0:+e),this._next||If===this||(If?If._next=this:Df=this,If=this),this._call=t,this._time=n,Oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oe())}};var bd=function(t,e,n){var r=new xe;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},_d=function(t,e,n){var r=new xe,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?be():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)},xd=Kl("start","end","interrupt"),wd=[],Md=0,Sd=1,kd=2,Ed=3,Od=4,Td=5,Cd=6,zd=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};Pe(t,n,{name:e,index:r,group:i,on:xd,tween:wd,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Md})},Pd=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>kd&&n.state<Td,n.state=Cd,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Ad=function(t){return this.each(function(){Pd(this,t)})},Dd=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ze(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Ae:De)(n,t,e))},Id=function(t,e){var n;return("number"==typeof e?Vf:e instanceof zt?Nf:(n=zt(e))?(e=n,Nf):Xf)(t,e)},jd=function(t,e){var n=Ql(t),r="transform"===n?td:Id;return this.attrTween(t,"function"==typeof e?(n.local?Be:Fe)(n,r,Ie(this,"attr."+t,e)):null==e?(n.local?Re:je)(n):(n.local?Ne:Le)(n,r,e+""))},Rd=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Ql(t);return this.tween(n,(r.local?He:qe)(r,e))},Ld=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ve:Ue)(e,t)):ze(this.node(),e).delay},Nd=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?We:Ye)(e,t)):ze(this.node(),e).duration},Fd=function(t){var e=this._id;return arguments.length?this.each(Xe(e,t)):ze(this.node(),e).ease},Bd=function(t){"function"!=typeof t&&(t=rh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new on(r,this._parents,this._name,this._id)},Hd=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new on(a,this._parents,this._name,this._id)},qd=function(t,e){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(t):this.each(Ge(n,t,e))},Vd=function(){return this.on("end.remove",Ze(this._id))},Ud=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=lh(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=c[f])&&(u=t.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,zd(h[f],e,n,f,h,ze(s,n)));return new on(o,this._parents,e,n)},Wd=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=fh(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,d=t.call(u,u.__data__,h,c),p=ze(u,n),v=0,g=d.length;v<g;++v)(f=d[v])&&zd(f,e,n,v,d,p);o.push(d),a.push(u)}return new on(o,a,e,n)},Yd=Wh.prototype.constructor,Xd=function(){return new Yd(this._groups,this._parents)},Kd=function(t,e,n){var r="transform"==(t+="")?$f:Id;return null==e?this.styleTween(t,Qe(t,r)).on("end.style."+t,Je(t)):this.styleTween(t,"function"==typeof e?tn(t,r,Ie(this,"style."+t,e)):$e(t,r,e+""),n)},Gd=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,en(t,e,null==n?"":n))},Zd=function(t){return this.tween("text","function"==typeof t?rn(Ie(this,"text",t)):nn(null==t?"":t+""))},Qd=function(){for(var t=this._name,e=this._id,n=sn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=ze(a,e);zd(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new on(r,this._parents,t,n)},Jd=0,$d=Wh.prototype;on.prototype=an.prototype={constructor:on,select:Ud,selectAll:Wd,filter:Bd,merge:Hd,selection:Xd,transition:Qd,call:$d.call,nodes:$d.nodes,node:$d.node,size:$d.size,empty:$d.empty,each:$d.each,on:qd,attr:jd,attrTween:Rd,style:Kd,styleTween:Gd,text:Zd,remove:Vd,tween:Dd,delay:Ld,duration:Nd,ease:Fd};var tp=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),ep=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),np=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),rp=Math.PI,ip=rp/2,op=4/11,ap=6/11,sp=8/11,up=.75,cp=9/11,lp=10/11,hp=.9375,fp=21/22,dp=63/64,pp=1/op/op,vp=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),gp=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),mp=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),yp=2*Math.PI,bp=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=yp);return r.amplitude=function(e){return t(e,n*yp)},r.period=function(n){return t(e,n)},r}(1,.3),_p=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=yp);return r.amplitude=function(e){return t(e,n*yp)},r.period=function(n){return t(e,n)},r}(1,.3),xp=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=yp);return r.amplitude=function(e){return t(e,n*yp)},r.period=function(n){return t(e,n)},r}(1,.3),wp={time:null,delay:0,duration:250,ease:pn},Mp=function(t){var e,n;t instanceof on?(e=t._id,t=t._name):(e=sn(),(n=wp).time=be(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&zd(a,t,e,c,s,n||On(a,e));return new on(r,this._parents,t,e)};Wh.prototype.interrupt=Ad,Wh.prototype.transition=Mp;var Sp=[null],kp=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>Sd&&n.name===e)return new on([[t]],Sp,e,+r)}return null},Ep=function(t){return function(){return t}},Op=function(t,e,n){this.target=t,this.type=e,this.selection=n},Tp=function(){oh.preventDefault(),oh.stopImmediatePropagation()},Cp={name:"drag"},zp={name:"space"},Pp={name:"handle"},Ap={name:"center"},Dp={name:"x",handles:["e","w"].map(Cn),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ip={name:"y",handles:["n","s"].map(Cn),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},jp={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Cn),input:function(t){return t},output:function(t){return t}},Rp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lp={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Np={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fp={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Bp={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Hp=function(){return Ln(jp)},qp=Math.cos,Vp=Math.sin,Up=Math.PI,Wp=Up/2,Yp=2*Up,Xp=Math.max,Kp=function(){function t(t){var o,a,s,u,c,l,h=t.length,f=[],d=bl(h),p=[],v=[],g=v.groups=new Array(h),m=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,l=-1;++l<h;)a+=t[c][l];f.push(a),p.push(bl(h)),o+=a}for(n&&d.sort(function(t,e){return n(f[t],f[e])}),r&&p.forEach(function(e,n){e.sort(function(e,i){return r(t[n][e],t[n][i])})}),o=Xp(0,Yp-e*h)/o,u=o?e:Yp/h,a=0,c=-1;++c<h;){for(s=a,l=-1;++l<h;){var y=d[c],b=p[y][l],_=t[y][b],x=a,w=a+=_*o;m[b*h+y]={index:y,subindex:b,startAngle:x,endAngle:w,value:_}}g[y]={index:y,startAngle:s,endAngle:a,value:f[y]},a+=u}for(c=-1;++c<h;)for(l=c-1;++l<h;){var M=m[l*h+c],S=m[c*h+l];(M.value||S.value)&&v.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}return i?v.sort(i):v}var e=0,n=null,r=null,i=null;return t.padAngle=function(n){return arguments.length?(e=Xp(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(r=e,t):r},t.sortChords=function(e){return arguments.length?(null==e?i=null:(i=Nn(e))._=e,t):i&&i._},t},Gp=Array.prototype.slice,Zp=function(t){return function(){return t}},Qp=Math.PI,Jp=2*Qp,$p=Jp-1e-6;Fn.prototype=Bn.prototype={constructor:Fn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var f=n-o,d=r-a,p=s*s+u*u,v=f*f+d*d,g=Math.sqrt(p),m=Math.sqrt(h),y=i*Math.tan((Qp-Math.acos((p+h-v)/(2*g*m)))/2),b=y/m,_=y/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*d)+","+(this._x1=t+_*s)+","+(this._y1=e+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Jp+Jp),h>$p?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Qp)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var tv=Bn,ev=function(){function t(){var t,s=Gp.call(arguments),u=e.apply(this,s),c=n.apply(this,s),l=+r.apply(this,(s[0]=u,s)),h=i.apply(this,s)-Wp,f=o.apply(this,s)-Wp,d=l*qp(h),p=l*Vp(h),v=+r.apply(this,(s[0]=c,s)),g=i.apply(this,s)-Wp,m=o.apply(this,s)-Wp;if(a||(a=t=tv()),a.moveTo(d,p),a.arc(0,0,l,h,f),h===g&&f===m||(a.quadraticCurveTo(0,0,v*qp(g),v*Vp(g)),a.arc(0,0,v,g,m)),a.quadraticCurveTo(0,0,d,p),a.closePath(),t)return a=null,t+""||null}var e=Hn,n=qn,r=Vn,i=Un,o=Wn,a=null;return t.radius=function(e){return arguments.length?(r="function"==typeof e?e:Zp(+e),t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Zp(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Zp(+e),t):o},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(a=null==e?null:e,t):a},t};Yn.prototype=Xn.prototype={constructor:Yn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var nv=Xn,rv=function(){function t(e,i,a,s){if(i>=o.length)return null!=n&&e.sort(n),null!=r?r(e):e;for(var u,c,l,h=-1,f=e.length,d=o[i++],p=nv(),v=a();++h<f;)(l=p.get(u=d(c=e[h])+""))?l.push(c):p.set(u,[c]);return p.each(function(e,n){s(v,n,t(e,i,a,s))}),v}function e(t,n){if(++n>o.length)return t;var i,s=a[n-1];return null!=r&&n>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=s?i.sort(function(t,e){return s(t.key,e.key)}):i}var n,r,i,o=[],a=[];return i={object:function(e){return t(e,0,Kn,Gn)},map:function(e){return t(e,0,Zn,Qn)},entries:function(n){return e(t(n,0,Zn,Qn),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return a[o.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}},iv=nv.prototype;Jn.prototype=$n.prototype={constructor:Jn,has:iv.has,add:function(t){return t+="",this["$"+t]=t,this},remove:iv.remove,clear:iv.clear,values:iv.keys,size:iv.size,empty:iv.empty,each:iv.each};var ov=$n,av=function(t){var e=[];for(var n in t)e.push(n);return e},sv=function(t){var e=[];for(var n in t)e.push(t[n]);return e},uv=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},cv={},lv={},hv=34,fv=10,dv=13,pv=function(t){function e(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?er(t,e):tr(t)});return o.columns=i,o}function n(t,e){function n(){if(c)return lv;if(l)return l=!1,cv;var e,n,r=a;if(t.charCodeAt(r)===hv){for(;a++<o&&t.charCodeAt(a)!==hv||t.charCodeAt(++a)===hv;);return(e=a)>=o?c=!0:(n=t.charCodeAt(a++))===fv?l=!0:n===dv&&(l=!0,t.charCodeAt(a)===fv&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<o;){if((n=t.charCodeAt(e=a++))===fv)l=!0;else if(n===dv)l=!0,t.charCodeAt(a)===fv&&++a;else if(n!==u)continue;return t.slice(r,e)}return c=!0,t.slice(r,o)}var r,i=[],o=t.length,a=0,s=0,c=o<=0,l=!1;for(t.charCodeAt(o-1)===fv&&--o,t.charCodeAt(o-1)===dv&&--o;(r=n())!==lv;){for(var h=[];r!==cv&&r!==lv;)h.push(r),r=n();e&&null==(h=e(h,s++))||i.push(h)}return i}function r(e,n){return null==n&&(n=nr(e)),[n.map(a).join(t)].concat(e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n\r]"),u=t.charCodeAt(0);return{parse:e,parseRows:n,format:r,formatRows:i}},vv=pv(","),gv=vv.parse,mv=vv.parseRows,yv=vv.format,bv=vv.formatRows,_v=pv("\t"),xv=_v.parse,wv=_v.parseRows,Mv=_v.format,Sv=_v.formatRows,kv=function(t,e){function n(){var n,i,o=r.length,a=0,s=0;for(n=0;n<o;++n)i=r[n],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,n=0;n<o;++n)i=r[n],i.x-=a,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},Ev=function(t){return function(){return t}},Ov=function(){return 1e-6*(Math.random()-.5)},Tv=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return rr(this.cover(e,n),e,n,t)},Cv=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{a=new Array(4),a[s]=c,c=a}while(u*=2,i=n+u,o=r+u,t>i||e>o);break;case 1:do{a=new Array(4),a[s]=c,c=a}while(u*=2,n=i-u,o=r+u,n>t||e>o);break;case 2:do{a=new Array(4),a[s]=c,c=a}while(u*=2,i=n+u,r=o-u,t>i||r>e);break;case 3:do{a=new Array(4),a[s]=c,c=a}while(u*=2,n=i-u,r=o-u,n>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},zv=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Pv=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Av=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},Dv=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Av(v,l,h,f,d)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>f||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<h))if(v.length){var g=(i+a)/2,m=(o+s)/2;p.push(new Av(v[3],g,m,a,s),new Av(v[2],i,m,g,s),new Av(v[1],g,o,a,m),new Av(v[0],i,o,g,m)),(c=(e>=m)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);l=t-x,h=e-x,f=t+x,d=e+x,r=v.data}}return r},Iv=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(l=a>=(u=(v+m)/2))?v=u:m=u,e=d,!(d=d[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},jv=function(){return this._root},Rv=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Lv=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Av(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new Av(n,c,l,o,a)),(n=u[2])&&s.push(new Av(n,r,l,c,a)),(n=u[1])&&s.push(new Av(n,c,i,o,l)),(n=u[0])&&s.push(new Av(n,r,i,c,l))}return this},Nv=function(t){var e,n=[],r=[];for(this._root&&n.push(new Av(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new Av(o,a,s,l,h)),(o=i[1])&&n.push(new Av(o,l,s,u,h)),(o=i[2])&&n.push(new Av(o,a,h,l,c)),(o=i[3])&&n.push(new Av(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Fv=function(t){return arguments.length?(this._x=t,this):this._x},Bv=function(t){return arguments.length?(this._y=t,this):this._y},Hv=ur.prototype=cr.prototype;Hv.copy=function(){var t,e,n=new cr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=lr(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=lr(e));return n},Hv.add=Tv,Hv.addAll=ir,Hv.cover=Cv,Hv.data=zv,Hv.extent=Pv,Hv.find=Dv,Hv.remove=Iv,Hv.removeAll=or,Hv.root=jv,Hv.size=Rv,Hv.visit=Lv,Hv.visitAfter=Nv,Hv.x=Fv,Hv.y=Bv;var qv,Vv=function(t){function e(){function t(t,e,n,r,i){var o=t.data,s=t.r,d=h+s;{if(!o)return e>c+d||r<c-d||n>l+d||i<l-d;if(o.index>u.index){var p=c-o.x-o.vx,v=l-o.y-o.vy,g=p*p+v*v;g<d*d&&(0===p&&(p=Ov(),g+=p*p),0===v&&(v=Ov(),g+=v*v),g=(d-(g=Math.sqrt(g)))/g*a,u.vx+=(p*=g)*(d=(s*=s)/(f+s)),u.vy+=(v*=g)*d,o.vx-=p*(d=1-d),o.vy-=v*d)}}}for(var e,r,u,c,l,h,f,d=i.length,p=0;p<s;++p)for(r=ur(i,hr,fr).visitAfter(n),e=0;e<d;++e)u=i[e],h=o[u.index],f=h*h,c=u.x+u.vx,l=u.y+u.vy,r.visit(t)}function n(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(i){var e,n,r=i.length;for(o=new Array(r),e=0;e<r;++e)n=i[e],o[n.index]=+t(n,e,i)}}var i,o,a=1,s=1;return"function"!=typeof t&&(t=Ev(null==t?1:+t)),e.initialize=function(t){i=t,r()},e.iterations=function(t){return arguments.length?(s=+t,e):s},e.strength=function(t){return arguments.length?(a=+t,e):a},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:Ev(+n),r(),e):t},e},Uv=function(t){function e(t){return 1/Math.min(c[t.source.index],c[t.target.index])}function n(e){for(var n=0,r=t.length;n<p;++n)for(var i,o,u,c,h,f,d,v=0;v<r;++v)i=t[v],o=i.source,u=i.target,c=u.x+u.vx-o.x-o.vx||Ov(),h=u.y+u.vy-o.y-o.vy||Ov(),f=Math.sqrt(c*c+h*h),f=(f-s[v])/f*e*a[v],c*=f,h*=f,u.vx-=c*(d=l[v]),u.vy-=h*d,o.vx+=c*(d=1-d),o.vy+=h*d}function r(){if(u){var e,n,r=u.length,f=t.length,d=nv(u,h);for(e=0,c=new Array(r);e<f;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=pr(d,n.source)),"object"!=typeof n.target&&(n.target=pr(d,n.target)),c[n.source.index]=(c[n.source.index]||0)+1,c[n.target.index]=(c[n.target.index]||0)+1;for(e=0,l=new Array(f);e<f;++e)n=t[e],l[e]=c[n.source.index]/(c[n.source.index]+c[n.target.index]);a=new Array(f),i(),s=new Array(f),o()}}function i(){if(u)for(var e=0,n=t.length;e<n;++e)a[e]=+f(t[e],e,t)}function o(){if(u)for(var e=0,n=t.length;e<n;++e)s[e]=+d(t[e],e,t)}var a,s,u,c,l,h=dr,f=e,d=Ev(30),p=1;return null==t&&(t=[]),n.initialize=function(t){u=t,r()},n.links=function(e){return arguments.length?(t=e,r(),n):t},n.id=function(t){return arguments.length?(h=t,n):h},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(f="function"==typeof t?t:Ev(+t),i(),n):f},n.distance=function(t){return arguments.length?(d="function"==typeof t?t:Ev(+t),o(),n):d},n},Wv=10,Yv=Math.PI*(3-Math.sqrt(5)),Xv=function(t){function e(){n(),d.call("tick",o),a<s&&(f.stop(),d.call("end",o))}function n(){var e,n,r=t.length;for(a+=(c-a)*u,h.each(function(t){t(a)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=Wv*Math.sqrt(n),o=n*Yv;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var o,a=1,s=.001,u=1-Math.pow(s,1/300),c=0,l=.6,h=nv(),f=we(e),d=Kl("tick","end");return null==t&&(t=[]),r(),o={tick:n,restart:function(){return f.restart(e),o},stop:function(){return f.stop(),o},nodes:function(e){return arguments.length?(t=e,r(),h.each(i),o):t},alpha:function(t){return arguments.length?(a=+t,o):a},alphaMin:function(t){return arguments.length?(s=+t,o):s},alphaDecay:function(t){return arguments.length?(u=+t,o):+u},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(l=1-t,o):1-l},force:function(t,e){return arguments.length>1?(null==e?h.remove(t):h.set(t,i(e)),o):h.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,o=n-s.y,(a=i*i+o*o)<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),o):d.on(t)}}},Kv=function(){function t(t){var e,s=i.length,u=ur(i,vr,gr).visitAfter(n);for(a=t,e=0;e<s;++e)o=i[e],u.visit(r)}function e(){if(i){var t,e,n=i.length;for(s=new Array(n),t=0;t<n;++t)e=i[t],s[e.index]=+u(e,t,i)}}function n(t){var e,n,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,r+=n*e.x,i+=n*e.y);t.x=r/u,t.y=i/u}else{e=t,e.x=e.data.x,e.y=e.data.y;do{a+=s[e.data.index]}while(e=e.next)}t.value=a}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-o.x,u=t.y-o.y,f=r-e,d=i*i+u*u;if(f*f/h<d)return d<l&&(0===i&&(i=Ov(),d+=i*i),0===u&&(u=Ov(),d+=u*u),d<c&&(d=Math.sqrt(c*d)),o.vx+=i*t.value*a/d,o.vy+=u*t.value*a/d),!0;if(!(t.length||d>=l)){(t.data!==o||t.next)&&(0===i&&(i=Ov(),d+=i*i),0===u&&(u=Ov(),d+=u*u),d<c&&(d=Math.sqrt(c*d)));do{t.data!==o&&(f=s[t.data.index]*a/d,o.vx+=i*f,o.vy+=u*f)}while(t=t.next)}}var i,o,a,s,u=Ev(-30),c=1,l=1/0,h=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:Ev(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.distanceMax=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},Gv=function(t,e,n){function r(t){for(var r=0,i=o.length;r<i;++r){var u=o[r],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l),f=(s[r]-h)*a[r]*t/h;u.vx+=c*f,u.vy+=l*f}}function i(){if(o){var e,n=o.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(o[e],e,o),a[e]=isNaN(s[e])?0:+u(o[e],e,o)}}var o,a,s,u=Ev(.1);return"function"!=typeof t&&(t=Ev(+t)),null==e&&(e=0),null==n&&(n=0),r.initialize=function(t){o=t,i()},r.strength=function(t){return arguments.length?(u="function"==typeof t?t:Ev(+t),i(),r):u},r.radius=function(e){return arguments.length?(t="function"==typeof e?e:Ev(+e),i(),r):t},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(t){return arguments.length?(n=+t,r):n},r},Zv=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vx+=(o[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=Ev(.1);return"function"!=typeof t&&(t=Ev(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Ev(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:Ev(+r),n(),e):t},e},Qv=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vy+=(o[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=Ev(.1);return"function"!=typeof t&&(t=Ev(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Ev(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:Ev(+r),n(),e):t},e},Jv=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},$v=function(t){return t=Jv(Math.abs(t)),t?t[1]:NaN},tg=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}},eg=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},ng=function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},rg=function(t,e){var n=Jv(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(qv=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jv(t,Math.max(0,e+o-1))[0]},ig=function(t,e){var n=Jv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},og={"":ng,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ig(100*t,e)},r:ig,s:rg,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ag=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;mr.prototype=yr.prototype,yr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var sg,ug,cg,lg=function(t){return t},hg=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],fg=function(t){function e(t){function e(t){var e,i,s,l=g,_=m;if("c"===v)_=y(t)+_,t="";else{t=+t;var x=t<0;if(t=y(Math.abs(t),p),x&&0==+t&&(x=!1),l=(x?"("===c?c:"-":"-"===c||"("===c?"":c)+l,_=_+("s"===v?hg[8+qv/3]:"")+(x&&"("===c?")":""),b)for(e=-1,i=t.length;++e<i;)if(48>(s=t.charCodeAt(e))||s>57){_=(46===s?o+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}d&&!h&&(t=r(t,1/0));var w=l.length+t.length+_.length,M=w<f?new Array(f-w+1).join(n):"";switch(d&&h&&(t=r(M+t,M.length?f-_.length:1/0),M=""),u){case"<":t=l+t+_+M;break;case"=":t=l+M+t+_;break;case"^":t=M.slice(0,w=M.length>>1)+l+t+_+M.slice(w);break;default:t=M+l+t+_}return a(t)}t=mr(t);var n=t.fill,u=t.align,c=t.sign,l=t.symbol,h=t.zero,f=t.width,d=t.comma,p=t.precision,v=t.type,g="$"===l?i[0]:"#"===l&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",m="$"===l?i[1]:/[%p]/.test(v)?s:"",y=og[v],b=!v||/[defgprs%]/.test(v);return p=null==p?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=mr(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor($v(n)/3))),o=Math.pow(10,-i),a=hg[8+i/3];return function(t){return r(o*t)+a}}var r=t.grouping&&t.thousands?tg(t.grouping,t.thousands):lg,i=t.currency,o=t.decimal,a=t.numerals?eg(t.numerals):lg,s=t.percent||"%";return{format:e,formatPrefix:n}};br({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var dg=function(t){return Math.max(0,-$v(Math.abs(t)))},pg=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($v(e)/3)))-$v(Math.abs(t)))},vg=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$v(e)-$v(t))+1},gg=function(){return new _r};_r.prototype={constructor:_r,reset:function(){this.s=this.t=0},add:function(t){xr(Kg,t,this.t),xr(this,Kg.s,this.s),this.s?this.t+=Kg.t:this.s=Kg.t},valueOf:function(){return this.s}};var mg,yg,bg,_g,xg,wg,Mg,Sg,kg,Eg,Og,Tg,Cg,zg,Pg,Ag,Dg,Ig,jg,Rg,Lg,Ng,Fg,Bg,Hg,qg,Vg,Ug,Wg,Yg,Xg,Kg=new _r,Gg=1e-6,Zg=Math.PI,Qg=Zg/2,Jg=Zg/4,$g=2*Zg,tm=180/Zg,em=Zg/180,nm=Math.abs,rm=Math.atan,im=Math.atan2,om=Math.cos,am=Math.ceil,sm=Math.exp,um=(Math.floor,Math.log),cm=Math.pow,lm=Math.sin,hm=Math.sign||function(t){return t>0?1:t<0?-1:0},fm=Math.sqrt,dm=Math.tan,pm={Feature:function(t,e){Er(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Er(n[r].geometry,e)}},vm={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Or(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Or(n[r],e,0)},Polygon:function(t,e){Tr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Tr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Er(n[r],e)}},gm=function(t,e){t&&pm.hasOwnProperty(t.type)?pm[t.type](t,e):Er(t,e)},mm=gg(),ym=gg(),bm={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){mm.reset(),bm.lineStart=Cr,bm.lineEnd=zr},polygonEnd:function(){var t=+mm;ym.add(t<0?$g+t:t),this.lineStart=this.lineEnd=this.point=kr},sphere:function(){ym.add($g)}},_m=function(t){return ym.reset(),gm(t,bm),2*ym},xm=gg(),wm={point:Br,lineStart:qr,lineEnd:Vr,polygonStart:function(){wm.point=Ur,wm.lineStart=Wr,wm.lineEnd=Yr,xm.reset(),bm.polygonStart()},polygonEnd:function(){bm.polygonEnd(),wm.point=Br,wm.lineStart=qr,wm.lineEnd=Vr,mm<0?(wg=-(Sg=180),Mg=-(kg=90)):xm>Gg?kg=90:xm<-Gg&&(Mg=-90),Pg[0]=wg,Pg[1]=Sg}},Mm=function(t){var e,n,r,i,o,a,s;if(kg=Sg=-(wg=Mg=1/0),zg=[],gm(t,wm),n=zg.length){for(zg.sort(Kr),e=1,r=zg[0],o=[r];e<n;++e)i=zg[e],Gr(r,i[0])||Gr(r,i[1])?(Xr(r[0],i[1])>Xr(r[0],r[1])&&(r[1]=i[1]),Xr(i[0],r[1])>Xr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=Xr(r[1],i[0]))>a&&(a=s,wg=i[0],Sg=r[1])}return zg=Pg=null,wg===1/0||Mg===1/0?[[NaN,NaN],[NaN,NaN]]:[[wg,Mg],[Sg,kg]]},Sm={sphere:kr,point:Zr,lineStart:Jr,lineEnd:ei,polygonStart:function(){Sm.lineStart=ni,Sm.lineEnd=ri},polygonEnd:function(){Sm.lineStart=Jr,Sm.lineEnd=ei}},km=function(t){Ag=Dg=Ig=jg=Rg=Lg=Ng=Fg=Bg=Hg=qg=0,gm(t,Sm);var e=Bg,n=Hg,r=qg,i=e*e+n*n+r*r;return i<1e-12&&(e=Lg,n=Ng,r=Fg,Dg<Gg&&(e=Ig,n=jg,r=Rg),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[im(n,e)*tm,Mr(r/fm(i))*tm]},Em=function(t){return function(){return t}},Om=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};ai.invert=ai;var Tm,Cm,zm,Pm,Am,Dm,Im,jm,Rm,Lm,Nm,Fm=function(t){function e(e){return e=t(e[0]*em,e[1]*em),e[0]*=tm,e[1]*=tm,e}return t=si(t[0]*em,t[1]*em,t.length>2?t[2]*em:0),e.invert=function(e){return e=t.invert(e[0]*em,e[1]*em),e[0]*=tm,e[1]*=tm,e},e},Bm=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=tm,t[1]*=tm}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*em,u=a.apply(this,arguments)*em;return n=[],r=si(-t[0]*em,-t[1]*em,0).invert,hi(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=Em([0,0]),o=Em(90),a=Em(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:Em([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Em(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:Em(+t),e):a},e},Hm=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:kr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},qm=function(t,e){return nm(t[0]-e[0])<Gg&&nm(t[1]-e[1])<Gg},Vm=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(qm(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new di(r,t,null,!0)),u.push(n.o=new di(r,null,n,!1)),s.push(n=new di(a,t,null,!1)),u.push(n.o=new di(a,null,n,!0))}}),s.length){for(u.sort(e),pi(s),pi(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}},Um=gg(),Wm=function(t,e){var n=e[0],r=e[1],i=[lm(n),-om(n),0],o=0,a=0;Um.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],f=h[0],d=h[1]/2+Jg,p=lm(d),v=om(d),g=0;g<l;++g,f=y,p=_,v=x,h=m){var m=c[g],y=m[0],b=m[1]/2+Jg,_=lm(b),x=om(b),w=y-f,M=w>=0?1:-1,S=M*w,k=S>Zg,E=p*_;if(Um.add(im(E*M*lm(S),v*x+E*om(S))),o+=k?w+M*$g:w,k^f>=n^y>=n){var O=Rr(Ir(h),Ir(m));Fr(O);var T=Rr(i,O);Fr(T);var C=(k^w>=0?-1:1)*Mr(T[2]);(r>C||r===C&&(O[0]||O[1]))&&(a+=k^w>=0?1:-1)}}return(o<-Gg||o<Gg&&Um<-Gg)^1&a},Ym=function(t,e,n,r){return function(i){function o(e,n){t(e,n)&&i.point(e,n)}function a(t,e){v.point(t,e)}function s(){b.point=a,v.lineStart()}function u(){b.point=o,v.lineEnd()}function c(t,e){p.push([t,e]),m.point(t,e)}function l(){m.lineStart(),p=[]}function h(){c(p[0][0],p[0][1]),m.lineEnd();var t,e,n,r,o=m.clean(),a=g.result(),s=a.length;if(p.pop(),f.push(p),p=null,s)if(1&o){if(n=a[0],(e=n.length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else s>1&&2&o&&a.push(a.pop().concat(a.shift())),d.push(a.filter(vi))}var f,d,p,v=e(i),g=Hm(),m=e(g),y=!1,b={point:o,lineStart:s,lineEnd:u,polygonStart:function(){b.point=c,b.lineStart=l,b.lineEnd=h,d=[],f=[]},polygonEnd:function(){b.point=o,b.lineStart=s,b.lineEnd=u,d=Al(d);var t=Wm(f,r);d.length?(y||(i.polygonStart(),y=!0),Vm(d,gi,t,n,i)):t&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),d=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return b}},Xm=Ym(function(){return!0},mi,bi,[-Zg,-Qg]),Km=function(t){function e(e,n,r,i){hi(i,t,s,r,e,n)}function n(t,e){return om(t)*om(e)>a}function r(t){var e,r,a,s,l;return{lineStart:function(){s=a=!1,l=1},point:function(h,f){var d,p=[h,f],v=n(h,f),g=u?v?0:o(h,f):v?o(h+(h<0?Zg:-Zg),f):0;if(!e&&(s=a=v)&&t.lineStart(),v!==a&&(!(d=i(e,p))||qm(e,d)||qm(p,d))&&(p[0]+=Gg,p[1]+=Gg,v=n(p[0],p[1])),v!==a)l=0,v?(t.lineStart(),d=i(p,e),t.point(d[0],d[1])):(d=i(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(c&&e&&u^v){var m;g&r||!(m=i(p,e,!0))||(l=0,u?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&qm(e,p)||t.point(p[0],p[1]),e=p,a=v,r=g},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return l|(s&&a)<<1}}}function i(t,e,n){var r=Ir(t),i=Ir(e),o=[1,0,0],s=Rr(r,i),u=jr(s,s),c=s[0],l=u-c*c;if(!l)return!n&&t;var h=a*u/l,f=-a*c/l,d=Rr(o,s),p=Nr(o,h);Lr(p,Nr(s,f));var v=d,g=jr(p,v),m=jr(v,v),y=g*g-m*(jr(p,p)-1);if(!(y<0)){var b=fm(y),_=Nr(v,(-g-b)/m);if(Lr(_,p),_=Dr(_),!n)return _;var x,w=t[0],M=e[0],S=t[1],k=e[1];M<w&&(x=w,w=M,M=x);var E=M-w,O=nm(E-Zg)<Gg,T=O||E<Gg;if(!O&&k<S&&(x=S,S=k,k=x),T?O?S+k>0^_[1]<(nm(_[0]-w)<Gg?S:k):S<=_[1]&&_[1]<=k:E>Zg^(w<=_[0]&&_[0]<=M)){var C=Nr(v,(-g+b)/m);return Lr(C,p),[_,Dr(C)]}}}function o(e,n){var r=u?t:Zg-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=om(t),s=6*em,u=a>0,c=nm(a)>Gg;return Ym(n,r,e,u?[0,-t]:[-Zg,t-Zg])},Gm=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,d=c-s,p=l-u;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*d,t[1]=u+h*p),f<1&&(e[0]=s+f*d,e[1]=u+f*p),!0}}}}},Zm=1e9,Qm=-Zm,Jm=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=_i(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},$m=gg(),ty={sphere:kr,point:kr,lineStart:xi,lineEnd:kr,polygonStart:kr,polygonEnd:kr},ey=function(t){return $m.reset(),gm(t,ty),+$m},ny=[null,null],ry={type:"LineString",coordinates:ny},iy=function(t,e){return ny[0]=t,ny[1]=e,ey(ry)},oy={Feature:function(t,e){return ki(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(ki(n[r].geometry,e))return!0;return!1}},ay={Sphere:function(){return!0},Point:function(t,e){return Ei(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ei(n[r],e))return!0;return!1},LineString:function(t,e){return Oi(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Oi(n[r],e))return!0;return!1},Polygon:function(t,e){return Ti(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ti(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(ki(n[r],e))return!0;return!1}},sy=function(t,e){return(t&&oy.hasOwnProperty(t.type)?oy[t.type]:ki)(t,e)},uy=function(t,e){var n=t[0]*em,r=t[1]*em,i=e[0]*em,o=e[1]*em,a=om(r),s=lm(r),u=om(o),c=lm(o),l=a*om(n),h=a*lm(n),f=u*om(i),d=u*lm(i),p=2*Mr(fm(Sr(o-r)+a*u*Sr(i-n))),v=lm(p),g=p?function(t){var e=lm(t*=p)/v,n=lm(p-t)/v,r=n*l+e*f,i=n*h+e*d,o=n*s+e*c;return[im(i,r)*tm,im(o,fm(r*r+i*i))*tm]}:function(){return[n*tm,r*tm]};return g.distance=p,g},cy=function(t){return t},ly=gg(),hy=gg(),fy={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){fy.lineStart=ji,fy.lineEnd=Ni},polygonEnd:function(){fy.lineStart=fy.lineEnd=fy.point=kr,ly.add(nm(hy)),hy.reset()},result:function(){var t=ly/2;return ly.reset(),t}},dy=fy,py=1/0,vy=py,gy=-py,my=gy,yy={point:Fi,lineStart:kr,lineEnd:kr,polygonStart:kr,polygonEnd:kr,result:function(){var t=[[py,vy],[gy,my]];return gy=my=-(vy=py=1/0),t}},by=yy,_y=0,xy=0,wy=0,My=0,Sy=0,ky=0,Ey=0,Oy=0,Ty=0,Cy={point:Bi,lineStart:Hi,lineEnd:Ui,polygonStart:function(){Cy.lineStart=Wi,Cy.lineEnd=Yi},polygonEnd:function(){Cy.point=Bi,Cy.lineStart=Hi,Cy.lineEnd=Ui},result:function(){var t=Ty?[Ey/Ty,Oy/Ty]:ky?[My/ky,Sy/ky]:wy?[_y/wy,xy/wy]:[NaN,NaN];return _y=xy=wy=My=Sy=ky=Ey=Oy=Ty=0,t}},zy=Cy;Gi.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,$g)}},result:kr};var Py,Ay,Dy,Iy,jy,Ry=gg(),Ly={point:kr,lineStart:function(){Ly.point=Zi},lineEnd:function(){Py&&Qi(Ay,Dy),Ly.point=kr},polygonStart:function(){Py=!0},polygonEnd:function(){Py=null},result:function(){var t=+Ry;return Ry.reset(),t}},Ny=Ly;Ji.prototype={_radius:4.5,_circle:$i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=$i(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Fy=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),gm(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return gm(t,r(dy)),dy.result()},n.measure=function(t){return gm(t,r(Ny)),Ny.result()},n.bounds=function(t){return gm(t,r(by)),by.result()},n.centroid=function(t){return gm(t,r(zy)),zy.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,cy):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new Ji):new Gi(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},By=function(t){return{stream:to(t)}};eo.prototype={constructor:eo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Hy=16,qy=om(30*em),Vy=function(t,e){return+e?oo(t,e):io(t)},Uy=to({point:function(t,e){this.stream.point(t*em,e*em)}}),Wy=function(){return co(ho).scale(155.424).center([0,33.6442])},Yy=function(){return Wy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Xy=function(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=Yy(),c=Wy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Wy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=fo([u.stream(r=t),c.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),c.scale(.35*e),l.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(h),o=c.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+Gg,s+.12*n+Gg],[r-.214*n-Gg,s+.234*n-Gg]]).stream(h),a=l.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+Gg,s+.166*n+Gg],[r-.115*n-Gg,s+.234*n-Gg]]).stream(h),e()},t.fitExtent=function(e,n){return no(t,e,n)},t.fitSize=function(e,n){return ro(t,e,n)},t.scale(1070)},Ky=po(function(t){return fm(2/(1+t))});Ky.invert=vo(function(t){return 2*Mr(t/2)});var Gy=function(){return so(Ky).scale(124.75).clipAngle(179.999)},Zy=po(function(t){return(t=wr(t))&&t/lm(t)});Zy.invert=vo(function(t){return t});var Qy=function(){return so(Zy).scale(79.4188).clipAngle(179.999)};go.invert=function(t,e){return[t,2*rm(sm(e))-Qg]};var Jy=function(){return mo(go).scale(961/$g)},$y=function(){return co(bo).scale(109.5).parallels([30,30])};_o.invert=_o;var tb=function(){return so(_o).scale(152.63)},eb=function(){return co(xo).scale(131.154).center([0,13.9389])};wo.invert=vo(rm);var nb=function(){return so(wo).scale(144.049).clipAngle(60)},rb=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,c=0,l=1,h=1,f=cy,d=null,p=cy;return a={stream:function(t){return i&&o===t?i:i=f(p(o=t))},postclip:function(i){return arguments.length?(p=i,d=e=n=r=null,t()):p},clipExtent:function(i){return arguments.length?(p=null==i?(d=e=n=r=null,cy):_i(d=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==d?null:[[d,e],[n,r]]},scale:function(e){return arguments.length?(f=Mo((s=+e)*l,s*h,u,c),t()):s},translate:function(e){return arguments.length?(f=Mo(s*l,s*h,u=+e[0],c=+e[1]),t()):[u,c]},reflectX:function(e){return arguments.length?(f=Mo(s*(l=e?-1:1),s*h,u,c),t()):l<0},reflectY:function(e){return arguments.length?(f=Mo(s*l,s*(h=e?-1:1),u,c),t()):h<0},fitExtent:function(t,e){return no(a,t,e)},fitSize:function(t,e){return ro(a,t,e)}}};So.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(nm(n)>Gg&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var ib=function(){return so(So).scale(175.295)};ko.invert=vo(Mr);var ob=function(){return so(ko).scale(249.5).clipAngle(90+Gg)};Eo.invert=vo(function(t){return 2*rm(t)});var ab=function(){return so(Eo).scale(250).clipAngle(142)};Oo.invert=function(t,e){return[-e,2*rm(sm(t))-Qg]};var sb=function(){var t=mo(Oo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},ub=function(){function t(t){var o,a=0;t.eachAfter(function(t){var n=t.children;n?(t.x=Co(n),t.y=Po(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=Do(t),u=Io(t),c=s.x-e(s,u)/2,l=u.x+e(u,s)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-c)/(l-c)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=To,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t},cb=function(){return this.eachAfter(jo)},lb=function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},hb=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},fb=function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},db=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},pb=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},vb=function(t){for(var e=this,n=Ro(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},gb=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},mb=function(){var t=[];return this.each(function(e){t.push(e)}),t},yb=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},bb=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};qo.prototype=Lo.prototype={constructor:qo,count:cb,each:lb,eachAfter:fb,eachBefore:hb,sum:db,sort:pb,path:vb,ancestors:gb,descendants:mb,leaves:yb,links:bb,copy:No};var _b=Array.prototype.slice,xb=function(t){for(var e,n,r=0,i=(t=Vo(_b.call(t))).length,o=[];r<i;)e=t[r],n&&Yo(n,e)?++r:(n=Ko(o=Uo(o,e)),r=0);return n},wb=function(t){return na(t),t},Mb=function(t){return function(){return t}},Sb=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(sa(e)).eachAfter(ua(i,.5)).eachBefore(ca(1)):t.eachBefore(sa(aa)).eachAfter(ua(oa,1)).eachAfter(ua(i,t.r/Math.min(n,r))).eachBefore(ca(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=oa;return t.radius=function(n){return arguments.length?(e=ra(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:Mb(+e),t):i},t},kb=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Eb=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},Ob=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(kb),t}function e(t,e){return function(n){n.children&&Eb(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},Tb="$",Cb={depth:-1},zb={},Pb=function(){function t(t){var r,i,o,a,s,u,c,l=t.length,h=new Array(l),f={};for(i=0;i<l;++i)r=t[i],s=h[i]=new qo(r),null!=(u=e(r,i,t))&&(u+="")&&(c=Tb+(s.id=u),f[c]=c in f?zb:s);for(i=0;i<l;++i)if(s=h[i],null!=(u=n(t[i],i,t))&&(u+="")){if(!(a=f[Tb+u]))throw new Error("missing: "+u);if(a===zb)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Cb,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(Ho),o.parent=null,l>0)throw new Error("cycle");return o}var e=la,n=ha;return t.id=function(n){return arguments.length?(e=ia(n),t):e},t.parentId=function(e){return arguments.length?(n=ia(e),t):n},t};ya.prototype=Object.create(qo.prototype);var Ab=function(){function t(t){var r=ba(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var c=t,l=t,h=t;t.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)});var f=c===l?1:o(c,l)/2,d=f-c.x,p=a/(l.x+f+d),v=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*v})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){ga(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],c=i.m,l=a.m,h=s.m,f=u.m;s=pa(s),i=da(i),s&&i;)u=da(u),a=pa(a),a.a=t,r=s.z+h-i.z-c+o(s._,i._),r>0&&(va(ma(s,t,n),t,r),c+=r,l+=r),h+=s.m,c+=i.m,f+=u.m,l+=a.m;s&&!pa(a)&&(a.t=s,a.m+=h-l),i&&!da(u)&&(u.t=i,u.m+=c-f,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=fa,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t},Db=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},Ib=(1+Math.sqrt(5))/2,jb=function t(e){function n(t,n,r,i,o){_a(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ib),Rb=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(kb),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,f=t.y1-e;o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=f,t.children&&(e=a[t.depth+1]=s(t)/2,r+=h(t)-e,i+=u(t)-e,o-=c(t)-e,f-=l(t)-e,o<r&&(r=o=(r+o)/2),f<i&&(i=f=(i+f)/2),n(t,r,i,o,f))}var n=jb,r=!1,i=1,o=1,a=[0],s=oa,u=oa,c=oa,l=oa,h=oa;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=ia(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:Mb(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:Mb(+e),t):u},t.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:Mb(+e),t):c},t.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:Mb(+e),t):l},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:Mb(+e),t):h},t},Lb=function(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var c=u[t];return c.x0=r,c.y0=i,c.x1=a,c.y1=s,void 0}for(var h=l[t],f=n/2+h,d=t+1,p=e-1;d<p;){var v=d+p>>>1;l[v]<f?d=v+1:p=v}f-l[d-1]<l[d]-f&&t+1<d&&--d;var g=l[d]-h,m=n-g;if(a-r>s-i){var y=(r*m+a*g)/n;o(t,d,g,r,i,y,s),o(d,e,m,y,i,a,s)}else{var b=(i*m+s*g)/n;o(t,d,g,r,i,a,b),o(d,e,m,r,b,a,s)}}var a,s,u=t.children,c=u.length,l=new Array(c+1);for(l[0]=s=a=0;a<c;++a)l[a+1]=s+=u[a].value;o(0,c,t.value,e,n,r,i)},Nb=function(t,e,n,r,i){(1&t.depth?Db:Eb)(t,e,n,r,i)},Fb=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,d=t.value;++h<f;){for(s=a[h],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?Eb(s,n,r,i,r+=(o-r)*s.value/d):Db(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=_a(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ib),Bb=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},Hb=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return u*=3,[o/u,a/u]},qb=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},Vb=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(xa),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=wa(r),a=wa(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},Ub=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,h=0;h<i;++h)o=t[h],n=o[0],r=o[1],r>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l},Wb=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,o=t[r],a=o[0],s=o[1],e-=a,n-=s,u+=Math.sqrt(e*e+n*n);return u},Yb=[].slice,Xb={};Ma.prototype=Ca.prototype={constructor:Ma,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=Yb.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Sa(this),this},abort:function(){return null==this._error&&Oa(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},Ta(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,Ta(this),this}};var Kb=function(){return Math.random()},Gb=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Kb),Zb=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Kb),Qb=function t(e){function n(){var t=Zb.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Kb),Jb=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Kb),$b=function t(e){function n(t){var n=Jb.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Kb),t_=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Kb),e_=function(t,e){function n(t){var e,n=c.status;if(!n&&Pa(c)||n>=200&&n<300||304===n){if(o)try{e=o.call(r,c)}catch(t){return void s.call("error",r,t)}else e=c;s.call("load",r,e)}else s.call("error",r,t)}var r,i,o,a,s=Kl("beforesend","progress","load","error"),u=nv(),c=new XMLHttpRequest,l=null,h=null,f=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(t){c.readyState>3&&n(t)},c.onprogress=function(t){s.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==e?u.remove(t):u.set(t,e+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(a=t,r):a},timeout:function(t){return arguments.length?(f=+t,r):f},user:function(t){return arguments.length<1?l:(l=null==t?null:t+"",r)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",r)},response:function(t){return o=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,n,o){return c.open(e,t,!0,l,h),null==i||u.has("accept")||u.set("accept",i+",*/*"),c.setRequestHeader&&u.each(function(t,e){c.setRequestHeader(e,t)}),null!=i&&c.overrideMimeType&&c.overrideMimeType(i),null!=a&&(c.responseType=a),f>0&&(c.timeout=f),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=za(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),s.call("beforesend",r,c),c.send(null==n?null:n),r},abort:function(){return c.abort(),r},on:function(){var t=s.on.apply(s,arguments);return t===s?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r},n_=function(t,e){return function(n,r){var i=e_(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},r_=n_("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),i_=n_("application/json",function(t){return JSON.parse(t.responseText)}),o_=n_("text/plain",function(t){return t.responseText}),a_=n_("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),s_=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=e_(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(Aa(e,r=t)):r},o.row(r),i?o.get(i):o}},u_=s_("text/csv",gv),c_=s_("text/tab-separated-values",xv),l_=Array.prototype,h_=l_.map,f_=l_.slice,d_={name:"implicit"},p_=function(t){return function(){return t}},v_=function(t){return+t},g_=[0,1],m_=function(t,e,n){var r,i=t[0],o=t[t.length-1],s=a(i,o,null==e?10:e);switch(n=mr(null==n?",f":n),n.type){case"s":var u=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=pg(s,u))||(n.precision=r),cg(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=vg(s,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=dg(s))||(n.precision=r-2*("%"===n.type))}return ug(n)},y_=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},b_=new Date,__=new Date,x_=as(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});x_.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?as(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):x_:null};var w_=x_,M_=x_.range,S_=6e4,k_=6048e5,E_=as(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),O_=E_,T_=E_.range,C_=as(function(t){t.setTime(Math.floor(t/S_)*S_)},function(t,e){t.setTime(+t+e*S_)},function(t,e){return(e-t)/S_},function(t){return t.getMinutes()}),z_=C_,P_=C_.range,A_=as(function(t){var e=t.getTimezoneOffset()*S_%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),D_=A_,I_=A_.range,j_=as(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*S_)/864e5},function(t){return t.getDate()-1}),R_=j_,L_=j_.range,N_=ss(0),F_=ss(1),B_=ss(2),H_=ss(3),q_=ss(4),V_=ss(5),U_=ss(6),W_=N_.range,Y_=F_.range,X_=B_.range,K_=H_.range,G_=q_.range,Z_=V_.range,Q_=U_.range,J_=as(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),$_=J_,tx=J_.range,ex=as(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});ex.every=function(t){return isFinite(t=Math.floor(t))&&t>0?as(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var nx=ex,rx=ex.range,ix=as(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*S_)},function(t,e){return(e-t)/S_},function(t){return t.getUTCMinutes()}),ox=ix,ax=ix.range,sx=as(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),ux=sx,cx=sx.range,lx=as(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),hx=lx,fx=lx.range,dx=us(0),px=us(1),vx=us(2),gx=us(3),mx=us(4),yx=us(5),bx=us(6),_x=dx.range,xx=px.range,wx=vx.range,Mx=gx.range,Sx=mx.range,kx=yx.range,Ex=bx.range,Ox=as(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Tx=Ox,Cx=Ox.range,zx=as(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});zx.every=function(t){return isFinite(t=Math.floor(t))&&t>0?as(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Px,Ax,Dx,Ix,jx,Rx=zx,Lx=zx.range,Nx={"-":"",_:" ",0:"0"},Fx=/^\s*\d+/,Bx=/^%/,Hx=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;au({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var qx=Date.prototype.toISOString?su:Ix("%Y-%m-%dT%H:%M:%S.%LZ"),Vx=qx,Ux=+new Date("2000-01-01T00:00:00.000Z")?uu:jx("%Y-%m-%dT%H:%M:%S.%LZ"),Wx=Ux,Yx=1e3,Xx=60*Yx,Kx=60*Xx,Gx=24*Kx,Zx=7*Gx,Qx=30*Gx,Jx=365*Gx,$x=function(){return hu(nx,$_,N_,R_,D_,z_,O_,w_,Ax).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},tw=function(){return hu(Rx,Tx,dx,hx,ux,ox,O_,w_,Ix).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},ew=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},nw=ew("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rw=ew("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),iw=ew("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ow=ew("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),aw=ud(Jt(300,.5,0),Jt(-240,.5,1)),sw=ud(Jt(-100,.75,.35),Jt(80,1.5,.8)),uw=ud(Jt(260,.75,.35),Jt(80,1.5,.8)),cw=Jt(),lw=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return cw.h=360*t-100,cw.s=1.5-1.5*e,cw.l=.8-.9*e,cw+""},hw=fu(ew("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),fw=fu(ew("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),dw=fu(ew("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pw=fu(ew("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),vw=function(t){return function(){return t}},gw=Math.abs,mw=Math.atan2,yw=Math.cos,bw=Math.max,_w=Math.min,xw=Math.sin,ww=Math.sqrt,Mw=1e-12,Sw=Math.PI,kw=Sw/2,Ew=2*Sw,Ow=function(){function t(){var t,c,l=+e.apply(this,arguments),h=+n.apply(this,arguments),f=o.apply(this,arguments)-kw,d=a.apply(this,arguments)-kw,p=gw(d-f),v=d>f;if(u||(u=t=tv()),h<l&&(c=h,h=l,l=c),h>Mw)if(p>Ew-Mw)u.moveTo(h*yw(f),h*xw(f)),u.arc(0,0,h,f,d,!v),l>Mw&&(u.moveTo(l*yw(d),l*xw(d)),u.arc(0,0,l,d,f,v));else{var g,m,y=f,b=d,_=f,x=d,w=p,M=p,S=s.apply(this,arguments)/2,k=S>Mw&&(i?+i.apply(this,arguments):ww(l*l+h*h)),E=_w(gw(h-l)/2,+r.apply(this,arguments)),O=E,T=E;if(k>Mw){var C=vu(k/l*xw(S)),z=vu(k/h*xw(S));(w-=2*C)>Mw?(C*=v?1:-1,_+=C,x-=C):(w=0,_=x=(f+d)/2),(M-=2*z)>Mw?(z*=v?1:-1,y+=z,b-=z):(M=0,y=b=(f+d)/2)}var P=h*yw(y),A=h*xw(y),D=l*yw(x),I=l*xw(x);if(E>Mw){var j=h*yw(b),R=h*xw(b),L=l*yw(_),N=l*xw(_);if(p<Sw){var F=w>Mw?xu(P,A,L,N,j,R,D,I):[D,I],B=P-F[0],H=A-F[1],q=j-F[0],V=R-F[1],U=1/xw(pu((B*q+H*V)/(ww(B*B+H*H)*ww(q*q+V*V)))/2),W=ww(F[0]*F[0]+F[1]*F[1]);O=_w(E,(l-W)/(U-1)),T=_w(E,(h-W)/(U+1))}}M>Mw?T>Mw?(g=wu(L,N,P,A,h,T,v),m=wu(j,R,D,I,h,T,v),u.moveTo(g.cx+g.x01,g.cy+g.y01),T<E?u.arc(g.cx,g.cy,T,mw(g.y01,g.x01),mw(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,T,mw(g.y01,g.x01),mw(g.y11,g.x11),!v),u.arc(0,0,h,mw(g.cy+g.y11,g.cx+g.x11),mw(m.cy+m.y11,m.cx+m.x11),!v),u.arc(m.cx,m.cy,T,mw(m.y11,m.x11),mw(m.y01,m.x01),!v))):(u.moveTo(P,A),u.arc(0,0,h,y,b,!v)):u.moveTo(P,A),l>Mw&&w>Mw?O>Mw?(g=wu(D,I,j,R,l,-O,v),m=wu(P,A,L,N,l,-O,v),u.lineTo(g.cx+g.x01,g.cy+g.y01),O<E?u.arc(g.cx,g.cy,O,mw(g.y01,g.x01),mw(m.y01,m.x01),!v):(u.arc(g.cx,g.cy,O,mw(g.y01,g.x01),mw(g.y11,g.x11),!v),u.arc(0,0,l,mw(g.cy+g.y11,g.cx+g.x11),mw(m.cy+m.y11,m.cx+m.x11),v),u.arc(m.cx,m.cy,O,mw(m.y11,m.x11),mw(m.y01,m.x01),!v))):u.arc(0,0,l,x,_,v):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=gu,n=mu,r=vw(0),i=null,o=yu,a=bu,s=_u,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Sw/2;return[yw(r)*t,xw(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:vw(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:vw(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:vw(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:vw(+e),t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:vw(+e),t):o},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:vw(+e),t):a},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:vw(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};Mu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Tw=function(t){return new Mu(t)},Cw=function(){function t(t){var s,u,c,l=t.length,h=!1;for(null==i&&(a=o(c=tv())),s=0;s<=l;++s)!(s<l&&r(u=t[s],s,t))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(u,s,t),+n(u,s,t));if(c)return a=null,c+""||null}var e=Su,n=ku,r=vw(!0),i=null,o=Tw,a=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:vw(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:vw(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:vw(!!e),t):r},t.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),t):o},t.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),t):i},t},zw=function(){function t(t){var e,l,h,f,d,p=t.length,v=!1,g=new Array(p),m=new Array(p);for(null==s&&(c=u(d=tv())),e=0;e<=p;++e){if(!(e<p&&a(f=t[e],e,t))===v)if(v=!v)l=e,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=e-1;h>=l;--h)c.point(g[h],m[h]);c.lineEnd(),c.areaEnd()}v&&(g[e]=+n(f,e,t),m[e]=+i(f,e,t),c.point(r?+r(f,e,t):g[e],o?+o(f,e,t):m[e]))}if(d)return c=null,d+""||null}function e(){return Cw().defined(a).curve(u).context(s)}var n=Su,r=null,i=vw(0),o=ku,a=vw(!0),s=null,u=Tw,c=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:vw(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:vw(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:vw(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:vw(+e),o=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:vw(+e),t):i},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:vw(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(a="function"==typeof e?e:vw(!!e),t):a},t.curve=function(e){return arguments.length?(u=e,null!=s&&(c=u(s)),t):u},t.context=function(e){return arguments.length?(null==e?s=c=null:c=u(s=e),t):s},t},Pw=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Aw=function(t){return t},Dw=function(){function t(t){var s,u,c,l,h,f=t.length,d=0,p=new Array(f),v=new Array(f),g=+i.apply(this,arguments),m=Math.min(Ew,Math.max(-Ew,o.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/f,a.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<f;++s)(h=v[p[s]=s]=+e(t[s],s,t))>0&&(d+=h);for(null!=n?p.sort(function(t,e){return n(v[t],v[e])}):null!=r&&p.sort(function(e,n){return r(t[e],t[n])}),s=0,c=d?(m-f*b)/d:0;s<f;++s,g=l)u=p[s],h=v[u],l=g+(h>0?h*c:0)+b,v[u]={data:t[u],index:s,value:h,startAngle:g,endAngle:l,padAngle:y};return v}var e=Aw,n=Pw,r=null,i=vw(0),o=vw(Ew),a=vw(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:vw(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:vw(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:vw(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:vw(+e),t):a},t},Iw=Ou(Tw);Eu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var jw=function(){return Tu(Cw().curve(Iw))},Rw=function(){var t=zw().curve(Iw),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Tu(n())},delete t.lineX0,t.lineEndAngle=function(){return Tu(r())},delete t.lineX1,t.lineInnerRadius=function(){return Tu(i())},delete t.lineY0,t.lineOuterRadius=function(){return Tu(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Ou(t)):e()._curve},t},Lw=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Nw=Array.prototype.slice,Fw={draw:function(t,e){var n=Math.sqrt(e/Sw);t.moveTo(n,0),t.arc(0,0,n,0,Ew)}},Bw={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Hw=Math.sqrt(1/3),qw=2*Hw,Vw={draw:function(t,e){var n=Math.sqrt(e/qw),r=n*Hw;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Uw=Math.sin(Sw/10)/Math.sin(7*Sw/10),Ww=Math.sin(Ew/10)*Uw,Yw=-Math.cos(Ew/10)*Uw,Xw={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Ww*n,i=Yw*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=Ew*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Kw={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Gw=Math.sqrt(3),Zw={draw:function(t,e){var n=-Math.sqrt(e/(3*Gw));t.moveTo(0,2*n),t.lineTo(-Gw*n,-n),t.lineTo(Gw*n,-n),t.closePath()}},Qw=Math.sqrt(3)/2,Jw=1/Math.sqrt(12),$w=3*(Jw/2+1),tM={draw:function(t,e){var n=Math.sqrt(e/$w),r=n/2,i=n*Jw,o=r,a=n*Jw+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(-.5*r-Qw*i,Qw*r+-.5*i),t.lineTo(-.5*o-Qw*a,Qw*o+-.5*a),t.lineTo(-.5*s-Qw*u,Qw*s+-.5*u),t.lineTo(-.5*r+Qw*i,-.5*i-Qw*r),t.lineTo(-.5*o+Qw*a,-.5*a-Qw*o),t.lineTo(-.5*s+Qw*u,-.5*u-Qw*s),t.closePath()}},eM=[Fw,Bw,Vw,Kw,Xw,Zw,tM],nM=function(){function t(){var t;if(r||(r=t=tv()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=vw(Fw),n=vw(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:vw(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:vw(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},rM=function(){};Fu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var iM=function(t){return new Fu(t)};Bu.prototype={areaStart:rM,areaEnd:rM,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Nu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var oM=function(t){return new Bu(t)};Hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Nu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var aM=function(t){return new Hu(t)};qu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var sM=function t(e){function n(t){return 1===e?new Fu(t):new qu(t,e)}return n.beta=function(e){return t(+e)},n}(.85);Uu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Vu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Vu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var uM=function t(e){function n(t){return new Uu(t,e)}return n.tension=function(e){return t(+e)},n}(0);Wu.prototype={areaStart:rM,areaEnd:rM,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Vu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var cM=function t(e){function n(t){return new Wu(t,e)}return n.tension=function(e){return t(+e)},n}(0);Yu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var lM=function t(e){function n(t){return new Yu(t,e)}return n.tension=function(e){return t(+e)},n}(0);Ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Xu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var hM=function t(e){function n(t){return e?new Ku(t,e):new Uu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Gu.prototype={areaStart:rM,areaEnd:rM,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var fM=function t(e){function n(t){return e?new Gu(t,e):new Wu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Zu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dM=function t(e){function n(t){return e?new Zu(t,e):new Yu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Qu.prototype={areaStart:rM,areaEnd:rM,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var pM=function(t){return new Qu(t)};nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ec(this,this._t0,tc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ec(this,tc(this,n=$u(this,t,e)),n);break;default:ec(this,this._t0,n=$u(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(rc.prototype=Object.create(nc.prototype)).point=function(t,e){nc.prototype.point.call(this,e,t)},ic.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},sc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=uc(t),i=uc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var vM=function(t){return new sc(t)};cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var gM=function(t){return new cc(t,.5)},mM=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},yM=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},bM=function(){function t(t){var o,a,s=e.apply(this,arguments),u=t.length,c=s.length,l=new Array(c);for(o=0;o<c;++o){for(var h,f=s[o],d=l[o]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+i(t[p],f,p,t)],h.data=t[p];d.key=f}for(o=0,a=n(l);o<c;++o)l[a[o]].index=o;return r(l,a),l}var e=vw([]),n=yM,r=mM,i=fc;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:vw(Nw.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:vw(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?yM:"function"==typeof e?e:vw(Nw.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?mM:e,t):r},t},_M=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}mM(t,e)}},xM=function(t,e){if((s=t.length)>1)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},wM=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}mM(t,e)}},MM=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=l[a-1][1]||0,d=(h-f)/2,p=0;p<s;++p){var v=t[e[p]];d+=(v[a][1]||0)-(v[a-1][1]||0)}u+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,mM(t,e)}},SM=function(t){var e=t.map(dc);return yM(t).sort(function(t,n){return e[t]-e[n]})},kM=function(t){return SM(t).reverse()},EM=function(t){var e,n,r=t.length,i=t.map(dc),o=yM(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},OM=function(t){return yM(t).reverse()},TM=function(t){return function(){return t}};gc.prototype={constructor:gc,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=_c(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(yc(this,n),t=n,n=t.U),n.C=!1,r.C=!0,bc(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(bc(this,n),t=n,n=t.U),n.C=!1,r.C=!0,yc(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?_c(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,yc(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,bc(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,yc(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,bc(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,yc(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,bc(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var CM,zM,PM,AM,DM,IM=gc,jM=[],RM=[],LM=1e-6,NM=1e-12;Wc.prototype={constructor:Wc,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Cc(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&Vc(s,a,l)<0&&t.push([s.data,a.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}})}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var FM=function(){function t(t){return new Wc(t.map(function(r,i){var o=[Math.round(e(r,i,t)/LM)*LM,Math.round(n(r,i,t)/LM)*LM];return o.index=i,o.data=r,o}),r)}var e=pc,n=vc,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:TM(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:TM(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},BM=function(t){return function(){return t}};Xc.prototype={constructor:Xc,scale:function(t){return 1===t?this:new Xc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Xc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var HM=new Xc(1,0,0);Kc.prototype=Xc.prototype;var qM=function(){oh.preventDefault(),oh.stopImmediatePropagation()},VM=function(){function t(t){t.property("__zoom",Jc).on("wheel.zoom",u).on("mousedown.zoom",c).on("dblclick.zoom",l).filter(b).on("touchstart.zoom",h).on("touchmove.zoom",f).on("touchend.zoom touchcancel.zoom",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(t,e){return e=Math.max(_,Math.min(x,e)),e===t.k?t:new Xc(e,t.x,t.y)}function n(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new Xc(t.k,r,i)}function r(t,e){var n=t.invertX(e[0][0])-w,r=t.invertX(e[1][0])-M,i=t.invertY(e[0][1])-S,o=t.invertY(e[1][1])-k;return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function i(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,e,n){t.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,o=a(t,r),s=m.apply(t,r),u=n||i(s),c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,h="function"==typeof e?e.apply(t,r):e,f=O(l.invert(u).concat(c/l.k),h.invert(u).concat(c/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=c/e[2];t=new Xc(n,u[0]-e[0]*n,u[1]-e[1]*n)}o.zoom(null,t)}})}function a(t,e){for(var n,r=0,i=T.length;r<i;++r)if((n=T[r]).that===t)return n;return new s(t,e)}function s(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=m.apply(t,e)}function u(){function t(){i.wheel=null,i.end()}if(g.apply(this,arguments)){var i=a(this,arguments),o=this.__zoom,s=Math.max(_,Math.min(x,o.k*Math.pow(2,y.apply(this,arguments)))),u=ch(this);if(i.wheel)i.mouse[0][0]===u[0]&&i.mouse[0][1]===u[1]||(i.mouse[1]=o.invert(i.mouse[0]=u)),clearTimeout(i.wheel);else{if(o.k===s)return;i.mouse=[u,o.invert(u)],Pd(this),i.start()}qM(),i.wheel=setTimeout(t,P),i.zoom("mouse",r(n(e(o,s),i.mouse[0],i.mouse[1]),i.extent))}}function c(){function t(){if(qM(),!i.moved){var t=oh.clientX-u,e=oh.clientY-c;i.moved=t*t+e*e>D}i.zoom("mouse",r(n(i.that.__zoom,i.mouse[0]=ch(i.that),i.mouse[1]),i.extent))}function e(){o.on("mousemove.zoom mouseup.zoom",null),wt(oh.view,i.moved),qM(),i.end()}if(!v&&g.apply(this,arguments)){var i=a(this,arguments),o=Yh(oh.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",e,!0),s=ch(this),u=oh.clientX,c=oh.clientY;Qh(oh.view),Gc(),i.mouse=[s,this.__zoom.invert(s)],Pd(this),i.start()}}function l(){if(g.apply(this,arguments)){var i=this.__zoom,a=ch(this),s=i.invert(a),u=i.k*(oh.shiftKey?.5:2),c=r(n(e(i,u),a,s),m.apply(this,arguments));qM(),E>0?Yh(this).transition().duration(E).call(o,c,a):Yh(this).call(t.transform,c)}}function h(){if(g.apply(this,arguments)){var t,e,n,r,i=a(this,arguments),o=oh.changedTouches,s=o.length;for(Gc(),e=0;e<s;++e)n=o[e],r=Kh(this,o,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],i.touch0?i.touch1||(i.touch1=r):(i.touch0=r,t=!0);if(p&&(p=clearTimeout(p),!i.touch1))return i.end(),void((r=Yh(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(p=setTimeout(function(){p=null},z),Pd(this),i.start())}}function f(){var t,i,o,s,u=a(this,arguments),c=oh.changedTouches,l=c.length;for(qM(),p&&(p=clearTimeout(p)),t=0;t<l;++t)i=c[t],o=Kh(this,c,i.identifier),u.touch0&&u.touch0[2]===i.identifier?u.touch0[0]=o:u.touch1&&u.touch1[2]===i.identifier&&(u.touch1[0]=o);if(i=u.that.__zoom,u.touch1){var h=u.touch0[0],f=u.touch0[1],d=u.touch1[0],v=u.touch1[1],g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g,m=(m=v[0]-f[0])*m+(m=v[1]-f[1])*m;i=e(i,Math.sqrt(g/m)),o=[(h[0]+d[0])/2,(h[1]+d[1])/2],s=[(f[0]+v[0])/2,(f[1]+v[1])/2]}else{if(!u.touch0)return;o=u.touch0[0],s=u.touch0[1]}u.zoom("touch",r(n(i,o,s),u.extent))}function d(){var t,e,n=a(this,arguments),r=oh.changedTouches,i=r.length;for(Gc(),v&&clearTimeout(v),v=setTimeout(function(){v=null},z),t=0;t<i;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var p,v,g=Zc,m=Qc,y=$c,b=tl,_=0,x=1/0,w=-x,M=x,S=w,k=M,E=250,O=nd,T=[],C=Kl("start","zoom","end"),z=500,P=150,D=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Jc),t!==n?o(t,e):n.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},t.scaleTo=function(o,a){t.transform(o,function(){var t=m.apply(this,arguments),o=this.__zoom,s=i(t),u=o.invert(s);return r(n(e(o,"function"==typeof a?a.apply(this,arguments):a),s,u),t)})},t.translateBy=function(e,n,i){t.transform(e,function(){return r(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),m.apply(this,arguments))})},t.translateTo=function(e,n,o){t.transform(e,function(){var t=m.apply(this,arguments),e=this.__zoom,a=i(t);return r(HM.translate(a[0],a[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof o?-o.apply(this,arguments):-o),t)})},s.prototype={start:function(){return 1==++this.active&&(this.index=T.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(T.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){A(new Yc(t,e,this.that.__zoom),C.apply,C,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(y="function"==typeof e?e:BM(+e),t):y},t.filter=function(e){return arguments.length?(g="function"==typeof e?e:BM(!!e),t):g},t.touchable=function(e){return arguments.length?(b="function"==typeof e?e:BM(!!e),t):b},t.extent=function(e){return arguments.length?(m="function"==typeof e?e:BM([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):m},t.scaleExtent=function(e){return arguments.length?(_=+e[0],x=+e[1],t):[_,x]},t.translateExtent=function(e){return arguments.length?(w=+e[0][0],M=+e[1][0],S=+e[0][1],k=+e[1][1],t):[[w,S],[M,k]]},t.duration=function(e){return arguments.length?(E=+e,t):E},t.interpolate=function(e){return arguments.length?(O=e,t):O},t.on=function(){var e=C.on.apply(C,arguments);return e===C?t:e},t.clickDistance=function(e){return arguments.length?(D=(e=+e)*e,t):Math.sqrt(D)},t};n.d(e,"version",function(){return"4.11.0"}),n.d(e,"bisect",function(){return al}),n.d(e,"bisectRight",function(){return il}),n.d(e,"bisectLeft",function(){return ol}),n.d(e,"ascending",function(){return el}),n.d(e,"bisector",function(){return nl}),n.d(e,"cross",function(){return ul}),n.d(e,"descending",function(){return cl}),n.d(e,"deviation",function(){return fl}),n.d(e,"extent",function(){return dl}),n.d(e,"histogram",function(){return kl}),n.d(e,"thresholdFreedmanDiaconis",function(){return Ol}),n.d(e,"thresholdScott",function(){return Tl}),n.d(e,"thresholdSturges",function(){return Sl}),n.d(e,"max",function(){return Cl}),n.d(e,"mean",function(){return zl}),n.d(e,"median",function(){return Pl}),n.d(e,"merge",function(){return Al}),n.d(e,"min",function(){return Dl}),n.d(e,"pairs",function(){return sl}),n.d(e,"permute",function(){return Il}),n.d(e,"quantile",function(){return El}),n.d(e,"range",function(){return bl}),n.d(e,"scan",function(){return jl}),n.d(e,"shuffle",function(){return Rl}),n.d(e,"sum",function(){return Ll}),n.d(e,"ticks",function(){return Ml}),n.d(e,"tickIncrement",function(){return o}),n.d(e,"tickStep",function(){return a}),n.d(e,"transpose",function(){return Nl}),n.d(e,"variance",function(){return hl}),n.d(e,"zip",function(){return Fl}),n.d(e,"axisTop",function(){return p}),n.d(e,"axisRight",function(){return v}),n.d(e,"axisBottom",function(){return g}),n.d(e,"axisLeft",function(){return m}),n.d(e,"brush",function(){return Hp}),n.d(e,"brushX",function(){return jn}),n.d(e,"brushY",function(){return Rn}),n.d(e,"brushSelection",function(){return In}),n.d(e,"chord",function(){return Kp}),n.d(e,"ribbon",function(){return ev}),n.d(e,"nest",function(){return rv}),n.d(e,"set",function(){return ov}),n.d(e,"map",function(){return nv}),n.d(e,"keys",function(){return av}),n.d(e,"values",function(){return sv}),n.d(e,"entries",function(){return uv}),n.d(e,"color",function(){return zt}),n.d(e,"rgb",function(){return It}),n.d(e,"hsl",function(){return Nt}),n.d(e,"lab",function(){return qt}),n.d(e,"hcl",function(){return Gt}),n.d(e,"cubehelix",function(){return Jt}),n.d(e,"dispatch",function(){return Kl}),n.d(e,"drag",function(){return $h}),n.d(e,"dragDisable",function(){return Qh}),n.d(e,"dragEnable",function(){return wt}),n.d(e,"dsvFormat",function(){return pv}),n.d(e,"csvParse",function(){return gv}),n.d(e,"csvParseRows",function(){return mv}),n.d(e,"csvFormat",function(){return yv}),n.d(e,"csvFormatRows",function(){return bv}),n.d(e,"tsvParse",function(){return xv}),n.d(e,"tsvParseRows",function(){return wv}),n.d(e,"tsvFormat",function(){return Mv}),n.d(e,"tsvFormatRows",function(){return Sv}),n.d(e,"easeLinear",function(){return un}),n.d(e,"easeQuad",function(){return hn}),n.d(e,"easeQuadIn",function(){return cn}),n.d(e,"easeQuadOut",function(){return ln}),n.d(e,"easeQuadInOut",function(){return hn}),n.d(e,"easeCubic",function(){return pn}),n.d(e,"easeCubicIn",function(){return fn}),n.d(e,"easeCubicOut",function(){return dn}),n.d(e,"easeCubicInOut",function(){return pn}),n.d(e,"easePoly",function(){return np}),n.d(e,"easePolyIn",function(){return tp}),n.d(e,"easePolyOut",function(){return ep}),n.d(e,"easePolyInOut",function(){return np}),n.d(e,"easeSin",function(){return mn}),n.d(e,"easeSinIn",function(){return vn}),n.d(e,"easeSinOut",function(){return gn}),n.d(e,"easeSinInOut",function(){return mn}),n.d(e,"easeExp",function(){return _n}),n.d(e,"easeExpIn",function(){return yn}),n.d(e,"easeExpOut",function(){return bn}),n.d(e,"easeExpInOut",function(){return _n}),n.d(e,"easeCircle",function(){return Mn}),n.d(e,"easeCircleIn",function(){return xn}),n.d(e,"easeCircleOut",function(){return wn}),n.d(e,"easeCircleInOut",function(){return Mn}),n.d(e,"easeBounce",function(){return kn}),n.d(e,"easeBounceIn",function(){return Sn}),n.d(e,"easeBounceOut",function(){return kn}),n.d(e,"easeBounceInOut",function(){return En}),n.d(e,"easeBack",function(){return mp}),n.d(e,"easeBackIn",function(){return vp}),n.d(e,"easeBackOut",function(){return gp}),n.d(e,"easeBackInOut",function(){return mp}),n.d(e,"easeElastic",function(){return _p}),n.d(e,"easeElasticIn",function(){return bp}),n.d(e,"easeElasticOut",function(){return _p}),n.d(e,"easeElasticInOut",function(){return xp}),n.d(e,"forceCenter",function(){return kv}),n.d(e,"forceCollide",function(){return Vv}),n.d(e,"forceLink",function(){return Uv}),n.d(e,"forceManyBody",function(){return Kv}),n.d(e,"forceRadial",function(){return Gv}),n.d(e,"forceSimulation",function(){return Xv}),n.d(e,"forceX",function(){return Zv}),n.d(e,"forceY",function(){return Qv}),n.d(e,"formatDefaultLocale",function(){return br}),n.d(e,"format",function(){return ug}),n.d(e,"formatPrefix",function(){return cg}),n.d(e,"formatLocale",function(){return fg}),n.d(e,"formatSpecifier",function(){return mr}),n.d(e,"precisionFixed",function(){return dg}),n.d(e,"precisionPrefix",function(){return pg}),n.d(e,"precisionRound",function(){return vg}),n.d(e,"geoArea",function(){return _m}),n.d(e,"geoBounds",function(){return Mm}),n.d(e,"geoCentroid",function(){return km}),n.d(e,"geoCircle",function(){return Bm}),n.d(e,"geoClipAntimeridian",function(){return Xm}),n.d(e,"geoClipCircle",function(){return Km}),n.d(e,"geoClipExtent",function(){return Jm}),n.d(e,"geoClipRectangle",function(){return _i}),n.d(e,"geoContains",function(){return sy}),n.d(e,"geoDistance",function(){return iy}),n.d(e,"geoGraticule",function(){return Di}),n.d(e,"geoGraticule10",function(){return Ii}),n.d(e,"geoInterpolate",function(){return uy}),n.d(e,"geoLength",function(){return ey}),n.d(e,"geoPath",function(){return Fy}),n.d(e,"geoAlbers",function(){return Yy}),n.d(e,"geoAlbersUsa",function(){return Xy}),n.d(e,"geoAzimuthalEqualArea",function(){return Gy}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return Ky}),n.d(e,"geoAzimuthalEquidistant",function(){return Qy}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return Zy}),n.d(e,"geoConicConformal",function(){return $y}),n.d(e,"geoConicConformalRaw",function(){return bo}),n.d(e,"geoConicEqualArea",function(){return Wy}),n.d(e,"geoConicEqualAreaRaw",function(){return ho}),n.d(e,"geoConicEquidistant",function(){return eb}),n.d(e,"geoConicEquidistantRaw",function(){return xo}),n.d(e,"geoEquirectangular",function(){return tb}),n.d(e,"geoEquirectangularRaw",function(){return _o}),n.d(e,"geoGnomonic",function(){return nb}),n.d(e,"geoGnomonicRaw",function(){return wo}),n.d(e,"geoIdentity",function(){return rb}),n.d(e,"geoProjection",function(){return so}),n.d(e,"geoProjectionMutator",function(){return uo}),n.d(e,"geoMercator",function(){return Jy}),n.d(e,"geoMercatorRaw",function(){return go}),n.d(e,"geoNaturalEarth1",function(){return ib}),n.d(e,"geoNaturalEarth1Raw",function(){return So}),n.d(e,"geoOrthographic",function(){return ob}),n.d(e,"geoOrthographicRaw",function(){return ko}),n.d(e,"geoStereographic",function(){return ab}),n.d(e,"geoStereographicRaw",function(){return Eo}),n.d(e,"geoTransverseMercator",function(){return sb}),n.d(e,"geoTransverseMercatorRaw",function(){return Oo}),n.d(e,"geoRotation",function(){return Fm}),n.d(e,"geoStream",function(){return gm}),n.d(e,"geoTransform",function(){return By}),n.d(e,"cluster",function(){return ub}),n.d(e,"hierarchy",function(){return Lo}),n.d(e,"pack",function(){return Sb}),n.d(e,"packSiblings",function(){return wb}),n.d(e,"packEnclose",function(){return xb}),n.d(e,"partition",function(){return Ob}),n.d(e,"stratify",function(){return Pb}),n.d(e,"tree",function(){return Ab}),n.d(e,"treemap",function(){return Rb}),n.d(e,"treemapBinary",function(){return Lb}),n.d(e,"treemapDice",function(){return Eb}),n.d(e,"treemapSlice",function(){return Db}),n.d(e,"treemapSliceDice",function(){return Nb}),n.d(e,"treemapSquarify",function(){return jb}),n.d(e,"treemapResquarify",function(){return Fb}),n.d(e,"interpolate",function(){return Kf}),n.d(e,"interpolateArray",function(){return Hf}),n.d(e,"interpolateBasis",function(){return jf}),n.d(e,"interpolateBasisClosed",function(){return Rf}),n.d(e,"interpolateDate",function(){return qf}),n.d(e,"interpolateNumber",function(){return Vf}),n.d(e,"interpolateObject",function(){return Uf}),n.d(e,"interpolateRound",function(){return Gf}),n.d(e,"interpolateString",function(){return Xf}),n.d(e,"interpolateTransformCss",function(){return $f}),n.d(e,"interpolateTransformSvg",function(){return td}),n.d(e,"interpolateZoom",function(){return nd}),n.d(e,"interpolateRgb",function(){return Nf}),n.d(e,"interpolateRgbBasis",function(){return Ff}),n.d(e,"interpolateRgbBasisClosed",function(){return Bf}),n.d(e,"interpolateHsl",function(){return rd}),n.d(e,"interpolateHslLong",function(){return id}),n.d(e,"interpolateLab",function(){return ge});n.d(e,"interpolateHcl",function(){return od}),n.d(e,"interpolateHclLong",function(){return ad}),n.d(e,"interpolateCubehelix",function(){return sd}),n.d(e,"interpolateCubehelixLong",function(){return ud}),n.d(e,"quantize",function(){return cd}),n.d(e,"path",function(){return tv}),n.d(e,"polygonArea",function(){return Bb}),n.d(e,"polygonCentroid",function(){return Hb}),n.d(e,"polygonHull",function(){return Vb}),n.d(e,"polygonContains",function(){return Ub}),n.d(e,"polygonLength",function(){return Wb}),n.d(e,"quadtree",function(){return ur}),n.d(e,"queue",function(){return Ca}),n.d(e,"randomUniform",function(){return Gb}),n.d(e,"randomNormal",function(){return Zb}),n.d(e,"randomLogNormal",function(){return Qb}),n.d(e,"randomBates",function(){return $b}),n.d(e,"randomIrwinHall",function(){return Jb}),n.d(e,"randomExponential",function(){return t_}),n.d(e,"request",function(){return e_}),n.d(e,"html",function(){return r_}),n.d(e,"json",function(){return i_}),n.d(e,"text",function(){return o_}),n.d(e,"xml",function(){return a_}),n.d(e,"csv",function(){return u_}),n.d(e,"tsv",function(){return c_}),n.d(e,"scaleBand",function(){return Ia}),n.d(e,"scalePoint",function(){return Ra}),n.d(e,"scaleIdentity",function(){return Ya}),n.d(e,"scaleLinear",function(){return Wa}),n.d(e,"scaleLog",function(){return $a}),n.d(e,"scaleOrdinal",function(){return Da}),n.d(e,"scaleImplicit",function(){return d_}),n.d(e,"scalePow",function(){return es}),n.d(e,"scaleSqrt",function(){return ns}),n.d(e,"scaleQuantile",function(){return rs}),n.d(e,"scaleQuantize",function(){return is}),n.d(e,"scaleThreshold",function(){return os}),n.d(e,"scaleTime",function(){return $x}),n.d(e,"scaleUtc",function(){return tw}),n.d(e,"schemeCategory10",function(){return nw}),n.d(e,"schemeCategory20b",function(){return rw}),n.d(e,"schemeCategory20c",function(){return iw}),n.d(e,"schemeCategory20",function(){return ow}),n.d(e,"interpolateCubehelixDefault",function(){return aw}),n.d(e,"interpolateRainbow",function(){return lw}),n.d(e,"interpolateWarm",function(){return sw}),n.d(e,"interpolateCool",function(){return uw}),n.d(e,"interpolateViridis",function(){return hw}),n.d(e,"interpolateMagma",function(){return fw}),n.d(e,"interpolateInferno",function(){return dw}),n.d(e,"interpolatePlasma",function(){return pw}),n.d(e,"scaleSequential",function(){return du}),n.d(e,"creator",function(){return Jl}),n.d(e,"local",function(){return k}),n.d(e,"matcher",function(){return rh}),n.d(e,"mouse",function(){return ch}),n.d(e,"namespace",function(){return Ql}),n.d(e,"namespaces",function(){return Zl}),n.d(e,"select",function(){return Yh}),n.d(e,"selectAll",function(){return Xh}),n.d(e,"selection",function(){return Wh}),n.d(e,"selector",function(){return lh}),n.d(e,"selectorAll",function(){return fh}),n.d(e,"style",function(){return K}),n.d(e,"touch",function(){return Kh}),n.d(e,"touches",function(){return Gh}),n.d(e,"window",function(){return Ph}),n.d(e,"event",function(){return oh}),n.d(e,"customEvent",function(){return A}),n.d(e,"arc",function(){return Ow}),n.d(e,"area",function(){return zw}),n.d(e,"line",function(){return Cw}),n.d(e,"pie",function(){return Dw}),n.d(e,"areaRadial",function(){return Rw}),n.d(e,"radialArea",function(){return Rw}),n.d(e,"lineRadial",function(){return jw}),n.d(e,"radialLine",function(){return jw}),n.d(e,"pointRadial",function(){return Lw}),n.d(e,"linkHorizontal",function(){return ju}),n.d(e,"linkVertical",function(){return Ru}),n.d(e,"linkRadial",function(){return Lu}),n.d(e,"symbol",function(){return nM}),n.d(e,"symbols",function(){return eM}),n.d(e,"symbolCircle",function(){return Fw}),n.d(e,"symbolCross",function(){return Bw}),n.d(e,"symbolDiamond",function(){return Vw}),n.d(e,"symbolSquare",function(){return Kw}),n.d(e,"symbolStar",function(){return Xw}),n.d(e,"symbolTriangle",function(){return Zw}),n.d(e,"symbolWye",function(){return tM}),n.d(e,"curveBasisClosed",function(){return oM}),n.d(e,"curveBasisOpen",function(){return aM}),n.d(e,"curveBasis",function(){return iM}),n.d(e,"curveBundle",function(){return sM}),n.d(e,"curveCardinalClosed",function(){return cM}),n.d(e,"curveCardinalOpen",function(){return lM}),n.d(e,"curveCardinal",function(){return uM}),n.d(e,"curveCatmullRomClosed",function(){return fM}),n.d(e,"curveCatmullRomOpen",function(){return dM}),n.d(e,"curveCatmullRom",function(){return hM}),n.d(e,"curveLinearClosed",function(){return pM}),n.d(e,"curveLinear",function(){return Tw}),n.d(e,"curveMonotoneX",function(){return oc}),n.d(e,"curveMonotoneY",function(){return ac}),n.d(e,"curveNatural",function(){return vM}),n.d(e,"curveStep",function(){return gM}),n.d(e,"curveStepAfter",function(){return hc}),n.d(e,"curveStepBefore",function(){return lc}),n.d(e,"stack",function(){return bM}),n.d(e,"stackOffsetExpand",function(){return _M}),n.d(e,"stackOffsetDiverging",function(){return xM}),n.d(e,"stackOffsetNone",function(){return mM}),n.d(e,"stackOffsetSilhouette",function(){return wM}),n.d(e,"stackOffsetWiggle",function(){return MM}),n.d(e,"stackOrderAscending",function(){return SM}),n.d(e,"stackOrderDescending",function(){return kM}),n.d(e,"stackOrderInsideOut",function(){return EM}),n.d(e,"stackOrderNone",function(){return yM}),n.d(e,"stackOrderReverse",function(){return OM}),n.d(e,"timeInterval",function(){return as}),n.d(e,"timeMillisecond",function(){return w_}),n.d(e,"timeMilliseconds",function(){return M_}),n.d(e,"utcMillisecond",function(){return w_}),n.d(e,"utcMilliseconds",function(){return M_}),n.d(e,"timeSecond",function(){return O_}),n.d(e,"timeSeconds",function(){return T_}),n.d(e,"utcSecond",function(){return O_}),n.d(e,"utcSeconds",function(){return T_}),n.d(e,"timeMinute",function(){return z_}),n.d(e,"timeMinutes",function(){return P_}),n.d(e,"timeHour",function(){return D_}),n.d(e,"timeHours",function(){return I_}),n.d(e,"timeDay",function(){return R_}),n.d(e,"timeDays",function(){return L_}),n.d(e,"timeWeek",function(){return N_}),n.d(e,"timeWeeks",function(){return W_}),n.d(e,"timeSunday",function(){return N_}),n.d(e,"timeSundays",function(){return W_}),n.d(e,"timeMonday",function(){return F_}),n.d(e,"timeMondays",function(){return Y_}),n.d(e,"timeTuesday",function(){return B_}),n.d(e,"timeTuesdays",function(){return X_}),n.d(e,"timeWednesday",function(){return H_}),n.d(e,"timeWednesdays",function(){return K_}),n.d(e,"timeThursday",function(){return q_}),n.d(e,"timeThursdays",function(){return G_}),n.d(e,"timeFriday",function(){return V_}),n.d(e,"timeFridays",function(){return Z_}),n.d(e,"timeSaturday",function(){return U_}),n.d(e,"timeSaturdays",function(){return Q_}),n.d(e,"timeMonth",function(){return $_}),n.d(e,"timeMonths",function(){return tx}),n.d(e,"timeYear",function(){return nx}),n.d(e,"timeYears",function(){return rx}),n.d(e,"utcMinute",function(){return ox}),n.d(e,"utcMinutes",function(){return ax}),n.d(e,"utcHour",function(){return ux}),n.d(e,"utcHours",function(){return cx}),n.d(e,"utcDay",function(){return hx}),n.d(e,"utcDays",function(){return fx}),n.d(e,"utcWeek",function(){return dx}),n.d(e,"utcWeeks",function(){return _x}),n.d(e,"utcSunday",function(){return dx}),n.d(e,"utcSundays",function(){return _x}),n.d(e,"utcMonday",function(){return px}),n.d(e,"utcMondays",function(){return xx}),n.d(e,"utcTuesday",function(){return vx}),n.d(e,"utcTuesdays",function(){return wx}),n.d(e,"utcWednesday",function(){return gx}),n.d(e,"utcWednesdays",function(){return Mx}),n.d(e,"utcThursday",function(){return mx}),n.d(e,"utcThursdays",function(){return Sx}),n.d(e,"utcFriday",function(){return yx}),n.d(e,"utcFridays",function(){return kx}),n.d(e,"utcSaturday",function(){return bx}),n.d(e,"utcSaturdays",function(){return Ex}),n.d(e,"utcMonth",function(){return Tx}),n.d(e,"utcMonths",function(){return Cx}),n.d(e,"utcYear",function(){return Rx}),n.d(e,"utcYears",function(){return Lx}),n.d(e,"timeFormatDefaultLocale",function(){return au}),n.d(e,"timeFormat",function(){return Ax}),n.d(e,"timeParse",function(){return Dx}),n.d(e,"utcFormat",function(){return Ix}),n.d(e,"utcParse",function(){return jx}),n.d(e,"timeFormatLocale",function(){return fs}),n.d(e,"isoFormat",function(){return Vx}),n.d(e,"isoParse",function(){return Wx}),n.d(e,"now",function(){return be}),n.d(e,"timer",function(){return we}),n.d(e,"timerFlush",function(){return Me}),n.d(e,"timeout",function(){return bd}),n.d(e,"interval",function(){return _d}),n.d(e,"transition",function(){return an}),n.d(e,"active",function(){return kp}),n.d(e,"interrupt",function(){return Pd}),n.d(e,"voronoi",function(){return FM}),n.d(e,"zoom",function(){return VM}),n.d(e,"zoomTransform",function(){return Kc});n.d(e,"zoomIdentity",function(){return HM})},"cpZ/":function(t,e,n){"use strict";var r=n("ptrv"),i=n("CDXM"),o=n("lfBE"),a=n("pBmS"),s=n("xI8H"),u=n("p/bR"),c=n("Lcie"),l=n("JXkd"),h=n("umMR"),f=n("UlVq"),d=n("P6IN"),p=n("Ula3");t.exports=function(t,e,n,v,g,m){var y=r[t],b=y,_=g?"set":"add",x=b&&b.prototype,w={},M=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||x.forEach&&!h(function(){(new b).entries().next()}))){var S=new b,k=S[_](m?{}:-0,1)!=S,E=h(function(){S.has(1)}),O=f(function(t){new b(t)}),T=!m&&h(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});O||(b=e(function(e,n){c(e,b,t);var r=p(new y,e,b);return void 0!=n&&u(n,g,r[_],r),r}),b.prototype=x,x.constructor=b),(E||T)&&(M("delete"),M("has"),g&&M("get")),(T||k)&&M(_),m&&x.clear&&delete x.clear}else b=v.getConstructor(e,t,g,_),a(b.prototype,n),s.NEED=!0;return d(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=y),w),m||v.setStrong(b,t,g),b}},"d+61":function(t,e,n){var r=n("CDXM");r(r.S,"Reflect",{has:function(t,e){return e in t}})},d3uY:function(t,e,n){var r=n("JXkd"),i=n("xI8H").onFreeze;n("QN+J")("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},dBNB:function(t,e,n){"use strict";var r=n("CDXM"),i=n("+pQw"),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n("9ScN")(o,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},dLZl:function(t,e,n){var r=n("CDXM"),i=n("T0iK");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},dSHT:function(t,e,n){var r=n("CDXM"),i=n("TJLg"),o=n("+pQw");r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},dU6i:function(t,e,n){for(var r=n("xB6L"),i=n("2Fuj"),o=n("lfBE"),a=n("ptrv"),s=n("gxdV"),u=n("lexG"),c=n("3r0D"),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var g,m=p[v],y=d[m],b=a[m],_=b&&b.prototype;if(_&&(_[l]||s(_,l,f),_[h]||s(_,h,m),u[m]=f,y))for(g in r)_[g]||o(_,g,r[g],!0)}},dVlF:function(t,e,n){n("YD56")("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},"dXJ/":function(t,e,n){var r=n("VceJ"),i=n("3r0D")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},dkwD:function(t,e,n){"use strict";var r=n("zijX"),i=r.root.Symbol;e.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},dlwK:function(t,e,n){var r=n("CDXM"),i=n("51pc"),o=n("uNkO"),a=n("+pQw"),s=n("JXkd"),u=n("umMR"),c=n("p9up"),l=(n("ptrv").Reflect||{}).construct,h=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),f=!u(function(){l(function(){})});r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},eFQL:function(t,e,n){(function(t){!function(t,e){e()}(0,function(){"use strict";function e(t,e){for(var n=t.length-1;n>=0;n--)typeof t[n]===C&&(t[n]=Zone.current.wrap(t[n],e+"_"+n));return t}function n(t,n){for(var i=t.constructor.name,o=0;o<n.length;o++)!function(o){var a=n[o],s=t[a];if(s){if(!r(Object.getOwnPropertyDescriptor(t,a)))return"continue";t[a]=function(t){var n=function(){return t.apply(this,e(arguments,i+"."+a))};return c(n,t),n}(s)}}(o)}function r(t){return!t||!1!==t.writable&&(typeof t.get!==C||typeof t.set!==z)}function i(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e);if(!r&&n){Object.getOwnPropertyDescriptor(n,e)&&(r={enumerable:!0,configurable:!0})}if(r&&r.configurable){delete r.writable,delete r.value;var i=r.get,o=e.substr(2),a=R[o];a||(a=R[o]=O("ON_PROPERTY"+o)),r.set=function(e){var n=this;if(n||t!==T||(n=T),n){n[a]&&n.removeEventListener(o,L),"function"==typeof e?(n[a]=e,n.addEventListener(o,L,!1)):n[a]=null}},r.get=function(){var n=this;if(n||t!==T||(n=T),!n)return null;if(n[a])return L;if(i){var o=i&&i.apply(this);if(o)return r.set.apply(this,[o]),typeof n[P]===C&&n.removeAttribute(e),o}return null},Object.defineProperty(t,e,r)}}function o(t,e,n){if(e)for(var r=0;r<e.length;r++)i(t,"on"+e[r],n);else{var o=[];for(var a in t)"on"==a.substr(0,2)&&o.push(a);for(var s=0;s<o.length;s++)i(t,o[s],n)}}function a(t){var n=T[t];if(n){T[O(t)]=n,T[t]=function(){var r=e(arguments,t);switch(r.length){case 0:this[N]=new n;break;case 1:this[N]=new n(r[0]);break;case 2:this[N]=new n(r[0],r[1]);break;case 3:this[N]=new n(r[0],r[1],r[2]);break;case 4:this[N]=new n(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},c(T[t],n);var r,i=new n(function(){});for(r in i)"XMLHttpRequest"===t&&"responseBlob"===r||function(e){"function"==typeof i[e]?T[t].prototype[e]=function(){return this[N][e].apply(this[N],arguments)}:Object.defineProperty(T[t].prototype,e,{set:function(n){"function"==typeof n?(this[N][e]=Zone.current.wrap(n,t+"."+e),c(this[N][e],n)):this[N][e]=n},get:function(){return this[N][e]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&(T[t][r]=n[r])}}function s(t,e,n){for(var i=t;i&&!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);!i&&t[e]&&(i=t);var o,a=O(e);if(i&&!(o=i[a])){o=i[a]=i[e];if(r(i&&Object.getOwnPropertyDescriptor(i,e))){var s=n(o,a,e);i[e]=function(){return s(this,arguments)},c(i[e],o)}}return o}function u(t,e,n){function r(t){var e=t.data;return e.args[e.callbackIndex]=function(){t.invoke.apply(this,arguments)},i.apply(e.target,e.args),t}var i=null;i=s(t,e,function(t){return function(e,i){var o=n(e,i);if(o.callbackIndex>=0&&"function"==typeof i[o.callbackIndex]){return Zone.current.scheduleMacroTask(o.name,i[o.callbackIndex],o,r,null)}return t.apply(e,i)}})}function c(t,e){t[O("OriginalDelegate")]=e}function l(){if(F)return B;F=!0;try{var t=window.navigator.userAgent;t.indexOf("MSIE ");return-1===t.indexOf("MSIE ")&&-1===t.indexOf("Trident/")&&-1===t.indexOf("Edge/")||(B=!0),B}catch(t){}}function h(t,e,n){for(var r=n&&n.addEventListenerFnName||"addEventListener",i=n&&n.removeEventListenerFnName||"removeEventListener",o=n&&n.listenersFnName||"eventListeners",a=n&&n.removeAllFnName||"removeAllListeners",s=O(r),u="."+r+":",l="prependListener",h="."+l+":",d=function(t,e,n){if(!t.isRemoved){var r=t.callback;typeof r===K&&r.handleEvent&&(t.callback=function(t){return r.handleEvent(t)},t.originalDelegate=r),t.invoke(t,e,[n]);var o=t.options;if(o&&"object"==typeof o&&o.once){var a=t.originalDelegate?t.originalDelegate:t.callback;e[i].apply(e,[n.type,a,o])}}},p=function(e){var n=this||t,r=n[U[e.type][q]];if(r)if(1===r.length)d(r[0],n,e);else for(var i=r.slice(),o=0;o<i.length;o++)d(i[o],n,e)},v=function(e){var n=this||t,r=n[U[e.type][H]];if(r)if(1===r.length)d(r[0],n,e);else for(var i=r.slice(),o=0;o<i.length;o++)d(i[o],n,e)},g=[],m=0;m<e.length;m++)g[m]=function(e,n){if(!e)return!1;var d=!0;n&&void 0!==n.useGlobalCallback&&(d=n.useGlobalCallback);var g=n&&n.validateHandler,m=!0;n&&void 0!==n.checkDuplicate&&(m=n.checkDuplicate);var y=!1;n&&void 0!==n.returnTarget&&(y=n.returnTarget);for(var b=e;b&&!b.hasOwnProperty(r);)b=Object.getPrototypeOf(b);if(!b&&e[r]&&(b=e),!b)return!1;if(b[s])return!1;var _,x={},w=b[s]=b[r],M=b[O(i)]=b[i],S=b[O(o)]=b[o],k=b[O(a)]=b[a];n&&n.prependEventListenerFnName&&(_=b[O(n.prependEventListenerFnName)]=b[n.prependEventListenerFnName]);var E=function(t){if(!x.isExisting)return w.apply(x.target,[x.eventName,x.capture?v:p,x.options])},T=function(t){if(!t.isRemoved){var e=U[t.eventName],n=void 0;e&&(n=e[t.capture?H:q]);var r=n&&t.target[n];if(r)for(var i=0;i<r.length;i++){var o=r[i];if(o===t){r.splice(i,1),t.isRemoved=!0,0===r.length&&(t.allRemoved=!0,t.target[n]=null);break}}}if(t.allRemoved)return M.apply(t.target,[t.eventName,t.capture?v:p,t.options])},C=function(t){return w.apply(x.target,[x.eventName,t.invoke,x.options])},z=function(t){return _.apply(x.target,[x.eventName,t.invoke,x.options])},P=function(t){return M.apply(t.target,[t.eventName,t.invoke,t.options])},A=d?E:C,D=d?T:P,I=function(t,e){var n=typeof e;return n===X&&t.callback===e||n===K&&t.originalDelegate===e},j=n&&n.compareTaskCallbackVsDelegate?n.compareTaskCallbackVsDelegate:I,R=function(e,n,r,i,o,a){return void 0===o&&(o=!1),void 0===a&&(a=!1),function(){var s=this||t,u=(Zone.current,arguments[1]);if(!u)return e.apply(this,arguments);var c=!1;if(typeof u!==X){if(!u.handleEvent)return e.apply(this,arguments);c=!0}if(!g||g(e,u,s,arguments)){var l,h=arguments[0],f=arguments[2],p=!1;void 0===f?l=!1:!0===f?l=!0:!1===f?l=!1:(l=!!f&&!!f.capture,p=!!f&&!!f.once);var v,y=Zone.current,b=U[h];if(b)v=b[l?H:q];else{var _=h+q,w=h+H,M=G+_,S=G+w;U[h]={},U[h][q]=M,U[h][H]=S,v=l?S:M}var k=s[v],E=!1;if(k){if(E=!0,m)for(var O=0;O<k.length;O++)if(j(k[O],u))return}else k=s[v]=[];var T,C=s.constructor[Y],z=W[C];z&&(T=z[h]),T||(T=C+n+h),x.options=f,p&&(x.options.once=!1),x.target=s,x.capture=l,x.eventName=h,x.isExisting=E;var P=d?V:null,A=y.scheduleEventTask(T,u,P,r,i);return p&&(f.once=!0),A.options=f,A.target=s,A.capture=l,A.eventName=h,c&&(A.originalDelegate=u),a?k.unshift(A):k.push(A),o?s:void 0}}};return b[r]=R(w,u,A,D,y),_&&(b[l]=R(_,h,z,D,y,!0)),b[i]=function(){var e,n=this||t,r=arguments[0],i=arguments[2];e=void 0!==i&&(!0===i||!1!==i&&(!!i&&!!i.capture));var o=arguments[1];if(!o)return M.apply(this,arguments);if(!g||g(M,o,n,arguments)){var a,s=U[r];s&&(a=s[e?H:q]);var u=a&&n[a];if(u)for(var c=0;c<u.length;c++){var l=u[c];if(j(l,o))return u.splice(c,1),l.isRemoved=!0,0===u.length&&(l.allRemoved=!0,n[a]=null),void l.zone.cancelTask(l)}}},b[o]=function(){for(var e=this||t,n=arguments[0],r=[],i=f(e,n),o=0;o<i.length;o++){var a=i[o],s=a.originalDelegate?a.originalDelegate:a.callback;r.push(s)}return r},b[a]=function(){var e=this||t,n=arguments[0];if(n){var r=U[n];if(r){var o=r[q],s=r[H],u=e[o],c=e[s];if(u)for(var l=u.slice(),h=0;h<l.length;h++){var f=l[h],d=f.originalDelegate?f.originalDelegate:f.callback;this[i].apply(this,[n,d,f.options])}if(c)for(var l=c.slice(),h=0;h<l.length;h++){var f=l[h],d=f.originalDelegate?f.originalDelegate:f.callback;this[i].apply(this,[n,d,f.options])}}}else{for(var p=Object.keys(e),h=0;h<p.length;h++){var v=p[h],g=Z.exec(v),m=g&&g[1];m&&"removeListener"!==m&&this[a].apply(this,[m])}this[a].apply(this,["removeListener"])}},c(b[r],w),c(b[i],M),k&&c(b[a],k),S&&c(b[o],S),!0}(e[m],n);return g}function f(t,e){var n=[];for(var r in t){var i=Z.exec(r),o=i&&i[1];if(o&&(!e||o===e)){var a=t[r];if(a)for(var s=0;s<a.length;s++)n.push(a[s])}}return n}function d(t,e,n,r){function i(e){function n(){try{e.invoke.apply(this,arguments)}finally{typeof r.handleId===l&&delete c[r.handleId]}}var r=e.data;return r.args[0]=n,r.handleId=a.apply(t,r.args),typeof r.handleId===l&&(c[r.handleId]=e),e}function o(t){return typeof t.data.handleId===l&&delete c[t.data.handleId],u(t.data.handleId)}var a=null,u=null;e+=r,n+=r;var c={},l="number";a=s(t,e,function(n){return function(a,s){if("function"==typeof s[0]){var u=Zone.current,c={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?s[1]||0:null,args:s},l=u.scheduleMacroTask(e,s[0],c,i,o);if(!l)return l;var h=l.data.handleId;return h&&h.ref&&h.unref&&"function"==typeof h.ref&&"function"==typeof h.unref&&(l.ref=h.ref.bind(h),l.unref=h.unref.bind(h)),l}return n.apply(t,s)}}),u=s(t,n,function(e){return function(n,r){var i=typeof r[0]===l?c[r[0]]:r[0];i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&i.zone.cancelTask(i):e.apply(t,r)}})}function p(){Object.defineProperty=function(t,e,n){if(g(t,e))throw new TypeError("Cannot assign to read only property '"+e+"' of "+t);var r=n.configurable;return e!==et&&(n=m(t,e,n)),y(t,e,n,r)},Object.defineProperties=function(t,e){return Object.keys(e).forEach(function(n){Object.defineProperty(t,n,e[n])}),t},Object.create=function(t,e){return typeof e!==nt||Object.isFrozen(e)||Object.keys(e).forEach(function(n){e[n]=m(t,n,e[n])}),$(t,e)},Object.getOwnPropertyDescriptor=function(t,e){var n=J(t,e);return g(t,e)&&(n.configurable=!1),n}}function v(t,e,n){var r=n.configurable;return n=m(t,e,n),y(t,e,n,r)}function g(t,e){return t&&t[tt]&&t[tt][e]}function m(t,e,n){return n.configurable=!0,n.configurable||(t[tt]||Q(t,tt,{writable:!0,value:{}}),t[tt][e]=!0),n}function y(t,e,n,r){try{return Q(t,e,n)}catch(o){if(!n.configurable)throw o;typeof r==rt?delete n.configurable:n.configurable=r;try{return Q(t,e,n)}catch(r){var i=null;try{i=JSON.stringify(n)}catch(t){i=i.toString()}console.log("Attempting to configure '"+e+"' with descriptor '"+i+"' on object '"+t+"' and got error, giving up: "+r)}}}function b(t,e){var n=e.WebSocket;e.EventTarget||h(e,[n.prototype]),e.WebSocket=function(t,e){var r,i,a=arguments.length>1?new n(t,e):new n(t),s=Object.getOwnPropertyDescriptor(a,"onmessage");return s&&!1===s.configurable?(r=Object.create(a),i=a,["addEventListener","removeEventListener","send","close"].forEach(function(t){r[t]=function(){var e=Array.prototype.slice.call(arguments);if("addEventListener"===t||"removeEventListener"===t){var n=e.length>0?e[0]:void 0;if(n){var i=Zone.__symbol__("ON_PROPERTY"+n);a[i]=r[i]}}return a[t].apply(a,e)}})):r=a,o(r,["close","error","message","open"],i),r};var r=e.WebSocket;for(var i in n)r[i]=n[i]}function _(t,e,n){if(!n)return e;var r=n.filter(function(e){return e.target===t});if(!r||0===r.length)return e;var i=r[0].ignoreProperties;return e.filter(function(t){return-1===i.indexOf(t)})}function x(t,e,n,r){o(t,_(t,e,n),r)}function w(t,e){if(!D||j){var n="undefined"!=typeof WebSocket;if(M()){var r=e.__Zone_ignore_on_properties;if(I){x(window,bt.concat(["messageerror"]),r,Object.getPrototypeOf(window)),x(Document.prototype,bt,r),void 0!==window.SVGElement&&x(window.SVGElement.prototype,bt,r),x(Element.prototype,bt,r),x(HTMLElement.prototype,bt,r),x(HTMLMediaElement.prototype,ut,r),x(HTMLFrameSetElement.prototype,at.concat(pt),r),x(HTMLBodyElement.prototype,at.concat(pt),r),x(HTMLFrameElement.prototype,dt,r),x(HTMLIFrameElement.prototype,dt,r);var i=window.HTMLMarqueeElement;i&&x(i.prototype,vt,r)}x(XMLHttpRequest.prototype,gt,r);var o=e.XMLHttpRequestEventTarget;o&&x(o&&o.prototype,gt,r),"undefined"!=typeof IDBIndex&&(x(IDBIndex.prototype,mt,r),x(IDBRequest.prototype,mt,r),x(IDBOpenDBRequest.prototype,mt,r),x(IDBDatabase.prototype,mt,r),x(IDBTransaction.prototype,mt,r),x(IDBCursor.prototype,mt,r)),n&&x(WebSocket.prototype,yt,r)}else S(),a("XMLHttpRequest"),n&&b(t,e)}}function M(){if((I||j)&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var t=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(t&&!t.configurable)return!1}var e=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"onreadystatechange");if(e){Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});var n=new XMLHttpRequest,r=!!n.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",e||{}),r}var i=O("fakeonreadystatechange");Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return this[i]},set:function(t){this[i]=t}});var n=new XMLHttpRequest,o=function(){};n.onreadystatechange=o;var r=n[i]===o;return n.onreadystatechange=null,r}function S(){for(var t=0;t<bt.length;t++)!function(t){var e=bt[t],n="on"+e;self.addEventListener(e,function(t){var e,r,i=t.target;for(r=i?i.constructor.name+"."+n:"unknown."+n;i;)i[n]&&!i[n][_t]&&(e=Zone.current.wrap(i[n],r),e[_t]=i[n],i[n]=e),i=i.parentElement},!0)}(t)}function k(t,e){var n="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",r="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),i=[],o=t.wtf,a=n.split(",");o?i=a.map(function(t){return"HTML"+t+"Element"}).concat(r):t.EventTarget?i.push("EventTarget"):i=r;for(var s=t.__Zone_disable_IE_check||!1,u=t.__Zone_enable_cross_context_check||!1,c=l(),f="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",d=0;d<bt.length;d++){var p=bt[d],v=p+q,g=p+H,m=G+v,y=G+g;U[p]={},U[p][q]=m,U[p][H]=y}for(var d=0;d<n.length;d++)for(var b=a[d],_=W[b]={},x=0;x<bt.length;x++){var p=bt[x];_[p]=b+".addEventListener:"+p}for(var w=function(t,e,n,r){if(!s&&c)if(u)try{var i=e.toString();if("[object FunctionWrapper]"===i||i==f)return t.apply(n,r),!1}catch(e){return t.apply(n,r),!1}else{var i=e.toString();if("[object FunctionWrapper]"===i||i==f)return t.apply(n,r),!1}else if(u)try{e.toString()}catch(e){return t.apply(n,r),!1}return!0},M=[],d=0;d<i.length;d++){var S=t[i[d]];M.push(S&&S.prototype)}return h(t,M,{validateHandler:w}),e.patchEventTarget=h,!0}function E(t){if((I||j)&&"registerElement"in t.document){var e=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(t,r){return r&&r.prototype&&n.forEach(function(t){var e="Document.registerElement::"+t;if(r.prototype.hasOwnProperty(t)){var n=Object.getOwnPropertyDescriptor(r.prototype,t);n&&n.value?(n.value=Zone.current.wrap(n.value,e),v(r.prototype,t,n)):r.prototype[t]=Zone.current.wrap(r.prototype[t],e)}else r.prototype[t]&&(r.prototype[t]=Zone.current.wrap(r.prototype[t],e))}),e.apply(document,[t,r])},c(document.registerElement,e)}}!function(t){function e(t){s&&s.mark&&s.mark(t)}function n(t,e){s&&s.measure&&s.measure(t,e)}function r(e){0===A&&0===g.length&&(c||t[p]&&(c=t[p].resolve(0)),c?c[v](i):t[d](i,0)),e&&g.push(e)}function i(){if(!m){for(m=!0;g.length;){var t=g;g=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.zone.runTask(n,null,null)}catch(t){C.onUnhandledError(t)}}}u[a("ignoreConsoleErrorUncaughtError")];C.microtaskDrainDone(),m=!1}}function o(){}function a(t){return"__zone_symbol__"+t}var s=t.performance;if(e("Zone"),t.Zone)throw new Error("Zone already loaded.");var u=function(){function r(t,e){this._properties=null,this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new h(this,this._parent&&this._parent._zoneDelegate,e)}return r.assertZonePatched=function(){if(t.Promise!==T.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(r,"root",{get:function(){for(var t=r.current;t.parent;)t=t.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(r,"current",{get:function(){return z.zone},enumerable:!0,configurable:!0}),Object.defineProperty(r,"currentTask",{get:function(){return P},enumerable:!0,configurable:!0}),r.__load_patch=function(i,o){if(T.hasOwnProperty(i))throw Error("Already loaded patch: "+i);if(!t["__Zone_disable_"+i]){var a="Zone:"+i;e(a),T[i]=o(t,r,C),n(a,a)}},Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),r.prototype.get=function(t){var e=this.getZoneWith(t);if(e)return e._properties[t]},r.prototype.getZoneWith=function(t){for(var e=this;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null},r.prototype.fork=function(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)},r.prototype.wrap=function(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);var n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}},r.prototype.run=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=null),void 0===r&&(r=null),z={parent:z,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{z=z.parent}},r.prototype.runGuarded=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),z={parent:z,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{z=z.parent}},r.prototype.runTask=function(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||y).name+"; Execution: "+this.name+")");if(t.state!==b||t.type!==O){var r=t.state!=w;r&&t._transitionTo(w,x),t.runCount++;var i=P;P=t,z={parent:z,zone:this};try{t.type==E&&t.data&&!t.data.isPeriodic&&(t.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{t.state!==b&&t.state!==S&&(t.type==O||t.data&&t.data.isPeriodic?r&&t._transitionTo(x,w):(t.runCount=0,this._updateTaskCount(t,-1),r&&t._transitionTo(b,w,b))),z=z.parent,P=i}}},r.prototype.scheduleTask=function(t){if(t.zone&&t.zone!==this)for(var e=this;e;){if(e===t.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+t.zone.name);e=e.parent}t._transitionTo(_,b);var n=[];t._zoneDelegates=n,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(e){throw t._transitionTo(S,_,b),this._zoneDelegate.handleError(this,e),e}return t._zoneDelegates===n&&this._updateTaskCount(t,1),t.state==_&&t._transitionTo(x,_),t},r.prototype.scheduleMicroTask=function(t,e,n,r){return this.scheduleTask(new f(k,t,e,n,r,null))},r.prototype.scheduleMacroTask=function(t,e,n,r,i){return this.scheduleTask(new f(E,t,e,n,r,i))},r.prototype.scheduleEventTask=function(t,e,n,r,i){return this.scheduleTask(new f(O,t,e,n,r,i))},r.prototype.cancelTask=function(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||y).name+"; Execution: "+this.name+")");t._transitionTo(M,x,w);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(S,M),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(b,M),t.runCount=0,t},r.prototype._updateTaskCount=function(t,e){var n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(t.type,e)},r}();u.__symbol__=a;var c,l={name:"",onHasTask:function(t,e,n,r){return t.hasTask(n,r)},onScheduleTask:function(t,e,n,r){return t.scheduleTask(n,r)},onInvokeTask:function(t,e,n,r,i,o){return t.invokeTask(n,r,i,o)},onCancelTask:function(t,e,n,r){return t.cancelTask(n,r)}},h=function(){function t(t,e,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=e,this._forkZS=n&&(n&&n.onFork?n:e._forkZS),this._forkDlgt=n&&(n.onFork?e:e._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:e.zone),this._interceptZS=n&&(n.onIntercept?n:e._interceptZS),this._interceptDlgt=n&&(n.onIntercept?e:e._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:e.zone),this._invokeZS=n&&(n.onInvoke?n:e._invokeZS),this._invokeDlgt=n&&(n.onInvoke?e:e._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:e.zone),this._handleErrorZS=n&&(n.onHandleError?n:e._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?e:e._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:e.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:e._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?e:e._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:e.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:e._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?e:e._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:e.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:e._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?e:e._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:e.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var r=n&&n.onHasTask,i=e&&e._hasTaskZS;(r||i)&&(this._hasTaskZS=r?n:l,this._hasTaskDlgt=e,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=t,n.onScheduleTask||(this._scheduleTaskZS=l,this._scheduleTaskDlgt=e,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=l,this._invokeTaskDlgt=e,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=l,this._cancelTaskDlgt=e,this._cancelTaskCurrZone=this.zone))}return t.prototype.fork=function(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new u(t,e)},t.prototype.intercept=function(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e},t.prototype.invoke=function(t,e,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,r,i):e.apply(n,r)},t.prototype.handleError=function(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)},t.prototype.scheduleTask=function(t,e){var n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e))||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=k)throw new Error("Task is missing scheduleFn.");r(e)}return n},t.prototype.invokeTask=function(t,e,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,r):e.callback.apply(n,r)},t.prototype.cancelTask=function(t,e){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n},t.prototype.hasTask=function(t,e){try{return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(e){this.handleError(t,e)}},t.prototype._updateTaskCount=function(t,e){var n=this._taskCounts,r=n[t],i=n[t]=r+e;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var o={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t};this.hasTask(this.zone,o)}},t}(),f=function(){function e(n,r,i,o,a,s){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=o,this.scheduleFn=a,this.cancelFn=s,this.callback=i;var u=this;n===O&&o&&o.isUsingGlobalCallback?this.invoke=e.invokeTask:this.invoke=function(){return e.invokeTask.apply(t,[u,this,arguments])}}return e.invokeTask=function(t,e,n){t||(t=this),A++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==A&&i(),A--}},Object.defineProperty(e.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.cancelScheduleRequest=function(){this._transitionTo(b,_)},e.prototype._transitionTo=function(t,e,n){if(this._state!==e&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+t+"', expecting state '"+e+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=t,t==b&&(this._zoneDelegates=null)},e.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},e.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},e}(),d=a("setTimeout"),p=a("Promise"),v=a("then"),g=[],m=!1,y={name:"NO ZONE"},b="notScheduled",_="scheduling",x="scheduled",w="running",M="canceling",S="unknown",k="microTask",E="macroTask",O="eventTask",T={},C={symbol:a,currentZoneFrame:function(){return z},onUnhandledError:o,microtaskDrainDone:o,scheduleMicroTask:r,showUncaughtError:function(){return!u[a("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:o,patchMethod:function(){return o}},z={parent:null,zone:new u(null,null)},P=null,A=0;n("Zone","Zone"),t.Zone=u}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||t);Zone.__load_patch("ZoneAwarePromise",function(t,e,n){function r(t){n.onUnhandledError(t);try{var r=e[g];r&&"function"==typeof r&&r.apply(this,[t])}catch(t){}}function i(t){return t&&t.then}function o(t){return t}function a(t){return z.reject(t)}function s(t,e){return function(n){try{u(t,e,n)}catch(e){u(t,!1,e)}}}function u(t,r,i){var o=S();if(t===i)throw new TypeError(k);if(t[m]===_){var a=null;try{typeof i!==E&&typeof i!==O||(a=i&&i.then)}catch(e){return o(function(){u(t,!1,e)})(),t}if(r!==w&&i instanceof z&&i.hasOwnProperty(m)&&i.hasOwnProperty(y)&&i[m]!==_)c(i),u(t,i[m],i[y]);else if(r!==w&&typeof a===O)try{a.apply(i,[o(s(t,r)),o(s(t,!1))])}catch(e){o(function(){u(t,!1,e)})()}else{t[m]=r;var h=t[y];t[y]=i,r===w&&i instanceof Error&&(i[T]=e.currentTask);for(var f=0;f<h.length;)l(t,h[f++],h[f++],h[f++],h[f++]);if(0==h.length&&r==w){t[m]=M;try{throw new Error("Uncaught (in promise): "+i+(i&&i.stack?"\n"+i.stack:""))}catch(r){var p=r;p.rejection=i,p.promise=t,p.zone=e.current,p.task=e.currentTask,d.push(p),n.scheduleMicroTask()}}}}return t}function c(t){if(t[m]===M){try{var n=e[C];n&&typeof n===O&&n.apply(this,[{rejection:t[y],promise:t}])}catch(t){}t[m]=w;for(var r=0;r<d.length;r++)t===d[r].promise&&d.splice(r,1)}}function l(t,e,n,r,i){c(t);var s=t[m]?typeof r===O?r:o:typeof i===O?i:a;e.scheduleMicroTask(b,function(){try{u(n,!0,e.run(s,void 0,[t[y]]))}catch(t){u(n,!1,t)}})}function h(t){var e=t.prototype,n=e.then;e[v]=n;var r=Object.getOwnPropertyDescriptor(t.prototype,"then");r&&!1===r.writable&&r.configurable&&Object.defineProperty(t.prototype,"then",{writable:!0}),t.prototype.then=function(t,e){var r=this;return new z(function(t,e){n.call(r,t,e)}).then(t,e)},t[A]=!0}var f=n.symbol,d=[],p=f("Promise"),v=f("then");n.onUnhandledError=function(t){if(n.showUncaughtError()){var e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=function(){for(;d.length;)for(;d.length;)!function(){var t=d.shift();try{t.zone.runGuarded(function(){throw t})}catch(t){r(t)}}()};var g=f("unhandledPromiseRejectionHandler"),m=f("state"),y=f("value"),b="Promise.then",_=null,x=!0,w=!1,M=0,S=function(){var t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}},k="Promise resolved with itself",E="object",O="function",T=f("currentTask"),C=f("rejectionHandledHandler"),z=function(){function t(e){var n=this;if(!(n instanceof t))throw new Error("Must be an instanceof Promise.");n[m]=_,n[y]=[];try{e&&e(s(n,x),s(n,w))}catch(t){u(n,!1,t)}}return t.toString=function(){return"function ZoneAwarePromise() { [native code] }"},t.resolve=function(t){return u(new this(null),x,t)},t.reject=function(t){return u(new this(null),w,t)},t.race=function(t){function e(t){a&&(a=r(t))}function n(t){a&&(a=o(t))}for(var r,o,a=new this(function(t,e){n=[t,e],r=n[0],o=n[1];var n}),s=0,u=t;s<u.length;s++){var c=u[s];i(c)||(c=this.resolve(c)),c.then(e,n)}return a},t.all=function(t){for(var e,n,r=new this(function(t,r){e=t,n=r}),o=0,a=[],s=0,u=t;s<u.length;s++){var c=u[s];i(c)||(c=this.resolve(c)),c.then(function(t){return function(n){a[t]=n,--o||e(a)}}(o),n),o++}return o||e(a),r},t.prototype.then=function(t,n){var r=new this.constructor(null),i=e.current;return this[m]==_?this[y].push(i,r,t,n):l(this,i,r,t,n),r},t.prototype.catch=function(t){return this.then(null,t)},t}();z.resolve=z.resolve,z.reject=z.reject,z.race=z.race,z.all=z.all;var P=t[p]=t.Promise;t.Promise=z;var A=f("thenPatched");if(P){h(P);var D=t.fetch;typeof D==O&&(t.fetch=function(t){return function(){var e=t.apply(this,arguments);if(e instanceof z)return e;var n=e.constructor;return n[A]||h(n),e}}(D))}return Promise[e.__symbol__("uncaughtPromiseErrors")]=d,z});var O=Zone.__symbol__,T="object"==typeof window&&window||"object"==typeof self&&self||t,C="function",z="undefined",P="removeAttribute",A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,D=!("nw"in T)&&void 0!==T.process&&"[object process]"==={}.toString.call(T.process),I=!D&&!A&&!("undefined"==typeof window||!window.HTMLElement),j=void 0!==T.process&&"[object process]"==={}.toString.call(T.process)&&!A&&!("undefined"==typeof window||!window.HTMLElement),R=(O("onPropertyHandler"),{}),L=function(t){var e=R[t.type];e||(e=R[t.type]=O("ON_PROPERTY"+t.type));var n=this[e],r=n&&n.apply(this,arguments);return void 0==r||r||t.preventDefault(),r},N=O("originalInstance"),F=!1,B=!1;Zone.__load_patch("toString",function(t,e,n){var r=e.__zone_symbol__originalToString=Function.prototype.toString,i=O("OriginalDelegate"),o=O("Promise"),a=O("Error");Function.prototype.toString=function(){if("function"==typeof this){var e=this[i];if(e)return"function"==typeof e?r.apply(this[i],arguments):Object.prototype.toString.call(e);if(this===Promise){var n=t[o];if(n)return r.apply(n,arguments)}if(this===Error){var s=t[a];if(s)return r.apply(s,arguments)}}return r.apply(this,arguments)};var s=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":s.apply(this,arguments)}});var H="true",q="false",V={isUsingGlobalCallback:!0},U={},W={},Y="name",X="function",K="object",G="__zone_symbol__",Z=/^__zone_symbol__(\w+)(true|false)$/,Q=Object[O("defineProperty")]=Object.defineProperty,J=Object[O("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,$=Object.create,tt=O("unconfigurables"),et="prototype",nt="object",rt="undefined",it=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","transitioncancel","transitionend","waiting","wheel"],ot=["afterscriptexecute","beforescriptexecute","DOMContentLoaded","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange"],at=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],ut=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],ct=["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"],lt=["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],ht=["autocomplete","autocompleteerror"],ft=["toggle"],dt=["load"],pt=["blur","error","focus","load","resize","scroll","messageerror"],vt=["bounce","finish","start"],gt=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],mt=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],yt=["close","error","open","message"],bt=it.concat(lt,ht,ft,ot,at,st,ct),_t=O("unbound");Zone.__load_patch("timers",function(t,e,n){d(t,"set","clear","Timeout"),d(t,"set","clear","Interval"),d(t,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",function(t,e,n){d(t,"request","cancel","AnimationFrame"),d(t,"mozRequest","mozCancel","AnimationFrame"),d(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(t,e,n){for(var r=["alert","prompt","confirm"],i=0;i<r.length;i++){s(t,r[i],function(n,r,i){return function(r,o){return e.current.run(n,t,o,i)}})}}),Zone.__load_patch("EventTarget",function(t,e,n){k(t,n);var r=t.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(t,[r.prototype]),a("MutationObserver"),a("WebKitMutationObserver"),a("IntersectionObserver"),a("FileReader")}),Zone.__load_patch("on_property",function(t,e,n){w(n,t),p(),E(t)}),Zone.__load_patch("canvas",function(t,e,n){var r=t.HTMLCanvasElement;void 0!==r&&r.prototype&&r.prototype.toBlob&&u(r.prototype,"toBlob",function(t,e){return{name:"HTMLCanvasElement.toBlob",target:t,callbackIndex:0,args:e}})}),Zone.__load_patch("XHR",function(t,e,n){!function(t){function n(t){return t[r]}function u(t){XMLHttpRequest[a]=!1;var e=t.data,n=e.target,i=n[o];d||(d=n[h],p=n[f]),i&&p.apply(n,[g,i]);var s=n[o]=function(){n.readyState===n.DONE&&!e.aborted&&XMLHttpRequest[a]&&t.state===m&&t.invoke()};return d.apply(n,[g,s]),n[r]||(n[r]=t),b.apply(n,e.args),XMLHttpRequest[a]=!0,t}function c(){}function l(t){var e=t.data;return e.aborted=!0,_.apply(e.target,e.args)}var h=O("addEventListener"),f=O("removeEventListener"),d=XMLHttpRequest.prototype[h],p=XMLHttpRequest.prototype[f];if(!d){var v=t.XMLHttpRequestEventTarget;v&&(d=v.prototype[h],p=v.prototype[f])}var g="readystatechange",m="scheduled",y=s(t.XMLHttpRequest.prototype,"open",function(){return function(t,e){return t[i]=0==e[2],y.apply(t,e)}}),b=s(t.XMLHttpRequest.prototype,"send",function(){return function(t,n){var r=e.current;if(t[i])return b.apply(t,n);var o={target:t,isPeriodic:!1,delay:null,args:n,aborted:!1};return r.scheduleMacroTask("XMLHttpRequest.send",c,o,u,l)}}),_=s(t.XMLHttpRequest.prototype,"abort",function(t){return function(t,e){var r=n(t);if(r&&"string"==typeof r.type){if(null==r.cancelFn||r.data&&r.data.aborted)return;r.zone.cancelTask(r)}}})}(t);var r=O("xhrTask"),i=O("xhrSync"),o=O("xhrListener"),a=O("xhrScheduled")}),Zone.__load_patch("geolocation",function(t,e,r){t.navigator&&t.navigator.geolocation&&n(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",function(t,e,n){function r(e){return function(n){f(t,e).forEach(function(r){var i=t.PromiseRejectionEvent;if(i){var o=new i(e,{promise:n.promise,reason:n.rejection});r.invoke(o)}})}}t.PromiseRejectionEvent&&(e[O("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),e[O("rejectionHandledHandler")]=r("rejectionhandled"))}),Zone.__load_patch("util",function(t,e,n){n.patchOnProperties=o,n.patchMethod=s})})}).call(e,n("fRUx"))},emBC:function(t,e,n){var r=n("CDXM"),i=n("8Gg3");r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},eqpX:function(t,e,n){"use strict";var r=n("bKpL"),i=n("rDIt");r.Observable.prototype.do=i._do,r.Observable.prototype._do=i._do},etpI:function(t,e,n){"use strict";var r=function(){function t(){this.values={}}return t.prototype.delete=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var n=this.values;for(var r in n)n.hasOwnProperty(r)&&null!==n[r]&&t.call(e,n[r],r)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=r},ewdp:function(t,e,n){var r=n("tose"),i=n("+pQw"),o=n("2Fuj");t.exports=n("V+0c")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},"f/CF":function(t,e,n){n("mzUQ"),n("yE/l"),n("+c1l"),n("4TT8"),n("CCJL"),n("JnZr"),n("6GwK"),n("FyA0"),n("d3uY"),n("CxwD"),n("YvuM"),n("LGbj"),n("rq+B"),n("mX/x"),n("/JsI"),n("PM/s"),n("W+Ug"),n("b8HQ"),t.exports=n("b4gG").Object},f08B:function(t,e,n){var r=n("JXkd"),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},fASj:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(4);r(r.P+r.F*!n("bhtb")([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},fC8q:function(t,e,n){var r=n("dXJ/"),i=n("3r0D")("iterator"),o=n("lexG");t.exports=n("b4gG").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},fHxy:function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},fRUx:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"fc+i":function(t,e,n){"use strict";function r(){return R}function i(t){R||(R=t)}function o(){return U||(U=document.querySelector("base"))?U.getAttribute("href"):null}function a(t){return q||(q=document.createElement("a")),q.setAttribute("href",t),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname}function s(){return!!window.history.pushState}function u(t,e,n){return function(){n.get(j.e).donePromise.then(function(){var n=r();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}}function c(t,e){J||(j._18.ng=J=j._18.ng||{}),J[t]=e}function l(t){return Object(j._4)(t)}function h(t,e){var n=(t||[]).concat(e||[]);return c(tt,l),c(et,Object.assign({},$,f(n||[]))),function(){return l}}function f(t){return t.reduce(function(t,e){return t[e.name]=e.token,t},{})}function d(t){return ft.replace(lt,t)}function p(t){return ht.replace(lt,t)}function v(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?v(t,i,n):(i=i.replace(lt,t),n.push(i))}return n}function g(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}function m(t,e){if(t.charCodeAt(0)===vt)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}function y(t){return t=String(t),t.match(Et)||t.match(Ot)?t:(Object(j._5)()&&r().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function b(t){return t=String(t),t.split(",").map(function(t){return y(t.trim())}).join(", ")}function _(){if(Tt)return Tt;Ct=r();var t=Ct.createElement("template");if("content"in t)return t;var e=Ct.createHtmlDocument();if(null==(Tt=Ct.querySelector(e,"body"))){var n=Ct.createElement("html",e);Tt=Ct.createElement("body",e),Ct.appendChild(n,Tt),Ct.appendChild(e,n)}return Tt}function x(t){for(var e={},n=0,r=t.split(",");n<r.length;n++){e[r[n]]=!0}return e}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)o.hasOwnProperty(a)&&(n[a]=!0)}return n}function M(t,e){if(e&&Ct.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+Ct.getOuterHTML(t));return e}function S(t){return t.replace(/&/g,"&amp;").replace(qt,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Vt,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(t){Ct.attributeMap(t).forEach(function(e,n){"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||Ct.removeAttribute(t,n)});for(var e=0,n=Ct.childNodesAsList(t);e<n.length;e++){var r=n[e];Ct.isElementNode(r)&&k(r)}}function E(t,e){try{var n=_(),r=e?String(e):"",i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,Ct.setInnerHTML(n,r),t.documentMode&&k(n),o=Ct.getInnerHTML(n)}while(r!==o);for(var a=new Ht,s=a.sanitizeChildren(Ct.getTemplateContent(n)||n),u=Ct.getTemplateContent(n)||n,c=0,l=Ct.childNodesAsList(u);c<l.length;c++){var h=l[c];Ct.removeChild(u,h)}return Object(j._5)()&&a.sanitizedSomething&&Ct.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}catch(t){throw Tt=null,t}}function O(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}function T(t){if(!(t=String(t).trim()))return"";var e=t.match(Wt);return e&&y(e[1])===e[1]||t.match(Ut)&&O(t)?t:(Object(j._5)()&&r().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}function C(){V.makeCurrent(),Z.init()}function z(){return new j.o}function P(){return document}n.d(e,"a",function(){return re}),n.d(e,"j",function(){return ne}),n.d(e,"g",function(){return X}),n.d(e,"i",function(){return Q}),n.d(e,"h",function(){return nt}),n.d(e,"c",function(){return it}),n.d(e,"d",function(){return ot}),n.d(e,"e",function(){return _t}),n.d(e,"f",function(){return xt}),n.d(e,"b",function(){return Yt}),n.d(e,"t",function(){return r}),n.d(e,"l",function(){return dt}),n.d(e,"k",function(){return yt}),n.d(e,"n",function(){return wt}),n.d(e,"o",function(){return kt}),n.d(e,"m",function(){return ut}),n.d(e,"p",function(){return st}),n.d(e,"q",function(){return z}),n.d(e,"r",function(){return h}),n.d(e,"s",function(){return Xt});var A,D=n("6Xbx"),I=n("qbdv"),j=n("/oeL"),R=null,L=function(){function t(){this.resourceLoaderType=null}return t.prototype.hasProperty=function(t,e){},t.prototype.setProperty=function(t,e,n){},t.prototype.getProperty=function(t,e){},t.prototype.invoke=function(t,e,n){},t.prototype.logError=function(t){},t.prototype.log=function(t){},t.prototype.logGroup=function(t){},t.prototype.logGroupEnd=function(){},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){},t.prototype.parse=function(t){},t.prototype.querySelector=function(t,e){},t.prototype.querySelectorAll=function(t,e){},t.prototype.on=function(t,e,n){},t.prototype.onAndCancel=function(t,e,n){},t.prototype.dispatchEvent=function(t,e){},t.prototype.createMouseEvent=function(t){},t.prototype.createEvent=function(t){},t.prototype.preventDefault=function(t){},t.prototype.isPrevented=function(t){},t.prototype.getInnerHTML=function(t){},t.prototype.getTemplateContent=function(t){},t.prototype.getOuterHTML=function(t){},t.prototype.nodeName=function(t){},t.prototype.nodeValue=function(t){},t.prototype.type=function(t){},t.prototype.content=function(t){},t.prototype.firstChild=function(t){},t.prototype.nextSibling=function(t){},t.prototype.parentElement=function(t){},t.prototype.childNodes=function(t){},t.prototype.childNodesAsList=function(t){},t.prototype.clearNodes=function(t){},t.prototype.appendChild=function(t,e){},t.prototype.removeChild=function(t,e){},t.prototype.replaceChild=function(t,e,n){},t.prototype.remove=function(t){},t.prototype.insertBefore=function(t,e,n){},t.prototype.insertAllBefore=function(t,e,n){},t.prototype.insertAfter=function(t,e,n){},t.prototype.setInnerHTML=function(t,e){},t.prototype.getText=function(t){},t.prototype.setText=function(t,e){},t.prototype.getValue=function(t){},t.prototype.setValue=function(t,e){},t.prototype.getChecked=function(t){},t.prototype.setChecked=function(t,e){},t.prototype.createComment=function(t){},t.prototype.createTemplate=function(t){},t.prototype.createElement=function(t,e){},t.prototype.createElementNS=function(t,e,n){},t.prototype.createTextNode=function(t,e){},t.prototype.createScriptTag=function(t,e,n){},t.prototype.createStyleElement=function(t,e){},t.prototype.createShadowRoot=function(t){},t.prototype.getShadowRoot=function(t){},t.prototype.getHost=function(t){},t.prototype.getDistributedNodes=function(t){},t.prototype.clone=function(t){},t.prototype.getElementsByClassName=function(t,e){},t.prototype.getElementsByTagName=function(t,e){},t.prototype.classList=function(t){},t.prototype.addClass=function(t,e){},t.prototype.removeClass=function(t,e){},t.prototype.hasClass=function(t,e){},t.prototype.setStyle=function(t,e,n){},t.prototype.removeStyle=function(t,e){},t.prototype.getStyle=function(t,e){},t.prototype.hasStyle=function(t,e,n){},t.prototype.tagName=function(t){},t.prototype.attributeMap=function(t){},t.prototype.hasAttribute=function(t,e){},t.prototype.hasAttributeNS=function(t,e,n){},t.prototype.getAttribute=function(t,e){},t.prototype.getAttributeNS=function(t,e,n){},t.prototype.setAttribute=function(t,e,n){},t.prototype.setAttributeNS=function(t,e,n,r){},t.prototype.removeAttribute=function(t,e){},t.prototype.removeAttributeNS=function(t,e,n){},t.prototype.templateAwareRoot=function(t){},t.prototype.createHtmlDocument=function(){},t.prototype.getBoundingClientRect=function(t){},t.prototype.getTitle=function(t){},t.prototype.setTitle=function(t,e){},t.prototype.elementMatches=function(t,e){},t.prototype.isTemplateElement=function(t){},t.prototype.isTextNode=function(t){},t.prototype.isCommentNode=function(t){},t.prototype.isElementNode=function(t){},t.prototype.hasShadowRoot=function(t){},t.prototype.isShadowRoot=function(t){},t.prototype.importIntoDoc=function(t){},t.prototype.adoptNode=function(t){},t.prototype.getHref=function(t){},t.prototype.getEventKey=function(t){},t.prototype.resolveAndSetHref=function(t,e,n){},t.prototype.supportsDOMEvents=function(){},t.prototype.supportsNativeShadowDOM=function(){},t.prototype.getGlobalEventTarget=function(t,e){},t.prototype.getHistory=function(){},t.prototype.getLocation=function(){},t.prototype.getBaseHref=function(t){},t.prototype.resetBaseElement=function(){},t.prototype.getUserAgent=function(){},t.prototype.setData=function(t,e,n){},t.prototype.getComputedStyle=function(t){},t.prototype.getData=function(t,e){},t.prototype.supportsWebAnimation=function(){},t.prototype.performanceNow=function(){},t.prototype.getAnimationPrefix=function(){},t.prototype.getTransitionEnd=function(){},t.prototype.supportsAnimation=function(){},t.prototype.supportsCookies=function(){},t.prototype.getCookie=function(t){},t.prototype.setCookie=function(t,e){},t}(),N=function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return D.a(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(L),F={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},B={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};j._18.Node&&(A=j._18.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var q,V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){i(new e)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){t[e].apply(t,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return F},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return A.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=document.createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&t instanceof HTMLTemplateElement?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return document.createComment(t)},e.prototype.createTemplate=function(t){var e=document.createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return void 0===e&&(e=document),e.createElement(t)},e.prototype.createElementNS=function(t,e,n){return void 0===n&&(n=document),n.createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return void 0===e&&(e=document),e.createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){void 0===n&&(n=document);var r=n.createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){void 0===e&&(e=document);var n=e.createElement("style");return this.appendChild(n,this.createTextNode(t)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n[r];e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return document.title},e.prototype.setTitle=function(t,e){document.title=e||""},e.prototype.elementMatches=function(t,e){return t instanceof HTMLElement&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return t instanceof HTMLElement&&"TEMPLATE"==t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.href},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&H.hasOwnProperty(e)&&(e=H[e]))}return B[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?document:"body"===e?document.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e=o();return null==e?null:a(e)},e.prototype.resetBaseElement=function(){U=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Object(I.q)(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(N),U=null,W=I.d,Y=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return D.a(e,t),e.prototype._init=function(){this._location=r().getLocation(),this._history=r().getHistory()},Object.defineProperty(e.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),e.prototype.getBaseHrefFromDOM=function(){return r().getBaseHref(this._doc)},e.prototype.onPopState=function(t){r().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){r().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this._location.pathname},set:function(t){this._location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){s()?this._history.pushState(t,e,n):this._location.hash=n},e.prototype.replaceState=function(t,e,n){s()?this._history.replaceState(t,e,n):this._location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e}(I.o);Y.decorators=[{type:j.u}],Y.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var X=function(){function t(t){this._doc=t,this._dom=r()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t?this._dom.querySelector(this._doc,"meta["+t+"]"):null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t}();X.decorators=[{type:j.u}],X.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var K=new j.v("TRANSITION_ID"),G=[{provide:j.d,useFactory:u,deps:[K,W,j.w],multi:!0}],Z=function(){function t(){}return t.init=function(){Object(j._7)(new t)},t.prototype.addToWindow=function(t){j._18.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},j._18.getAllAngularTestabilities=function(){return t.getAllTestabilities()},j._18.getAllAngularRootElements=function(){return t.getAllRootElements()};var e=function(t){var e=j._18.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})};j._18.frameworkStabilizers||(j._18.frameworkStabilizers=[]),j._18.frameworkStabilizers.push(e)},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?r().isShadowRoot(e)?this.findTestabilityInTree(t,r().getHost(e),!0):this.findTestabilityInTree(t,r().parentElement(e),!0):null},t}(),Q=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return r().getTitle(this._doc)},t.prototype.setTitle=function(t){r().setTitle(this._doc,t)},t}();Q.decorators=[{type:j.u}],Q.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var J,$={ApplicationRef:j.g,NgZone:j.G},tt="probe",et="coreTokens",nt=function(){function t(t,e){this.name=t,this.token=e}return t}(),rt=[{provide:j.d,useFactory:h,deps:[[nt,new j.I],[j.F,new j.I]],multi:!0}],it=new j.v("EventManagerPlugins"),ot=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}();ot.decorators=[{type:j.u}],ot.ctorParameters=function(){return[{type:Array,decorators:[{type:j.t,args:[it]}]},{type:j.G}]};var at=function(){function t(t){this._doc=t}return t.prototype.supports=function(t){},t.prototype.addEventListener=function(t,e,n){},t.prototype.addGlobalEventListener=function(t,e,n){var i=r().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target "+i+" for event "+e);return this.addEventListener(i,e,n)},t}(),st=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}();st.decorators=[{type:j.u}],st.ctorParameters=function(){return[]};var ut=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return D.a(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return r().remove(t)})},e}(st);ut.decorators=[{type:j.u}],ut.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lt=/%COMP%/g,ht="_nghost-%COMP%",ft="_ngcontent-%COMP%",dt=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new pt(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case j._0.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new gt(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case j._0.Native:return new mt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=v(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}();dt.decorators=[{type:j.u}],dt.ctorParameters=function(){return[{type:ot},{type:ut}]};var pt=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(ct[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=ct[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=ct[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&j.Q.DashCase?t.style.setProperty(e,n,r&j.Q.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&j.Q.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){m(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return m(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,g(n)):this.eventManager.addEventListener(t,e,g(n))},t}(),vt="@".charCodeAt(0),gt=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=v(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=d(r.id),i.hostAttr=p(r.id),i}return D.a(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(pt),mt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=v(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return D.a(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(pt),yt=function(t){function e(e){return t.call(this,e)||this}return D.a(e,t),e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){return t.addEventListener(e,n,!1),function(){return t.removeEventListener(e,n,!1)}},e}(at);yt.decorators=[{type:j.u}],yt.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var bt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},_t=new j.v("HammerGestureConfig"),xt=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(var n in this.overrides)e.get(n).set(this.overrides[n]);return e},t}();xt.decorators=[{type:j.u}],xt.ctorParameters=function(){return[]};var wt=function(t){function e(e,n){var r=t.call(this,e)||this;return r._config=n,r}return D.a(e,t),e.prototype.supports=function(t){if(!bt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){return o.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(at);wt.decorators=[{type:j.u}],wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]},{type:xt,decorators:[{type:j.t,args:[_t]}]}]};var Mt=["alt","control","meta","shift"],St={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},kt=function(t){function e(e){return t.call(this,e)||this}return D.a(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,i){var o=e.parseEventName(n),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return r().onAndCancel(t,o.domEventName,a)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(Mt.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=r().getEventKey(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Mt.forEach(function(r){if(r!=n){(0,St[r])(t)&&(e+=r+".")}}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(at);kt.decorators=[{type:j.u}],kt.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var Et=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Ot=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,Tt=null,Ct=null,zt=x("area,br,col,hr,img,wbr"),Pt=x("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),At=x("rp,rt"),Dt=w(At,Pt),It=w(Pt,x("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jt=w(At,x("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rt=w(zt,It,jt,Dt),Lt=x("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nt=x("srcset"),Ft=x("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bt=w(Lt,Nt,Ft),Ht=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(Ct.isElementNode(e)?this.startElement(e):Ct.isTextNode(e)?this.chars(Ct.nodeValue(e)):this.sanitizedSomething=!0,Ct.firstChild(e))e=Ct.firstChild(e);else for(;e;){Ct.isElementNode(e)&&this.endElement(e);var n=M(e,Ct.nextSibling(e));if(n){e=n;break}e=M(e,Ct.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=Ct.nodeName(t).toLowerCase();if(!Rt.hasOwnProperty(n))return void(this.sanitizedSomething=!0);this.buf.push("<"),this.buf.push(n),Ct.attributeMap(t).forEach(function(t,n){var r=n.toLowerCase();if(!Bt.hasOwnProperty(r))return void(e.sanitizedSomething=!0);Lt[r]&&(t=y(t)),Nt[r]&&(t=b(t)),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(S(t)),e.buf.push('"')}),this.buf.push(">")},t.prototype.endElement=function(t){var e=Ct.nodeName(t).toLowerCase();Rt.hasOwnProperty(e)&&!zt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(S(t))},t}(),qt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vt=/([^\#-~ |!])/g,Ut=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Wt=/^url\(([^)]+)\)$/,Yt=function(){function t(){}return t.prototype.sanitize=function(t,e){},t.prototype.bypassSecurityTrustHtml=function(t){},t.prototype.bypassSecurityTrustStyle=function(t){},t.prototype.bypassSecurityTrustScript=function(t){},t.prototype.bypassSecurityTrustUrl=function(t){},t.prototype.bypassSecurityTrustResourceUrl=function(t){},t}(),Xt=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return D.a(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case j.S.NONE:return e;case j.S.HTML:return e instanceof Gt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),E(this._doc,String(e)));case j.S.STYLE:return e instanceof Zt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),T(e));case j.S.SCRIPT:if(e instanceof Qt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case j.S.URL:return e instanceof $t||e instanceof Jt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),y(String(e)));case j.S.RESOURCE_URL:if(e instanceof $t)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof Kt)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Gt(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Zt(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Qt(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Jt(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new $t(t)},e}(Yt);Xt.decorators=[{type:j.u}],Xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:j.t,args:[W]}]}]};var Kt=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.getTypeName=function(){},t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(Kt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.getTypeName=function(){return"Style"},e}(Kt),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.getTypeName=function(){return"Script"},e}(Kt),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.getTypeName=function(){return"URL"},e}(Kt),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.a(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(Kt),te=[{provide:j.K,useValue:I.p},{provide:j.L,useValue:C,multi:!0},{provide:I.o,useClass:Y},{provide:W,useFactory:P,deps:[]}],ee=[{provide:j.R,useExisting:Yt},{provide:Yt,useClass:Xt}],ne=Object(j._2)(j._6,"browser",te),re=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:j.c,useValue:e.appId},{provide:K,useExisting:j.c},G]}},t}();re.decorators=[{type:j.B,args:[{providers:[ee,{provide:j.o,useFactory:z,deps:[]},{provide:it,useClass:yt,multi:!0},{provide:it,useClass:kt,multi:!0},{provide:it,useClass:wt,multi:!0},{provide:_t,useClass:xt},dt,{provide:j.P,useExisting:dt},{provide:st,useExisting:ut},ut,j.X,ot,rt,X,Q],exports:[I.c,j.f]}]}],re.ctorParameters=function(){return[{type:re,decorators:[{type:j.I},{type:j.T}]}]};var ie="undefined"!=typeof window&&window||{},oe=function(){function t(t,e){this.msPerTick=t,this.numTicks=e}return t}();(function(){function t(t){this.appRef=t.injector.get(j.g)}t.prototype.timeChangeDetection=function(t){var e=t&&t.record,n=null!=ie.console.profile;e&&n&&ie.console.profile("Change Detection");for(var i=r().performanceNow(),o=0;o<5||r().performanceNow()-i<500;)this.appRef.tick(),o++;var a=r().performanceNow();e&&n&&ie.console.profileEnd("Change Detection");var s=(a-i)/o;return ie.console.log("ran "+o+" change detection cycles"),ie.console.log(s.toFixed(2)+" ms per check"),new oe(s,o)}})(),function(){function t(){}t.all=function(){return function(t){return!0}},t.css=function(t){return function(e){return null!=e.nativeElement&&r().elementMatches(e.nativeElement,t)}},t.directive=function(t){return function(e){return-1!==e.providerTokens.indexOf(t)}}}(),new j.Y("4.3.5")},fclq:function(t,e,n){"use strict";function r(t){return"function"==typeof t}e.isFunction=r},fcnB:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(i.Observable);e.EmptyObservable=o},feEK:function(t,e,n){n("x0nE"),n("y2Qv"),n("ABVq"),n("u/Kp"),n("y6Hp"),n("zjx1"),n("py7J"),n("0MXQ"),n("LAe3"),n("RXfV"),n("rtXJ"),n("oebr"),n("tDzp"),n("A3hK"),n("FALa"),n("nGWS"),n("SkRu"),t.exports=n("b4gG").Math},fnpY:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("YymB")("find")},g0Kb:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("xFbG"),o=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(i.Subscription);e.SubjectSubscription=o},gBtn:function(t,e,n){var r=n("ZI9W"),i=n("CDXM"),o=n("Iclu")("metadata"),a=o.store||(o.store=new(n("QZhw"))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},u=function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},c=function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},l=function(t,e,n,r){s(n,r,!0).set(t,e)},h=function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},d=function(t){i(i.S,"Reflect",t)};t.exports={store:a,map:s,has:u,get:c,set:l,keys:h,key:f,exp:d}},gNkH:function(t,e,n){t.exports=!n("V+0c")&&!n("umMR")(function(){return 7!=Object.defineProperty(n("BQSv")("div"),"a",{get:function(){return 7}}).a})},gZpL:function(t,e,n){var r=n("6De9"),i=n("CDXM"),o=n("+pQw");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},gbhw:function(t,e,n){"use strict";var r=n("bKpL"),i=n("422b");r.Observable.prototype.filter=i.filter},gdNQ:function(t,e,n){var r=n("CDXM"),i=n("+pQw"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},gonN:function(t,e,n){"use strict";function r(t,e){var n;if(n="function"==typeof t?t:function(){return t},"function"==typeof e)return this.lift(new o(n,e));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n("xKl2");e.multicast=r;var o=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();e.MulticastOperator=o},gvep:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("rlar"),o=n("Lhvy"),a=function(t){function e(e){t.call(this),this._value=e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.Subject);e.BehaviorSubject=a},gxdV:function(t,e,n){var r=n("tose"),i=n("piOq");t.exports=n("V+0c")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"h/l+":function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(0),o=n("bhtb")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},hS3t:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("/oeL"),i=n("0imh"),o=(n.n(i),n("qbdv")),a=n("BkNc"),s=n("gbhw"),u=(n.n(s),function(){function t(t,e){this.settings={pageTracking:{autoTrackVirtualPages:!0,basePath:"",excludedRoutes:[]},eventTracking:{},developerMode:!1},this.pageTrack=new i.ReplaySubject(10),this.eventTrack=new i.ReplaySubject(10),this.exceptionTrack=new i.ReplaySubject(10),this.setAlias=new i.ReplaySubject(10),this.setUsername=new i.ReplaySubject(10),this.setUserProperties=new i.ReplaySubject(10),this.setUserPropertiesOnce=new i.ReplaySubject(10),this.setSuperProperties=new i.ReplaySubject(10),this.setSuperPropertiesOnce=new i.ReplaySubject(10),this.userTimings=new i.ReplaySubject(10),this.trackLocation(t,e)}return t.prototype.trackLocation=function(t,e){var n=this;e.events.filter(function(t){return t instanceof a.d}).subscribe(function(e){n.settings.developerMode||n.trackUrlChange(e.urlAfterRedirects,t)})},t.prototype.virtualPageviews=function(t){this.settings.pageTracking.autoTrackVirtualPages=t},t.prototype.excludeRoutes=function(t){this.settings.pageTracking.excludedRoutes=t},t.prototype.firstPageview=function(t){this.settings.pageTracking.autoTrackFirstPage=t},t.prototype.withBase=function(t){this.settings.pageTracking.basePath=t},t.prototype.developerMode=function(t){this.settings.developerMode=t},t.prototype.trackUrlChange=function(t,e){this.settings.developerMode||this.settings.pageTracking.autoTrackVirtualPages&&!this.matchesExcludedRoute(t)&&this.pageTrack.next({path:this.settings.pageTracking.basePath.length?this.settings.pageTracking.basePath+t:e.prepareExternalUrl(t),location:e})},t.prototype.matchesExcludedRoute=function(t){for(var e=0,n=this.settings.pageTracking.excludedRoutes;e<n.length;e++){var r=n[e];if(r instanceof RegExp&&r.test(t)||t.indexOf(r)>-1)return!0}return!1},t.decorators=[{type:r.u}],t.ctorParameters=function(){return[{type:o.g},{type:a.n}]},t}())},iTbS:function(t,e,n){"use strict";(function(t){var r=n("3msI"),i=n("pZdj"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.a.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i.a;e.a=l}).call(e,n("qhgb")(t))},iXSw:function(t,e,n){"use strict";n("NhIS")("strike",function(t){return function(){return t(this,"strike","","")}})},jHeK:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(3);r(r.P+r.F*!n("bhtb")([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},jMsF:function(t,e,n){"use strict";var r=n("CDXM"),i=n("9wYb"),o=n("mnRY"),a=n("tDHD"),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},p=function(t,e,n){return 0===e?n:e%2==1?p(t,e-1,n*t):p(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n("umMR")(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),g="",m="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(e=v(u*p(2,69,1))-69,n=e<0?u*p(2,-e,1):u/p(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(p(10,r,1),0),r=e-1;r>=23;)f(1<<23),r-=23;f(1<<r),h(1,1),f(2),m=d()}else h(0,n),h(1<<-e,0),m=d()+a.call("0",c);return c>0?(s=m.length,m=g+(s<=c?"0."+a.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c))):m=g+m,m}})},jOBH:function(t,e,n){n("Rl2/"),n("UdES"),n("Cz5P"),n("cOEa"),n("xuTE"),n("bqLj"),n("+aW+"),n("h/l+"),n("bPmT"),n("ucNH"),n("jHeK"),n("fASj"),n("HzDK"),n("xLjm"),n("p0Sw"),n("Q7OE"),n("Abrq"),n("SxDa"),n("fnpY"),n("Mr9n"),n("Umeq"),n("xB6L"),t.exports=n("b4gG").Array},jyAw:function(t,e,n){"use strict";function r(t,e,n,r){return this.lift(new h(t,e,n,r))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("xFbG"),s=n("bKpL"),u=n("rlar"),c=n("R61s"),l=n("etpI");e.groupBy=r;var h=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),f=function(t){function e(e,n,r,i,o){t.call(this,e),this.keySelector=n,this.elementSelector=r,this.durationSelector=i,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new l.FastMap:new c.Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new u.Subject,n.set(e,i);var o=new p(e,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new p(e,i))}catch(t){return void this.error(t)}this.add(a.subscribe(new d(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.Subscriber),d=function(t){function e(e,n,r){t.call(this,n),this.key=e,this.group=n,this.parent=r}return i(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,e=t.parent,n=t.key;this.key=this.parent=null,e&&e.removeGroup(n)},e}(o.Subscriber),p=function(t){function e(e,n,r){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=r}return i(e,t),e.prototype._subscribe=function(t){var e=new a.Subscription,n=this,r=n.refCountSubscription,i=n.groupSubject;return r&&!r.closed&&e.add(new v(r)),e.add(i.subscribe(t)),e},e}(s.Observable);e.GroupedObservable=p;var v=function(t){function e(e){t.call(this),this.parent=e,e.count++}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(a.Subscription)},kFjN:function(t,e,n){var r=n("CDXM"),i=n("Wy9r"),o=n("umMR"),a=n("9BUF"),s="["+a+"]",u="\u200b\x85",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),h=function(t,e,n){var i={},s=o(function(){return!!a[t]()||u[t]()!=u}),c=i[t]=s?e(f):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},f=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=h},kGJb:function(t,e,n){"use strict";function r(t,e){return this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+"),a=n("RdI5"),s=n("XRvs");e.distinctUntilChanged=r;var u=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return i(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=this.keySelector,n=t;if(e&&(n=a.tryCatch(this.keySelector)(t))===s.errorObject)return this.destination.error(s.errorObject.e);var r=!1;if(this.hasKey){if((r=a.tryCatch(this.compare)(this.key,n))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=n,this.destination.next(t))},e}(o.Subscriber)},kWk1:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("T14+"),o=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i.Subscriber);e.InnerSubscriber=o},kkQ5:function(t,e,n){"use strict";function r(t,e){var n=!1;return arguments.length>=2&&(n=!0),this.lift(new a(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.scan=r;var a=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},t}(),s=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(o.Subscriber)},ktfo:function(t,e,n){"use strict";function r(t,e,n,r){var f=new l.InnerSubscriber(t,n,r);if(f.closed)return null;if(e instanceof u.Observable)return e._isScalar?(f.next(e.value),f.complete(),null):e.subscribe(f);if(o.isArrayLike(e)){for(var d=0,p=e.length;d<p&&!f.closed;d++)f.next(e[d]);f.closed||f.complete()}else{if(a.isPromise(e))return e.then(function(t){f.closed||(f.next(t),f.complete())},function(t){return f.error(t)}).then(null,function(t){i.root.setTimeout(function(){throw t})}),f;if(e&&"function"==typeof e[c.iterator])for(var v=e[c.iterator]();;){var g=v.next();if(g.done){f.complete();break}if(f.next(g.value),f.closed)break}else if(e&&"function"==typeof e[h.observable]){var m=e[h.observable]();if("function"==typeof m.subscribe)return m.subscribe(new l.InnerSubscriber(t,n,r));f.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var y=s.isObject(e)?"an invalid object":"'"+e+"'",b="You provided "+y+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";f.error(new TypeError(b))}}return null}var i=n("zijX"),o=n("lhZu"),a=n("mUVF"),s=n("H6Sg"),u=n("bKpL"),c=n("2B7B"),l=n("kWk1"),h=n("DP67");e.subscribeToResult=r},lexG:function(t,e){t.exports={}},lfBE:function(t,e,n){var r=n("ptrv"),i=n("gxdV"),o=n("rMsi"),a=n("c09d")("src"),s=Function.toString,u=(""+s).split("toString");n("b4gG").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},lhZu:function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},lhbR:function(t,e,n){"use strict";var r=n("CDXM"),i=n("rppw"),o=n("F6ce"),a="".startsWith;r(r.P+r.F*n("TmDx")("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},lpfi:function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},"lx+J":function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e.map=r;var a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=a;var s=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},lzDK:function(t,e){e.f=Object.getOwnPropertySymbols},"m/sW":function(t,e,n){var r=n("2Fuj"),i=n("lzDK"),o=n("9e9+");t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},mUVF:function(t,e,n){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.isPromise=r},"mX/x":function(t,e,n){var r=n("JXkd");n("QN+J")("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},mihg:function(t,e,n){"use strict";function r(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function i(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n("zijX"),s=n("bKpL"),u=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return o(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,o=this.scheduler;if(null==o)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){a.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return o.schedule(r,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(o.schedule(r,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(o.schedule(i,0,{err:e,subscriber:t}))}).then(null,function(t){a.root.setTimeout(function(){throw t})})},e}(s.Observable);e.PromiseObservable=u},mnRY:function(t,e,n){var r=n("VceJ");t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},mzUQ:function(t,e,n){"use strict";var r=n("ptrv"),i=n("rMsi"),o=n("V+0c"),a=n("CDXM"),s=n("lfBE"),u=n("xI8H").KEY,c=n("umMR"),l=n("Iclu"),h=n("P6IN"),f=n("c09d"),d=n("3r0D"),p=n("qrqn"),v=n("Cc13"),g=n("5Rdw"),m=n("m/sW"),y=n("rKhO"),b=n("+pQw"),_=n("+GRi"),x=n("A1WY"),w=n("piOq"),M=n("51pc"),S=n("y/ue"),k=n("6De9"),E=n("tose"),O=n("2Fuj"),T=k.f,C=E.f,z=S.f,P=r.Symbol,A=r.JSON,D=A&&A.stringify,I=d("_hidden"),j=d("toPrimitive"),R={}.propertyIsEnumerable,L=l("symbol-registry"),N=l("symbols"),F=l("op-symbols"),B=Object.prototype,H="function"==typeof P,q=r.QObject,V=!q||!q.prototype||!q.prototype.findChild,U=o&&c(function(){return 7!=M(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=T(B,e);r&&delete B[e],C(t,e,n),r&&t!==B&&C(B,e,r)}:C,W=function(t){var e=N[t]=M(P.prototype);return e._k=t,e},Y=H&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},X=function(t,e,n){return t===B&&X(F,e,n),b(t),e=x(e,!0),b(n),i(N,e)?(n.enumerable?(i(t,I)&&t[I][e]&&(t[I][e]=!1),n=M(n,{enumerable:w(0,!1)})):(i(t,I)||C(t,I,w(1,{})),t[I][e]=!0),U(t,e,n)):C(t,e,n)},K=function(t,e){b(t);for(var n,r=m(e=_(e)),i=0,o=r.length;o>i;)X(t,n=r[i++],e[n]);return t},G=function(t,e){return void 0===e?M(t):K(M(t),e)},Z=function(t){var e=R.call(this,t=x(t,!0));return!(this===B&&i(N,t)&&!i(F,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,I)&&this[I][t])||e)},Q=function(t,e){if(t=_(t),e=x(e,!0),t!==B||!i(N,e)||i(F,e)){var n=T(t,e);return!n||!i(N,e)||i(t,I)&&t[I][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=z(_(t)),r=[],o=0;n.length>o;)i(N,e=n[o++])||e==I||e==u||r.push(e);return r},$=function(t){for(var e,n=t===B,r=z(n?F:_(t)),o=[],a=0;r.length>a;)!i(N,e=r[a++])||n&&!i(B,e)||o.push(N[e]);return o};H||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),i(this,I)&&i(this[I],t)&&(this[I][t]=!1),U(this,t,w(1,n))};return o&&V&&U(B,t,{configurable:!0,set:e}),W(t)},s(P.prototype,"toString",function(){return this._k}),k.f=Q,E.f=X,n("PNtC").f=S.f=J,n("9e9+").f=Z,n("lzDK").f=$,o&&!n("KGrn")&&s(B,"propertyIsEnumerable",Z,!0),p.f=function(t){return W(d(t))}),a(a.G+a.W+a.F*!H,{Symbol:P});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var nt=O(d.store),rt=0;nt.length>rt;)v(nt[rt++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=P(t)},keyFor:function(t){if(Y(t))return g(L,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!H,"Object",{create:G,defineProperty:X,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:$}),A&&a(a.S+a.F*(!H||c(function(){var t=P();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,D.apply(A,r)}}}),P.prototype[j]||n("gxdV")(P.prototype,j,P.prototype.valueOf),h(P,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},nFOG:function(t,e,n){n("YD56")("split",2,function(t,e,r){"use strict";var i=n("TM12"),o=r,a=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,c,l,h,f,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,p+"g");for(u||(r=new RegExp("^"+m.source+"$(?!\\s)",p));(c=m.exec(n))&&!((l=c.index+c[0][s])>v&&(d.push(n.slice(v,c.index)),!u&&c[s]>1&&c[0].replace(r,function(){for(f=1;f<arguments[s]-2;f++)void 0===arguments[f]&&(c[f]=void 0)}),c[s]>1&&c.index<n[s]&&a.apply(d,c.slice(1)),h=c[0][s],v=l,d[s]>=g));)m.lastIndex===c.index&&m.lastIndex++;return v===n[s]?!h&&m.test("")||d.push(""):d.push(n.slice(v)),d[s]>g?d.slice(0,g):d}}else"0".split(void 0,0)[s]&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},nGWS:function(t,e,n){var r=n("CDXM"),i=n("V/jj"),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},ncNB:function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},oebr:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{log1p:n("lpfi")})},"p/bR":function(t,e,n){var r=n("pa70"),i=n("ULWX"),o=n("KpI+"),a=n("+pQw"),s=n("rppw"),u=n("fC8q"),c={},l={},e=t.exports=function(t,e,n,h,f){var d,p,v,g,m=f?function(){return t}:u(t),y=r(n,h,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=s(t.length);d>b;b++)if((g=e?y(a(p=t[b])[0],p[1]):y(t[b]))===c||g===l)return g}else for(v=m.call(t);!(p=v.next()).done;)if((g=i(v,y,p.value,e))===c||g===l)return g};e.BREAK=c,e.RETURN=l},p0Sw:function(t,e,n){"use strict";var r=n("CDXM"),i=n("vyV2")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n("bhtb")(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},p9up:function(t,e,n){"use strict";var r=n("uNkO"),i=n("JXkd"),o=n("5b+r"),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},pBmS:function(t,e,n){var r=n("lfBE");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},pCjf:function(t,e,n){"use strict";var r=n("CDXM"),i=n("RT4T"),o=n("A1WY");r(r.P+r.F*n("umMR")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},pEMT:function(t,e,n){n("RfZa"),n("pCjf"),n("Gki+"),n("vr64"),n("I+CO"),t.exports=Date},pHtE:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},pZdj:function(t,e,n){"use strict";function r(){return!1}e.a=r},pa70:function(t,e,n){var r=n("uNkO");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},piOq:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},ptrv:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},py7J:function(t,e,n){var r=n("CDXM"),i=n("V/jj");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},qbdv:function(t,e,n){"use strict";function r(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}function i(t){return t.replace(/\/index.html$/,"")}function o(t,e,n){var r="="+t;if(e.indexOf(r)>-1)return r;if(r=n.getPluralCategory(t),e.indexOf(r)>-1)return r;if(e.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'+t+'"')}function a(t,e){"string"==typeof e&&(e=parseInt(e,10));var n=e,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),o=r.length,a=parseInt(r,10),s=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(t.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?B.One:B.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?B.One:B.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?B.One:B.Other;case"ar":return 0===n?B.Zero:1===n?B.One:2===n?B.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?B.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?B.Many:B.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===o?B.One:B.Other;case"be":return n%10==1&&n%100!=11?B.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?B.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?B.Many:B.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?B.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?B.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?B.Few:0!==n&&n%1e6==0?B.Many:B.Other;case"bs":case"hr":case"sr":return 0===o&&i%10==1&&i%100!=11||a%10==1&&a%100!=11?B.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?B.Few:B.Other;case"cs":case"sk":return 1===i&&0===o?B.One:i===Math.floor(i)&&i>=2&&i<=4&&0===o?B.Few:0!==o?B.Many:B.Other;case"cy":return 0===n?B.Zero:1===n?B.One:2===n?B.Two:3===n?B.Few:6===n?B.Many:B.Other;case"da":return 1===n||0!==s&&(0===i||1===i)?B.One:B.Other;case"dsb":case"hsb":return 0===o&&i%100==1||a%100==1?B.One:0===o&&i%100==2||a%100==2?B.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||a%100===Math.floor(a%100)&&a%100>=3&&a%100<=4?B.Few:B.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?B.One:B.Other;case"fil":return 0===o&&(1===i||2===i||3===i)||0===o&&i%10!=4&&i%10!=6&&i%10!=9||0!==o&&a%10!=4&&a%10!=6&&a%10!=9?B.One:B.Other;case"ga":return 1===n?B.One:2===n?B.Two:n===Math.floor(n)&&n>=3&&n<=6?B.Few:n===Math.floor(n)&&n>=7&&n<=10?B.Many:B.Other;case"gd":return 1===n||11===n?B.One:2===n||12===n?B.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?B.Few:B.Other;case"gv":return 0===o&&i%10==1?B.One:0===o&&i%10==2?B.Two:0!==o||i%100!=0&&i%100!=20&&i%100!=40&&i%100!=60&&i%100!=80?0!==o?B.Many:B.Other:B.Few;case"he":return 1===i&&0===o?B.One:2===i&&0===o?B.Two:0!==o||n>=0&&n<=10||n%10!=0?B.Other:B.Many;case"is":return 0===s&&i%10==1&&i%100!=11||0!==s?B.One:B.Other;case"ksh":return 0===n?B.Zero:1===n?B.One:B.Other;case"kw":case"naq":case"se":case"smn":return 1===n?B.One:2===n?B.Two:B.Other;case"lag":return 0===n?B.Zero:0!==i&&1!==i||0===n?B.Other:B.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?B.Few:0!==a?B.Many:B.Other:B.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=19?B.Zero:n%10==1&&n%100!=11||2===o&&a%10==1&&a%100!=11||2!==o&&a%10==1?B.One:B.Other;case"mk":return 0===o&&i%10==1||a%10==1?B.One:B.Other;case"mt":return 1===n?B.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?B.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?B.Many:B.Other;case"pl":return 1===i&&0===o?B.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?B.Few:0===o&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?B.Many:B.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?B.One:B.Other;case"ro":return 1===i&&0===o?B.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?B.Few:B.Other;case"ru":case"uk":return 0===o&&i%10==1&&i%100!=11?B.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?B.Few:0===o&&i%10==0||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?B.Many:B.Other;case"shi":return 0===i||1===n?B.One:n===Math.floor(n)&&n>=2&&n<=10?B.Few:B.Other;case"si":return 0===n||1===n||0===i&&1===a?B.One:B.Other;case"sl":return 0===o&&i%100==1?B.One:0===o&&i%100==2?B.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==o?B.Few:B.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?B.One:B.Other;default:return B.Other}}function s(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),a=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],s=a[0],u=a[1];if(s.trim()===e)return decodeURIComponent(u)}return null}function u(t){return t.name||typeof t}function c(t,e){return Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(z._32)(t)+"'")}function l(t){return t?t[0].toUpperCase()+t.substr(1).toLowerCase():t}function h(t){return function(e,n){var r=t(e,n);return 1==r.length?"0"+r:r}}function f(t){return function(e,n){return t(e,n).split(" ")[0]}}function d(t,e,n){return new Intl.DateTimeFormat(e,n).format(t).replace(/[\u200e\u200f]/g,"")}function p(t){var e={hour:"2-digit",hour12:!1,timeZoneName:t};return function(t,n){var r=d(t,n,e);return r?r.substring(3):""}}function v(t,e){return t.hour12=e,t}function g(t,e){var n={};return n[t]=2===e?"2-digit":"numeric",n}function m(t,e){var n={};return n[t]=e<4?e>1?"short":"narrow":"long",n}function y(t){return t.reduce(function(t,e){return Object.assign({},t,e)},{})}function b(t){return function(e,n){return d(e,n,t)}}function _(t,e,n){var r=pt[t];if(r)return r(e,n);var i=t,o=gt.get(i);if(!o){o=[];var a=void 0;dt.exec(t);for(var s=t;s;)a=dt.exec(s),a?(o=o.concat(a.slice(1)),s=o.pop()):(o.push(s),s=null);gt.set(i,o)}return o.reduce(function(t,r){var i=vt[r];return t+(i?i(e,n):x(r))},"")}function x(t){return"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}function w(t,e,n,r,i,o,a){if(void 0===o&&(o=null),void 0===a&&(a=!1),null==n)return null;if("number"!=typeof(n="string"==typeof n&&S(n)?+n:n))throw c(t,n);var s=void 0,u=void 0,l=void 0;if(r!==ht.Currency&&(s=1,u=0,l=3),i){var h=i.match(yt);if(null===h)throw new Error(i+" is not a valid digit info for number pipes");null!=h[1]&&(s=M(h[1])),null!=h[3]&&(u=M(h[3])),null!=h[5]&&(l=M(h[5]))}return ft.format(n,e,r,{minimumIntegerDigits:s,minimumFractionDigits:u,maximumFractionDigits:l,currency:o,currencyAsSymbol:a})}function M(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function S(t){return!isNaN(t-parseFloat(t))}function k(t){return null==t||""===t}function E(t){return t instanceof Date&&!isNaN(t.valueOf())}function O(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=T(t[9]+t[10]),r=T(t[9]+t[11])),i.call(e,T(t[1]),T(t[2])-1,T(t[3]));var a=T(t[4]||"0")-n,s=T(t[5]||"0")-r,u=T(t[6]||"0"),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,c),e}function T(t){return parseInt(t,10)}n.d(e,"l",function(){return F}),n.d(e,"m",function(){return N}),n.d(e,"q",function(){return s}),n.d(e,"c",function(){return zt}),n.d(e,"i",function(){return H}),n.d(e,"j",function(){return U}),n.d(e,"k",function(){return Y}),n.d(e,"d",function(){return Pt}),n.d(e,"b",function(){return st}),n.d(e,"p",function(){return At}),n.d(e,"o",function(){return P}),n.d(e,"f",function(){return A}),n.d(e,"h",function(){return D}),n.d(e,"a",function(){return I}),n.d(e,"e",function(){return R}),n.d(e,"n",function(){return L}),n.d(e,"g",function(){return j});var C=n("6Xbx"),z=n("/oeL"),P=function(){function t(){}return t.prototype.getBaseHrefFromDOM=function(){},t.prototype.onPopState=function(t){},t.prototype.onHashChange=function(t){},t.prototype.pathname=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.replaceState=function(t,e,n){},t.prototype.pushState=function(t,e,n){},t.prototype.forward=function(){},t.prototype.back=function(){},t}(),A=new z.v("Location Initialized"),D=function(){function t(){}return t.prototype.path=function(t){},t.prototype.prepareExternalUrl=function(t){},t.prototype.pushState=function(t,e,n,r){},t.prototype.replaceState=function(t,e,n,r){},t.prototype.forward=function(){},t.prototype.back=function(){},t.prototype.onPopState=function(t){},t.prototype.getBaseHref=function(){},t}(),I=new z.v("appBaseHref"),j=function(){function t(e){var n=this;this._subject=new z.p,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(i(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(r(this._baseHref,i(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-("/"===t[n-1]?1:0);return t.slice(0,r)+t.slice(n)},t}();j.decorators=[{type:z.u}],j.ctorParameters=function(){return[{type:D}]};var R=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return C.a(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=j.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+j.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+j.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(D);R.decorators=[{type:z.u}],R.ctorParameters=function(){return[{type:P},{type:void 0,decorators:[{type:z.I},{type:z.t,args:[I]}]}]};var L=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return C.a(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return j.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+j.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+j.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+j.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(D);L.decorators=[{type:z.u}],L.ctorParameters=function(){return[{type:P},{type:void 0,decorators:[{type:z.I},{type:z.t,args:[I]}]}]};var N=function(){function t(){}return t.prototype.getPluralCategory=function(t){},t}(),F=function(t){function e(e){var n=t.call(this)||this;return n.locale=e,n}return C.a(e,t),e.prototype.getPluralCategory=function(t){switch(a(this.locale,t)){case B.Zero:return"zero";case B.One:return"one";case B.Two:return"two";case B.Few:return"few";case B.Many:return"many";default:return"other"}},e}(N);F.decorators=[{type:z.u}],F.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.t,args:[z.A]}]}]};var B={};B.Zero=0,B.One=1,B.Two=2,B.Few=3,B.Many=4,B.Other=5,B[B.Zero]="Zero",B[B.One]="One",B[B.Two]="Two",B[B.Few]="Few",B[B.Many]="Many",B[B.Other]="Other";var H=function(){function t(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._applyInitialClasses(!0),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(z._20)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(z._32)(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(n){return e._toggleClass(n,!t)})},t.prototype._applyClasses=function(t,e){var n=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return n._toggleClass(t,!e)}):Object.keys(t).forEach(function(r){null!=t[r]&&n._toggleClass(r,!e)}))},t.prototype._toggleClass=function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){n._renderer.setElementClass(n._ngEl.nativeElement,t,!!e)})},t}();H.decorators=[{type:z.m,args:[{selector:"[ngClass]"}]}],H.ctorParameters=function(){return[{type:z.y},{type:z.z},{type:z.n},{type:z.N}]},H.propDecorators={klass:[{type:z.x,args:["class"]}],ngClass:[{type:z.x}]};var q=function(){function t(t){this._viewContainerRef=t,this._componentRef=null,this._moduleRef=null}return t.prototype.ngOnChanges=function(t){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var e=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(t.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=e.get(z.E);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var r=this._moduleRef?this._moduleRef.componentFactoryResolver:e.get(z.k),i=r.resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(i,this._viewContainerRef.length,e,this.ngComponentOutletContent)}},t.prototype.ngOnDestroy=function(){this._moduleRef&&this._moduleRef.destroy()},t}();q.decorators=[{type:z.m,args:[{selector:"[ngComponentOutlet]"}]}],q.ctorParameters=function(){return[{type:z.Z}]},q.propDecorators={ngComponentOutlet:[{type:z.x}],ngComponentOutletInjector:[{type:z.x}],ngComponentOutletContent:[{type:z.x}],ngComponentOutletNgModuleFactory:[{type:z.x}]};var V=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),U=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(z._5)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+u(e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new V(null,e.ngForOf,-1,-1),i),a=new W(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(r);else{var o=e._viewContainer.get(r);e._viewContainer.move(o,i);var a=new W(t,o);n.push(a)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var r=0,i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}();U.decorators=[{type:z.m,args:[{selector:"[ngFor][ngForOf]"}]}],U.ctorParameters=function(){return[{type:z.Z},{type:z.W},{type:z.y}]},U.propDecorators={ngForOf:[{type:z.x}],ngForTrackBy:[{type:z.x}],ngForTemplate:[{type:z.x}]};var W=function(){function t(t,e){this.record=t,this.view=e}return t}(),Y=function(){function t(t,e){this._viewContainer=t,this._context=new X,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}();Y.decorators=[{type:z.m,args:[{selector:"[ngIf]"}]}],Y.ctorParameters=function(){return[{type:z.Z},{type:z.W}]},Y.propDecorators={ngIf:[{type:z.x}],ngIfThen:[{type:z.x}],ngIfElse:[{type:z.x}]};var X=function(){function t(){this.$implicit=null,this.ngIf=null}return t}(),K=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),G=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++){this._defaultViews[e].enforceState(t)}}},t}();G.decorators=[{type:z.m,args:[{selector:"[ngSwitch]"}]}],G.ctorParameters=function(){return[]},G.propDecorators={ngSwitch:[{type:z.x}]};var Z=function(){function t(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new K(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t}();Z.decorators=[{type:z.m,args:[{selector:"[ngSwitchCase]"}]}],Z.ctorParameters=function(){return[{type:z.Z},{type:z.W},{type:G,decorators:[{type:z.q}]}]},Z.propDecorators={ngSwitchCase:[{type:z.x}]};var Q=function(){function t(t,e,n){n._addDefault(new K(t,e))}return t}();Q.decorators=[{type:z.m,args:[{selector:"[ngSwitchDefault]"}]}],Q.ctorParameters=function(){return[{type:z.Z},{type:z.W},{type:G,decorators:[{type:z.q}]}]};var J=function(){function t(t){this._localization=t,this._caseViews={}}return Object.defineProperty(t.prototype,"ngPlural",{set:function(t){this._switchValue=t,this._updateView()},enumerable:!0,configurable:!0}),t.prototype.addCase=function(t,e){this._caseViews[t]=e},t.prototype._updateView=function(){this._clearViews();var t=Object.keys(this._caseViews),e=o(this._switchValue,t,this._localization);this._activateView(this._caseViews[e])},t.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},t.prototype._activateView=function(t){t&&(this._activeView=t,this._activeView.create())},t}();J.decorators=[{type:z.m,args:[{selector:"[ngPlural]"}]}],J.ctorParameters=function(){return[{type:N}]},J.propDecorators={ngPlural:[{type:z.x}]};var $=function(){function t(t,e,n,r){this.value=t;var i=!isNaN(Number(t));r.addCase(i?"="+t:t,new K(n,e))}return t}();$.decorators=[{type:z.m,args:[{selector:"[ngPluralCase]"}]}],$.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.h,args:["ngPluralCase"]}]},{type:z.W},{type:z.Z},{type:J,decorators:[{type:z.q}]}]};var tt=function(){function t(t,e,n){this._differs=t,this._ngEl=e,this._renderer=n}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var n=t.split("."),r=n[0],i=n[1];e=null!=e&&i?""+e+i:e,this._renderer.setElementStyle(this._ngEl.nativeElement,r,e)},t}();tt.decorators=[{type:z.m,args:[{selector:"[ngStyle]"}]}],tt.ctorParameters=function(){return[{type:z.z},{type:z.n},{type:z.N}]},tt.propDecorators={ngStyle:[{type:z.x}]};var et=function(){function t(t){this._viewContainerRef=t}return Object.defineProperty(t.prototype,"ngOutletContext",{set:function(t){this.ngTemplateOutletContext=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))},t}();et.decorators=[{type:z.m,args:[{selector:"[ngTemplateOutlet]"}]}],et.ctorParameters=function(){return[{type:z.Z}]},et.propDecorators={ngTemplateOutletContext:[{type:z.x}],ngTemplateOutlet:[{type:z.x}],ngOutletContext:[{type:z.x}]};var nt=[H,q,U,Y,et,tt,G,Z,Q,J,$],rt=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),it=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}(),ot=new it,at=new rt,st=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,z._1.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(z._22)(e))return ot;if(Object(z._21)(e))return at;throw c(t,e)},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}();st.decorators=[{type:z.M,args:[{name:"async",pure:!1}]}],st.ctorParameters=function(){return[{type:z.i}]};var ut=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw c(t,e);return e.toLowerCase()},t}();ut.decorators=[{type:z.M,args:[{name:"lowercase"}]}],ut.ctorParameters=function(){return[]};var ct=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw c(t,e);return e.split(/\b/g).map(function(t){return l(t)}).join("")},t}();ct.decorators=[{type:z.M,args:[{name:"titlecase"}]}],ct.ctorParameters=function(){return[]};var lt=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw c(t,e);return e.toUpperCase()},t}();lt.decorators=[{type:z.M,args:[{name:"uppercase"}]}],lt.ctorParameters=function(){return[]};var ht={};ht.Decimal=0,ht.Percent=1,ht.Currency=2,ht[ht.Decimal]="Decimal",ht[ht.Percent]="Percent",ht[ht.Currency]="Currency";var ft=function(){function t(){}return t.format=function(t,e,n,r){void 0===r&&(r={});var i=r.minimumIntegerDigits,o=r.minimumFractionDigits,a=r.maximumFractionDigits,s=r.currency,u=r.currencyAsSymbol,c=void 0!==u&&u,l={minimumIntegerDigits:i,minimumFractionDigits:o,maximumFractionDigits:a,style:ht[n].toLowerCase()};return n==ht.Currency&&(l.currency="string"==typeof s?s:void 0,l.currencyDisplay=c?"symbol":"code"),new Intl.NumberFormat(e,l).format(t)},t}(),dt=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,pt={yMMMdjms:b(y([g("year",1),m("month",3),g("day",1),g("hour",1),g("minute",1),g("second",1)])),yMdjm:b(y([g("year",1),g("month",1),g("day",1),g("hour",1),g("minute",1)])),yMMMMEEEEd:b(y([g("year",1),m("month",4),m("weekday",4),g("day",1)])),yMMMMd:b(y([g("year",1),m("month",4),g("day",1)])),yMMMd:b(y([g("year",1),m("month",3),g("day",1)])),yMd:b(y([g("year",1),g("month",1),g("day",1)])),jms:b(y([g("hour",1),g("second",1),g("minute",1)])),jm:b(y([g("hour",1),g("minute",1)]))},vt={yyyy:b(g("year",4)),yy:b(g("year",2)),y:b(g("year",1)),MMMM:b(m("month",4)),MMM:b(m("month",3)),MM:b(g("month",2)),M:b(g("month",1)),LLLL:b(m("month",4)),L:b(m("month",1)),dd:b(g("day",2)),d:b(g("day",1)),HH:h(f(b(v(g("hour",2),!1)))),H:f(b(v(g("hour",1),!1))),hh:h(f(b(v(g("hour",2),!0)))),h:f(b(v(g("hour",1),!0))),jj:b(g("hour",2)),j:b(g("hour",1)),mm:h(b(g("minute",2))),m:b(g("minute",1)),ss:h(b(g("second",2))),s:b(g("second",1)),sss:b(g("second",3)),EEEE:b(m("weekday",4)),EEE:b(m("weekday",3)),EE:b(m("weekday",2)),E:b(m("weekday",1)),a:function(t){return function(e,n){return t(e,n).split(" ")[1]}}(b(v(g("hour",1),!0))),Z:p("short"),z:p("long"),ww:b({}),w:b({}),G:b(m("era",1)),GG:b(m("era",2)),GGG:b(m("era",3)),GGGG:b(m("era",4))},gt=new Map,mt=function(){function t(){}return t.format=function(t,e,n){return _(n,t,e)},t}(),yt=/^(\d+)?\.((\d+)(-(\d+))?)?$/,bt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return w(t,this._locale,e,ht.Decimal,n)},t}();bt.decorators=[{type:z.M,args:[{name:"number"}]}],bt.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.t,args:[z.A]}]}]};var _t=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return w(t,this._locale,e,ht.Percent,n)},t}();_t.decorators=[{type:z.M,args:[{name:"percent"}]}],_t.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.t,args:[z.A]}]}]};var xt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r,i){return void 0===n&&(n="USD"),void 0===r&&(r=!1),w(t,this._locale,e,ht.Currency,i,n,r)},t}();xt.decorators=[{type:z.M,args:[{name:"currency"}]}],xt.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.t,args:[z.A]}]}]};var wt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){void 0===n&&(n="mediumDate");var r;if(k(e)||e!==e)return null;if("string"==typeof e&&(e=e.trim()),E(e))r=e;else if(S(e))r=new Date(parseFloat(e));else if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var i=e.split("-").map(function(t){return parseInt(t,10)}),o=i[0],a=i[1],s=i[2];r=new Date(o,a-1,s)}else r=new Date(e);if(!E(r)){var u=void 0;if("string"!=typeof e||!(u=e.match(wt)))throw c(t,e);r=O(u)}return mt.format(r,this._locale,t._ALIASES[n]||n)},t}();Mt._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},Mt.decorators=[{type:z.M,args:[{name:"date",pure:!0}]}],Mt.ctorParameters=function(){return[{type:void 0,decorators:[{type:z.t,args:[z.A]}]}]};var St=/#/g,kt=function(){function t(t){this._localization=t}return t.prototype.transform=function(e,n){if(null==e)return"";if("object"!=typeof n||null===n)throw c(t,n);return n[o(e,Object.keys(n),this._localization)].replace(St,e.toString())},t}();kt.decorators=[{type:z.M,args:[{name:"i18nPlural",pure:!0}]}],kt.ctorParameters=function(){return[{type:N}]};var Et=function(){function t(){}return t.prototype.transform=function(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw c(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""},t}();Et.decorators=[{type:z.M,args:[{name:"i18nSelect",pure:!0}]}],Et.ctorParameters=function(){return[]};var Ot=function(){function t(){}return t.prototype.transform=function(t){return JSON.stringify(t,null,2)},t}();Ot.decorators=[{type:z.M,args:[{name:"json",pure:!1}]}],Ot.ctorParameters=function(){return[]};var Tt=function(){function t(){}return t.prototype.transform=function(e,n,r){if(null==e)return e;if(!this.supports(e))throw c(t,e);return e.slice(n,r)},t.prototype.supports=function(t){return"string"==typeof t||Array.isArray(t)},t}();Tt.decorators=[{type:z.M,args:[{name:"slice",pure:!1}]}],Tt.ctorParameters=function(){return[]};var Ct=[st,lt,ut,Ot,Tt,bt,_t,ct,xt,Mt,kt,Et],zt=function(){function t(){}return t}();zt.decorators=[{type:z.B,args:[{declarations:[nt,Ct],exports:[nt,Ct],providers:[{provide:N,useClass:F}]}]}],zt.ctorParameters=function(){return[]};var Pt=new z.v("DocumentToken"),At="browser";new z.Y("4.3.5")},qhgb:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},qrqn:function(t,e,n){e.f=n("3r0D")},r24B:function(t,e,n){n("AOSR"),n("Kp6H"),n("T+CM"),n("Rl2/"),n("tUpi"),n("weQ6"),n("IGm2"),n("PX9N"),n("lhbR"),n("ML5l"),n("M720"),n("raCe"),n("tln3"),n("AdFz"),n("a/bl"),n("6F6V"),n("GMpo"),n("6tM8"),n("ueCa"),n("iXSw"),n("DTeS"),n("HK9U"),n("dVlF"),n("CjAR"),n("Zy8t"),n("nFOG"),t.exports=n("b4gG").String},rDIt:function(t,e,n){"use strict";function r(t,e,n){return this.lift(new a(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("T14+");e._do=r;var a=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,n,r,i){t.call(this,e);var a=new o.Subscriber(n,r,i);a.syncErrorThrowable=!0,this.add(a),this.safeSubscriber=a}return i(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},rIdM:function(t,e,n){"use strict";var r=n("2Fuj"),i=n("lzDK"),o=n("9e9+"),a=n("RT4T"),s=n("Wo2w"),u=Object.assign;t.exports=!u||n("umMR")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,g=0;v>g;)h.call(d,f=p[g++])&&(n[f]=d[f]);return n}:u},rKhO:function(t,e,n){var r=n("VceJ");t.exports=Array.isArray||function(t){return"Array"==r(t)}},rMMT:function(t,e,n){var r=n("CDXM"),i=n("uNkO"),o=n("+pQw"),a=(n("ptrv").Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n("umMR")(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},rMsi:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},raCe:function(t,e,n){"use strict";n("NhIS")("blink",function(t){return function(){return t(this,"blink","","")}})},rf3q:function(t,e,n){"use strict";function r(t,e,n){if(t){if(t instanceof i.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||n?new i.Subscriber(t,e,n):new i.Subscriber(a.empty)}var i=n("T14+"),o=n("dkwD"),a=n("LiYJ");e.toSubscriber=r},rlar:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=n("T14+"),a=n("xFbG"),s=n("Lhvy"),u=n("g0Kb"),c=n("dkwD"),l=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(o.Subscriber);e.SubjectSubscriber=l;var h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[c.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.Observable);e.Subject=h;var f=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(h);e.AnonymousSubject=f},rppw:function(t,e,n){var r=n("9wYb"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"rq+B":function(t,e,n){var r=n("JXkd");n("QN+J")("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},rtXJ:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},"s+3V":function(t,e,n){"use strict";var r=n("CDXM"),i=n("umMR"),o=n("mnRY"),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},soMw:function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},t6ta:function(t,e,n){var r=n("gBtn"),i=n("+pQw"),o=n("uNkO"),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},tDHD:function(t,e,n){"use strict";var r=n("9wYb"),i=n("Wy9r");t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},tDzp:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},tUpi:function(t,e,n){"use strict";var r=n("CDXM"),i=n("PeZi")(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},tWtF:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},tln3:function(t,e,n){"use strict";n("NhIS")("bold",function(t){return function(){return t(this,"b","","")}})},tose:function(t,e,n){var r=n("+pQw"),i=n("gNkH"),o=n("A1WY"),a=Object.defineProperty;e.f=n("V+0c")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"u/Kp":function(t,e,n){var r=n("CDXM"),i=n("tWtF");r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},uMIg:function(t,e,n){var r=n("CDXM");r(r.S,"Number",{isInteger:n("f08B")})},uNkO:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"uT+d":function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ArgumentOutOfRangeError=i},ucNH:function(t,e,n){"use strict";var r=n("CDXM"),i=n("BCYq")(2);r(r.P+r.F*!n("bhtb")([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},ueCa:function(t,e,n){"use strict";n("NhIS")("small",function(t){return function(){return t(this,"small","","")}})},ueUM:function(t,e,n){"use strict";function r(t){var e=new s(t),n=this.lift(e);return e.caught=n}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n("yW9Z"),a=n("ktfo");e._catch=r;var s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.selector,this.caught))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(a.subscribeToResult(this,n))}},e}(o.OuterSubscriber)},umMR:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},vF69:function(t,e,n){var r={stringify:function(t){function e(t){return encodeURI(t.replace(/([=:&@_;\/])/g,"/$1"))}function n(t){if("number"==typeof t||!0===t||!1===t||null===t)return":"+t;if(t instanceof Array){for(var r=[],i=0;i<t.length;++i)r.push(n(t[i]));return"@"+r.join("&")+";"}if("object"==typeof t){var r=[];for(var o in t)r.push(e(o)+n(t[o]));return"_"+r.join("&")+";"}return"="+e((null!==t?void 0!==t?t:"undefined":"null").toString())}return n(t).replace(/;+$/g,"")},parse:function(t){function e(){for(var e="";r!==t.length;++r){if("/"===t.charAt(r)){if((r+=1)===t.length){e+=";";break}}else if(t.charAt(r).match(/[=:&@_;]/))break;e+=t.charAt(r)}return e}function n(){var i=t.charAt(r++);if("="===i)return e();if(":"===i){var o=e();return"true"===o||"false"!==o&&(o=parseFloat(o),isNaN(o)?null:o)}if("@"===i){var a=[];t:if(!(r>=t.length||";"===t.charAt(r)))for(;;){if(a.push(n()),r>=t.length||";"===t.charAt(r))break t;r+=1}return r+=1,a}if("_"===i){var a={};t:if(!(r>=t.length||";"===t.charAt(r)))for(;;){var s=e();if(a[s]=n(),r>=t.length||";"===t.charAt(r))break t;r+=1}return r+=1,a}throw"Unexpected char "+i}var r=0;return t=decodeURI(t),n()}};e.stringify=r.stringify,e.parse=r.parse},vr64:function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n("lfBE")(r,"toString",function(){var t=o.call(this);return t===t?i.call(this):"Invalid Date"})},vyV2:function(t,e,n){var r=n("+GRi"),i=n("rppw"),o=n("KM3d");t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},"w/BM":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},w01x:function(t,e,n){"use strict";function r(t){var e=Zs.call(t,Js),n=t[Js];try{t[Js]=void 0;var r=!0}catch(t){}var i=Qs.call(t);return r&&(e?t[Js]=n:delete t[Js]),i}function i(t){return eu.call(t)}function o(t){return null==t?void 0===t?iu:ru:ou&&ou in Object(t)?$s(t):nu(t)}function a(t){return null!=t&&"object"==typeof t}function s(t){return"symbol"==typeof t||su(t)&&au(t)==uu}function u(t){return"number"==typeof t?t:cu(t)?lu:+t}function c(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function l(t){if("string"==typeof t)return t;if(pu(t))return fu(t,l)+"";if(cu(t))return mu?mu.call(t):"";var e=t+"";return"0"==e&&1/t==-vu?"-0":e}function h(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=yu(n),r=yu(r)):(n=hu(n),r=hu(r)),i=t(n,r)}return i}}function f(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function d(t){if("number"==typeof t)return t;if(cu(t))return Mu;if(wu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=wu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Su,"");var n=Eu.test(t);return n||Ou.test(t)?Tu(t.slice(2),n?2:8):ku.test(t)?Mu:+t}function p(t){if(!t)return 0===t?t:0;if((t=Cu(t))===zu||t===-zu){return(t<0?-1:1)*Pu}return t===t?t:0}function v(t){var e=Au(t),n=e%1;return e===e?n?e-n:e:0}function g(t,e){if("function"!=typeof e)throw new TypeError(Iu);return t=Du(t),function(){if(--t<1)return e.apply(this,arguments)}}function m(t){return t}function y(t){if(!wu(t))return!1;var e=au(t);return e==Nu||e==Fu||e==Lu||e==Bu}function b(t){return!!Uu&&Uu in t}function _(t){if(null!=t){try{return Xu.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function x(t){return!(!wu(t)||Wu(t))&&(Hu(t)?ec:Zu).test(Ku(t))}function w(t,e){return null==t?void 0:t[e]}function M(t,e){var n=rc(t,e);return nc(n)?n:void 0}function S(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dc(t.prototype),r=t.apply(n,e);return wu(r)?r:n}}function k(t,e,n){function r(){return(this&&this!==Ys.a&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&vc,o=pc(t);return r}function E(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function O(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=yc(o-a,0),l=Array(u+c),h=!r;++s<u;)l[s]=e[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function T(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=_c(o-s,0),h=Array(l+c),f=!r;++i<l;)h[i]=t[i];for(var d=i;++u<c;)h[d+u]=e[u];for(;++a<s;)(f||i<o)&&(h[d+n[a]]=t[i++]);return h}function C(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function z(){}function P(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Sc,this.__views__=[]}function A(){}function D(t){for(var e=t.name+"",n=zc[e],r=Ac.call(zc,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function I(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function j(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function R(t){if(t instanceof kc)return t.clone();var e=new Ic(t.__wrapped__,t.__chain__);return e.__actions__=jc(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function L(t){if(su(t)&&!pu(t)&&!(t instanceof kc)){if(t instanceof Ic)return t;if(Nc.call(t,"__wrapped__"))return Rc(t)}return new Ic(t)}function N(t){var e=Dc(t),n=Fc[e];if("function"!=typeof n||!(e in kc.prototype))return!1;if(t===n)return!0;var r=Tc(n);return!!r&&t===r[0]}function F(t){var e=0,n=0;return function(){var r=Vc(),i=qc-(r-n);if(n=r,i>0){if(++e>=Hc)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function B(t){var e=t.match(Xc);return e?e[1].split(Kc):[]}function H(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Zc,"{\n/* [wrapped with "+e+"] */\n")}function q(t){return function(){return t}}function V(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function U(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function W(t){return t!==t}function Y(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function X(t,e,n){return e===e?ul(t,e,n):al(t,sl,n)}function K(t,e){return!!(null==t?0:t.length)&&cl(t,e,0)>-1}function G(t,e){return ol(hl,function(n){var r="_."+n[0];e&n[1]&&!ll(t,r)&&t.push(r)}),t.sort()}function Z(t,e,n){var r=e+"";return il(t,Qc(r,fl(Gc(r),n)))}function Q(t,e,n,r,i,o,a,s,u,c){var l=e&ml,h=l?a:void 0,f=l?void 0:a,d=l?o:void 0,p=l?void 0:o;e|=l?yl:bl,(e&=~(l?bl:yl))&gl||(e&=~(pl|vl));var v=[t,e,i,d,h,p,f,s,u,c],g=n.apply(void 0,v);return Bc(t)&&Yc(g,v),g.placeholder=r,dl(g,t,e)}function J(t){return t.placeholder}function $(t,e){return!!(e=null==e?wl:e)&&("number"==typeof t||Ml.test(t))&&t>-1&&t%1==0&&t<e}function tt(t,e){for(var n=t.length,r=kl(e.length,n),i=jc(t);r--;){var o=e[r];t[r]=Sl(o,n)?i[o]:void 0}return t}function et(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==Ol||(t[n]=Ol,o[i++]=n)}return o}function nt(t,e,n,r,i,o,a,s,u,c){function l(){for(var m=arguments.length,y=Array(m),b=m;b--;)y[b]=arguments[b];if(p)var _=xl(l),x=wc(y,_);if(r&&(y=bc(y,r,i,p)),o&&(y=xc(y,o,a,p)),m-=x,p&&m<c){var w=Tl(y,_);return _l(t,e,nt,l.placeholder,n,y,w,s,u,c-m)}var M=f?n:this,S=d?M[t]:t;return m=y.length,s?y=El(y,s):v&&m>1&&y.reverse(),h&&u<m&&(y.length=u),this&&this!==Ys.a&&this instanceof l&&(S=g||pc(S)),S.apply(M,y)}var h=e&Dl,f=e&Cl,d=e&zl,p=e&(Pl|Al),v=e&Il,g=d?void 0:pc(t);return l}function rt(t,e,n){function r(){for(var o=arguments.length,a=Array(o),s=o,u=xl(r);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==u&&a[o-1]!==u?[]:Tl(a,u);if((o-=c.length)<n)return _l(t,e,jl,r.placeholder,void 0,a,c,void 0,void 0,n-o);var l=this&&this!==Ys.a&&this instanceof r?i:t;return mc(l,this,a)}var i=pc(t);return r}function it(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,c=r.length,l=Array(c+s),h=this&&this!==Ys.a&&this instanceof i?a:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++e];return mc(h,o?n:this,l)}var o=e&Ll,a=pc(t);return i}function ot(t,e){var n=t[1],r=e[1],i=n|r,o=i<(Bl|Hl|Ul),a=r==Ul&&n==Vl||r==Ul&&n==Wl&&t[7].length<=e[8]||r==(Ul|Wl)&&e[7].length<=e[8]&&n==Vl;if(!o&&!a)return t;r&Bl&&(t[2]=e[2],i|=n&Bl?0:ql);var s=e[3];if(s){var u=t[3];t[3]=u?bc(u,s,e[4]):s,t[4]=u?Tl(t[3],Fl):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?xc(u,s,e[6]):s,t[6]=u?Tl(t[5],Fl):e[6]),s=e[7],s&&(t[7]=s),r&Ul&&(t[8]=null==t[8]?e[8]:Yl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function at(t,e,n,r,i,o,a,s){var u=e&Zl;if(!u&&"function"!=typeof t)throw new TypeError(Kl);var c=r?r.length:0;if(c||(e&=~($l|th),r=i=void 0),a=void 0===a?a:eh(Du(a),0),s=void 0===s?s:Du(s),c-=i?i.length:0,e&th){var l=r,h=i;r=i=void 0}var f=u?void 0:Tc(t),d=[t,e,n,r,i,l,h,o,a,s];if(f&&Xl(d,f),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=void 0===d[9]?u?0:t.length:eh(d[9]-c,0),!s&&e&(Ql|Jl)&&(e&=~(Ql|Jl)),e&&e!=Gl)p=e==Ql||e==Jl?Rl(t,e,s):e!=$l&&e!=(Gl|$l)||i.length?jl.apply(void 0,d):Nl(t,e,n,r);else var p=gc(t,e,n);return dl((f?lc:Yc)(p,d),t,e)}function st(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,nh(t,rh,void 0,void 0,void 0,void 0,e)}function ut(t,e,n){"__proto__"==e&&tl?tl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ct(t,e){return t===e||t!==t&&e!==e}function lt(t,e,n){var r=t[e];uh.call(t,e)&&ah(r,n)&&(void 0!==n||e in t)||oh(t,e,n)}function ht(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?oh(n,s,u):ch(n,s,u)}return n}function ft(t,e,n){return e=hh(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=hh(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),mc(t,this,s)}}function dt(t,e){return il(fh(t,e,Ru),t+"")}function pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ph}function vt(t){return null!=t&&vh(t.length)&&!Hu(t)}function gt(t,e,n){if(!wu(n))return!1;var r=typeof e;return!!("number"==r?gh(n)&&Sl(e,n.length):"string"==r&&e in n)&&ah(n[e],t)}function mt(t){return dh(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&mh(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bh)}function bt(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function _t(t){return su(t)&&au(t)==wh}function xt(t){return su(t)&&vh(t.length)&&!!zh[au(t)]}function wt(t){return function(e){return t(e)}}function Mt(t,e){var n=pu(t),r=!n&&Th(t),i=!n&&!r&&Object(Ch.a)(t),o=!n&&!r&&!i&&Rh(t),a=n||r||i||o,s=a?xh(t.length,String):[],u=s.length;for(var c in t)!e&&!Nh.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Sl(c,u))||s.push(c);return s}function St(t,e){return function(n){return t(e(n))}}function kt(t){if(!_h(t))return qh(t);var e=[];for(var n in Object(t))Uh.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Et(t){return gh(t)?Fh(t):Wh(t)}function Ot(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function Tt(t){if(!wu(t))return Qh(t);var e=_h(t),n=[];for(var r in t)("constructor"!=r||!e&&$h.call(t,r))&&n.push(r);return n}function Ct(t){return gh(t)?Fh(t,!0):tf(t)}function zt(t,e){if(pu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cu(t))||(lf.test(t)||!cf.test(t)||null!=e&&t in Object(e))}function Pt(){this.__data__=df?df(null):{},this.size=0}function At(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Dt(t){var e=this.__data__;if(df){var n=e[t];return n===gf?void 0:n}return yf.call(e,t)?e[t]:void 0}function It(t){var e=this.__data__;return df?void 0!==e[t]:xf.call(e,t)}function jt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=df&&void 0===e?Mf:e,this}function Rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(){this.__data__=[],this.size=0}function Nt(t,e){for(var n=t.length;n--;)if(ah(t[n][0],e))return n;return-1}function Ft(t){var e=this.__data__,n=Of(e,t);return!(n<0)&&(n==e.length-1?e.pop():Cf.call(e,n,1),--this.size,!0)}function Bt(t){var e=this.__data__,n=Of(e,t);return n<0?void 0:e[n][1]}function Ht(t){return Of(this.__data__,t)>-1}function qt(t,e){var n=this.__data__,r=Of(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ut(){this.size=0,this.__data__={hash:new kf,map:new(Rf||If),string:new kf}}function Wt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Yt(t,e){var n=t.__data__;return Nf(e)?n["string"==typeof e?"string":"hash"]:n.map}function Xt(t){var e=Ff(this,t).delete(t);return this.size-=e?1:0,e}function Kt(t){return Ff(this,t).get(t)}function Gt(t){return Ff(this,t).has(t)}function Zt(t,e){var n=Ff(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Qt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Wf);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Jt.Cache||Uf),n}function $t(t){var e=Yf(t,function(t){return n.size===Xf&&n.clear(),t}),n=e.cache;return e}function te(t){return null==t?"":yu(t)}function ee(t,e){return pu(t)?t:hf(t,e)?[t]:$f(td(t))}function ne(t){if("string"==typeof t||cu(t))return t;var e=t+"";return"0"==e&&1/t==-nd?"-0":e}function re(t,e){e=ed(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[rd(e[n++])];return n&&n==r?t:void 0}function ie(t,e,n){var r=null==t?void 0:id(t,e);return void 0===r?n:r}function oe(t,e){for(var n=-1,r=e.length,i=Array(r),o=null==t;++n<r;)i[n]=o?void 0:od(t,e[n]);return i}function ae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function se(t){return pu(t)||Th(t)||!!(ud&&t&&t[ud])}function ue(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=cd),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ue(s,e-1,n,r,i):sd(i,s):r||(i[i.length]=s)}return i}function ce(t){return(null==t?0:t.length)?ld(t,1):[]}function le(t){return il(fh(t,void 0,hd),t+"")}function he(t){if(!su(t)||au(t)!=md)return!1;var e=gd(t);if(null===e)return!0;var n=xd.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&_d.call(n)==wd}function fe(t){if(!su(t))return!1;var e=au(t);return e==kd||e==Sd||"string"==typeof t.message&&"string"==typeof t.name&&!Md(t)}function de(t,e){var n;if("function"!=typeof e)throw new TypeError(Cd);return t=Du(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}function pe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function ve(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Ld(t,e,n)}function ge(t){return Fd.test(t)}function me(t){return t.split("")}function ye(t){return t.match(Zd)||[]}function be(t){return Bd(t)?Qd(t):Hd(t)}function _e(t){return function(e){e=td(e);var n=Bd(e)?Jd(e):void 0,r=n?n[0]:e.charAt(0),i=n?Nd(n,1).join(""):e.slice(1);return r[t]()+i}}function xe(t){return ep(td(t).toLowerCase())}function we(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Me(t){return function(e){return null==t?void 0:t[e]}}function Se(t){return(t=td(t))&&t.replace(up,sp).replace(cp,"")}function ke(t){return t.match(hp)||[]}function Ee(t){return dp.test(t)}function Oe(t){return t.match(kp)||[]}function Te(t,e,n){return t=td(t),e=n?void 0:e,void 0===e?pp(t)?Ep(t):fp(t):t.match(e)||[]}function Ce(t){return function(e){return rp(Op(lp(e).replace(Tp,"")),t,"")}}function ze(){if(!arguments.length)return[];var t=arguments[0];return pu(t)?t:[t]}function Pe(t){var e=Math[t];return function(t,n){if(t=Cu(t),n=null==n?0:Dp(Du(n),292)){var r=(td(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(td(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function Ae(t){var e=Fc(t);return e.__chain__=!0,e}function De(t,e,n){e=(n?mh(t,e,n):void 0===e)?1:Fp(Du(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(Np(r/e));i<r;)a[o++]=Ld(t,i,i+=e);return a}function Ie(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function je(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=Cu(n),n=n===n?n:0),void 0!==e&&(e=Cu(e),e=e===e?e:0),Hp(Cu(t),e,n)}function Re(){this.__data__=new If,this.size=0}function Le(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Ne(t){return this.__data__.get(t)}function Fe(t){return this.__data__.has(t)}function Be(t,e){var n=this.__data__;if(n instanceof If){var r=n.__data__;if(!Rf||r.length<Xp-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Uf(r)}return n.set(t,e),this.size=n.size,this}function He(t){var e=this.__data__=new If(t);this.size=e.size}function qe(t,e){return t&&lh(e,Yh(e),t)}function Ve(t,e){return t&&lh(e,ef(e),t)}function Ue(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function We(){return[]}function Ye(t,e){return lh(t,ov(t),e)}function Xe(t,e){return lh(t,cv(t),e)}function Ke(t,e,n){var r=e(t);return pu(t)?r:sd(r,n(t))}function Ge(t){return hv(t,Yh,ov)}function Ze(t){return hv(t,ef,cv)}function Qe(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Tv.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Je(t){var e=new t.constructor(t.byteLength);return new Pv(e).set(new Pv(t)),e}function $e(t,e){var n=e?Av(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function tn(t,e){return t.set(e[0],e[1]),t}function en(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function nn(t,e,n){var r=e?n(jv(t),Rv):jv(t);return rp(r,Iv,new t.constructor)}function rn(t){var e=new t.constructor(t.source,Nv.exec(t));return e.lastIndex=t.lastIndex,e}function on(t,e){return t.add(e),t}function an(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function sn(t,e,n){var r=e?n(Hv(t),qv):Hv(t);return rp(r,Bv,new t.constructor)}function un(t){return Wv?Object(Wv.call(t)):{}}function cn(t,e){var n=e?Av(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ln(t,e,n,r){var i=t.constructor;switch(e){case ng:return Av(t);case Kv:case Gv:return new i(+t);case rg:return Dv(t,r);case ig:case og:case ag:case sg:case ug:case cg:case lg:case hg:case fg:return Xv(t,r);case Zv:return Lv(t,r,n);case Qv:case tg:return new i(t);case Jv:return Fv(t);case $v:return Vv(t,r,n);case eg:return Yv(t)}}function hn(t){return"function"!=typeof t.constructor||_h(t)?{}:dc(gd(t))}function fn(t,e,n,r,i,o){var a,s=e&vg,u=e&gg,c=e&mg;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!wu(t))return t;var l=pu(t);if(l){if(a=Cv(t),!s)return jc(t,a)}else{var h=Ev(t),f=h==bg||h==_g;if(Object(Ch.a)(t))return Object(Jp.a)(t,s);if(h==xg||h==yg||f&&!i){if(a=u||f?{}:pg(t),!s)return u?lv(t,Qp(a,t)):av(t,Zp(a,t))}else{if(!wg[h])return i?t:{};a=dg(t,h,fn,s)}}o||(o=new Gp);var d=o.get(t);if(d)return d;o.set(t,a);var p=c?u?dv:fv:u?keysIn:Yh,v=l?void 0:p(t);return ol(v||t,function(r,i){v&&(i=r,r=t[i]),ch(a,i,fn(r,e,n,i,t,o))}),a}function dn(t){return Mg(t,Sg)}function pn(t){return Mg(t,Eg|Og)}function vn(t,e){return e="function"==typeof e?e:void 0,Mg(t,Cg|zg,e)}function gn(t,e){return e="function"==typeof e?e:void 0,Mg(t,Ag,e)}function mn(){return new Ic(this.value(),this.__chain__)}function yn(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function bn(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return sd(pu(n)?jc(n):[n],ld(e,1))}function _n(t){return this.__data__.set(t,Lg),this}function xn(t){return this.__data__.has(t)}function wn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Uf;++e<n;)this.add(t[e])}function Mn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Sn(t,e){return t.has(e)}function kn(t,e,n,r,i,o){var a=n&Vg,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=n&Ug?new Bg:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],p=e[l];if(r)var v=a?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!Hg(e,function(t,e){if(!qg(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function En(t,e,n,r,i,o,a){switch(n){case im:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rm:return!(t.byteLength!=e.byteLength||!o(new Pv(t),new Pv(e)));case Kg:case Gg:case Jg:return ah(+t,+e);case Zg:return t.name==e.name&&t.message==e.message;case $g:case em:return t==e+"";case Qg:var s=jv;case tm:var u=r&Yg;if(s||(s=Hv),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=Xg,a.set(t,e);var l=Wg(s(t),s(e),r,i,o,a);return a.delete(t),l;case nm:if(am)return am.call(t)==am.call(e)}return!1}function On(t,e,n,r,i,o){var a=n&um,s=fv(t),u=s.length;if(u!=fv(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:lm.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){l=s[c];var p=t[l],v=e[l];if(r)var g=a?r(v,p,l,e,t,o):r(p,v,l,t,e,o);if(!(void 0===g?p===v||i(p,v,n,r,o):g)){f=!1;break}d||(d="constructor"==l)}if(f&&!d){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f}function Tn(t,e,n,r,i,o){var a=pu(t),s=pu(e),u=a?pm:Ev(t),c=s?pm:Ev(e);u=u==dm?vm:u,c=c==dm?vm:c;var l=u==vm,h=c==vm,f=u==c;if(f&&Object(Ch.a)(t)){if(!Object(Ch.a)(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new Gp),a||Rh(t)?Wg(t,e,n,r,i,o):sm(t,e,u,n,r,i,o);if(!(n&fm)){var d=l&&mm.call(t,"__wrapped__"),p=h&&mm.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return o||(o=new Gp),i(v,g,n,r,o)}}return!!f&&(o||(o=new Gp),hm(t,e,n,r,i,o))}function Cn(t,e,n,r,i){return t===e||(null==t||null==e||!su(t)&&!su(e)?t!==t&&e!==e:ym(t,e,n,r,Cn,i))}function zn(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var h=new Gp;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?bm(l,c,_m|xm,r,h):f))return!1}}return!0}function Pn(t){return t===t&&!wu(t)}function An(t){for(var e=Yh(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Mm(i)]}return e}function Dn(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function In(t){var e=Sm(t);return 1==e.length&&e[0][2]?km(e[0][0],e[0][1]):function(n){return n===t||wm(n,t,e)}}function jn(t,e){return null!=t&&e in Object(t)}function Rn(t,e,n){e=ed(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=rd(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&vh(i)&&Sl(a,i)&&(pu(t)||Th(t))}function Ln(t,e){return null!=t&&Tm(t,e,Om)}function Nn(t,e){return hf(t)&&Mm(e)?km(rd(t),e):function(n){var r=od(n,t);return void 0===r&&r===e?Cm(n,t):bm(e,r,zm|Pm)}}function Fn(t){return function(e){return null==e?void 0:e[t]}}function Bn(t){return function(e){return id(e,t)}}function Hn(t){return hf(t)?Dm(rd(t)):Im(t)}function qn(t){return"function"==typeof t?t:null==t?Ru:"object"==typeof t?pu(t)?Am(t[0],t[1]):Em(t):jm(t)}function Vn(t){var e=null==t?0:t.length,n=Rm;return t=e?fu(t,function(t){if("function"!=typeof t[1])throw new TypeError(Lm);return[n(t[0]),t[1]]}):[],dh(function(n){for(var r=-1;++r<e;){var i=t[r];if(mc(i[0],this,n))return mc(i[1],this,n)}})}function Un(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Wn(t){var e=Yh(t);return function(n){return Fm(n,t,e)}}function Yn(t){return Bm(Mg(t,Hm))}function Xn(t,e){return null==e||Fm(t,e,Yh(e))}function Kn(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Gn(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Zn(t,e){return t&&Xm(t,e,Yh)}function Qn(t,e){return function(n,r){if(null==n)return n;if(!gh(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Jn(t,e,n,r){return Qm(t,function(t,i,o){e(r,t,n(t),o)}),r}function $n(t,e){return function(n,r){var i=pu(n)?Um:Jm,o=e?e():{};return i(n,t,Rm(r,2),o)}}function tr(t,e){var n=dc(t);return null==e?n:Zp(n,e)}function er(t,e,n){e=n?void 0:e;var r=nh(t,oy,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=er.placeholder,r}function nr(t,e,n){e=n?void 0:e;var r=nh(t,sy,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=nr.placeholder,r}function rr(t,e,n){function r(e){var n=f,r=d;return f=d=void 0,y=e,v=t.apply(r,n)}function i(t){return y=t,g=setTimeout(s,e),b?r(t):v}function o(t){var n=t-m,r=t-y,i=e-n;return _?dy(i,p-r):i}function a(t){var n=t-m,r=t-y;return void 0===m||n>=e||n<0||_&&r>=p}function s(){var t=ly();if(a(t))return u(t);g=setTimeout(s,o(t))}function u(t){return g=void 0,x&&f?r(t):(f=d=void 0,v)}function c(){void 0!==g&&clearTimeout(g),y=0,f=m=d=g=void 0}function l(){return void 0===g?v:u(ly())}function h(){var t=ly(),n=a(t);if(f=arguments,d=this,m=t,n){if(void 0===g)return i(m);if(_)return g=setTimeout(s,e),r(m)}return void 0===g&&(g=setTimeout(s,e)),v}var f,d,p,v,g,m,y=0,b=!1,_=!1,x=!0;if("function"!=typeof t)throw new TypeError(hy);return e=Cu(e)||0,wu(n)&&(b=!!n.leading,_="maxWait"in n,p=_?fy(Cu(n.maxWait)||0,e):p,x="trailing"in n?!!n.trailing:x),h.cancel=c,h.flush=l,h}function ir(t,e){return null==t||t!==t?e:t}function or(t,e,n,r){return void 0===t||ah(t,gy[n])&&!my.call(r,n)?e:t}function ar(t,e,n){(void 0===n||ah(t[e],n))&&(void 0!==n||e in t)||oh(t,e,n)}function sr(t){return su(t)&&gh(t)}function ur(t){return lh(t,ef(t))}function cr(t,e,n,r,i,o,a){var s=t[n],u=e[n],c=a.get(u);if(c)return void xy(t,n,c);var l=o?o(s,u,n+"",t,e,a):void 0,h=void 0===l;if(h){var f=pu(u),d=!f&&Object(Ch.a)(u),p=!f&&!d&&Rh(u);l=u,f||d||p?pu(s)?l=s:wy(s)?l=jc(s):d?(h=!1,l=Object(Jp.a)(u,!0)):p?(h=!1,l=Xv(u,!0)):l=[]:Md(u)||Th(u)?(l=s,Th(s)?l=My(s):(!wu(s)||r&&Hu(s))&&(l=pg(u))):h=!1}h&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),xy(t,n,l)}function lr(t,e,n,r,i){t!==e&&Xm(e,function(o,a){if(wu(o))i||(i=new Gp),Sy(t,e,a,n,lr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):void 0;void 0===s&&(s=o),xy(t,a,s)}},ef)}function hr(t,e,n,r,i,o){return wu(t)&&wu(e)&&(o.set(e,t),ky(t,e,void 0,hr,o),o.delete(e)),t}function fr(t,e,n){if("function"!=typeof t)throw new TypeError(Py);return setTimeout(function(){t.apply(void 0,n)},e)}function dr(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pr(t,e,n,r){var i=-1,o=ll,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=fu(e,Ah(n))),r?(o=Ly,a=!1):e.length>=Ny&&(o=qg,a=!1,e=new Bg(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h===h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}function vr(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}function gr(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Du(e),Ld(t,e<0?0:e,r)):[]}function mr(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Du(e),e=r-e,Ld(t,0,e<0?0:e)):[]}function yr(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ld(t,r?0:o,r?o+1:i):Ld(t,r?o+1:0,r?i:o)}function br(t,e){return t&&t.length?Qy(t,Rm(e,3),!0,!0):[]}function _r(t,e){return t&&t.length?Qy(t,Rm(e,3),!0):[]}function xr(t){return"function"==typeof t?t:Ru}function wr(t,e){return(pu(t)?ol:Qm)(t,tb(e))}function Mr(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Sr(t,e){return t&&ib(t,e,Yh)}function kr(t,e){return(pu(t)?nb:sb)(t,tb(e))}function Er(t,e,n){t=td(t),e=yu(e);var r=t.length;n=void 0===n?r:Hp(Du(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function Or(t,e){return fu(e,function(e){return[e,t[e]]})}function Tr(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Cr(t){return function(e){var n=Ev(e);return n==fb?jv(e):n==db?hb(e):lb(e,t(e))}}function zr(t){return t=td(t),t&&Mb.test(t)?t.replace(wb,xb):t}function Pr(t){return t=td(t),t&&Eb.test(t)?t.replace(kb,"\\$&"):t}function Ar(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Dr(t,e){var n=!0;return Qm(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ir(t,e,n){var r=pu(t)?Tb:Cb;return n&&mh(t,e,n)&&(e=void 0),r(t,Rm(e,3))}function jr(t){return t?Hp(Du(t),0,Pb):0}function Rr(t,e,n,r){var i=t.length;for(n=Du(n),n<0&&(n=-n>i?0:i+n),r=void 0===r||r>i?i:Du(r),r<0&&(r+=i),r=n>r?0:Ab(r);n<r;)t[n++]=e;return t}function Lr(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&mh(t,e,n)&&(n=0,r=i),Db(t,e,n,r)):[]}function Nr(t,e){var n=[];return Qm(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Fr(t,e){return(pu(t)?$p:jb)(t,Rm(e,3))}function Br(t){return function(e,n,r){var i=Object(e);if(!gh(e)){var o=Rm(n,3);e=Yh(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Hr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Du(n);return i<0&&(i=Nb(r+i,0)),al(t,Rm(e,3),i)}function qr(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function Vr(t,e){return qb(t,Rm(e,3),Km)}function Ur(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=Du(n),i=n<0?Ub(r+i,0):Wb(i,r-1)),al(t,Rm(e,3),i,!0)}function Wr(t,e){return qb(t,Rm(e,3),ob)}function Yr(t){return t&&t.length?t[0]:void 0}function Xr(t,e){var n=-1,r=gh(t)?Array(t.length):[];return Qm(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Kr(t,e){return(pu(t)?fu:Qb)(t,Rm(e,3))}function Gr(t,e){return ld(Jb(t,e),1)}function Zr(t,e){return ld(Jb(t,e),t_)}function Qr(t,e,n){return n=void 0===n?1:Du(n),ld(Jb(t,e),n)}function Jr(t){return(null==t?0:t.length)?ld(t,r_):[]}function $r(t,e){return(null==t?0:t.length)?(e=void 0===e?1:Du(e),ld(t,e)):[]}function ti(t){return nh(t,a_)}function ei(t){return fd(function(e){var n=e.length,r=n,i=Ic.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError(l_);if(i&&!a&&"wrapper"==Dc(o))var a=new Ic([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=Dc(o),u="wrapper"==s?Tc(o):void 0;a=u&&Bc(u[0])&&u[1]==(d_|h_|f_|p_)&&!u[4].length&&1==u[9]?a[Dc(u[0])].apply(a,u[3]):1==o.length&&Bc(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&pu(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function ni(t,e){return null==t?t:Xm(t,tb(e),ef)}function ri(t,e){return null==t?t:ib(t,tb(e),ef)}function ii(t,e){return t&&Km(t,tb(e))}function oi(t,e){return t&&ob(t,tb(e))}function ai(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function si(t,e){return $p(e,function(e){return Hu(t[e])})}function ui(t){return null==t?[]:k_(t,Yh(t))}function ci(t){return null==t?[]:k_(t,ef(t))}function li(t,e){return t>e}function hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Cu(e),n=Cu(n)),t(e,n)}}function fi(t,e){return null!=t&&F_.call(t,e)}function di(t,e){return null!=t&&Tm(t,e,B_)}function pi(t,e,n){return t>=V_(e,n)&&t<q_(e,n)}function vi(t,e,n){return e=Au(e),void 0===n?(n=e,e=0):n=Au(n),t=Cu(t),U_(t,e,n)}function gi(t){return"string"==typeof t||!pu(t)&&su(t)&&au(t)==Y_}function mi(t,e){return fu(e,function(e){return t[e]})}function yi(t){return null==t?[]:K_(t,Yh(t))}function bi(t,e,n,r){t=gh(t)?t:G_(t),n=n&&!r?Du(n):0;var i=t.length;return n<0&&(n=Z_(i+n,0)),X_(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&cl(t,e,n)>-1}function _i(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Du(n);return i<0&&(i=J_(r+i,0)),cl(t,e,i)}function xi(t){return(null==t?0:t.length)?Ld(t,0,-1):[]}function wi(t,e,n){for(var r=n?Ly:ll,i=t[0].length,o=t.length,a=o,s=Array(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=fu(l,Ah(e))),u=ex(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new Bg(a&&l):void 0}l=t[0];var h=-1,f=s[0];t:for(;++h<i&&c.length<u;){var d=l[h],p=e?e(d):d;if(d=n||0!==d?d:0,!(f?qg(f,p):r(c,p,n))){for(a=o;--a;){var v=s[a];if(!(v?qg(v,p):r(t[a],p,n)))continue t}f&&f.push(p),c.push(d)}}return c}function Mi(t){return wy(t)?t:[]}function Si(t,e,n,r){return Km(t,function(t,i,o){e(r,n(t),i,o)}),r}function ki(t,e){return function(n,r){return lx(n,t,e(r),{})}}function Ei(t,e){return e.length<2?t:id(t,Ld(e,0,-1))}function Oi(t,e,n){e=ed(e,t),t=yx(t,e);var r=null==t?t:t[rd(qy(e))];return null==r?void 0:mc(r,t,n)}function Ti(t){return su(t)&&au(t)==Sx}function Ci(t){return!0===t||!1===t||su(t)&&au(t)==Cx}function zi(t){return su(t)&&au(t)==Px}function Pi(t){return su(t)&&1===t.nodeType&&!Md(t)}function Ai(t){if(null==t)return!0;if(gh(t)&&(pu(t)||"string"==typeof t||"function"==typeof t.splice||Object(Ch.a)(t)||Rh(t)||Th(t)))return!t.length;var e=Ev(t);if(e==Lx||e==Nx)return!t.size;if(_h(t))return!Wh(t).length;for(var n in t)if(Bx.call(t,n))return!1;return!0}function Di(t,e){return bm(t,e)}function Ii(t,e,n){n="function"==typeof n?n:void 0;var r=n?n(t,e):void 0;return void 0===r?bm(t,e,void 0,n):!!r}function ji(t){return"number"==typeof t&&Ux(t)}function Ri(t){return"number"==typeof t&&t==Du(t)}function Li(t){return su(t)&&Ev(t)==Xx}function Ni(t,e){return t===e||wm(t,e,Sm(e))}function Fi(t,e,n){return n="function"==typeof n?n:void 0,wm(t,e,Sm(e),n)}function Bi(t){return"number"==typeof t||su(t)&&au(t)==tw}function Hi(t){return ew(t)&&t!=+t}function qi(t){if(ow(t))throw new Error(aw);return nc(t)}function Vi(t){return null==t}function Ui(t){return null===t}function Wi(t){return su(t)&&au(t)==lw}function Yi(t){return Yx(t)&&t>=-vw&&t<=vw}function Xi(t){return su(t)&&Ev(t)==mw}function Ki(t){return void 0===t}function Gi(t){return su(t)&&Ev(t)==Mw}function Zi(t){return su(t)&&au(t)==kw}function Qi(t){return Rm("function"==typeof t?t:Mg(t,Ow))}function Ji(t,e){return null==t?"":zw.call(t,e)}function $i(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function to(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=Du(n),i=i<0?Lw(r+i,0):Nw(i,r-1)),e===e?Rw(t,e,i):al(t,sl,i,!0)}function eo(t,e){return t<e}function no(t,e){var n={};return e=Rm(e,3),Km(t,function(t,r,i){oh(n,e(t,r,i),t)}),n}function ro(t,e){var n={};return e=Rm(e,3),Km(t,function(t,r,i){oh(n,r,e(t,r,i))}),n}function io(t){return Em(Mg(t,Qw))}function oo(t,e){return Am(t,Mg(e,$w))}function ao(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a===a&&!cu(a):n(a,s)))var s=a,u=o}return u}function so(t){return t&&t.length?eM(t,Ru,A_):void 0}function uo(t,e){return t&&t.length?eM(t,Rm(e,2),A_):void 0}function co(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function lo(t,e){var n=null==t?0:t.length;return n?iM(t,e)/n:oM}function ho(t){return aM(t,Ru)}function fo(t,e){return aM(t,Rm(e,2))}function po(t){return t&&t.length?eM(t,Ru,Uw):void 0}function vo(t,e){return t&&t.length?eM(t,Rm(e,2),Uw):void 0}function go(t,e,n){var r=Yh(e),i=k_(e,r),o=!(wu(n)&&"chain"in n&&!n.chain),a=Hu(t);return ol(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=jc(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,sd([this.value()],arguments))})}),t}function mo(t){if("function"!=typeof t)throw new TypeError(_M);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function yo(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function bo(t){if(!t)return[];if(gh(t))return X_(t)?Jd(t):jc(t);if(kM&&t[kM])return wM(t[kM]());var e=Ev(t);return(e==MM?jv:e==SM?Hv:G_)(t)}function _o(){void 0===this.__values__&&(this.__values__=EM(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}}function xo(t,e){var n=t.length;if(n)return e+=e<0?n:0,Sl(e,n)?t[e]:void 0}function wo(t,e){return t&&t.length?TM(t,Du(e)):void 0}function Mo(t){return t=Du(t),dh(function(e){return TM(e,t)})}function So(t,e){return e=ed(e,t),null==(t=yx(t,e))||delete t[rd(qy(e))]}function ko(t){return Md(t)?void 0:t}function Eo(t,e,n,r){if(!wu(t))return t;e=ed(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=rd(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):void 0,void 0===c&&(c=wu(l)?l:Sl(e[i+1])?[]:{})}ch(s,u,c),s=s[u]}return t}function Oo(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=id(t,a);n(s,a)&&jM(o,ed(a,t),s)}return o}function To(t,e){if(null==t)return{};var n=fu(dv(t),function(t){return[t]});return e=Rm(e),RM(t,n,function(t,n){return e(t,n[0])})}function Co(t,e){return LM(t,xM(Rm(e)))}function zo(t){return zd(2,t)}function Po(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ao(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t===t,o=cu(t),a=void 0!==e,s=null===e,u=e===e,c=cu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Do(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=HM(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function Io(t,e,n){var r=-1;e=fu(e.length?e:[Ru],Ah(Rm));var i=Qb(t,function(t,n,i){return{criteria:fu(e,function(e){return e(t)}),index:++r,value:t}});return BM(i,function(t,e){return qM(t,e,n)})}function jo(t,e,n,r){return null==t?[]:(pu(e)||(e=null==e?[]:[e]),n=r?void 0:n,pu(n)||(n=null==n?[]:[n]),VM(t,e,n))}function Ro(t){return fd(function(e){return e=fu(e,Ah(Rm)),dh(function(n){var r=this;return t(e,function(t){return mc(t,r,n)})})})}function Lo(t,e){var n="";if(!t||e<1||e>rS)return n;do{e%2&&(n+=t),(e=iS(e/2))&&(t+=t)}while(e);return n}function No(t){for(var e=dS.lastIndex=0;dS.test(t);)++e;return e}function Fo(t){return Bd(t)?pS(t):sS(t)}function Bo(t,e){e=void 0===e?" ":yu(e);var n=e.length;if(n<2)return n?oS(e,t):e;var r=oS(e,gS(t/vS(e)));return Bd(e)?Nd(Jd(r),0,t).join(""):r.slice(0,t)}function Ho(t,e,n){t=td(t),e=Du(e);var r=e?vS(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return mS(bS(i),n)+t+mS(yS(i),n)}function qo(t,e,n){t=td(t),e=Du(e);var r=e?vS(t):0;return e&&r<e?t+mS(e-r,n):t}function Vo(t,e,n){t=td(t),e=Du(e);var r=e?vS(t):0;return e&&r<e?mS(e-r,n)+t:t}function Uo(t,e,n){return n||null==e?e=0:e&&(e=+e),SS(td(t).replace(MS,""),e||0)}function Wo(t,e){return RM(t,e,function(e,n){return Cm(t,n)})}function Yo(t){for(var e,n=this;n instanceof Mc;){var r=Rc(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function Xo(t){return function(e){return null==t?void 0:id(t,e)}}function Ko(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Go(t,e,n,r){var i=r?LS:cl,o=-1,a=e.length,s=t;for(t===e&&(e=jc(e)),n&&(s=fu(t,Ah(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&FS.call(s,u,1),FS.call(t,u,1);return t}function Zo(t,e){return t&&t.length&&e&&e.length?BS(t,e):t}function Qo(t,e,n){return t&&t.length&&e&&e.length?BS(t,e,Rm(n,2)):t}function Jo(t,e,n){return t&&t.length&&e&&e.length?BS(t,e,void 0,n):t}function $o(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Sl(i)?XS.call(t,i,1):PM(t,i)}}return t}function ta(t,e){return t+QS(JS()*(e-t+1))}function ea(t,e,n){if(n&&"boolean"!=typeof n&&mh(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Au(t),void 0===e?(e=t,t=0):e=Au(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=nk();return ek(t+i*(e-t+tk("1e-"+((i+"").length-1))),e)}return $S(t,e)}function na(t,e,n,r){for(var i=-1,o=ok(ik((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}function ra(t){return function(e,n,r){return r&&"number"!=typeof r&&mh(e,n,r)&&(n=r=void 0),e=Au(e),void 0===n?(n=e,e=0):n=Au(n),r=void 0===r?e<n?1:-1:Au(r),ak(e,n,r,t)}}function ia(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function oa(t,e,n){var r=pu(t)?rp:pk,i=arguments.length<3;return r(t,Rm(e,4),n,i,Qm)}function aa(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function sa(t,e,n){var r=pu(t)?gk:pk,i=arguments.length<3;return r(t,Rm(e,4),n,i,sb)}function ua(t,e){return(pu(t)?$p:jb)(t,xM(Rm(e,3)))}function ca(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Rm(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return KS(t,i),n}function la(t,e,n){return e=(n?mh(t,e,n):void 0===e)?1:Du(e),oS(td(t),e)}function ha(){var t=arguments,e=td(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fa(t,e){if("function"!=typeof t)throw new TypeError(wk);return e=void 0===e?e:Du(e),dh(t,e)}function da(t,e,n){e=ed(e,t);var r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[rd(e[r])];void 0===o&&(r=i,o=n),t=Hu(o)?o.call(t):o}return t}function pa(t){return null==t?t:Ek.call(t)}function va(t){var e=t.length;return e?t[$S(0,e-1)]:void 0}function ga(t){return zk(G_(t))}function ma(t){return(pu(t)?zk:Pk)(t)}function ya(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=$S(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ba(t,e){return Dk(jc(t),Hp(e,0,t.length))}function _a(t,e){var n=G_(t);return Dk(n,Hp(e,0,n.length))}function xa(t,e,n){return e=(n?mh(t,e,n):void 0===e)?1:Du(e),(pu(t)?Ik:jk)(t,e)}function wa(t,e,n){return null==t?t:jM(t,e,n)}function Ma(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:jM(t,e,n,r)}function Sa(t){return Dk(jc(t))}function ka(t){return Dk(G_(t))}function Ea(t){return(pu(t)?Fk:Bk)(t)}function Oa(t){if(null==t)return 0;if(gh(t))return X_(t)?vS(t):t.length;var e=Ev(t);return e==qk||e==Vk?t.size:Wh(t).length}function Ta(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mh(t,e,n)?(e=0,n=r):(e=null==e?0:Du(e),n=void 0===n?r:Du(n)),Ld(t,e,n)):[]}function Ca(t,e){var n;return Qm(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function za(t,e,n){var r=pu(t)?Hg:Kk;return n&&mh(t,e,n)&&(e=void 0),r(t,Rm(e,3))}function Pa(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=cu(e),c=void 0===e;i<o;){var l=$k((i+o)/2),h=n(t[l]),f=void 0!==h,d=null===h,p=h===h,v=cu(h);if(a)var g=r||p;else g=c?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!v):!d&&!v&&(r?h<=e:h<e);g?i=l+1:o=l}return tE(o,Jk)}function Aa(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=nE){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!cu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return eE(t,e,Ru,n)}function Da(t,e){return rE(t,e)}function Ia(t,e,n){return eE(t,e,Rm(n,2))}function ja(t,e){var n=null==t?0:t.length;if(n){var r=rE(t,e);if(r<n&&ah(t[r],e))return r}return-1}function Ra(t,e){return rE(t,e,!0)}function La(t,e,n){return eE(t,e,Rm(n,2),!0)}function Na(t,e){if(null==t?0:t.length){var n=rE(t,e,!0)-1;if(ah(t[n],e))return n}return-1}function Fa(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!ah(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Ba(t){return t&&t.length?lE(t):[]}function Ha(t,e){return t&&t.length?lE(t,Rm(e,2)):[]}function qa(t,e,n){return n&&"number"!=typeof n&&mh(t,e,n)&&(e=n=void 0),(n=void 0===n?dE:n>>>0)?(t=td(t),t&&("string"==typeof e||null!=e&&!pw(e))&&!(e=yu(e))&&Bd(t)?Nd(Jd(t),0,n):t.split(e,n)):[]}function Va(t,e){if("function"!=typeof t)throw new TypeError(vE);return e=null==e?0:gE(Du(e),0),dh(function(n){var r=n[e],i=Nd(n,0,e);return r&&sd(i,r),mc(t,this,i)})}function Ua(t,e,n){return t=td(t),n=null==n?0:Hp(Du(n),0,t.length),e=yu(e),t.slice(n,n+e.length)==e}function Wa(){return{}}function Ya(){return""}function Xa(){return!0}function Ka(t){return t&&t.length?iM(t,Ru):0}function Ga(t,e){return t&&t.length?iM(t,Rm(e,2)):0}function Za(t){var e=null==t?0:t.length;return e?Ld(t,1,e):[]}function Qa(t,e,n){return t&&t.length?(e=n||void 0===e?1:Du(e),Ld(t,0,e<0?0:e)):[]}function Ja(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:Du(e),e=r-e,Ld(t,e<0?0:e,r)):[]}function $a(t,e){return t&&t.length?Qy(t,Rm(e,3),!1,!0):[]}function ts(t,e){return t&&t.length?Qy(t,Rm(e,3)):[]}function es(t,e){return e(t),t}function ns(t){return"\\"+IE[t]}function rs(t,e,n){var r=VE.imports._.templateSettings||VE;n&&mh(t,e,n)&&(e=void 0),t=td(t),e=af({},e,r,yy);var i,o,a=af({},e.imports,r.imports,yy),s=Yh(a),u=K_(a,s),c=0,l=e.interpolate||KE,h="__p += '",f=RegExp((e.escape||KE).source+"|"+l.source+"|"+(l===LE?XE:KE).source+"|"+(e.evaluate||KE).source+"|$","g"),d="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(f,function(e,n,r,a,s,u){return r||(r=a),h+=t.slice(c,u).replace(GE,jE),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var p=e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(UE,""):h).replace(WE,"$1").replace(YE,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Td(function(){return Function(s,d+"return "+h).apply(void 0,u)});if(v.source=h,Ed(v))throw v;return v}function is(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(QE);return wu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),py(t,e,{leading:r,maxWait:e,trailing:i})}function os(t,e){return e(t)}function as(t,e){if((t=Du(t))<1||t>tO)return[];var n=eO,r=nO(t,eO);e=tb(e),t-=eO;for(var i=xh(r,e);++n<t;)e(n);return i}function ss(){return this}function us(t,e){var n=t;return n instanceof kc&&(n=n.value()),rp(e,function(t,e){return e.func.apply(e.thisArg,sd([t],e.args))},n)}function cs(){return oO(this.__wrapped__,this.__actions__)}function ls(t){return td(t).toLowerCase()}function hs(t){return pu(t)?fu(t,rd):cu(t)?[t]:jc($f(td(t)))}function fs(t){return t?Hp(Du(t),-cO,cO):0===t?t:0}function ds(t){return td(t).toUpperCase()}function ps(t,e,n){var r=pu(t),i=r||Object(Ch.a)(t)||Rh(t);if(e=Rm(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:wu(t)&&Hu(o)?dc(gd(t)):{}}return(i?ol:Km)(t,function(t,r,i){return e(n,t,r,i)}),n}function vs(t,e){for(var n=t.length;n--&&cl(e,t[n],0)>-1;);return n}function gs(t,e){for(var n=-1,r=t.length;++n<r&&cl(e,t[n],0)>-1;);return n}function ms(t,e,n){if((t=td(t))&&(n||void 0===e))return t.replace(vO,"");if(!t||!(e=yu(e)))return t;var r=Jd(t),i=Jd(e),o=pO(r,i),a=dO(r,i)+1;return Nd(r,o,a).join("")}function ys(t,e,n){if((t=td(t))&&(n||void 0===e))return t.replace(mO,"");if(!t||!(e=yu(e)))return t;var r=Jd(t),i=dO(r,Jd(e))+1;return Nd(r,0,i).join("")}function bs(t,e,n){if((t=td(t))&&(n||void 0===e))return t.replace(bO,"");if(!t||!(e=yu(e)))return t;var r=Jd(t),i=pO(r,Jd(e));return Nd(r,i).join("")}function _s(t,e){var n=xO,r=wO;if(wu(e)){var i="separator"in e?e.separator:i;n="length"in e?Du(e.length):n,r="omission"in e?yu(e.omission):r}t=td(t);var o=t.length;if(Bd(t)){var a=Jd(t);o=a.length}if(n>=o)return t;var s=n-vS(r);if(s<1)return r;var u=a?Nd(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),pw(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=RegExp(i.source,td(MO.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var h=c.index;u=u.slice(0,void 0===h?s:h)}}else if(t.indexOf(yu(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function xs(t){return ih(t,1)}function ws(t){return t=td(t),t&&zO.test(t)?t.replace(CO,TO):t}function Ms(t,e,n){var r=-1,i=ll,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Ly;else if(o>=IO){var c=e?null:DO(t);if(c)return Hv(c);a=!1,i=qg,u=new Bg}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function Ss(t){return t&&t.length?jO(t):[]}function ks(t,e){return t&&t.length?jO(t,Rm(e,2)):[]}function Es(t,e){return e="function"==typeof e?e:void 0,t&&t.length?jO(t,void 0,e):[]}function Os(t){var e=++WO;return td(t)+e}function Ts(t,e){return null==t||PM(t,e)}function Cs(t){if(!t||!t.length)return[];var e=0;return t=$p(t,function(t){if(wy(t))return e=KO(t.length,e),!0}),xh(e,function(e){return fu(t,Dm(e))})}function zs(t,e){if(!t||!t.length)return[];var n=GO(t);return null==e?n:fu(n,function(t){return mc(e,void 0,t)})}function Ps(t,e,n,r){return jM(t,e,n(id(t,e)),r)}function As(t,e,n){return null==t?t:QO(t,e,tb(n))}function Ds(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:QO(t,e,tb(n),r)}function Is(t){return null==t?[]:K_(t,ef(t))}function js(t,e){return OS(tb(e),t)}function Rs(){return Lp(this)}function Ls(){var t=this.__wrapped__;if(t instanceof kc){var e=t;return this.__actions__.length&&(e=new kc(this)),e=e.reverse(),e.__actions__.push({func:$E,args:[Ok],thisArg:void 0}),new Ic(e,this.__chain__)}return this.thru(Ok)}function Ns(t,e,n){var r=t.length;if(r<2)return r?jO(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Fy(o[i]||a,t[s],e,n));return jO(ld(o,1),e,n)}function Fs(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function Bs(t,e){return bT(t||[],e||[],ch)}function Hs(t,e){return bT(t||[],e||[],jM)}function qs(){var t=new kc(this.__wrapped__);return t.__actions__=jc(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jc(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jc(this.__views__),t}function Vs(){if(this.__filtered__){var t=new kc(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Us(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=NT(e,t+a);break;case"takeRight":t=LT(t,e-a)}}return{start:t,end:e}}function Ws(){var t=this.__wrapped__.value(),e=this.__dir__,n=pu(t),r=e<0,i=n?t.length:0,o=FT(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=qT(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return oO(t,this.__actions__);var p=[];t:for(;u--&&f<d;){c+=e;for(var v=-1,g=t[c];++v<h;){var m=l[v],y=m.iteratee,b=m.type,_=y(g);if(b==HT)g=_;else if(!_){if(b==BT)continue t;break t}}p[f++]=g}return p}var Ys=n("3msI"),Xs=Ys.a.Symbol,Ks=Xs,Gs=Object.prototype,Zs=Gs.hasOwnProperty,Qs=Gs.toString,Js=Ks?Ks.toStringTag:void 0,$s=r,tu=Object.prototype,eu=tu.toString,nu=i,ru="[object Null]",iu="[object Undefined]",ou=Ks?Ks.toStringTag:void 0,au=o,su=a,uu="[object Symbol]",cu=s,lu=NaN,hu=u,fu=c,du=Array.isArray,pu=du,vu=1/0,gu=Ks?Ks.prototype:void 0,mu=gu?gu.toString:void 0,yu=l,bu=h,_u=bu(function(t,e){return t+e},0),xu=_u,wu=f,Mu=NaN,Su=/^\s+|\s+$/g,ku=/^[-+]0x[0-9a-f]+$/i,Eu=/^0b[01]+$/i,Ou=/^0o[0-7]+$/i,Tu=parseInt,Cu=d,zu=1/0,Pu=1.7976931348623157e308,Au=p,Du=v,Iu="Expected a function",ju=g,Ru=m,Lu="[object AsyncFunction]",Nu="[object Function]",Fu="[object GeneratorFunction]",Bu="[object Proxy]",Hu=y,qu=Ys.a["__core-js_shared__"],Vu=qu,Uu=function(){var t=/[^.]+$/.exec(Vu&&Vu.keys&&Vu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Wu=b,Yu=Function.prototype,Xu=Yu.toString,Ku=_,Gu=/[\\^$.*+?()[\]{}|]/g,Zu=/^\[object .+?Constructor\]$/,Qu=Function.prototype,Ju=Object.prototype,$u=Qu.toString,tc=Ju.hasOwnProperty,ec=RegExp("^"+$u.call(tc).replace(Gu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nc=x,rc=w,ic=M,oc=ic(Ys.a,"WeakMap"),ac=oc,sc=ac&&new ac,uc=sc,cc=uc?function(t,e){return uc.set(t,e),t}:Ru,lc=cc,hc=Object.create,fc=function(){function t(){}return function(e){if(!wu(e))return{};if(hc)return hc(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),dc=fc,pc=S,vc=1,gc=k,mc=E,yc=Math.max,bc=O,_c=Math.max,xc=T,wc=C,Mc=z,Sc=4294967295;P.prototype=dc(Mc.prototype),P.prototype.constructor=P;var kc=P,Ec=A,Oc=uc?function(t){return uc.get(t)}:Ec,Tc=Oc,Cc={},zc=Cc,Pc=Object.prototype,Ac=Pc.hasOwnProperty,Dc=D;I.prototype=dc(Mc.prototype),I.prototype.constructor=I;var Ic=I,jc=j,Rc=R,Lc=Object.prototype,Nc=Lc.hasOwnProperty;L.prototype=Mc.prototype,L.prototype.constructor=L;var Fc=L,Bc=N,Hc=800,qc=16,Vc=Date.now,Uc=F,Wc=Uc(lc),Yc=Wc,Xc=/\{\n\/\* \[wrapped with (.+)\] \*/,Kc=/,? & /,Gc=B,Zc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qc=H,Jc=q,$c=function(){try{var t=ic(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),tl=$c,el=tl?function(t,e){return tl(t,"toString",{configurable:!0,enumerable:!1,value:Jc(e),writable:!0})}:Ru,nl=el,rl=Uc(nl),il=rl,ol=V,al=U,sl=W,ul=Y,cl=X,ll=K,hl=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],fl=G,dl=Z,pl=1,vl=2,gl=4,ml=8,yl=32,bl=64,_l=Q,xl=J,wl=9007199254740991,Ml=/^(?:0|[1-9]\d*)$/,Sl=$,kl=Math.min,El=tt,Ol="__lodash_placeholder__",Tl=et,Cl=1,zl=2,Pl=8,Al=16,Dl=128,Il=512,jl=nt,Rl=rt,Ll=1,Nl=it,Fl="__lodash_placeholder__",Bl=1,Hl=2,ql=4,Vl=8,Ul=128,Wl=256,Yl=Math.min,Xl=ot,Kl="Expected a function",Gl=1,Zl=2,Ql=8,Jl=16,$l=32,th=64,eh=Math.max,nh=at,rh=128,ih=st,oh=ut,ah=ct,sh=Object.prototype,uh=sh.hasOwnProperty,ch=lt,lh=ht,hh=Math.max,fh=ft,dh=dt,ph=9007199254740991,vh=pt,gh=vt,mh=gt,yh=mt,bh=Object.prototype,_h=yt,xh=bt,wh="[object Arguments]",Mh=_t,Sh=Object.prototype,kh=Sh.hasOwnProperty,Eh=Sh.propertyIsEnumerable,Oh=Mh(function(){return arguments}())?Mh:function(t){return su(t)&&kh.call(t,"callee")&&!Eh.call(t,"callee")},Th=Oh,Ch=n("iTbS"),zh={};zh["[object Float32Array]"]=zh["[object Float64Array]"]=zh["[object Int8Array]"]=zh["[object Int16Array]"]=zh["[object Int32Array]"]=zh["[object Uint8Array]"]=zh["[object Uint8ClampedArray]"]=zh["[object Uint16Array]"]=zh["[object Uint32Array]"]=!0,zh["[object Arguments]"]=zh["[object Array]"]=zh["[object ArrayBuffer]"]=zh["[object Boolean]"]=zh["[object DataView]"]=zh["[object Date]"]=zh["[object Error]"]=zh["[object Function]"]=zh["[object Map]"]=zh["[object Number]"]=zh["[object Object]"]=zh["[object RegExp]"]=zh["[object Set]"]=zh["[object String]"]=zh["[object WeakMap]"]=!1;var Ph=xt,Ah=wt,Dh=n("B1fG"),Ih=Dh.a&&Dh.a.isTypedArray,jh=Ih?Ah(Ih):Ph,Rh=jh,Lh=Object.prototype,Nh=Lh.hasOwnProperty,Fh=Mt,Bh=St,Hh=Bh(Object.keys,Object),qh=Hh,Vh=Object.prototype,Uh=Vh.hasOwnProperty,Wh=kt,Yh=Et,Xh=Object.prototype,Kh=Xh.hasOwnProperty,Gh=yh(function(t,e){if(_h(e)||gh(e))return void lh(e,Yh(e),t);for(var n in e)Kh.call(e,n)&&ch(t,n,e[n])}),Zh=Gh,Qh=Ot,Jh=Object.prototype,$h=Jh.hasOwnProperty,tf=Tt,ef=Ct,nf=yh(function(t,e){lh(e,ef(e),t)}),rf=nf,of=yh(function(t,e,n,r){lh(e,ef(e),t,r)}),af=of,sf=yh(function(t,e,n,r){lh(e,Yh(e),t,r)}),uf=sf,cf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lf=/^\w*$/,hf=zt,ff=ic(Object,"create"),df=ff,pf=Pt,vf=At,gf="__lodash_hash_undefined__",mf=Object.prototype,yf=mf.hasOwnProperty,bf=Dt,_f=Object.prototype,xf=_f.hasOwnProperty,wf=It,Mf="__lodash_hash_undefined__",Sf=jt;Rt.prototype.clear=pf,Rt.prototype.delete=vf,Rt.prototype.get=bf,Rt.prototype.has=wf,Rt.prototype.set=Sf;var kf=Rt,Ef=Lt,Of=Nt,Tf=Array.prototype,Cf=Tf.splice,zf=Ft,Pf=Bt,Af=Ht,Df=qt;Vt.prototype.clear=Ef,Vt.prototype.delete=zf,Vt.prototype.get=Pf,Vt.prototype.has=Af,Vt.prototype.set=Df;var If=Vt,jf=ic(Ys.a,"Map"),Rf=jf,Lf=Ut,Nf=Wt,Ff=Yt,Bf=Xt,Hf=Kt,qf=Gt,Vf=Zt;Qt.prototype.clear=Lf,Qt.prototype.delete=Bf,Qt.prototype.get=Hf,Qt.prototype.has=qf,Qt.prototype.set=Vf;var Uf=Qt,Wf="Expected a function";Jt.Cache=Uf;var Yf=Jt,Xf=500,Kf=$t,Gf=/^\./,Zf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qf=/\\(\\)?/g,Jf=Kf(function(t){var e=[];return Gf.test(t)&&e.push(""),t.replace(Zf,function(t,n,r,i){e.push(r?i.replace(Qf,"$1"):n||t)}),e}),$f=Jf,td=te,ed=ee,nd=1/0,rd=ne,id=re,od=ie,ad=oe,sd=ae,ud=Ks?Ks.isConcatSpreadable:void 0,cd=se,ld=ue,hd=ce,fd=le,dd=fd(ad),pd=dd,vd=Bh(Object.getPrototypeOf,Object),gd=vd,md="[object Object]",yd=Function.prototype,bd=Object.prototype,_d=yd.toString,xd=bd.hasOwnProperty,wd=_d.call(Object),Md=he,Sd="[object DOMException]",kd="[object Error]",Ed=fe,Od=dh(function(t,e){try{return mc(t,void 0,e)}catch(t){return Ed(t)?t:new Error(t)}}),Td=Od,Cd="Expected a function",zd=de,Pd=dh(function(t,e,n){var r=1;if(n.length){var i=Tl(n,xl(Pd));r|=32}return nh(t,r,e,n,i)});Pd.placeholder={};var Ad=Pd,Dd=fd(function(t,e){return ol(e,function(e){e=rd(e),oh(t,e,Ad(t[e],t))}),t}),Id=Dd,jd=dh(function(t,e,n){var r=3;if(n.length){var i=Tl(n,xl(jd));r|=32}return nh(e,r,t,n,i)});jd.placeholder={};var Rd=jd,Ld=pe,Nd=ve,Fd=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Bd=ge,Hd=me,qd="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vd="\\ud83c[\\udffb-\\udfff]",Ud="(?:\\ud83c[\\udde6-\\uddff]){2}",Wd="[\\ud800-\\udbff][\\udc00-\\udfff]",Yd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Xd="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Ud,Wd].join("|")+")[\\ufe0e\\ufe0f]?"+Yd+")*",Kd="[\\ufe0e\\ufe0f]?"+Yd+Xd,Gd="(?:"+["[^\\ud800-\\udfff]"+qd+"?",qd,Ud,Wd,"[\\ud800-\\udfff]"].join("|")+")",Zd=RegExp(Vd+"(?="+Vd+")|"+Gd+Kd,"g"),Qd=ye,Jd=be,$d=_e,tp=$d("toUpperCase"),ep=tp,np=xe,rp=we,ip=Me,op={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},ap=ip(op),sp=ap,up=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cp=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),lp=Se,hp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fp=ke,dp=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pp=Ee,vp="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gp="["+vp+"]",mp="[a-z\\xdf-\\xf6\\xf8-\\xff]",yp="[^\\ud800-\\udfff"+vp+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",bp="[A-Z\\xc0-\\xd6\\xd8-\\xde]",_p="(?:"+mp+"|"+yp+")",xp="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",wp="(?:\\u200d(?:"+["[^\\ud800-\\udfff]","(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")[\\ufe0e\\ufe0f]?"+xp+")*",Mp="[\\ufe0e\\ufe0f]?"+xp+wp,Sp="(?:"+["[\\u2700-\\u27bf]","(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Mp,kp=RegExp([bp+"?"+mp+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[gp,bp,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[gp,bp+_p,"$"].join("|")+")",bp+"?"+_p+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",bp+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",Sp].join("|"),"g"),Ep=Oe,Op=Te,Tp=RegExp("['\u2019]","g"),Cp=Ce,zp=Cp(function(t,e,n){return e=e.toLowerCase(),t+(n?np(e):e)}),Pp=zp,Ap=ze,Dp=Math.min,Ip=Pe,jp=Ip("ceil"),Rp=jp,Lp=Ae,Np=Math.ceil,Fp=Math.max,Bp=De,Hp=Ie,qp=je,Vp=Re,Up=Le,Wp=Ne,Yp=Fe,Xp=200,Kp=Be;He.prototype.clear=Vp,He.prototype.delete=Up,He.prototype.get=Wp,He.prototype.has=Yp,He.prototype.set=Kp;var Gp=He,Zp=qe,Qp=Ve,Jp=n("PwgJ"),$p=Ue,tv=We,ev=Object.prototype,nv=ev.propertyIsEnumerable,rv=Object.getOwnPropertySymbols,iv=rv?function(t){return null==t?[]:(t=Object(t),$p(rv(t),function(e){return nv.call(t,e)}))}:tv,ov=iv,av=Ye,sv=Object.getOwnPropertySymbols,uv=sv?function(t){for(var e=[];t;)sd(e,ov(t)),t=gd(t);return e}:tv,cv=uv,lv=Xe,hv=Ke,fv=Ge,dv=Ze,pv=ic(Ys.a,"DataView"),vv=pv,gv=ic(Ys.a,"Promise"),mv=gv,yv=ic(Ys.a,"Set"),bv=yv,_v=Ku(vv),xv=Ku(Rf),wv=Ku(mv),Mv=Ku(bv),Sv=Ku(ac),kv=au;(vv&&"[object DataView]"!=kv(new vv(new ArrayBuffer(1)))||Rf&&"[object Map]"!=kv(new Rf)||mv&&"[object Promise]"!=kv(mv.resolve())||bv&&"[object Set]"!=kv(new bv)||ac&&"[object WeakMap]"!=kv(new ac))&&(kv=function(t){var e=au(t),n="[object Object]"==e?t.constructor:void 0,r=n?Ku(n):"";if(r)switch(r){case _v:return"[object DataView]";case xv:return"[object Map]";case wv:return"[object Promise]";case Mv:return"[object Set]";case Sv:return"[object WeakMap]"}return e});var Ev=kv,Ov=Object.prototype,Tv=Ov.hasOwnProperty,Cv=Qe,zv=Ys.a.Uint8Array,Pv=zv,Av=Je,Dv=$e,Iv=tn,jv=en,Rv=1,Lv=nn,Nv=/\w*$/,Fv=rn,Bv=on,Hv=an,qv=1,Vv=sn,Uv=Ks?Ks.prototype:void 0,Wv=Uv?Uv.valueOf:void 0,Yv=un,Xv=cn,Kv="[object Boolean]",Gv="[object Date]",Zv="[object Map]",Qv="[object Number]",Jv="[object RegExp]",$v="[object Set]",tg="[object String]",eg="[object Symbol]",ng="[object ArrayBuffer]",rg="[object DataView]",ig="[object Float32Array]",og="[object Float64Array]",ag="[object Int8Array]",sg="[object Int16Array]",ug="[object Int32Array]",cg="[object Uint8Array]",lg="[object Uint8ClampedArray]",hg="[object Uint16Array]",fg="[object Uint32Array]",dg=ln,pg=hn,vg=1,gg=2,mg=4,yg="[object Arguments]",bg="[object Function]",_g="[object GeneratorFunction]",xg="[object Object]",wg={};wg[yg]=wg["[object Array]"]=wg["[object ArrayBuffer]"]=wg["[object DataView]"]=wg["[object Boolean]"]=wg["[object Date]"]=wg["[object Float32Array]"]=wg["[object Float64Array]"]=wg["[object Int8Array]"]=wg["[object Int16Array]"]=wg["[object Int32Array]"]=wg["[object Map]"]=wg["[object Number]"]=wg[xg]=wg["[object RegExp]"]=wg["[object Set]"]=wg["[object String]"]=wg["[object Symbol]"]=wg["[object Uint8Array]"]=wg["[object Uint8ClampedArray]"]=wg["[object Uint16Array]"]=wg["[object Uint32Array]"]=!0,wg["[object Error]"]=wg[bg]=wg["[object WeakMap]"]=!1;var Mg=fn,Sg=4,kg=dn,Eg=1,Og=4,Tg=pn,Cg=1,zg=4,Pg=vn,Ag=4,Dg=gn,Ig=mn,jg=yn,Rg=bn,Lg="__lodash_hash_undefined__",Ng=_n,Fg=xn;wn.prototype.add=wn.prototype.push=Ng,wn.prototype.has=Fg;var Bg=wn,Hg=Mn,qg=Sn,Vg=1,Ug=2,Wg=kn,Yg=1,Xg=2,Kg="[object Boolean]",Gg="[object Date]",Zg="[object Error]",Qg="[object Map]",Jg="[object Number]",$g="[object RegExp]",tm="[object Set]",em="[object String]",nm="[object Symbol]",rm="[object ArrayBuffer]",im="[object DataView]",om=Ks?Ks.prototype:void 0,am=om?om.valueOf:void 0,sm=En,um=1,cm=Object.prototype,lm=cm.hasOwnProperty,hm=On,fm=1,dm="[object Arguments]",pm="[object Array]",vm="[object Object]",gm=Object.prototype,mm=gm.hasOwnProperty,ym=Tn,bm=Cn,_m=1,xm=2,wm=zn,Mm=Pn,Sm=An,km=Dn,Em=In,Om=jn,Tm=Rn,Cm=Ln,zm=1,Pm=2,Am=Nn,Dm=Fn,Im=Bn,jm=Hn,Rm=qn,Lm="Expected a function",Nm=Vn,Fm=Un,Bm=Wn,Hm=1,qm=Yn,Vm=Xn,Um=Kn,Wm=Gn,Ym=Wm(),Xm=Ym,Km=Zn,Gm=Qn,Zm=Gm(Km),Qm=Zm,Jm=Jn,$m=$n,ty=Object.prototype,ey=ty.hasOwnProperty,ny=$m(function(t,e,n){ey.call(t,n)?++t[n]:oh(t,n,1)}),ry=ny,iy=tr,oy=8;er.placeholder={};var ay=er,sy=16;nr.placeholder={};var uy=nr,cy=function(){return Ys.a.Date.now()},ly=cy,hy="Expected a function",fy=Math.max,dy=Math.min,py=rr,vy=ir,gy=Object.prototype,my=gy.hasOwnProperty,yy=or,by=dh(function(t){return t.push(void 0,yy),mc(af,void 0,t)}),_y=by,xy=ar,wy=sr,My=ur,Sy=cr,ky=lr,Ey=hr,Oy=yh(function(t,e,n,r){ky(t,e,n,r)}),Ty=Oy,Cy=dh(function(t){return t.push(void 0,Ey),mc(Ty,void 0,t)}),zy=Cy,Py="Expected a function",Ay=fr,Dy=dh(function(t,e){return Ay(t,1,e)}),Iy=Dy,jy=dh(function(t,e,n){return Ay(t,Cu(e)||0,n)}),Ry=jy,Ly=dr,Ny=200,Fy=pr,By=dh(function(t,e){return wy(t)?Fy(t,ld(e,1,wy,!0)):[]}),Hy=By,qy=vr,Vy=dh(function(t,e){var n=qy(e);return wy(n)&&(n=void 0),wy(t)?Fy(t,ld(e,1,wy,!0),Rm(n,2)):[]}),Uy=Vy,Wy=dh(function(t,e){var n=qy(e);return wy(n)&&(n=void 0),wy(t)?Fy(t,ld(e,1,wy,!0),void 0,n):[]}),Yy=Wy,Xy=bu(function(t,e){return t/e},1),Ky=Xy,Gy=gr,Zy=mr,Qy=yr,Jy=br,$y=_r,tb=xr,eb=wr,nb=Mr,rb=Wm(!0),ib=rb,ob=Sr,ab=Gm(ob,!0),sb=ab,ub=kr,cb=Er,lb=Or,hb=Tr,fb="[object Map]",db="[object Set]",pb=Cr,vb=pb(Yh),gb=vb,mb=pb(ef),yb=mb,bb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_b=ip(bb),xb=_b,wb=/[&<>"']/g,Mb=RegExp(wb.source),Sb=zr,kb=/[\\^$.*+?()[\]{}|]/g,Eb=RegExp(kb.source),Ob=Pr,Tb=Ar,Cb=Dr,zb=Ir,Pb=4294967295,Ab=jr,Db=Rr,Ib=Lr,jb=Nr,Rb=Fr,Lb=Br,Nb=Math.max,Fb=Hr,Bb=Lb(Fb),Hb=Bb,qb=qr,Vb=Vr,Ub=Math.max,Wb=Math.min,Yb=Ur,Xb=Lb(Yb),Kb=Xb,Gb=Wr,Zb=Yr,Qb=Xr,Jb=Kr,$b=Gr,t_=1/0,e_=Zr,n_=Qr,r_=1/0,i_=Jr,o_=$r,a_=512,s_=ti,u_=Ip("floor"),c_=u_,l_="Expected a function",h_=8,f_=32,d_=128,p_=256,v_=ei,g_=v_(),m_=g_,y_=v_(!0),b_=y_,__=ni,x_=ri,w_=ii,M_=oi,S_=ai,k_=si,E_=ui,O_=ci,T_=Object.prototype,C_=T_.hasOwnProperty,z_=$m(function(t,e,n){C_.call(t,n)?t[n].push(e):oh(t,n,[e])}),P_=z_,A_=li,D_=hi,I_=D_(A_),j_=I_,R_=D_(function(t,e){return t>=e}),L_=R_,N_=Object.prototype,F_=N_.hasOwnProperty,B_=fi,H_=di,q_=Math.max,V_=Math.min,U_=pi,W_=vi,Y_="[object String]",X_=gi,K_=mi,G_=yi,Z_=Math.max,Q_=bi,J_=Math.max,$_=_i,tx=xi,ex=Math.min,nx=wi,rx=Mi,ix=dh(function(t){var e=fu(t,rx);return e.length&&e[0]===t[0]?nx(e):[]}),ox=ix,ax=dh(function(t){var e=qy(t),n=fu(t,rx);return e===qy(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?nx(n,Rm(e,2)):[]}),sx=ax,ux=dh(function(t){var e=qy(t),n=fu(t,rx);return e="function"==typeof e?e:void 0,e&&n.pop(),n.length&&n[0]===t[0]?nx(n,void 0,e):[]}),cx=ux,lx=Si,hx=ki,fx=hx(function(t,e,n){t[e]=n},Jc(Ru)),dx=fx,px=Object.prototype,vx=px.hasOwnProperty,gx=hx(function(t,e,n){vx.call(t,e)?t[e].push(n):t[e]=[n]},Rm),mx=gx,yx=Ei,bx=Oi,_x=dh(bx),xx=_x,wx=dh(function(t,e,n){var r=-1,i="function"==typeof e,o=gh(t)?Array(t.length):[];return Qm(t,function(t){o[++r]=i?mc(e,t,n):bx(t,e,n)}),o}),Mx=wx,Sx="[object ArrayBuffer]",kx=Ti,Ex=Dh.a&&Dh.a.isArrayBuffer,Ox=Ex?Ah(Ex):kx,Tx=Ox,Cx="[object Boolean]",zx=Ci,Px="[object Date]",Ax=zi,Dx=Dh.a&&Dh.a.isDate,Ix=Dx?Ah(Dx):Ax,jx=Ix,Rx=Pi,Lx="[object Map]",Nx="[object Set]",Fx=Object.prototype,Bx=Fx.hasOwnProperty,Hx=Ai,qx=Di,Vx=Ii,Ux=Ys.a.isFinite,Wx=ji,Yx=Ri,Xx="[object Map]",Kx=Li,Gx=Dh.a&&Dh.a.isMap,Zx=Gx?Ah(Gx):Kx,Qx=Zx,Jx=Ni,$x=Fi,tw="[object Number]",ew=Bi,nw=Hi,rw=n("pZdj"),iw=Vu?Hu:rw.a,ow=iw,aw="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",sw=qi,uw=Vi,cw=Ui,lw="[object RegExp]",hw=Wi,fw=Dh.a&&Dh.a.isRegExp,dw=fw?Ah(fw):hw,pw=dw,vw=9007199254740991,gw=Yi,mw="[object Set]",yw=Xi,bw=Dh.a&&Dh.a.isSet,_w=bw?Ah(bw):yw,xw=_w,ww=Ki,Mw="[object WeakMap]",Sw=Gi,kw="[object WeakSet]",Ew=Zi,Ow=1,Tw=Qi,Cw=Array.prototype,zw=Cw.join,Pw=Ji,Aw=Cp(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Dw=Aw,Iw=$m(function(t,e,n){oh(t,n,e)}),jw=Iw,Rw=$i,Lw=Math.max,Nw=Math.min,Fw=to,Bw=Cp(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Hw=Bw,qw=$d("toLowerCase"),Vw=qw,Uw=eo,Ww=D_(Uw),Yw=Ww,Xw=D_(function(t,e){return t<=e}),Kw=Xw,Gw=no,Zw=ro,Qw=1,Jw=io,$w=1,tM=oo,eM=ao,nM=so,rM=uo,iM=co,oM=NaN,aM=lo,sM=ho,uM=fo,cM=yh(function(t,e,n){ky(t,e,n)}),lM=cM,hM=dh(function(t,e){return function(n){return bx(n,t,e)}}),fM=hM,dM=dh(function(t,e){return function(n){return bx(t,n,e)}}),pM=dM,vM=po,gM=vo,mM=go,yM=bu(function(t,e){return t*e},1),bM=yM,_M="Expected a function",xM=mo,wM=yo,MM="[object Map]",SM="[object Set]",kM=Ks?Ks.iterator:void 0,EM=bo,OM=_o,TM=xo,CM=wo,zM=Mo,PM=So,AM=ko,DM=fd(function(t,e){var n={};if(null==t)return n;var r=!1;e=fu(e,function(e){return e=ed(e,t),r||(r=e.length>1),e}),lh(t,dv(t),n),r&&(n=Mg(n,7,AM));for(var i=e.length;i--;)PM(n,e[i]);return n}),IM=DM,jM=Eo,RM=Oo,LM=To,NM=Co,FM=zo,BM=Po,HM=Ao,qM=Do,VM=Io,UM=jo,WM=Ro,YM=WM(fu),XM=YM,KM=dh,GM=KM,ZM=Math.min,QM=GM(function(t,e){e=1==e.length&&pu(e[0])?fu(e[0],Ah(Rm)):fu(ld(e,1),Ah(Rm));var n=e.length;return dh(function(r){for(var i=-1,o=ZM(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return mc(t,this,r)})}),JM=QM,$M=WM(Tb),tS=$M,eS=WM(Hg),nS=eS,rS=9007199254740991,iS=Math.floor,oS=Lo,aS=Dm("length"),sS=aS,uS="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cS="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",lS="(?:\\u200d(?:"+["[^\\ud800-\\udfff]","(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")[\\ufe0e\\ufe0f]?"+cS+")*",hS="[\\ufe0e\\ufe0f]?"+cS+lS,fS="(?:"+["[^\\ud800-\\udfff]"+uS+"?",uS,"(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]","[\\ud800-\\udfff]"].join("|")+")",dS=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+fS+hS,"g"),pS=No,vS=Fo,gS=Math.ceil,mS=Bo,yS=Math.ceil,bS=Math.floor,_S=Ho,xS=qo,wS=Vo,MS=/^\s+/,SS=Ys.a.parseInt,kS=Uo,ES=dh(function(t,e){var n=Tl(e,xl(ES));return nh(t,32,void 0,e,n)});ES.placeholder={};var OS=ES,TS=dh(function(t,e){var n=Tl(e,xl(TS));return nh(t,64,void 0,e,n)});TS.placeholder={};var CS=TS,zS=$m(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),PS=zS,AS=Wo,DS=fd(function(t,e){return null==t?{}:AS(t,e)}),IS=DS,jS=Yo,RS=Xo,LS=Ko,NS=Array.prototype,FS=NS.splice,BS=Go,HS=Zo,qS=dh(HS),VS=qS,US=Qo,WS=Jo,YS=Array.prototype,XS=YS.splice,KS=$o,GS=fd(function(t,e){var n=null==t?0:t.length,r=ad(t,e);return KS(t,fu(e,function(t){return Sl(t,n)?+t:t}).sort(HM)),r}),ZS=GS,QS=Math.floor,JS=Math.random,$S=ta,tk=parseFloat,ek=Math.min,nk=Math.random,rk=ea,ik=Math.ceil,ok=Math.max,ak=na,sk=ra,uk=sk(),ck=uk,lk=sk(!0),hk=lk,fk=fd(function(t,e){return nh(t,256,void 0,void 0,void 0,e)}),dk=fk,pk=ia,vk=oa,gk=aa,mk=sa,yk=ua,bk=ca,_k=la,xk=ha,wk="Expected a function",Mk=fa,Sk=da,kk=Array.prototype,Ek=kk.reverse,Ok=pa,Tk=Ip("round"),Ck=Tk,zk=va,Pk=ga,Ak=ma,Dk=ya,Ik=ba,jk=_a,Rk=xa,Lk=wa,Nk=Ma,Fk=Sa,Bk=ka,Hk=Ea,qk="[object Map]",Vk="[object Set]",Uk=Oa,Wk=Ta,Yk=Cp(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xk=Yk,Kk=Ca,Gk=za,Zk=dh(function(t,e){if(null==t)return[];var n=e.length;return n>1&&mh(t,e[0],e[1])?e=[]:n>2&&mh(e[0],e[1],e[2])&&(e=[e[0]]),VM(t,ld(e,1),[])}),Qk=Zk,Jk=4294967294,$k=Math.floor,tE=Math.min,eE=Pa,nE=2147483647,rE=Aa,iE=Da,oE=Ia,aE=ja,sE=Ra,uE=La,cE=Na,lE=Fa,hE=Ba,fE=Ha,dE=4294967295,pE=qa,vE="Expected a function",gE=Math.max,mE=Va,yE=Cp(function(t,e,n){return t+(n?" ":"")+ep(e)}),bE=yE,_E=Ua,xE=Wa,wE=Ya,ME=Xa,SE=bu(function(t,e){return t-e},0),kE=SE,EE=Ka,OE=Ga,TE=Za,CE=Qa,zE=Ja,PE=$a,AE=ts,DE=es,IE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jE=ns,RE=/<%=([\s\S]+?)%>/g,LE=RE,NE=/<%-([\s\S]+?)%>/g,FE=NE,BE=/<%([\s\S]+?)%>/g,HE=BE,qE={escape:FE,evaluate:HE,interpolate:LE,variable:"",imports:{_:{escape:Sb}}},VE=qE,UE=/\b__p \+= '';/g,WE=/\b(__p \+=) '' \+/g,YE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,XE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,KE=/($^)/,GE=/['\n\r\u2028\u2029\\]/g,ZE=rs,QE="Expected a function",JE=is,$E=os,tO=9007199254740991,eO=4294967295,nO=Math.min,rO=as,iO=ss,oO=us,aO=cs,sO=ls,uO=hs,cO=9007199254740991,lO=fs,hO=ds,fO=ps,dO=vs,pO=gs,vO=/^\s+|\s+$/g,gO=ms,mO=/\s+$/,yO=ys,bO=/^\s+/,_O=bs,xO=30,wO="...",MO=/\w*$/,SO=_s,kO=xs,EO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OO=ip(EO),TO=OO,CO=/&(?:amp|lt|gt|quot|#39);/g,zO=RegExp(CO.source),PO=ws,AO=bv&&1/Hv(new bv([,-0]))[1]==1/0?function(t){return new bv(t)}:Ec,DO=AO,IO=200,jO=Ms,RO=dh(function(t){return jO(ld(t,1,wy,!0))}),LO=RO,NO=dh(function(t){var e=qy(t);return wy(e)&&(e=void 0),jO(ld(t,1,wy,!0),Rm(e,2))}),FO=NO,BO=dh(function(t){var e=qy(t);return e="function"==typeof e?e:void 0,jO(ld(t,1,wy,!0),void 0,e)}),HO=BO,qO=Ss,VO=ks,UO=Es,WO=0,YO=Os,XO=Ts,KO=Math.max,GO=Cs,ZO=zs,QO=Ps,JO=As,$O=Ds,tT=Cp(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),eT=tT,nT=Is,rT=dh(function(t,e){return wy(t)?Fy(t,e):[]}),iT=rT,oT=js,aT=fd(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return ad(e,t)};return!(e>1||this.__actions__.length)&&r instanceof kc&&Sl(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:$E,args:[i],thisArg:void 0}),new Ic(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)}),sT=aT,uT=Rs,cT=Ls,lT=Ns,hT=dh(function(t){return lT($p(t,wy))}),fT=hT,dT=dh(function(t){var e=qy(t);return wy(e)&&(e=void 0),lT($p(t,wy),Rm(e,2))}),pT=dT,vT=dh(function(t){var e=qy(t);return e="function"==typeof e?e:void 0,lT($p(t,wy),void 0,e)}),gT=vT,mT=dh(GO),yT=mT,bT=Fs,_T=Bs,xT=Hs,wT=dh(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,ZO(t,n)}),MT=wT,ST={chunk:Bp,compact:jg,concat:Rg,difference:Hy,differenceBy:Uy,differenceWith:Yy,drop:Gy,dropRight:Zy,dropRightWhile:Jy,dropWhile:$y,fill:Ib,findIndex:Fb,findLastIndex:Yb,first:Zb,flatten:hd,flattenDeep:i_,flattenDepth:o_,fromPairs:S_,head:Zb,indexOf:$_,initial:tx,intersection:ox,intersectionBy:sx,intersectionWith:cx,join:Pw,last:qy,lastIndexOf:Fw,nth:CM,pull:VS,pullAll:HS,pullAllBy:US,pullAllWith:WS,pullAt:ZS,remove:bk,reverse:Ok,slice:Wk,sortedIndex:iE,sortedIndexBy:oE,sortedIndexOf:aE,sortedLastIndex:sE,sortedLastIndexBy:uE,sortedLastIndexOf:cE,sortedUniq:hE,sortedUniqBy:fE,tail:TE,take:CE,takeRight:zE,takeRightWhile:PE,takeWhile:AE,union:LO,unionBy:FO,unionWith:HO,uniq:qO,uniqBy:VO,uniqWith:UO,unzip:GO,unzipWith:ZO,without:iT,xor:fT,xorBy:pT,xorWith:gT,zip:yT,zipObject:_T,zipObjectDeep:xT,zipWith:MT},kT={countBy:ry,each:eb,eachRight:ub,every:zb,filter:Rb,find:Hb,findLast:Kb,flatMap:$b,flatMapDeep:e_,flatMapDepth:n_,forEach:eb,forEachRight:ub,groupBy:P_,includes:Q_,invokeMap:Mx,keyBy:jw,map:Jb,orderBy:UM,partition:PS,reduce:vk,reduceRight:mk,reject:yk,sample:Ak,sampleSize:Rk,shuffle:Hk,size:Uk,some:Gk,sortBy:Qk},ET={now:ly},OT={after:ju,ary:ih,before:zd,bind:Ad,bindKey:Rd,curry:ay,curryRight:uy,debounce:py,defer:Iy,delay:Ry,flip:s_,memoize:Yf,negate:xM,once:FM,overArgs:JM,partial:OS,partialRight:CS,rearg:dk,rest:Mk,spread:mE,throttle:JE,unary:kO,wrap:oT},TT={castArray:Ap,clone:kg,cloneDeep:Tg,cloneDeepWith:Pg,cloneWith:Dg,conformsTo:Vm,eq:ah,gt:j_,gte:L_,isArguments:Th,isArray:pu,isArrayBuffer:Tx,isArrayLike:gh,isArrayLikeObject:wy,isBoolean:zx,isBuffer:Ch.a,isDate:jx,isElement:Rx,isEmpty:Hx,isEqual:qx,isEqualWith:Vx,isError:Ed,isFinite:Wx,isFunction:Hu,isInteger:Yx,isLength:vh,isMap:Qx,isMatch:Jx,isMatchWith:$x,isNaN:nw,isNative:sw,isNil:uw,isNull:cw,isNumber:ew,isObject:wu,isObjectLike:su,isPlainObject:Md,isRegExp:pw,isSafeInteger:gw,isSet:xw,isString:X_,isSymbol:cu,isTypedArray:Rh,isUndefined:ww,isWeakMap:Sw,isWeakSet:Ew,lt:Yw,lte:Kw,toArray:EM,toFinite:Au,toInteger:Du,toLength:Ab,toNumber:Cu,toPlainObject:My,toSafeInteger:lO,toString:td},CT={add:xu,ceil:Rp,divide:Ky,floor:c_,max:nM,maxBy:rM,mean:sM,meanBy:uM,min:vM,minBy:gM,multiply:bM,round:Ck,subtract:kE,sum:EE,sumBy:OE},zT={clamp:qp,inRange:W_,random:rk},PT={assign:Zh,assignIn:rf,assignInWith:af,assignWith:uf,at:pd,create:iy,defaults:_y,defaultsDeep:zy,entries:gb,entriesIn:yb,extend:rf,extendWith:af,findKey:Vb,findLastKey:Gb,forIn:__,forInRight:x_,forOwn:w_,forOwnRight:M_,functions:E_,functionsIn:O_,get:od,has:H_,hasIn:Cm,invert:dx,invertBy:mx,invoke:xx,keys:Yh,keysIn:ef,mapKeys:Gw,mapValues:Zw,merge:lM,mergeWith:Ty,omit:IM,omitBy:NM,pick:IS,pickBy:LM,result:Sk,set:Lk,setWith:Nk,toPairs:gb,toPairsIn:yb,transform:fO,unset:XO,update:JO,updateWith:$O,values:G_,valuesIn:nT},AT={at:sT,chain:Lp,commit:Ig,lodash:Fc,next:OM,plant:jS,reverse:cT,tap:DE,thru:$E,toIterator:iO,toJSON:aO,value:aO,valueOf:aO,wrapperChain:uT},DT={camelCase:Pp,capitalize:np,deburr:lp,endsWith:cb,escape:Sb,escapeRegExp:Ob,kebabCase:Dw,lowerCase:Hw,lowerFirst:Vw,pad:_S,padEnd:xS,padStart:wS,parseInt:kS,repeat:_k,replace:xk,snakeCase:Xk,split:pE,startCase:bE,startsWith:_E,template:ZE,templateSettings:VE,toLower:sO,toUpper:hO,trim:gO,trimEnd:yO,trimStart:_O,truncate:SO,unescape:PO,upperCase:eT,upperFirst:ep,words:Op},IT={attempt:Td,bindAll:Id,cond:Nm,conforms:qm,constant:Jc,defaultTo:vy,flow:m_,flowRight:b_,identity:Ru,iteratee:Tw,matches:Jw,matchesProperty:tM,method:fM,methodOf:pM,mixin:mM,noop:Ec,nthArg:zM,over:XM,overEvery:tS,overSome:nS,property:jm,propertyOf:RS,range:ck,rangeRight:hk,stubArray:tv,stubFalse:rw.a,stubObject:xE,stubString:wE,stubTrue:ME,times:rO,toPath:uO,uniqueId:YO},jT=qs,RT=Vs,LT=Math.max,NT=Math.min,FT=Us,BT=1,HT=2,qT=Math.min,VT=Ws,UT=Array.prototype,WT=Object.prototype,YT=WT.hasOwnProperty,XT=Ks?Ks.iterator:void 0,KT=Math.max,GT=Math.min,ZT=function(t){return function(e,n,r){if(null==r){var i=wu(n),o=i&&Yh(n),a=o&&o.length&&k_(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(mM);Fc.after=OT.after,Fc.ary=OT.ary,Fc.assign=PT.assign,Fc.assignIn=PT.assignIn,Fc.assignInWith=PT.assignInWith,Fc.assignWith=PT.assignWith,Fc.at=PT.at,Fc.before=OT.before,Fc.bind=OT.bind,Fc.bindAll=IT.bindAll,Fc.bindKey=OT.bindKey,Fc.castArray=TT.castArray,Fc.chain=AT.chain,Fc.chunk=ST.chunk,Fc.compact=ST.compact,Fc.concat=ST.concat,Fc.cond=IT.cond,Fc.conforms=IT.conforms,Fc.constant=IT.constant,Fc.countBy=kT.countBy,Fc.create=PT.create,Fc.curry=OT.curry,Fc.curryRight=OT.curryRight,Fc.debounce=OT.debounce,Fc.defaults=PT.defaults,Fc.defaultsDeep=PT.defaultsDeep,Fc.defer=OT.defer,Fc.delay=OT.delay,Fc.difference=ST.difference,Fc.differenceBy=ST.differenceBy,Fc.differenceWith=ST.differenceWith,Fc.drop=ST.drop,Fc.dropRight=ST.dropRight,Fc.dropRightWhile=ST.dropRightWhile,Fc.dropWhile=ST.dropWhile,Fc.fill=ST.fill,Fc.filter=kT.filter,Fc.flatMap=kT.flatMap,Fc.flatMapDeep=kT.flatMapDeep,Fc.flatMapDepth=kT.flatMapDepth,Fc.flatten=ST.flatten,Fc.flattenDeep=ST.flattenDeep,Fc.flattenDepth=ST.flattenDepth,Fc.flip=OT.flip,Fc.flow=IT.flow,Fc.flowRight=IT.flowRight,Fc.fromPairs=ST.fromPairs,Fc.functions=PT.functions,Fc.functionsIn=PT.functionsIn,Fc.groupBy=kT.groupBy,Fc.initial=ST.initial,Fc.intersection=ST.intersection,Fc.intersectionBy=ST.intersectionBy,Fc.intersectionWith=ST.intersectionWith,Fc.invert=PT.invert,Fc.invertBy=PT.invertBy,Fc.invokeMap=kT.invokeMap,Fc.iteratee=IT.iteratee,Fc.keyBy=kT.keyBy,Fc.keys=Yh,Fc.keysIn=PT.keysIn,Fc.map=kT.map,Fc.mapKeys=PT.mapKeys,Fc.mapValues=PT.mapValues,Fc.matches=IT.matches,Fc.matchesProperty=IT.matchesProperty,Fc.memoize=OT.memoize,Fc.merge=PT.merge,Fc.mergeWith=PT.mergeWith,Fc.method=IT.method,Fc.methodOf=IT.methodOf,Fc.mixin=ZT,Fc.negate=xM,Fc.nthArg=IT.nthArg,Fc.omit=PT.omit,Fc.omitBy=PT.omitBy,Fc.once=OT.once,Fc.orderBy=kT.orderBy,Fc.over=IT.over,Fc.overArgs=OT.overArgs,Fc.overEvery=IT.overEvery,Fc.overSome=IT.overSome,Fc.partial=OT.partial,Fc.partialRight=OT.partialRight,Fc.partition=kT.partition,Fc.pick=PT.pick,Fc.pickBy=PT.pickBy,Fc.property=IT.property,Fc.propertyOf=IT.propertyOf,Fc.pull=ST.pull,Fc.pullAll=ST.pullAll,Fc.pullAllBy=ST.pullAllBy,Fc.pullAllWith=ST.pullAllWith,Fc.pullAt=ST.pullAt,Fc.range=IT.range,Fc.rangeRight=IT.rangeRight,Fc.rearg=OT.rearg,Fc.reject=kT.reject,Fc.remove=ST.remove,Fc.rest=OT.rest,Fc.reverse=ST.reverse,Fc.sampleSize=kT.sampleSize,Fc.set=PT.set,Fc.setWith=PT.setWith,Fc.shuffle=kT.shuffle,Fc.slice=ST.slice,Fc.sortBy=kT.sortBy,Fc.sortedUniq=ST.sortedUniq,Fc.sortedUniqBy=ST.sortedUniqBy,Fc.split=DT.split,Fc.spread=OT.spread,Fc.tail=ST.tail,Fc.take=ST.take,Fc.takeRight=ST.takeRight,Fc.takeRightWhile=ST.takeRightWhile,Fc.takeWhile=ST.takeWhile,Fc.tap=AT.tap,Fc.throttle=OT.throttle,Fc.thru=$E,Fc.toArray=TT.toArray,Fc.toPairs=PT.toPairs,Fc.toPairsIn=PT.toPairsIn,Fc.toPath=IT.toPath,Fc.toPlainObject=TT.toPlainObject,Fc.transform=PT.transform,Fc.unary=OT.unary,Fc.union=ST.union,Fc.unionBy=ST.unionBy,Fc.unionWith=ST.unionWith,Fc.uniq=ST.uniq,Fc.uniqBy=ST.uniqBy,Fc.uniqWith=ST.uniqWith,Fc.unset=PT.unset,Fc.unzip=ST.unzip,Fc.unzipWith=ST.unzipWith,Fc.update=PT.update,Fc.updateWith=PT.updateWith,Fc.values=PT.values,Fc.valuesIn=PT.valuesIn,Fc.without=ST.without,Fc.words=DT.words,Fc.wrap=OT.wrap,Fc.xor=ST.xor,Fc.xorBy=ST.xorBy,Fc.xorWith=ST.xorWith,Fc.zip=ST.zip,Fc.zipObject=ST.zipObject,Fc.zipObjectDeep=ST.zipObjectDeep,Fc.zipWith=ST.zipWith,Fc.entries=PT.toPairs,Fc.entriesIn=PT.toPairsIn,Fc.extend=PT.assignIn,Fc.extendWith=PT.assignInWith,ZT(Fc,Fc),Fc.add=CT.add,Fc.attempt=IT.attempt,Fc.camelCase=DT.camelCase,Fc.capitalize=DT.capitalize,Fc.ceil=CT.ceil,Fc.clamp=zT.clamp,Fc.clone=TT.clone,Fc.cloneDeep=TT.cloneDeep,Fc.cloneDeepWith=TT.cloneDeepWith,Fc.cloneWith=TT.cloneWith,Fc.conformsTo=TT.conformsTo,Fc.deburr=DT.deburr,Fc.defaultTo=IT.defaultTo,Fc.divide=CT.divide,Fc.endsWith=DT.endsWith,Fc.eq=TT.eq,Fc.escape=DT.escape,Fc.escapeRegExp=DT.escapeRegExp,Fc.every=kT.every,Fc.find=kT.find,Fc.findIndex=ST.findIndex,Fc.findKey=PT.findKey,Fc.findLast=kT.findLast,Fc.findLastIndex=ST.findLastIndex,Fc.findLastKey=PT.findLastKey,Fc.floor=CT.floor,Fc.forEach=kT.forEach,Fc.forEachRight=kT.forEachRight,Fc.forIn=PT.forIn,Fc.forInRight=PT.forInRight,Fc.forOwn=PT.forOwn,Fc.forOwnRight=PT.forOwnRight,Fc.get=PT.get,Fc.gt=TT.gt,Fc.gte=TT.gte,Fc.has=PT.has,Fc.hasIn=PT.hasIn,Fc.head=ST.head,Fc.identity=Ru,Fc.includes=kT.includes,Fc.indexOf=ST.indexOf,Fc.inRange=zT.inRange,Fc.invoke=PT.invoke,Fc.isArguments=TT.isArguments,Fc.isArray=pu,Fc.isArrayBuffer=TT.isArrayBuffer;Fc.isArrayLike=TT.isArrayLike,Fc.isArrayLikeObject=TT.isArrayLikeObject,Fc.isBoolean=TT.isBoolean,Fc.isBuffer=TT.isBuffer,Fc.isDate=TT.isDate,Fc.isElement=TT.isElement,Fc.isEmpty=TT.isEmpty,Fc.isEqual=TT.isEqual,Fc.isEqualWith=TT.isEqualWith,Fc.isError=TT.isError,Fc.isFinite=TT.isFinite,Fc.isFunction=TT.isFunction,Fc.isInteger=TT.isInteger,Fc.isLength=TT.isLength,Fc.isMap=TT.isMap,Fc.isMatch=TT.isMatch,Fc.isMatchWith=TT.isMatchWith,Fc.isNaN=TT.isNaN,Fc.isNative=TT.isNative,Fc.isNil=TT.isNil,Fc.isNull=TT.isNull,Fc.isNumber=TT.isNumber,Fc.isObject=wu,Fc.isObjectLike=TT.isObjectLike,Fc.isPlainObject=TT.isPlainObject,Fc.isRegExp=TT.isRegExp,Fc.isSafeInteger=TT.isSafeInteger,Fc.isSet=TT.isSet,Fc.isString=TT.isString,Fc.isSymbol=TT.isSymbol,Fc.isTypedArray=TT.isTypedArray,Fc.isUndefined=TT.isUndefined,Fc.isWeakMap=TT.isWeakMap,Fc.isWeakSet=TT.isWeakSet,Fc.join=ST.join,Fc.kebabCase=DT.kebabCase,Fc.last=qy,Fc.lastIndexOf=ST.lastIndexOf,Fc.lowerCase=DT.lowerCase,Fc.lowerFirst=DT.lowerFirst,Fc.lt=TT.lt,Fc.lte=TT.lte,Fc.max=CT.max,Fc.maxBy=CT.maxBy,Fc.mean=CT.mean,Fc.meanBy=CT.meanBy,Fc.min=CT.min,Fc.minBy=CT.minBy,Fc.stubArray=IT.stubArray,Fc.stubFalse=IT.stubFalse,Fc.stubObject=IT.stubObject,Fc.stubString=IT.stubString,Fc.stubTrue=IT.stubTrue,Fc.multiply=CT.multiply,Fc.nth=ST.nth,Fc.noop=IT.noop,Fc.now=ET.now,Fc.pad=DT.pad,Fc.padEnd=DT.padEnd,Fc.padStart=DT.padStart,Fc.parseInt=DT.parseInt,Fc.random=zT.random,Fc.reduce=kT.reduce,Fc.reduceRight=kT.reduceRight,Fc.repeat=DT.repeat,Fc.replace=DT.replace,Fc.result=PT.result,Fc.round=CT.round,Fc.sample=kT.sample,Fc.size=kT.size,Fc.snakeCase=DT.snakeCase,Fc.some=kT.some,Fc.sortedIndex=ST.sortedIndex,Fc.sortedIndexBy=ST.sortedIndexBy,Fc.sortedIndexOf=ST.sortedIndexOf,Fc.sortedLastIndex=ST.sortedLastIndex,Fc.sortedLastIndexBy=ST.sortedLastIndexBy,Fc.sortedLastIndexOf=ST.sortedLastIndexOf,Fc.startCase=DT.startCase,Fc.startsWith=DT.startsWith,Fc.subtract=CT.subtract,Fc.sum=CT.sum,Fc.sumBy=CT.sumBy,Fc.template=DT.template,Fc.times=IT.times,Fc.toFinite=TT.toFinite,Fc.toInteger=Du,Fc.toLength=TT.toLength,Fc.toLower=DT.toLower,Fc.toNumber=TT.toNumber,Fc.toSafeInteger=TT.toSafeInteger,Fc.toString=TT.toString,Fc.toUpper=DT.toUpper,Fc.trim=DT.trim,Fc.trimEnd=DT.trimEnd,Fc.trimStart=DT.trimStart,Fc.truncate=DT.truncate,Fc.unescape=DT.unescape,Fc.uniqueId=IT.uniqueId,Fc.upperCase=DT.upperCase,Fc.upperFirst=DT.upperFirst,Fc.each=kT.forEach,Fc.eachRight=kT.forEachRight,Fc.first=ST.head,ZT(Fc,function(){var t={};return Km(Fc,function(e,n){YT.call(Fc.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Fc.VERSION="4.17.4",(Fc.templateSettings=DT.templateSettings).imports._=Fc,ol(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Fc[t].placeholder=Fc}),ol(["drop","take"],function(t,e){kc.prototype[t]=function(n){n=void 0===n?1:KT(Du(n),0);var r=this.__filtered__&&!e?new kc(this):this.clone();return r.__filtered__?r.__takeCount__=GT(n,r.__takeCount__):r.__views__.push({size:GT(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},kc.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ol(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;kc.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Rm(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ol(["head","last"],function(t,e){var n="take"+(e?"Right":"");kc.prototype[t]=function(){return this[n](1).value()[0]}}),ol(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");kc.prototype[t]=function(){return this.__filtered__?new kc(this):this[n](1)}}),kc.prototype.compact=function(){return this.filter(Ru)},kc.prototype.find=function(t){return this.filter(t).head()},kc.prototype.findLast=function(t){return this.reverse().find(t)},kc.prototype.invokeMap=dh(function(t,e){return"function"==typeof t?new kc(this):this.map(function(n){return bx(n,t,e)})}),kc.prototype.reject=function(t){return this.filter(xM(Rm(t)))},kc.prototype.slice=function(t,e){t=Du(t);var n=this;return n.__filtered__&&(t>0||e<0)?new kc(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(e=Du(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},kc.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},kc.prototype.toArray=function(){return this.take(4294967295)},Km(kc.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Fc[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Fc.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof kc,u=a[0],c=s||pu(e),l=function(t){var e=i.apply(Fc,sd([t],a));return r&&h?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var h=this.__chain__,f=!!this.__actions__.length,d=o&&!h,p=s&&!f;if(!o&&c){e=p?e:new kc(this);var v=t.apply(e,a);return v.__actions__.push({func:$E,args:[l],thisArg:void 0}),new Ic(v,h)}return d&&p?t.apply(this,a):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})}),ol(["pop","push","shift","sort","splice","unshift"],function(t){var e=UT[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fc.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(pu(i)?i:[],t)}return this[n](function(n){return e.apply(pu(n)?n:[],t)})}}),Km(kc.prototype,function(t,e){var n=Fc[e];if(n){var r=n.name+"";(zc[r]||(zc[r]=[])).push({name:e,func:n})}}),zc[jl(void 0,2).name]=[{name:"wrapper",func:void 0}],kc.prototype.clone=jT,kc.prototype.reverse=RT,kc.prototype.value=VT,Fc.prototype.at=AT.at,Fc.prototype.chain=AT.wrapperChain,Fc.prototype.commit=AT.commit,Fc.prototype.next=AT.next,Fc.prototype.plant=AT.plant,Fc.prototype.reverse=AT.reverse,Fc.prototype.toJSON=Fc.prototype.valueOf=Fc.prototype.value=AT.value,Fc.prototype.first=Fc.prototype.head,XT&&(Fc.prototype[XT]=AT.toIterator);var QT=Fc;n.d(e,!1,function(){return xu}),n.d(e,!1,function(){return ju}),n.d(e,!1,function(){return ih}),n.d(e,!1,function(){return Zh}),n.d(e,!1,function(){return rf}),n.d(e,!1,function(){return af}),n.d(e,!1,function(){return uf}),n.d(e,!1,function(){return pd}),n.d(e,!1,function(){return Td}),n.d(e,!1,function(){return zd}),n.d(e,!1,function(){return Ad}),n.d(e,!1,function(){return Id}),n.d(e,!1,function(){return Rd}),n.d(e,!1,function(){return Pp}),n.d(e,!1,function(){return np}),n.d(e,!1,function(){return Ap}),n.d(e,!1,function(){return Rp}),n.d(e,!1,function(){return Lp}),n.d(e,!1,function(){return Bp}),n.d(e,!1,function(){return qp}),n.d(e,!1,function(){return kg}),n.d(e,"a",function(){return Tg}),n.d(e,!1,function(){return Pg}),n.d(e,!1,function(){return Dg}),n.d(e,!1,function(){return Ig}),n.d(e,!1,function(){return jg}),n.d(e,!1,function(){return Rg}),n.d(e,!1,function(){return Nm}),n.d(e,!1,function(){return qm}),n.d(e,!1,function(){return Vm}),n.d(e,!1,function(){return Jc}),n.d(e,!1,function(){return ry}),n.d(e,!1,function(){return iy}),n.d(e,!1,function(){return ay}),n.d(e,!1,function(){return uy}),n.d(e,!1,function(){return py}),n.d(e,!1,function(){return lp}),n.d(e,!1,function(){return vy}),n.d(e,!1,function(){return _y}),n.d(e,!1,function(){return zy}),n.d(e,!1,function(){return Iy}),n.d(e,!1,function(){return Ry}),n.d(e,!1,function(){return Hy}),n.d(e,!1,function(){return Uy}),n.d(e,!1,function(){return Yy}),n.d(e,!1,function(){return Ky}),n.d(e,!1,function(){return Gy}),n.d(e,!1,function(){return Zy}),n.d(e,!1,function(){return Jy}),n.d(e,!1,function(){return $y}),n.d(e,!1,function(){return eb}),n.d(e,!1,function(){return ub}),n.d(e,!1,function(){return cb}),n.d(e,!1,function(){return gb}),n.d(e,!1,function(){return yb}),n.d(e,!1,function(){return ah}),n.d(e,!1,function(){return Sb}),n.d(e,!1,function(){return Ob}),n.d(e,!1,function(){return zb}),n.d(e,!1,function(){return rf}),n.d(e,!1,function(){return af}),n.d(e,!1,function(){return Ib}),n.d(e,!1,function(){return Rb}),n.d(e,!1,function(){return Hb}),n.d(e,!1,function(){return Fb}),n.d(e,!1,function(){return Vb}),n.d(e,!1,function(){return Kb}),n.d(e,!1,function(){return Yb}),n.d(e,!1,function(){return Gb}),n.d(e,!1,function(){return Zb}),n.d(e,!1,function(){return $b}),n.d(e,!1,function(){return e_}),n.d(e,!1,function(){return n_}),n.d(e,!1,function(){return hd}),n.d(e,!1,function(){return i_}),n.d(e,!1,function(){return o_}),n.d(e,!1,function(){return s_}),n.d(e,!1,function(){return c_}),n.d(e,!1,function(){return m_}),n.d(e,!1,function(){return b_}),n.d(e,!1,function(){return eb}),n.d(e,!1,function(){return ub}),n.d(e,!1,function(){return __}),n.d(e,!1,function(){return x_}),n.d(e,!1,function(){return w_}),n.d(e,!1,function(){return M_}),n.d(e,!1,function(){return S_}),n.d(e,!1,function(){return E_}),n.d(e,!1,function(){return O_}),n.d(e,"b",function(){return od}),n.d(e,!1,function(){return P_}),n.d(e,!1,function(){return j_}),n.d(e,!1,function(){return L_}),n.d(e,"c",function(){return H_}),n.d(e,!1,function(){return Cm}),n.d(e,!1,function(){return Zb}),n.d(e,!1,function(){return Ru}),n.d(e,!1,function(){return W_}),n.d(e,"d",function(){return Q_}),n.d(e,!1,function(){return $_}),n.d(e,!1,function(){return tx}),n.d(e,!1,function(){return ox}),n.d(e,!1,function(){return sx}),n.d(e,!1,function(){return cx}),n.d(e,!1,function(){return dx}),n.d(e,!1,function(){return mx}),n.d(e,!1,function(){return xx}),n.d(e,!1,function(){return Mx}),n.d(e,!1,function(){return Th}),n.d(e,!1,function(){return pu}),n.d(e,!1,function(){return Tx}),n.d(e,!1,function(){return gh}),n.d(e,!1,function(){return wy}),n.d(e,!1,function(){return zx}),n.d(e,!1,function(){return Ch.a}),n.d(e,!1,function(){return jx}),n.d(e,!1,function(){return Rx}),n.d(e,"e",function(){return Hx}),n.d(e,"f",function(){return qx}),n.d(e,!1,function(){return Vx}),n.d(e,!1,function(){return Ed}),n.d(e,!1,function(){return Wx}),n.d(e,!1,function(){return Hu}),n.d(e,!1,function(){return Yx}),n.d(e,!1,function(){return vh}),n.d(e,!1,function(){return Qx}),n.d(e,!1,function(){return Jx}),n.d(e,!1,function(){return $x}),n.d(e,!1,function(){return nw}),n.d(e,!1,function(){return sw}),n.d(e,!1,function(){return uw}),n.d(e,!1,function(){return cw}),n.d(e,!1,function(){return ew}),n.d(e,!1,function(){return wu}),n.d(e,!1,function(){return su}),n.d(e,!1,function(){return Md}),n.d(e,!1,function(){return pw}),n.d(e,!1,function(){return gw}),n.d(e,!1,function(){return xw}),n.d(e,!1,function(){return X_}),n.d(e,!1,function(){return cu}),n.d(e,!1,function(){return Rh}),n.d(e,!1,function(){return ww}),n.d(e,!1,function(){return Sw}),n.d(e,!1,function(){return Ew}),n.d(e,!1,function(){return Tw}),n.d(e,!1,function(){return Pw}),n.d(e,!1,function(){return Dw}),n.d(e,!1,function(){return jw}),n.d(e,!1,function(){return Yh}),n.d(e,!1,function(){return ef}),n.d(e,!1,function(){return qy}),n.d(e,!1,function(){return Fw}),n.d(e,!1,function(){return Fc}),n.d(e,!1,function(){return Hw}),n.d(e,!1,function(){return Vw}),n.d(e,!1,function(){return Yw}),n.d(e,!1,function(){return Kw}),n.d(e,!1,function(){return Jb}),n.d(e,!1,function(){return Gw}),n.d(e,!1,function(){return Zw}),n.d(e,!1,function(){return Jw}),n.d(e,!1,function(){return tM}),n.d(e,!1,function(){return nM}),n.d(e,!1,function(){return rM}),n.d(e,!1,function(){return sM}),n.d(e,!1,function(){return uM}),n.d(e,!1,function(){return Yf}),n.d(e,!1,function(){return lM}),n.d(e,!1,function(){return Ty}),n.d(e,!1,function(){return fM}),n.d(e,!1,function(){return pM}),n.d(e,!1,function(){return vM}),n.d(e,!1,function(){return gM}),n.d(e,!1,function(){return mM}),n.d(e,!1,function(){return bM}),n.d(e,!1,function(){return xM}),n.d(e,!1,function(){return OM}),n.d(e,!1,function(){return Ec}),n.d(e,!1,function(){return ly}),n.d(e,!1,function(){return CM}),n.d(e,!1,function(){return zM}),n.d(e,!1,function(){return IM}),n.d(e,!1,function(){return NM}),n.d(e,!1,function(){return FM}),n.d(e,!1,function(){return UM}),n.d(e,!1,function(){return XM}),n.d(e,!1,function(){return JM}),n.d(e,!1,function(){return tS}),n.d(e,!1,function(){return nS}),n.d(e,!1,function(){return _S}),n.d(e,!1,function(){return xS}),n.d(e,!1,function(){return wS}),n.d(e,!1,function(){return kS}),n.d(e,!1,function(){return OS}),n.d(e,!1,function(){return CS}),n.d(e,!1,function(){return PS}),n.d(e,"g",function(){return IS}),n.d(e,!1,function(){return LM}),n.d(e,!1,function(){return jS});n.d(e,!1,function(){return jm}),n.d(e,!1,function(){return RS}),n.d(e,!1,function(){return VS}),n.d(e,!1,function(){return HS}),n.d(e,!1,function(){return US}),n.d(e,!1,function(){return WS}),n.d(e,!1,function(){return ZS}),n.d(e,!1,function(){return rk}),n.d(e,!1,function(){return ck}),n.d(e,!1,function(){return hk}),n.d(e,!1,function(){return dk}),n.d(e,!1,function(){return vk}),n.d(e,!1,function(){return mk}),n.d(e,!1,function(){return yk}),n.d(e,!1,function(){return bk}),n.d(e,!1,function(){return _k}),n.d(e,!1,function(){return xk}),n.d(e,!1,function(){return Mk}),n.d(e,!1,function(){return Sk}),n.d(e,!1,function(){return Ok}),n.d(e,!1,function(){return Ck}),n.d(e,!1,function(){return Ak}),n.d(e,!1,function(){return Rk}),n.d(e,!1,function(){return Lk}),n.d(e,!1,function(){return Nk}),n.d(e,!1,function(){return Hk}),n.d(e,!1,function(){return Uk}),n.d(e,!1,function(){return Wk}),n.d(e,!1,function(){return Xk}),n.d(e,!1,function(){return Gk}),n.d(e,!1,function(){return Qk}),n.d(e,!1,function(){return iE}),n.d(e,!1,function(){return oE}),n.d(e,!1,function(){return aE}),n.d(e,!1,function(){return sE}),n.d(e,!1,function(){return uE}),n.d(e,!1,function(){return cE}),n.d(e,!1,function(){return hE}),n.d(e,!1,function(){return fE}),n.d(e,!1,function(){return pE}),n.d(e,!1,function(){return mE}),n.d(e,!1,function(){return bE}),n.d(e,!1,function(){return _E}),n.d(e,!1,function(){return tv}),n.d(e,!1,function(){return rw.a}),n.d(e,!1,function(){return xE}),n.d(e,!1,function(){return wE}),n.d(e,!1,function(){return ME}),n.d(e,!1,function(){return kE}),n.d(e,!1,function(){return EE}),n.d(e,!1,function(){return OE}),n.d(e,!1,function(){return TE}),n.d(e,!1,function(){return CE}),n.d(e,!1,function(){return zE}),n.d(e,!1,function(){return PE}),n.d(e,!1,function(){return AE}),n.d(e,!1,function(){return DE}),n.d(e,!1,function(){return ZE}),n.d(e,!1,function(){return VE}),n.d(e,!1,function(){return JE}),n.d(e,!1,function(){return $E}),n.d(e,!1,function(){return rO}),n.d(e,!1,function(){return EM}),n.d(e,!1,function(){return Au}),n.d(e,!1,function(){return Du}),n.d(e,!1,function(){return iO}),n.d(e,!1,function(){return aO}),n.d(e,!1,function(){return Ab}),n.d(e,!1,function(){return sO}),n.d(e,!1,function(){return Cu}),n.d(e,!1,function(){return gb}),n.d(e,!1,function(){return yb}),n.d(e,!1,function(){return uO}),n.d(e,!1,function(){return My}),n.d(e,!1,function(){return lO}),n.d(e,!1,function(){return td}),n.d(e,!1,function(){return hO}),n.d(e,!1,function(){return fO}),n.d(e,!1,function(){return gO}),n.d(e,!1,function(){return yO}),n.d(e,!1,function(){return _O}),n.d(e,!1,function(){return SO}),n.d(e,!1,function(){return kO}),n.d(e,!1,function(){return PO}),n.d(e,!1,function(){return LO}),n.d(e,!1,function(){return FO}),n.d(e,!1,function(){return HO}),n.d(e,!1,function(){return qO}),n.d(e,!1,function(){return VO}),n.d(e,!1,function(){return UO}),n.d(e,!1,function(){return YO}),n.d(e,!1,function(){return XO}),n.d(e,!1,function(){return GO}),n.d(e,!1,function(){return ZO}),n.d(e,!1,function(){return JO}),n.d(e,!1,function(){return $O}),n.d(e,!1,function(){return eT}),n.d(e,!1,function(){return ep}),n.d(e,!1,function(){return aO}),n.d(e,!1,function(){return aO}),n.d(e,!1,function(){return G_}),n.d(e,!1,function(){return nT}),n.d(e,!1,function(){return iT}),n.d(e,!1,function(){return Op}),n.d(e,!1,function(){return oT}),n.d(e,!1,function(){return sT}),n.d(e,!1,function(){return uT}),n.d(e,!1,function(){return Ig}),n.d(e,!1,function(){return Fc}),n.d(e,!1,function(){return OM}),n.d(e,!1,function(){return jS}),n.d(e,!1,function(){return cT}),n.d(e,!1,function(){return iO}),n.d(e,!1,function(){return aO}),n.d(e,!1,function(){return fT}),n.d(e,!1,function(){return pT}),n.d(e,!1,function(){return gT}),n.d(e,!1,function(){return yT}),n.d(e,!1,function(){return _T}),n.d(e,!1,function(){return xT}),n.d(e,!1,function(){return MT}),n.d(e,!1,function(){return QT})},wCVK:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=n("aOKN"),a=n("fcnB"),s=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){var r=t.length;return 0===r?new a.EmptyObservable:1===r?new o.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.length,i=t.subscriber;if(!i.closed){if(n>=r)return void i.complete();i.next(e[n]),t.index=n+1,this.schedule(t)}},e.prototype._subscribe=function(t){var n=this,r=n.arrayLike,i=n.scheduler,o=r.length;if(i)return i.schedule(e.dispatch,0,{arrayLike:r,index:0,length:o,subscriber:t});for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);t.complete()},e}(i.Observable);e.ArrayLikeObservable=s},wJYt:function(t,e,n){var r=n("CDXM");r(r.S,"Reflect",{ownKeys:n("NISB")})},wLW2:function(t,e,n){var r=n("CDXM"),i=n("5oDA");i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},wQte:function(t,e,n){"use strict";var r=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?void 0:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();e.MapPolyfill=r},wZOE:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("bKpL"),o=n("aOKN"),a=n("fcnB"),s=n("MicL"),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];s.isScheduler(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.ScalarObservable(t[0],r):new a.EmptyObservable(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.count,i=t.subscriber;if(n>=r)return void i.complete();i.next(e[n]),i.closed||(t.index=n+1,this.schedule(t))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.Observable);e.ArrayObservable=u},weQ6:function(t,e,n){"use strict";var r=n("CDXM"),i=n("rppw"),o=n("F6ce"),a="".endsWith;r(r.P+r.F*n("TmDx")("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},x0nE:function(t,e,n){var r=n("CDXM"),i=n("lpfi"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},xB6L:function(t,e,n){"use strict";var r=n("YymB"),i=n("w/BM"),o=n("lexG"),a=n("+GRi");t.exports=n("WsSm")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},xFbG:function(t,e,n){"use strict";function r(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}var i=n("NSJx"),o=n("H6Sg"),a=n("fclq"),s=n("RdI5"),u=n("XRvs"),c=n("Emqh"),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,l=n._parent,h=n._parents,f=n._unsubscribe,d=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=h?h.length:0;l;)l.remove(this),l=++p<v&&h[p]||null;if(a.isFunction(f)){var g=s.tryCatch(f).call(this);g===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(d))for(p=-1,v=d.length;++p<v;){var m=d[p];if(o.isObject(m)){var g=s.tryCatch(m.unsubscribe).call(m);if(g===u.errorObject){e=!0,t=t||[];var y=u.errorObject.e;y instanceof c.UnsubscriptionError?t=t.concat(r(y.errors)):t.push(y)}}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new t,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this,n=e._parent,r=e._parents;n&&n!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=l},xI8H:function(t,e,n){var r=n("c09d")("meta"),i=n("JXkd"),o=n("rMsi"),a=n("tose").f,s=0,u=Object.isExtensible||function(){return!0},c=!n("umMR")(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,r)&&l(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},xKl2:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("rlar"),o=n("bKpL"),a=n("T14+"),s=n("xFbG"),u=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.Subscription,t.add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=s.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return this.lift(new h(this))},e}(o.Observable);e.ConnectableObservable=u;var c=u.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.SubjectSubscriber),h=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new f(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),f=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},e}(a.Subscriber)},xLjm:function(t,e,n){"use strict";var r=n("CDXM"),i=n("OGmI");r(r.P+r.F*!n("bhtb")([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},xpf9:function(t,e,n){"use strict";var r=n("bKpL"),i=n("ueUM");r.Observable.prototype.catch=i._catch,r.Observable.prototype._catch=i._catch},xuTE:function(t,e,n){"use strict";var r=n("CDXM"),i=n("+GRi"),o=[].join;r(r.P+r.F*(n("Wo2w")!=Object||!n("bhtb")(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},xxX9:function(t,e,n){var r=n("tWtF"),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),l=r(t);return i<u?l*c(i/u/a)*u*a:(e=(1+a/o)*i,n=e-(e-i),n>s||n!=n?l*(1/0):l*n)}},"y/ue":function(t,e,n){var r=n("+GRi"),i=n("PNtC").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},y2Qv:function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n("CDXM"),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},y6Hp:function(t,e,n){var r=n("CDXM");r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},"yE/l":function(t,e,n){var r=n("CDXM");r(r.S,"Object",{create:n("51pc")})},yIWP:function(t,e,n){var r=n("Iclu")("keys"),i=n("c09d");t.exports=function(t){return r[t]||(r[t]=i(t))}},yJzT:function(t,e,n){n("b8HQ"),n("Rl2/"),n("dU6i"),n("Ps07"),t.exports=n("b4gG").Set},yR50:function(t,e,n){"use strict";var r=n("Fpv1"),i=n("HHMl");e.queue=new i.QueueScheduler(r.QueueAction)},yW9Z:function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n("T14+"),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i.Subscriber);e.OuterSubscriber=o},zbpw:function(t,e,n){n("by2N"),t.exports=n("b4gG").parseInt},zijX:function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=void 0!==t&&t,o=n||i||r;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,n("fRUx"))},zjx1:function(t,e,n){var r=n("CDXM"),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})}});